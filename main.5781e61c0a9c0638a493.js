(self.webpackChunkbinge_suggestions_app=self.webpackChunkbinge_suggestions_app||[]).push([[179],{8255:He=>{function Ee(B){return Promise.resolve().then(()=>{var d=new Error("Cannot find module '"+B+"'");throw d.code="MODULE_NOT_FOUND",d})}Ee.keys=()=>[],Ee.resolve=Ee,Ee.id=8255,He.exports=Ee},7716:(He,Ee,B)=>{"use strict";B.d(Ee,{deG:()=>ZC,tb:()=>vT,AFp:()=>mT,ip1:()=>fu,CZH:()=>pu,hGG:()=>kR,z2F:()=>im,sBO:()=>Ar,Sil:()=>Jg,_Vd:()=>Vh,EJc:()=>wT,SBq:()=>ms,qLn:()=>y,vpe:()=>Ko,gxx:()=>uc,tBr:()=>va,XFs:()=>Ye,OlP:()=>hn,zs3:()=>cn,ZZ4:()=>Sg,aQg:()=>$h,soG:()=>uv,YKP:()=>Ly,v3s:()=>EO,h0i:()=>Ka,PXZ:()=>OT,R0b:()=>ys,FiY:()=>Ms,Lbi:()=>yT,g9A:()=>_T,Qsj:()=>fw,FYo:()=>Hh,JOm:()=>Os,Tiy:()=>Tg,q3G:()=>En,tp0:()=>dr,EAV:()=>bR,Rgc:()=>Vc,dDg:()=>C1,DyG:()=>Po,q4F:()=>_w,GfV:()=>mw,s_b:()=>Vy,ifc:()=>Pe,eFA:()=>pv,G48:()=>I1,Gpc:()=>U,X6Q:()=>nm,_c5:()=>MR,VLi:()=>E1,c2e:()=>bT,zSh:()=>Fa,wAp:()=>it,vHH:()=>be,EiD:()=>Ju,mCW:()=>Ml,qzn:()=>Yu,JVY:()=>c_,pB0:()=>Da,eBb:()=>Zu,L6k:()=>yp,LAX:()=>so,cg1:()=>Cy,Tjo:()=>NR,kL8:()=>OD,yhl:()=>jo,dqk:()=>Jt,sIi:()=>ph,CqO:()=>Eh,QGY:()=>ng,F4k:()=>ly,RDi:()=>Om,AaK:()=>Q,z3N:()=>io,qOj:()=>mc,TTD:()=>kr,_Bn:()=>dw,xp6:()=>mE,uIk:()=>Qp,Tol:()=>my,DjV:()=>ew,ekj:()=>gy,Suo:()=>rT,Xpm:()=>Zr,lG2:()=>gd,Yz7:()=>Kt,cJS:()=>St,oAB:()=>fd,Yjl:()=>ll,Y36:()=>Dn,_UZ:()=>Hb,BQk:()=>Nc,ynx:()=>Bs,qZA:()=>wh,TgZ:()=>qa,EpF:()=>jb,n5z:()=>tp,Ikx:()=>xc,SDv:()=>iI,QtT:()=>Ni,pQV:()=>My,LFG:()=>sn,$8M:()=>Ym,NdJ:()=>rg,CRH:()=>o1,oxw:()=>Hr,ALo:()=>Zc,lcZ:()=>ev,Hsn:()=>uD,F$t:()=>mn,Q6J:()=>eg,s9C:()=>cy,MGl:()=>Yl,VKq:()=>t1,WLB:()=>Xy,kEZ:()=>Yc,iGM:()=>s1,MAs:()=>Ec,CHM:()=>Bf,LSH:()=>Yd,kYT:()=>pd,Udp:()=>zi,YNc:()=>Fb,W1O:()=>oT,_uU:()=>bD,Oqu:()=>Qb,hij:()=>kn,Gf:()=>nT});var d=B(9765),X=B(5319),G=B(7574),ye=B(6682),he=B(8819);function J(o){for(let a in o)if(o[a]===J)return a;throw Error("Could not find renamed property on target object.")}function re(o,a){for(const u in a)a.hasOwnProperty(u)&&!o.hasOwnProperty(u)&&(o[u]=a[u])}function Q(o){if("string"==typeof o)return o;if(Array.isArray(o))return"["+o.map(Q).join(", ")+"]";if(null==o)return""+o;if(o.overriddenName)return`${o.overriddenName}`;if(o.name)return`${o.name}`;const a=o.toString();if(null==a)return""+a;const u=a.indexOf("\n");return-1===u?a:a.substring(0,u)}function j(o,a){return null==o||""===o?null===a?"":a:null==a||""===a?o:o+" "+a}const L=J({__forward_ref__:J});function U(o){return o.__forward_ref__=U,o.toString=function(){return Q(this())},o}function $(o){return se(o)?o():o}function se(o){return"function"==typeof o&&o.hasOwnProperty(L)&&o.__forward_ref__===U}class be extends Error{constructor(a,u){super(function(o,a){return`${o?`NG0${o}: `:""}${a}`}(a,u)),this.code=a}}function pe(o){return"string"==typeof o?o:null==o?"":String(o)}function _e(o){return"function"==typeof o?o.name||o.toString():"object"==typeof o&&null!=o&&"function"==typeof o.type?o.type.name||o.type.toString():pe(o)}function Vt(o,a){const u=a?` in ${a}`:"";throw new be("201",`No provider for ${_e(o)} found${u}`)}function ot(o,a,u,h){throw new Error(`ASSERTION ERROR: ${o}`+(null==h?"":` [Expected=> ${u} ${h} ${a} <=Actual]`))}function Kt(o){return{token:o.token,providedIn:o.providedIn||null,factory:o.factory,value:void 0}}function St(o){return{providers:o.providers||[],imports:o.imports||[]}}function ur(o){return ts(o,zs)||ts(o,Ys)}function ts(o,a){return o.hasOwnProperty(a)?o[a]:null}function vo(o){return o&&(o.hasOwnProperty(bo)||o.hasOwnProperty(aa))?o[bo]:null}const zs=J({\u0275prov:J}),bo=J({\u0275inj:J}),Ys=J({ngInjectableDef:J}),aa=J({ngInjectorDef:J});var Ye=(()=>((Ye=Ye||{})[Ye.Default=0]="Default",Ye[Ye.Host=1]="Host",Ye[Ye.Self=2]="Self",Ye[Ye.SkipSelf=4]="SkipSelf",Ye[Ye.Optional=8]="Optional",Ye))();let Xn;function ki(o){const a=Xn;return Xn=o,a}function at(o,a,u){const h=ur(o);return h&&"root"==h.providedIn?void 0===h.value?h.value=h.factory():h.value:u&Ye.Optional?null:void 0!==a?a:void Vt(Q(o),"Injector")}function Ht(o){return{toString:o}.toString()}var xt=(()=>((xt=xt||{})[xt.OnPush=0]="OnPush",xt[xt.Default=1]="Default",xt))(),Pe=(()=>((Pe=Pe||{})[Pe.Emulated=0]="Emulated",Pe[Pe.None=2]="None",Pe[Pe.ShadowDom=3]="ShadowDom",Pe))();const rt="undefined"!=typeof globalThis&&globalThis,Oi="undefined"!=typeof window&&window,wo="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Es="undefined"!=typeof global&&global,Jt=rt||Es||Oi||wo,q={},W=[],Z=J({\u0275cmp:J}),De=J({\u0275dir:J}),ne=J({\u0275pipe:J}),$e=J({\u0275mod:J}),ft=J({\u0275loc:J}),kt=J({\u0275fac:J}),tn=J({__NG_ELEMENT_ID__:J});let dn=0;function Zr(o){return Ht(()=>{const u={},h={type:o.type,providersResolver:null,decls:o.decls,vars:o.vars,factory:null,template:o.template||null,consts:o.consts||null,ngContentSelectors:o.ngContentSelectors,hostBindings:o.hostBindings||null,hostVars:o.hostVars||0,hostAttrs:o.hostAttrs||null,contentQueries:o.contentQueries||null,declaredInputs:u,inputs:null,outputs:null,exportAs:o.exportAs||null,onPush:o.changeDetection===xt.OnPush,directiveDefs:null,pipeDefs:null,selectors:o.selectors||W,viewQuery:o.viewQuery||null,features:o.features||null,data:o.data||{},encapsulation:o.encapsulation||Pe.Emulated,id:"c",styles:o.styles||W,_:null,setInput:null,schemas:o.schemas||null,tView:null},f=o.directives,m=o.features,b=o.pipes;return h.id+=dn++,h.inputs=Sf(o.inputs,u),h.outputs=Sf(o.outputs),m&&m.forEach(C=>C(h)),h.directiveDefs=f?()=>("function"==typeof f?f():f).map(er):null,h.pipeDefs=b?()=>("function"==typeof b?b():b).map(mi):null,h})}function er(o){return cr(o)||function(o){return o[De]||null}(o)}function mi(o){return function(o){return o[ne]||null}(o)}const Eu={};function fd(o){return Ht(()=>{const a={type:o.type,bootstrap:o.bootstrap||W,declarations:o.declarations||W,imports:o.imports||W,exports:o.exports||W,transitiveCompileScopes:null,schemas:o.schemas||null,id:o.id||null};return null!=o.id&&(Eu[o.id]=o.type),a})}function pd(o,a){return Ht(()=>{const u=Fi(o,!0);u.declarations=a.declarations||W,u.imports=a.imports||W,u.exports=a.exports||W})}function Sf(o,a){if(null==o)return q;const u={};for(const h in o)if(o.hasOwnProperty(h)){let f=o[h],m=f;Array.isArray(f)&&(m=f[1],f=f[0]),u[f]=h,a&&(a[f]=m)}return u}const gd=Zr;function ll(o){return{type:o.type,name:o.name,factory:null,pure:!1!==o.pure,onDestroy:o.type.prototype.ngOnDestroy||null}}function cr(o){return o[Z]||null}function Fi(o,a){const u=o[$e]||null;if(!u&&!0===a)throw new Error(`Type ${Q(o)} does not have '\u0275mod' property.`);return u}function is(o){return Array.isArray(o)&&"object"==typeof o[1]}function Vi(o){return Array.isArray(o)&&!0===o[1]}function Su(o){return 0!=(8&o.flags)}function md(o){return 2==(2&o.flags)}function wr(o){return 1==(1&o.flags)}function Qr(o){return null!==o.template}function qn(o){return 0!=(512&o[2])}function Io(o,a){return o.hasOwnProperty(kt)?o[kt]:null}class km{constructor(a,u,h){this.previousValue=a,this.currentValue=u,this.firstChange=h}isFirstChange(){return this.firstChange}}function kr(){return To}function To(o){return o.type.prototype.ngOnChanges&&(o.setInput=Rf),e0}function e0(){const o=kf(this),a=null==o?void 0:o.current;if(a){const u=o.previous;if(u===q)o.previous=a;else for(let h in a)u[h]=a[h];o.current=null,this.ngOnChanges(a)}}function Rf(o,a,u,h){const f=kf(o)||function(o,a){return o[xf]=a}(o,{previous:q,current:null}),m=f.current||(f.current={}),b=f.previous,C=this.declaredInputs[u],I=b[C];m[C]=new km(I&&I.currentValue,a,b===q),o[h]=a}kr.ngInherit=!0;const xf="__ngSimpleChanges__";function kf(o){return o[xf]||null}let xu;function Om(o){xu=o}function Pm(){return void 0!==xu?xu:"undefined"!=typeof document?document:void 0}function an(o){return!!o.listen}const Qs={createRenderer:(o,a)=>Pm()};function ln(o){for(;Array.isArray(o);)o=o[0];return o}function fl(o,a){return ln(a[o])}function Or(o,a){return ln(a[o.index])}function wd(o,a){return o.data[a]}function No(o,a){return o[a]}function Jr(o,a){const u=a[o];return is(u)?u:u[0]}function Ff(o){return 4==(4&o[2])}function Vm(o){return 128==(128&o[2])}function ca(o,a){return null==a?null:o[a]}function Cd(o){o[18]=0}function gl(o,a){o[5]+=a;let u=o,h=o[3];for(;null!==h&&(1===a&&1===u[5]||-1===a&&0===u[5]);)h[5]+=a,u=h,h=h[3]}const lt={lFrame:Hm(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function Vf(){return lt.bindingsEnabled}function Ne(){return lt.lFrame.lView}function Nt(){return lt.lFrame.tView}function Bf(o){return lt.lFrame.contextLView=o,o[8]}function nn(){let o=Uf();for(;null!==o&&64===o.type;)o=o.parent;return o}function Uf(){return lt.lFrame.currentTNode}function Js(){const o=lt.lFrame,a=o.currentTNode;return o.isParent?a:a.parent}function Bi(o,a){const u=lt.lFrame;u.currentTNode=o,u.isParent=a}function Dd(){return lt.lFrame.isParent}function ml(){lt.lFrame.isParent=!1}function _l(){return lt.isInCheckNoChangesMode}function Id(o){lt.isInCheckNoChangesMode=o}function Pn(){const o=lt.lFrame;let a=o.bindingRootIndex;return-1===a&&(a=o.bindingRootIndex=o.tView.bindingStartIndex),a}function as(){return lt.lFrame.bindingIndex}function So(){return lt.lFrame.bindingIndex++}function vi(o){const a=lt.lFrame,u=a.bindingIndex;return a.bindingIndex=a.bindingIndex+o,u}function Td(o){lt.lFrame.inI18n=o}function Bm(o,a){const u=lt.lFrame;u.bindingIndex=u.bindingRootIndex=o,$f(a)}function $f(o){lt.lFrame.currentDirectiveIndex=o}function Um(){return lt.lFrame.currentQueryIndex}function Pu(o){lt.lFrame.currentQueryIndex=o}function Gf(o){const a=o[1];return 2===a.type?a.declTNode:1===a.type?o[6]:null}function Nd(o,a,u){if(u&Ye.SkipSelf){let f=a,m=o;for(;!(f=f.parent,null!==f||u&Ye.Host||(f=Gf(m),null===f||(m=m[15],10&f.type))););if(null===f)return!1;a=f,o=m}const h=lt.lFrame=ha();return h.currentTNode=a,h.lView=o,!0}function Sd(o){const a=ha(),u=o[1];lt.lFrame=a,a.currentTNode=u.firstChild,a.lView=o,a.tView=u,a.contextLView=o,a.bindingIndex=u.bindingStartIndex,a.inI18n=!1}function ha(){const o=lt.lFrame,a=null===o?null:o.child;return null===a?Hm(o):a}function Hm(o){const a={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:o,child:null,inI18n:!1};return null!==o&&(o.child=a),a}function jm(){const o=lt.lFrame;return lt.lFrame=o.parent,o.currentTNode=null,o.lView=null,o}const a0=jm;function Fu(){const o=jm();o.isParent=!0,o.tView=null,o.selectedIndex=-1,o.contextLView=null,o.elementDepthCount=0,o.currentDirectiveIndex=-1,o.currentNamespace=null,o.bindingRootIndex=-1,o.bindingIndex=-1,o.currentQueryIndex=0}function Pr(){return lt.lFrame.selectedIndex}function yl(o){lt.lFrame.selectedIndex=o}function Fn(){const o=lt.lFrame;return wd(o.tView,o.selectedIndex)}function vl(o,a){for(let u=a.directiveStart,h=a.directiveEnd;u<h;u++){const m=o.data[u].type.prototype,{ngAfterContentInit:b,ngAfterContentChecked:C,ngAfterViewInit:I,ngAfterViewChecked:N,ngOnDestroy:M}=m;b&&(o.contentHooks||(o.contentHooks=[])).push(-u,b),C&&((o.contentHooks||(o.contentHooks=[])).push(u,C),(o.contentCheckHooks||(o.contentCheckHooks=[])).push(u,C)),I&&(o.viewHooks||(o.viewHooks=[])).push(-u,I),N&&((o.viewHooks||(o.viewHooks=[])).push(u,N),(o.viewCheckHooks||(o.viewCheckHooks=[])).push(u,N)),null!=M&&(o.destroyHooks||(o.destroyHooks=[])).push(u,M)}}function bl(o,a,u){$m(o,a,3,u)}function Ad(o,a,u,h){(3&o[2])===u&&$m(o,a,u,h)}function qf(o,a){let u=o[2];(3&u)===a&&(u&=2047,u+=1,o[2]=u)}function $m(o,a,u,h){const m=null!=h?h:-1,b=a.length-1;let C=0;for(let I=void 0!==h?65535&o[18]:0;I<b;I++)if("number"==typeof a[I+1]){if(C=a[I],null!=h&&C>=h)break}else a[I]<0&&(o[18]+=65536),(C<m||-1==m)&&(zf(o,u,a,I),o[18]=(4294901760&o[18])+I+2),I++}function zf(o,a,u,h){const f=u[h]<0,m=u[h+1],C=o[f?-u[h]:u[h]];if(f){if(o[2]>>11<o[18]>>16&&(3&o[2])===a){o[2]+=2048;try{m.call(C)}finally{}}}else try{m.call(C)}finally{}}class Md{constructor(a,u,h){this.factory=a,this.resolving=!1,this.canSeeViewProviders=u,this.injectImpl=h}}function Ts(o,a,u){const h=an(o);let f=0;for(;f<u.length;){const m=u[f];if("number"==typeof m){if(0!==m)break;f++;const b=u[f++],C=u[f++],I=u[f++];h?o.setAttribute(a,C,I,b):a.setAttributeNS(b,C,I)}else{const b=m,C=u[++f];Ns(b)?h&&o.setProperty(a,b,C):h?o.setAttribute(a,b,C):a.setAttribute(b,C),f++}}return f}function Wm(o){return 3===o||4===o||6===o}function Ns(o){return 64===o.charCodeAt(0)}function Ao(o,a){if(null!==a&&0!==a.length)if(null===o||0===o.length)o=a.slice();else{let u=-1;for(let h=0;h<a.length;h++){const f=a[h];"number"==typeof f?u=f:0===u||qm(o,u,f,null,-1===u||2===u?a[++h]:null)}}return o}function qm(o,a,u,h,f){let m=0,b=o.length;if(-1===a)b=-1;else for(;m<o.length;){const C=o[m++];if("number"==typeof C){if(C===a){b=-1;break}if(C>a){b=m-1;break}}}for(;m<o.length;){const C=o[m];if("number"==typeof C)break;if(C===u){if(null===h)return void(null!==f&&(o[m+1]=f));if(h===o[m+1])return void(o[m+2]=f)}m++,null!==h&&m++,null!==f&&m++}-1!==b&&(o.splice(b,0,a),m=b+1),o.splice(m++,0,u),null!==h&&o.splice(m++,0,h),null!==f&&o.splice(m++,0,f)}function Cn(o){return-1!==o}function fa(o){return 32767&o}function Vu(o,a){let u=function(o){return o>>16}(o),h=a;for(;u>0;)h=h[15],u--;return h}let Rd=!0;function xd(o){const a=Rd;return Rd=o,a}let Jf=0;function eo(o,a){const u=un(o,a);if(-1!==u)return u;const h=a[1];h.firstCreatePass&&(o.injectorIndex=a.length,Bu(h.data,o),Bu(a,null),Bu(h.blueprint,null));const f=We(o,a),m=o.injectorIndex;if(Cn(f)){const b=fa(f),C=Vu(f,a),I=C[1].data;for(let N=0;N<8;N++)a[m+N]=C[b+N]|I[b+N]}return a[m+8]=f,m}function Bu(o,a){o.push(0,0,0,0,0,0,0,0,a)}function un(o,a){return-1===o.injectorIndex||o.parent&&o.parent.injectorIndex===o.injectorIndex||null===a[o.injectorIndex+8]?-1:o.injectorIndex}function We(o,a){if(o.parent&&-1!==o.parent.injectorIndex)return o.parent.injectorIndex;let u=0,h=null,f=a;for(;null!==f;){const m=f[1],b=m.type;if(h=2===b?m.declTNode:1===b?f[6]:null,null===h)return-1;if(u++,f=f[15],-1!==h.injectorIndex)return h.injectorIndex|u<<16}return-1}function qt(o,a,u){!function(o,a,u){let h;"string"==typeof u?h=u.charCodeAt(0)||0:u.hasOwnProperty(tn)&&(h=u[tn]),null==h&&(h=u[tn]=Jf++);const f=255&h;a.data[o+(f>>5)]|=1<<f}(o,a,u)}function Ln(o,a,u){if(u&Ye.Optional)return o;Vt(a,"NodeInjector")}function pa(o,a,u,h){if(u&Ye.Optional&&void 0===h&&(h=null),0==(u&(Ye.Self|Ye.Host))){const f=o[9],m=ki(void 0);try{return f?f.get(a,h,u&Ye.Optional):at(a,h,u&Ye.Optional)}finally{ki(m)}}return Ln(h,a,u)}function Mo(o,a,u,h=Ye.Default,f){if(null!==o){const m=function(o){if("string"==typeof o)return o.charCodeAt(0)||0;const a=o.hasOwnProperty(tn)?o[tn]:void 0;return"number"==typeof a?a>=0?255&a:Xf:a}(u);if("function"==typeof m){if(!Nd(a,o,h))return h&Ye.Host?Ln(f,u,h):pa(a,u,h,f);try{const b=m(h);if(null!=b||h&Ye.Optional)return b;Vt(u)}finally{a0()}}else if("number"==typeof m){let b=null,C=un(o,a),I=-1,N=h&Ye.Host?a[16][6]:null;for((-1===C||h&Ye.SkipSelf)&&(I=-1===C?We(o,a):a[C+8],-1!==I&&Uu(h,!1)?(b=a[1],C=fa(I),a=Vu(I,a)):C=-1);-1!==C;){const M=a[1];if(Od(m,C,M.data)){const k=zC(C,a,u,b,h,N);if(k!==Cr)return k}I=a[C+8],-1!==I&&Uu(h,a[1].data[C+8]===N)&&Od(m,C,a)?(b=M,C=fa(I),a=Vu(I,a)):C=-1}}}return pa(a,u,h,f)}const Cr={};function Xf(){return new xo(nn(),Ne())}function zC(o,a,u,h,f,m){const b=a[1],C=b.data[o+8],M=Ro(C,b,u,null==h?md(C)&&Rd:h!=b&&0!=(3&C.type),f&Ye.Host&&m===C);return null!==M?An(a,b,M,C):Cr}function Ro(o,a,u,h,f){const m=o.providerIndexes,b=a.data,C=1048575&m,I=o.directiveStart,M=m>>20,P=f?C+M:o.directiveEnd;for(let H=h?C:C+M;H<P;H++){const Y=b[H];if(H<I&&u===Y||H>=I&&Y.type===u)return H}if(f){const H=b[I];if(H&&Qr(H)&&H.type===u)return I}return null}function An(o,a,u,h){let f=o[u];const m=a.data;if(function(o){return o instanceof Md}(f)){const b=f;b.resolving&&function(o,a){throw new be("200",`Circular dependency in DI detected for ${o}`)}(_e(m[u]));const C=xd(b.canSeeViewProviders);b.resolving=!0;const I=b.injectImpl?ki(b.injectImpl):null;Nd(o,h,Ye.Default);try{f=o[u]=b.factory(void 0,m,o,h),a.firstCreatePass&&u>=h.directiveStart&&function(o,a,u){const{ngOnChanges:h,ngOnInit:f,ngDoCheck:m}=a.type.prototype;if(h){const b=To(a);(u.preOrderHooks||(u.preOrderHooks=[])).push(o,b),(u.preOrderCheckHooks||(u.preOrderCheckHooks=[])).push(o,b)}f&&(u.preOrderHooks||(u.preOrderHooks=[])).push(0-o,f),m&&((u.preOrderHooks||(u.preOrderHooks=[])).push(o,m),(u.preOrderCheckHooks||(u.preOrderCheckHooks=[])).push(o,m))}(u,m[u],a)}finally{null!==I&&ki(I),xd(C),b.resolving=!1,a0()}}return f}function Od(o,a,u){return!!(u[a+(o>>5)]&1<<o)}function Uu(o,a){return!(o&Ye.Self||o&Ye.Host&&a)}class xo{constructor(a,u){this._tNode=a,this._lView=u}get(a,u){return Mo(this._tNode,this._lView,a,void 0,u)}}function tp(o){return Ht(()=>{const a=o.prototype.constructor,u=a[kt]||Pd(a),h=Object.prototype;let f=Object.getPrototypeOf(o.prototype).constructor;for(;f&&f!==h;){const m=f[kt]||Pd(f);if(m&&m!==u)return m;f=Object.getPrototypeOf(f)}return m=>new m})}function Pd(o){return se(o)?()=>{const a=Pd($(o));return a&&a()}:Io(o)}function Ym(o){return function(o,a){if("class"===a)return o.classes;if("style"===a)return o.styles;const u=o.attrs;if(u){const h=u.length;let f=0;for(;f<h;){const m=u[f];if(Wm(m))break;if(0===m)f+=2;else if("number"==typeof m)for(f++;f<h&&"string"==typeof u[f];)f++;else{if(m===a)return u[f+1];f+=2}}}return null}(nn(),o)}const Ui="__parameters__";function Ss(o,a,u){return Ht(()=>{const h=function(o){return function(...u){if(o){const h=o(...u);for(const f in h)this[f]=h[f]}}}(a);function f(...m){if(this instanceof f)return h.apply(this,m),this;const b=new f(...m);return C.annotation=b,C;function C(I,N,M){const k=I.hasOwnProperty(Ui)?I[Ui]:Object.defineProperty(I,Ui,{value:[]})[Ui];for(;k.length<=M;)k.push(null);return(k[M]=k[M]||[]).push(b),I}}return u&&(f.prototype=Object.create(u.prototype)),f.prototype.ngMetadataName=o,f.annotationCls=f,f})}class hn{constructor(a,u){this._desc=a,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof u?this.__NG_ELEMENT_ID__=u:void 0!==u&&(this.\u0275prov=Kt({token:this,providedIn:u.providedIn||"root",factory:u.factory}))}toString(){return`InjectionToken ${this._desc}`}}const ZC=new hn("AnalyzeForEntryComponents"),Po=Function;function ji(o,a){void 0===a&&(a=o);for(let u=0;u<o.length;u++){let h=o[u];Array.isArray(h)?(a===o&&(a=o.slice(0,u)),ji(h,a)):a!==o&&a.push(h)}return a}function As(o,a){o.forEach(u=>Array.isArray(u)?As(u,a):a(u))}function ma(o,a,u){a>=o.length?o.push(u):o.splice(a,0,u)}function Fo(o,a){return a>=o.length-1?o.pop():o.splice(a,1)[0]}function Lo(o,a){const u=[];for(let h=0;h<o;h++)u.push(a);return u}function Rn(o,a,u){let h=Vo(o,a);return h>=0?o[1|h]=u:(h=~h,function(o,a,u,h){let f=o.length;if(f==a)o.push(u,h);else if(1===f)o.push(h,o[0]),o[0]=u;else{for(f--,o.push(o[f-1],o[f]);f>a;)o[f]=o[f-2],f--;o[a]=u,o[a+1]=h}}(o,h,a,u)),h}function Yn(o,a){const u=Vo(o,a);if(u>=0)return o[1|u]}function Vo(o,a){return function(o,a,u){let h=0,f=o.length>>u;for(;f!==h;){const m=h+(f-h>>1),b=o[m<<u];if(a===b)return m<<u;b>a?f=m:h=m+1}return~(f<<u)}(o,a,1)}const Hu={},up="__NG_DI_FLAG__",Bo="ngTempTokenPath",n_=/\n/gm,dp="__source",Il=J({provide:String,useValue:J});let Uo;function _t(o){const a=Uo;return Uo=o,a}function hp(o,a=Ye.Default){if(void 0===Uo)throw new Error("inject() must be called from an injection context");return null===Uo?at(o,void 0,a):Uo.get(o,a&Ye.Optional?null:void 0,a)}function sn(o,a=Ye.Default){return(Xn||hp)($(o),a)}function Ho(o){const a=[];for(let u=0;u<o.length;u++){const h=$(o[u]);if(Array.isArray(h)){if(0===h.length)throw new Error("Arguments array must have arguments.");let f,m=Ye.Default;for(let b=0;b<h.length;b++){const C=h[b],I=i_(C);"number"==typeof I?-1===I?f=C.token:m|=I:f=C}a.push(sn(f,m))}else a.push(sn(h))}return a}function ju(o,a){return o[up]=a,o.prototype[up]=a,o}function i_(o){return o[up]}function bi(o,a,u,h){const f=o[Bo];throw a[dp]&&f.unshift(a[dp]),o.message=function(o,a,u,h=null){o=o&&"\n"===o.charAt(0)&&"\u0275"==o.charAt(1)?o.substr(2):o;let f=Q(a);if(Array.isArray(a))f=a.map(Q).join(" -> ");else if("object"==typeof a){let m=[];for(let b in a)if(a.hasOwnProperty(b)){let C=a[b];m.push(b+":"+("string"==typeof C?JSON.stringify(C):Q(C)))}f=`{${m.join(", ")}}`}return`${u}${h?"("+h+")":""}[${f}]: ${o.replace(n_,"\n  ")}`}("\n"+o.message,f,u,h),o.ngTokenPath=f,o[Bo]=null,o}const va=ju(Ss("Inject",o=>({token:o})),-1),Ms=ju(Ss("Optional"),8),dr=ju(Ss("SkipSelf"),4);let Sl;function no(o){var a;return(null===(a=function(){if(void 0===Sl&&(Sl=null,Jt.trustedTypes))try{Sl=Jt.trustedTypes.createPolicy("angular",{createHTML:o=>o,createScript:o=>o,createScriptURL:o=>o})}catch(o){}return Sl}())||void 0===a?void 0:a.createHTML(o))||o}class ro{constructor(a){this.changingThisBreaksApplicationSecurity=a}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class b0 extends ro{getTypeName(){return"HTML"}}class w0 extends ro{getTypeName(){return"Style"}}class $d extends ro{getTypeName(){return"Script"}}class C0 extends ro{getTypeName(){return"URL"}}class E0 extends ro{getTypeName(){return"ResourceURL"}}function io(o){return o instanceof ro?o.changingThisBreaksApplicationSecurity:o}function Yu(o,a){const u=jo(o);if(null!=u&&u!==a){if("ResourceURL"===u&&"URL"===a)return!0;throw new Error(`Required a safe ${a}, got a ${u} (see https://g.co/ng/security#xss)`)}return u===a}function jo(o){return o instanceof ro&&o.getTypeName()||null}function c_(o){return new b0(o)}function yp(o){return new w0(o)}function Zu(o){return new $d(o)}function so(o){return new C0(o)}function Da(o){return new E0(o)}function vp(o){const a=new bp(o);return function(){try{return!!(new window.DOMParser).parseFromString(no(""),"text/html")}catch(o){return!1}}()?new d_(a):a}class d_{constructor(a){this.inertDocumentHelper=a}getInertBodyElement(a){a="<body><remove></remove>"+a;try{const u=(new window.DOMParser).parseFromString(no(a),"text/html").body;return null===u?this.inertDocumentHelper.getInertBodyElement(a):(u.removeChild(u.firstChild),u)}catch(u){return null}}}class bp{constructor(a){if(this.defaultDoc=a,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const u=this.inertDocument.createElement("html");this.inertDocument.appendChild(u);const h=this.inertDocument.createElement("body");u.appendChild(h)}}getInertBodyElement(a){const u=this.inertDocument.createElement("template");if("content"in u)return u.innerHTML=no(a),u;const h=this.inertDocument.createElement("body");return h.innerHTML=no(a),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(h),h}stripCustomNsAttrs(a){const u=a.attributes;for(let f=u.length-1;0<f;f--){const b=u.item(f).name;("xmlns:ns1"===b||0===b.indexOf("ns1:"))&&a.removeAttribute(b)}let h=a.firstChild;for(;h;)h.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(h),h=h.nextSibling}}const h_=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,Gd=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function Ml(o){return(o=String(o)).match(h_)||o.match(Gd)?o:"unsafe:"+o}function Wd(o){return(o=String(o)).split(",").map(a=>Ml(a.trim())).join(", ")}function cs(o){const a={};for(const u of o.split(","))a[u]=!0;return a}function Ia(...o){const a={};for(const u of o)for(const h in u)u.hasOwnProperty(h)&&(a[h]=!0);return a}const Ku=cs("area,br,col,hr,img,wbr"),qd=cs("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Qu=cs("rp,rt"),wp=Ia(Ku,Ia(qd,cs("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Ia(Qu,cs("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Ia(Qu,qd)),Rl=cs("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Rs=cs("srcset"),Cp=Ia(Rl,Rs,cs("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),cs("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),__=cs("script,style,template");class Ep{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(a){let u=a.firstChild,h=!0;for(;u;)if(u.nodeType===Node.ELEMENT_NODE?h=this.startElement(u):u.nodeType===Node.TEXT_NODE?this.chars(u.nodeValue):this.sanitizedSomething=!0,h&&u.firstChild)u=u.firstChild;else for(;u;){u.nodeType===Node.ELEMENT_NODE&&this.endElement(u);let f=this.checkClobberedElement(u,u.nextSibling);if(f){u=f;break}u=this.checkClobberedElement(u,u.parentNode)}return this.buf.join("")}startElement(a){const u=a.nodeName.toLowerCase();if(!wp.hasOwnProperty(u))return this.sanitizedSomething=!0,!__.hasOwnProperty(u);this.buf.push("<"),this.buf.push(u);const h=a.attributes;for(let f=0;f<h.length;f++){const m=h.item(f),b=m.name,C=b.toLowerCase();if(!Cp.hasOwnProperty(C)){this.sanitizedSomething=!0;continue}let I=m.value;Rl[C]&&(I=Ml(I)),Rs[C]&&(I=Wd(I)),this.buf.push(" ",b,'="',y_(I),'"')}return this.buf.push(">"),!0}endElement(a){const u=a.nodeName.toLowerCase();wp.hasOwnProperty(u)&&!Ku.hasOwnProperty(u)&&(this.buf.push("</"),this.buf.push(u),this.buf.push(">"))}chars(a){this.buf.push(y_(a))}checkClobberedElement(a,u){if(u&&(a.compareDocumentPosition(u)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${a.outerHTML}`);return u}}const T0=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,N0=/([^\#-~ |!])/g;function y_(o){return o.replace(/&/g,"&amp;").replace(T0,function(a){return"&#"+(1024*(a.charCodeAt(0)-55296)+(a.charCodeAt(1)-56320)+65536)+";"}).replace(N0,function(a){return"&#"+a.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let $o;function Ju(o,a){let u=null;try{$o=$o||vp(o);let h=a?String(a):"";u=$o.getInertBodyElement(h);let f=5,m=h;do{if(0===f)throw new Error("Failed to sanitize html because the input is unstable");f--,h=m,m=u.innerHTML,u=$o.getInertBodyElement(h)}while(h!==m);return no((new Ep).sanitizeChildren(zd(u)||u))}finally{if(u){const h=zd(u)||u;for(;h.firstChild;)h.removeChild(h.firstChild)}}}function zd(o){return"content"in o&&function(o){return o.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===o.nodeName}(o)?o.content:null}var En=(()=>((En=En||{})[En.NONE=0]="NONE",En[En.HTML=1]="HTML",En[En.STYLE=2]="STYLE",En[En.SCRIPT=3]="SCRIPT",En[En.URL=4]="URL",En[En.RESOURCE_URL=5]="RESOURCE_URL",En))();function Yd(o){const a=function(){const o=Ne();return o&&o[12]}();return a?a.sanitize(En.URL,o)||"":Yu(o,"URL")?io(o):Ml(pe(o))}const Ta="__ngContext__";function fr(o,a){o[Ta]=a}function Qd(o){const a=function(o){return o[Ta]||null}(o);return a?Array.isArray(a)?a:a.lView:null}function Aa(o){return o.ngOriginalError}function E(o,...a){o.error(...a)}class y{constructor(){this._console=console}handleError(a){const u=this._findOriginalError(a),h=this._findContext(a),f=(o=a)&&o.ngErrorLogger||E;var o;f(this._console,"ERROR",a),u&&f(this._console,"ORIGINAL ERROR",u),h&&f(this._console,"ERROR CONTEXT",h)}_findContext(a){return a?a.ngDebugContext||this._findContext(Aa(a)):null}_findOriginalError(a){let u=a&&Aa(a);for(;u&&Aa(u);)u=Aa(u);return u||null}}const R=/^>|^->|<!--|-->|--!>|<!-$/g,O=/(<|>)/;const tc=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Jt))();function $i(o){return o instanceof Function?o():o}var Os=(()=>((Os=Os||{})[Os.Important=1]="Important",Os[Os.DashCase=2]="DashCase",Os))();let nc;function nh(o,a){return nc(o,a)}function Mp(o){const a=o[3];return Vi(a)?a[3]:a}function I_(o){return O0(o[13])}function nE(o){return O0(o[4])}function O0(o){for(;null!==o&&!Vi(o);)o=o[4];return o}function rc(o,a,u,h,f){if(null!=h){let m,b=!1;Vi(h)?m=h:is(h)&&(b=!0,h=h[0]);const C=ln(h);0===o&&null!==u?null==f?aE(a,u,C):Fl(a,u,C,f||null,!0):1===o&&null!==u?Fl(a,u,C,f||null,!0):2===o?U0(a,C,b):3===o&&a.destroyNode(C),null!=m&&function(o,a,u,h,f){const m=u[7];m!==ln(u)&&rc(a,o,h,m,f);for(let C=10;C<u.length;C++){const I=u[C];sc(I[1],I,o,a,h,m)}}(a,o,m,u,f)}}function T_(o,a){return an(o)?o.createText(a):o.createTextNode(a)}function rE(o,a,u){an(o)?o.setValue(a,u):a.textContent=u}function wS(o,a){return o.createComment(function(o){return o.replace(R,a=>a.replace(O,"\u200b$1\u200b"))}(a))}function P0(o,a,u){return an(o)?o.createElement(a,u):null===u?o.createElement(a):o.createElementNS(u,a)}function N_(o,a){const u=o[9],h=u.indexOf(a),f=a[3];1024&a[2]&&(a[2]&=-1025,gl(f,-1)),u.splice(h,1)}function S_(o,a){if(o.length<=10)return;const u=10+a,h=o[u];if(h){const f=h[17];null!==f&&f!==o&&N_(f,h),a>0&&(o[u-1][4]=h[4]);const m=Fo(o,10+a);!function(o,a){sc(o,a,a[11],2,null,null),a[0]=null,a[6]=null}(h[1],h);const b=m[19];null!==b&&b.detachView(m[1]),h[3]=null,h[4]=null,h[2]&=-129}return h}function iE(o,a){if(!(256&a[2])){const u=a[11];an(u)&&u.destroyNode&&sc(o,a,u,3,null,null),function(o){let a=o[13];if(!a)return Pl(o[1],o);for(;a;){let u=null;if(is(a))u=a[13];else{const h=a[10];h&&(u=h)}if(!u){for(;a&&!a[4]&&a!==o;)is(a)&&Pl(a[1],a),a=a[3];null===a&&(a=o),is(a)&&Pl(a[1],a),u=a&&a[4]}a=u}}(a)}}function Pl(o,a){if(!(256&a[2])){a[2]&=-129,a[2]|=256,function(o,a){let u;if(null!=o&&null!=(u=o.destroyHooks))for(let h=0;h<u.length;h+=2){const f=a[u[h]];if(!(f instanceof Md)){const m=u[h+1];if(Array.isArray(m))for(let b=0;b<m.length;b+=2){const C=f[m[b]],I=m[b+1];try{I.call(C)}finally{}}else try{m.call(f)}finally{}}}}(o,a),function(o,a){const u=o.cleanup,h=a[7];let f=-1;if(null!==u)for(let m=0;m<u.length-1;m+=2)if("string"==typeof u[m]){const b=u[m+1],C="function"==typeof b?b(a):ln(a[b]),I=h[f=u[m+2]],N=u[m+3];"boolean"==typeof N?C.removeEventListener(u[m],I,N):N>=0?h[f=N]():h[f=-N].unsubscribe(),m+=2}else{const b=h[f=u[m+1]];u[m].call(b)}if(null!==h){for(let m=f+1;m<h.length;m++)h[m]();a[7]=null}}(o,a),1===a[1].type&&an(a[11])&&a[11].destroy();const u=a[17];if(null!==u&&Vi(a[3])){u!==a[3]&&N_(u,a);const h=a[19];null!==h&&h.detachView(o)}}}function sE(o,a,u){return oE(o,a.parent,u)}function oE(o,a,u){let h=a;for(;null!==h&&40&h.type;)h=(a=h).parent;if(null===h)return u[0];if(2&h.flags){const f=o.data[h.directiveStart].encapsulation;if(f===Pe.None||f===Pe.Emulated)return null}return Or(h,u)}function Fl(o,a,u,h,f){an(o)?o.insertBefore(a,u,h,f):a.insertBefore(u,h,f)}function aE(o,a,u){an(o)?o.appendChild(a,u):a.appendChild(u)}function lE(o,a,u,h,f){null!==h?Fl(o,a,u,h,f):aE(o,a,u)}function A_(o,a){return an(o)?o.parentNode(a):a.parentNode}function R_(o,a,u){return ic(o,a,u)}function x_(o,a,u){return 40&o.type?Or(o,u):null}let L0,ic=x_;function uE(o,a){ic=o,L0=a}function Rp(o,a,u,h){const f=sE(o,h,a),m=a[11],C=R_(h.parent||a[6],h,a);if(null!=f)if(Array.isArray(u))for(let I=0;I<u.length;I++)lE(m,f,u[I],C,!1);else lE(m,f,u,C,!1);void 0!==L0&&L0(m,h,a,u,f)}function k_(o,a){if(null!==a){const u=a.type;if(3&u)return Or(a,o);if(4&u)return B0(-1,o[a.index]);if(8&u){const h=a.child;if(null!==h)return k_(o,h);{const f=o[a.index];return Vi(f)?B0(-1,f):ln(f)}}if(32&u)return nh(a,o)()||ln(o[a.index]);{const h=V0(o,a);return null!==h?Array.isArray(h)?h[0]:k_(Mp(o[16]),h):k_(o,a.next)}}return null}function V0(o,a){return null!==a?o[16][6].projection[a.projection]:null}function B0(o,a){const u=10+o+1;if(u<a.length){const h=a[u],f=h[1].firstChild;if(null!==f)return k_(h,f)}return a[7]}function U0(o,a,u){const h=A_(o,a);h&&function(o,a,u,h){an(o)?o.removeChild(a,u,h):a.removeChild(u)}(o,h,a,u)}function O_(o,a,u,h,f,m,b){for(;null!=u;){const C=h[u.index],I=u.type;if(b&&0===a&&(C&&fr(ln(C),h),u.flags|=4),64!=(64&u.flags))if(8&I)O_(o,a,u.child,h,f,m,!1),rc(a,o,f,C,m);else if(32&I){const N=nh(u,h);let M;for(;M=N();)rc(a,o,f,M,m);rc(a,o,f,C,m)}else 16&I?Ll(o,a,h,u,f,m):rc(a,o,f,C,m);u=b?u.projectionNext:u.next}}function sc(o,a,u,h,f,m){O_(u,h,o.firstChild,a,f,m,!1)}function Ll(o,a,u,h,f,m){const b=u[16],I=b[6].projection[h.projection];if(Array.isArray(I))for(let N=0;N<I.length;N++)rc(a,o,f,I[N],m);else O_(o,a,I,b[3],f,m,!0)}function dE(o,a,u){an(o)?o.setAttribute(a,"style",u):a.style.cssText=u}function H0(o,a,u){an(o)?""===u?o.removeAttribute(a,"class"):o.setAttribute(a,"class",u):a.className=u}function j0(o,a,u){let h=o.length;for(;;){const f=o.indexOf(a,u);if(-1===f)return f;if(0===f||o.charCodeAt(f-1)<=32){const m=a.length;if(f+m===h||o.charCodeAt(f+m)<=32)return f}u=f+1}}const hE="ng-template";function MS(o,a,u){let h=0;for(;h<o.length;){let f=o[h++];if(u&&"class"===f){if(f=o[h],-1!==j0(f.toLowerCase(),a,0))return!0}else if(1===f){for(;h<o.length&&"string"==typeof(f=o[h++]);)if(f.toLowerCase()===a)return!0;return!1}}return!1}function $0(o){return 4===o.type&&o.value!==hE}function RS(o,a,u){return a===(4!==o.type||u?o.value:hE)}function xS(o,a,u){let h=4;const f=o.attrs||[],m=function(o){for(let a=0;a<o.length;a++)if(Wm(o[a]))return a;return o.length}(f);let b=!1;for(let C=0;C<a.length;C++){const I=a[C];if("number"!=typeof I){if(!b)if(4&h){if(h=2|1&h,""!==I&&!RS(o,I,u)||""===I&&1===a.length){if(ao(h))return!1;b=!0}}else{const N=8&h?I:a[++C];if(8&h&&null!==o.attrs){if(!MS(o.attrs,N,u)){if(ao(h))return!1;b=!0}continue}const k=G0(8&h?"class":I,f,$0(o),u);if(-1===k){if(ao(h))return!1;b=!0;continue}if(""!==N){let P;P=k>m?"":f[k+1].toLowerCase();const H=8&h?P:null;if(H&&-1!==j0(H,N,0)||2&h&&N!==P){if(ao(h))return!1;b=!0}}}}else{if(!b&&!ao(h)&&!ao(I))return!1;if(b&&ao(I))continue;b=!1,h=I|1&h}}return ao(h)||b}function ao(o){return 0==(1&o)}function G0(o,a,u,h){if(null===a)return-1;let f=0;if(h||!u){let m=!1;for(;f<a.length;){const b=a[f];if(b===o)return f;if(3===b||6===b)m=!0;else{if(1===b||2===b){let C=a[++f];for(;"string"==typeof C;)C=a[++f];continue}if(4===b)break;if(0===b){f+=4;continue}}f+=m?1:2}return-1}return function(o,a){let u=o.indexOf(4);if(u>-1)for(u++;u<o.length;){const h=o[u];if("number"==typeof h)return-1;if(h===a)return u;u++}return-1}(a,o)}function fE(o,a,u=!1){for(let h=0;h<a.length;h++)if(xS(o,a[h],u))return!0;return!1}function Ak(o,a){e:for(let u=0;u<a.length;u++){const h=a[u];if(o.length===h.length){for(let f=0;f<o.length;f++)if(o[f]!==h[f])continue e;return!0}}return!1}function gE(o,a){return o?":not("+a.trim()+")":a}function PS(o){let a=o[0],u=1,h=2,f="",m=!1;for(;u<o.length;){let b=o[u];if("string"==typeof b)if(2&h){const C=o[++u];f+="["+b+(C.length>0?'="'+C+'"':"")+"]"}else 8&h?f+="."+b:4&h&&(f+=" "+b);else""!==f&&!ao(b)&&(a+=gE(m,f),f=""),h=b,m=m||!ao(h);u++}return""!==f&&(a+=gE(m,f)),a}const pt={};function mE(o){_E(Nt(),Ne(),Pr()+o,_l())}function _E(o,a,u,h){if(!h)if(3==(3&a[2])){const m=o.preOrderCheckHooks;null!==m&&bl(a,m,u)}else{const m=o.preOrderHooks;null!==m&&Ad(a,m,0,u)}yl(u)}function Vl(o,a){return o<<17|a<<2}function lo(o){return o>>17&32767}function vE(o){return 2|o}function Go(o){return(131068&o)>>2}function we(o,a){return-131069&o|a<<2}function xa(o){return 1|o}function U_(o,a){const u=o.contentQueries;if(null!==u)for(let h=0;h<u.length;h+=2){const f=u[h],m=u[h+1];if(-1!==m){const b=o.data[m];Pu(f),b.contentQueries(2,a[m],m)}}}function oh(o,a,u,h,f,m,b,C,I,N){const M=a.blueprint.slice();return M[0]=f,M[2]=140|h,Cd(M),M[3]=M[15]=o,M[8]=u,M[10]=b||o&&o[10],M[11]=C||o&&o[11],M[12]=I||o&&o[12]||null,M[9]=N||o&&o[9]||null,M[6]=m,M[16]=2==a.type?o[16]:M,M}function Pa(o,a,u,h,f){let m=o.data[a];if(null===m)m=kp(o,a,u,h,f),lt.lFrame.inI18n&&(m.flags|=64);else if(64&m.type){m.type=u,m.value=h,m.attrs=f;const b=Js();m.injectorIndex=null===b?-1:b.injectorIndex}return Bi(m,!0),m}function kp(o,a,u,h,f){const m=Uf(),b=Dd(),I=o.data[a]=function(o,a,u,h,f,m){return{type:u,index:h,insertBeforeIndex:null,injectorIndex:a?a.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:f,attrs:m,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:a,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,b?m:m&&m.parent,u,a,h,f);return null===o.firstChild&&(o.firstChild=I),null!==m&&(b?null==m.child&&null!==I.parent&&(m.child=I):null===m.next&&(m.next=I)),I}function Ul(o,a,u,h){if(0===u)return-1;const f=a.length;for(let m=0;m<u;m++)a.push(h),o.blueprint.push(h),o.data.push(null);return f}function lc(o,a,u){Sd(a);try{const h=o.viewQuery;null!==h&&cb(1,h,u);const f=o.template;null!==f&&H_(o,a,f,1,u),o.firstCreatePass&&(o.firstCreatePass=!1),o.staticContentQueries&&U_(o,a),o.staticViewQueries&&cb(2,o.viewQuery,u);const m=o.components;null!==m&&function(o,a){for(let u=0;u<a.length;u++)KS(o,a[u])}(a,m)}catch(h){throw o.firstCreatePass&&(o.incompleteFirstPass=!0,o.firstCreatePass=!1),h}finally{a[2]&=-5,Fu()}}function ah(o,a,u,h){const f=a[2];if(256==(256&f))return;Sd(a);const m=_l();try{Cd(a),function(o){lt.lFrame.bindingIndex=o}(o.bindingStartIndex),null!==u&&H_(o,a,u,2,h);const b=3==(3&f);if(!m)if(b){const N=o.preOrderCheckHooks;null!==N&&bl(a,N,null)}else{const N=o.preOrderHooks;null!==N&&Ad(a,N,0,null),qf(a,0)}if(function(o){for(let a=I_(o);null!==a;a=nE(a)){if(!a[2])continue;const u=a[9];for(let h=0;h<u.length;h++){const f=u[h],m=f[3];0==(1024&f[2])&&gl(m,1),f[2]|=1024}}}(a),function(o){for(let a=I_(o);null!==a;a=nE(a))for(let u=10;u<a.length;u++){const h=a[u],f=h[1];Vm(h)&&ah(f,h,f.template,h[8])}}(a),null!==o.contentQueries&&U_(o,a),!m)if(b){const N=o.contentCheckHooks;null!==N&&bl(a,N)}else{const N=o.contentHooks;null!==N&&Ad(a,N,1),qf(a,1)}!function(o,a){const u=o.hostBindingOpCodes;if(null!==u)try{for(let h=0;h<u.length;h++){const f=u[h];if(f<0)yl(~f);else{const m=f,b=u[++h],C=u[++h];Bm(b,m),C(2,a[m])}}}finally{yl(-1)}}(o,a);const C=o.components;null!==C&&function(o,a){for(let u=0;u<a.length;u++)lb(o,a[u])}(a,C);const I=o.viewQuery;if(null!==I&&cb(2,I,h),!m)if(b){const N=o.viewCheckHooks;null!==N&&bl(a,N)}else{const N=o.viewHooks;null!==N&&Ad(a,N,2),qf(a,2)}!0===o.firstUpdatePass&&(o.firstUpdatePass=!1),m||(a[2]&=-73),1024&a[2]&&(a[2]&=-1025,gl(a[3],-1))}finally{Fu()}}function jS(o,a,u,h){const f=a[10],m=!_l(),b=Ff(a);try{m&&!b&&f.begin&&f.begin(),b&&lc(o,a,h),ah(o,a,u,h)}finally{m&&!b&&f.end&&f.end()}}function H_(o,a,u,h,f){const m=Pr(),b=2&h;try{yl(-1),b&&a.length>20&&_E(o,a,20,_l()),u(h,f)}finally{yl(m)}}function K0(o,a,u){if(Su(a)){const f=a.directiveEnd;for(let m=a.directiveStart;m<f;m++){const b=o.data[m];b.contentQueries&&b.contentQueries(1,u[m],m)}}}function Q0(o,a,u){!Vf()||(function(o,a,u,h){const f=u.directiveStart,m=u.directiveEnd;o.firstCreatePass||eo(u,a),fr(h,a);const b=u.initialInputs;for(let C=f;C<m;C++){const I=o.data[C],N=Qr(I);N&&zS(a,u,I);const M=An(a,o,C,u);fr(M,a),null!==b&&YS(0,C-f,M,I,0,b),N&&(Jr(u.index,a)[8]=M)}}(o,a,u,Or(u,a)),128==(128&u.flags)&&function(o,a,u){const h=u.directiveStart,f=u.directiveEnd,b=u.index,C=lt.lFrame.currentDirectiveIndex;try{yl(b);for(let I=h;I<f;I++){const N=o.data[I],M=a[I];$f(I),(null!==N.hostBindings||0!==N.hostVars||null!==N.hostAttrs)&&Ir(N,M)}}finally{yl(-1),$f(C)}}(o,a,u))}function J0(o,a,u=Or){const h=a.localNames;if(null!==h){let f=a.index+1;for(let m=0;m<h.length;m+=2){const b=h[m+1],C=-1===b?u(a,o):o[b];o[f++]=C}}}function Vr(o){const a=o.tView;return null===a||a.incompleteFirstPass?o.tView=Hl(1,null,o.template,o.decls,o.vars,o.directiveDefs,o.pipeDefs,o.viewQuery,o.schemas,o.consts):a}function Hl(o,a,u,h,f,m,b,C,I,N){const M=20+h,k=M+f,P=function(o,a){const u=[];for(let h=0;h<a;h++)u.push(h<o?null:pt);return u}(M,k),H="function"==typeof N?N():N;return P[1]={type:o,blueprint:P,template:u,queries:null,viewQuery:C,declTNode:a,data:P.slice().fill(null,M),bindingStartIndex:M,expandoStartIndex:k,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof m?m():m,pipeRegistry:"function"==typeof b?b():b,firstChild:null,schemas:I,consts:H,incompleteFirstPass:!1}}function Op(o,a,u,h){const f=Vp(a);null===u?f.push(h):(f.push(u),o.firstCreatePass&&db(o).push(h,f.length-1))}function $_(o,a,u){for(let h in o)if(o.hasOwnProperty(h)){const f=o[h];(u=null===u?{}:u).hasOwnProperty(h)?u[h].push(a,f):u[h]=[a,f]}return u}function Ii(o,a,u,h,f,m,b,C){const I=Or(a,u);let M,N=a.inputs;!C&&null!=N&&(M=N[h])?(ni(o,u,M,h,f),md(a)&&function(o,a){const u=Jr(a,o);16&u[2]||(u[2]|=64)}(u,a.index)):3&a.type&&(h=function(o){return"class"===o?"className":"for"===o?"htmlFor":"formaction"===o?"formAction":"innerHtml"===o?"innerHTML":"readonly"===o?"readOnly":"tabindex"===o?"tabIndex":o}(h),f=null!=b?b(f,a.value||"",h):f,an(m)?m.setProperty(I,h,f):Ns(h)||(I.setProperty?I.setProperty(h,f):I[h]=f))}function nb(o,a,u,h){let f=!1;if(Vf()){const m=function(o,a,u){const h=o.directiveRegistry;let f=null;if(h)for(let m=0;m<h.length;m++){const b=h[m];fE(u,b.selectors,!1)&&(f||(f=[]),qt(eo(u,a),o,b.type),Qr(b)?(q_(o,u),f.unshift(b)):f.push(b))}return f}(o,a,u),b=null===h?null:{"":-1};if(null!==m){f=!0,sb(u,o.data.length,m.length);for(let M=0;M<m.length;M++){const k=m[M];k.providersResolver&&k.providersResolver(k)}let C=!1,I=!1,N=Ul(o,a,m.length,null);for(let M=0;M<m.length;M++){const k=m[M];u.mergedAttrs=Ao(u.mergedAttrs,k.hostAttrs),RE(o,u,a,N,k),qS(N,k,b),null!==k.contentQueries&&(u.flags|=8),(null!==k.hostBindings||null!==k.hostAttrs||0!==k.hostVars)&&(u.flags|=128);const P=k.type.prototype;!C&&(P.ngOnChanges||P.ngOnInit||P.ngDoCheck)&&((o.preOrderHooks||(o.preOrderHooks=[])).push(u.index),C=!0),!I&&(P.ngOnChanges||P.ngDoCheck)&&((o.preOrderCheckHooks||(o.preOrderCheckHooks=[])).push(u.index),I=!0),N++}!function(o,a){const h=a.directiveEnd,f=o.data,m=a.attrs,b=[];let C=null,I=null;for(let N=a.directiveStart;N<h;N++){const M=f[N],k=M.inputs,P=null===m||$0(a)?null:ob(k,m);b.push(P),C=$_(k,N,C),I=$_(M.outputs,N,I)}null!==C&&(C.hasOwnProperty("class")&&(a.flags|=16),C.hasOwnProperty("style")&&(a.flags|=32)),a.initialInputs=b,a.inputs=C,a.outputs=I}(o,u)}b&&function(o,a,u){if(a){const h=o.localNames=[];for(let f=0;f<a.length;f+=2){const m=u[a[f+1]];if(null==m)throw new be("301",`Export of name '${a[f+1]}' not found!`);h.push(a[f],m)}}}(u,h,b)}return u.mergedAttrs=Ao(u.mergedAttrs,u.attrs),f}function G_(o,a,u,h,f,m){const b=m.hostBindings;if(b){let C=o.hostBindingOpCodes;null===C&&(C=o.hostBindingOpCodes=[]);const I=~a.index;(function(o){let a=o.length;for(;a>0;){const u=o[--a];if("number"==typeof u&&u<0)return u}return 0})(C)!=I&&C.push(I),C.push(h,f,b)}}function Ir(o,a){null!==o.hostBindings&&o.hostBindings(1,a)}function q_(o,a){a.flags|=2,(o.components||(o.components=[])).push(a.index)}function qS(o,a,u){if(u){if(a.exportAs)for(let h=0;h<a.exportAs.length;h++)u[a.exportAs[h]]=o;Qr(a)&&(u[""]=o)}}function sb(o,a,u){o.flags|=1,o.directiveStart=a,o.directiveEnd=a+u,o.providerIndexes=a}function RE(o,a,u,h,f){o.data[h]=f;const m=f.factory||(f.factory=Io(f.type)),b=new Md(m,Qr(f),null);o.blueprint[h]=b,u[h]=b,G_(o,a,0,h,Ul(o,u,f.hostVars,pt),f)}function zS(o,a,u){const h=Or(a,o),f=Vr(u),m=o[10],b=Lp(o,oh(o,f,null,u.onPush?64:16,h,a,m,m.createRenderer(h,u),null,null));o[a.index]=b}function Pp(o,a,u,h,f,m,b){if(null==m)an(o)?o.removeAttribute(a,f,u):a.removeAttribute(f);else{const C=null==b?pe(m):b(m,h||"",f);an(o)?o.setAttribute(a,f,C,u):u?a.setAttributeNS(u,f,C):a.setAttribute(f,C)}}function YS(o,a,u,h,f,m){const b=m[a];if(null!==b){const C=h.setInput;for(let I=0;I<b.length;){const N=b[I++],M=b[I++],k=b[I++];null!==C?h.setInput(u,k,N,M):u[M]=k}}}function ob(o,a){let u=null,h=0;for(;h<a.length;){const f=a[h];if(0!==f)if(5!==f){if("number"==typeof f)break;o.hasOwnProperty(f)&&(null===u&&(u=[]),u.push(f,o[f],a[h+1])),h+=2}else h+=2;else h+=4}return u}function xE(o,a,u,h){return new Array(o,!0,!1,a,null,0,h,u,null,null)}function lb(o,a){const u=Jr(a,o);if(Vm(u)){const h=u[1];80&u[2]?ah(h,u,h.template,u[8]):u[5]>0&&Y_(u)}}function Y_(o){for(let h=I_(o);null!==h;h=nE(h))for(let f=10;f<h.length;f++){const m=h[f];if(1024&m[2]){const b=m[1];ah(b,m,b.template,m[8])}else m[5]>0&&Y_(m)}const u=o[1].components;if(null!==u)for(let h=0;h<u.length;h++){const f=Jr(u[h],o);Vm(f)&&f[5]>0&&Y_(f)}}function KS(o,a){const u=Jr(a,o),h=u[1];(function(o,a){for(let u=a.length;u<o.blueprint.length;u++)a.push(o.blueprint[u])})(h,u),lc(h,u,u[8])}function Lp(o,a){return o[13]?o[14][4]=a:o[13]=a,o[14]=a,a}function Z_(o){for(;o;){o[2]|=64;const a=Mp(o);if(qn(o)&&!a)return o;o=a}return null}function ub(o,a,u){const h=a[10];h.begin&&h.begin();try{ah(o,a,o.template,u)}catch(f){throw hb(a,f),f}finally{h.end&&h.end()}}function OE(o){!function(o){for(let a=0;a<o.components.length;a++){const u=o.components[a],h=Qd(u),f=h[1];jS(f,h,f.template,u)}}(o[8])}function cb(o,a,u){Pu(0),a(o,u)}const PE=(()=>Promise.resolve(null))();function Vp(o){return o[7]||(o[7]=[])}function db(o){return o.cleanup||(o.cleanup=[])}function hb(o,a){const u=o[9],h=u?u.get(y,null):null;h&&h.handleError(a)}function ni(o,a,u,h,f){for(let m=0;m<u.length;){const b=u[m++],C=u[m++],I=a[b],N=o.data[b];null!==N.setInput?N.setInput(I,f,h,C):I[C]=f}}function jl(o,a,u){let h=u?o.styles:null,f=u?o.classes:null,m=0;if(null!==a)for(let b=0;b<a.length;b++){const C=a[b];"number"==typeof C?m=C:1==m?f=j(f,C):2==m&&(h=j(h,C+": "+a[++b]+";"))}u?o.styles=h:o.stylesWithoutHost=h,u?o.classes=f:o.classesWithoutHost=f}const uc=new hn("INJECTOR",-1);class fb{get(a,u=Hu){if(u===Hu){const h=new Error(`NullInjectorError: No provider for ${Q(a)}!`);throw h.name="NullInjectorError",h}return u}}const Fa=new hn("Set Injector scope."),cc={},pb={};let Bp;function Up(){return void 0===Bp&&(Bp=new fb),Bp}function gb(o,a=null,u=null,h){return new JS(o,u,a||Up(),h)}class JS{constructor(a,u,h,f=null){this.parent=h,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const m=[];u&&As(u,C=>this.processProvider(C,a,u)),As([a],C=>this.processInjectorType(C,[],m)),this.records.set(uc,dc(void 0,this));const b=this.records.get(Fa);this.scope=null!=b?b.value:null,this.source=f||("object"==typeof a?null:Q(a))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(a=>a.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(a,u=Hu,h=Ye.Default){this.assertNotDestroyed();const f=_t(this),m=ki(void 0);try{if(!(h&Ye.SkipSelf)){let C=this.records.get(a);if(void 0===C){const I=("function"==typeof(o=a)||"object"==typeof o&&o instanceof hn)&&ur(a);C=I&&this.injectableDefInScope(I)?dc(jp(a),cc):null,this.records.set(a,C)}if(null!=C)return this.hydrate(a,C)}return(h&Ye.Self?Up():this.parent).get(a,u=h&Ye.Optional&&u===Hu?null:u)}catch(b){if("NullInjectorError"===b.name){if((b[Bo]=b[Bo]||[]).unshift(Q(a)),f)throw b;return bi(b,a,"R3InjectorError",this.source)}throw b}finally{ki(m),_t(f)}var o}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(a=>this.get(a))}toString(){const a=[];return this.records.forEach((h,f)=>a.push(Q(f))),`R3Injector[${a.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(a,u,h){if(!(a=$(a)))return!1;let f=vo(a);const m=null==f&&a.ngModule||void 0,b=void 0===m?a:m,C=-1!==h.indexOf(b);if(void 0!==m&&(f=vo(m)),null==f)return!1;if(null!=f.imports&&!C){let M;h.push(b);try{As(f.imports,k=>{this.processInjectorType(k,u,h)&&(void 0===M&&(M=[]),M.push(k))})}finally{}if(void 0!==M)for(let k=0;k<M.length;k++){const{ngModule:P,providers:H}=M[k];As(H,Y=>this.processProvider(Y,P,H||W))}}this.injectorDefTypes.add(b);const I=Io(b)||(()=>new b);this.records.set(b,dc(I,cc));const N=f.providers;if(null!=N&&!C){const M=a;As(N,k=>this.processProvider(k,M,N))}return void 0!==m&&void 0!==a.providers}processProvider(a,u,h){let f=hc(a=$(a))?a:$(a&&a.provide);const m=yb(o=a)?dc(void 0,o.useValue):dc(_b(o),cc);var o;if(hc(a)||!0!==a.multi)this.records.get(f);else{let b=this.records.get(f);b||(b=dc(void 0,cc,!0),b.factory=()=>Ho(b.multi),this.records.set(f,b)),f=a,b.multi.push(a)}this.records.set(f,m)}hydrate(a,u){return u.value===cc&&(u.value=pb,u.value=u.factory()),"object"==typeof u.value&&u.value&&null!==(o=u.value)&&"object"==typeof o&&"function"==typeof o.ngOnDestroy&&this.onDestroy.add(u.value),u.value;var o}injectableDefInScope(a){if(!a.providedIn)return!1;const u=$(a.providedIn);return"string"==typeof u?"any"===u||u===this.scope:this.injectorDefTypes.has(u)}}function jp(o){const a=ur(o),u=null!==a?a.factory:Io(o);if(null!==u)return u;if(o instanceof hn)throw new Error(`Token ${Q(o)} is missing a \u0275prov definition.`);if(o instanceof Function)return function(o){const a=o.length;if(a>0){const h=Lo(a,"?");throw new Error(`Can't resolve all parameters for ${Q(o)}: (${h.join(", ")}).`)}const u=function(o){const a=o&&(o[zs]||o[Ys]);if(a){const u=function(o){if(o.hasOwnProperty("name"))return o.name;const a=(""+o).match(/^function\s*([^\s(]+)/);return null===a?"":a[1]}(o);return console.warn(`DEPRECATED: DI is instantiating a token "${u}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${u}" class.`),a}return null}(o);return null!==u?()=>u.factory(o):()=>new o}(o);throw new Error("unreachable")}function _b(o,a,u){let h;if(hc(o)){const f=$(o);return Io(f)||jp(f)}if(yb(o))h=()=>$(o.useValue);else if(function(o){return!(!o||!o.useFactory)}(o))h=()=>o.useFactory(...Ho(o.deps||[]));else if(function(o){return!(!o||!o.useExisting)}(o))h=()=>sn($(o.useExisting));else{const f=$(o&&(o.useClass||o.provide));if(!function(o){return!!o.deps}(o))return Io(f)||jp(f);h=()=>new f(...Ho(o.deps))}return h}function dc(o,a,u=!1){return{factory:o,value:a,multi:u?[]:void 0}}function yb(o){return null!==o&&"object"==typeof o&&Il in o}function hc(o){return"function"==typeof o}const pc=function(o,a,u){return function(o,a=null,u=null,h){const f=gb(o,a,u,h);return f._resolveInjectorDefTypes(),f}({name:u},a,o,u)};let cn=(()=>{class o{static create(u,h){return Array.isArray(u)?pc(u,h,""):pc(u.providers,u.parent,u.name||"")}}return o.THROW_IF_NOT_FOUND=Hu,o.NULL=new fb,o.\u0275prov=Kt({token:o,providedIn:"any",factory:()=>sn(uc)}),o.__NG_ELEMENT_ID__=-1,o})();function iy(o,a){vl(Qd(o)[1],nn())}function mc(o){let a=function(o){return Object.getPrototypeOf(o.prototype).constructor}(o.type),u=!0;const h=[o];for(;a;){let f;if(Qr(o))f=a.\u0275cmp||a.\u0275dir;else{if(a.\u0275cmp)throw new Error("Directives cannot inherit Components");f=a.\u0275dir}if(f){if(u){h.push(f);const b=o;b.inputs=Nb(o.inputs),b.declaredInputs=Nb(o.declaredInputs),b.outputs=Nb(o.outputs);const C=f.hostBindings;C&&lA(o,C);const I=f.viewQuery,N=f.contentQueries;if(I&&rr(o,I),N&&zE(o,N),re(o.inputs,f.inputs),re(o.declaredInputs,f.declaredInputs),re(o.outputs,f.outputs),Qr(f)&&f.data.animation){const M=o.data;M.animation=(M.animation||[]).concat(f.data.animation)}}const m=f.features;if(m)for(let b=0;b<m.length;b++){const C=m[b];C&&C.ngInherit&&C(o),C===mc&&(u=!1)}}a=Object.getPrototypeOf(a)}!function(o){let a=0,u=null;for(let h=o.length-1;h>=0;h--){const f=o[h];f.hostVars=a+=f.hostVars,f.hostAttrs=Ao(f.hostAttrs,u=Ao(u,f.hostAttrs))}}(h)}function Nb(o){return o===q?{}:o===W?[]:o}function rr(o,a){const u=o.viewQuery;o.viewQuery=u?(h,f)=>{a(h,f),u(h,f)}:a}function zE(o,a){const u=o.contentQueries;o.contentQueries=u?(h,f,m)=>{a(h,f,m),u(h,f,m)}:a}function lA(o,a){const u=o.hostBindings;o.hostBindings=u?(h,f)=>{a(h,f),u(h,f)}:a}let Kp=null;function _c(){if(!Kp){const o=Jt.Symbol;if(o&&o.iterator)Kp=o.iterator;else{const a=Object.getOwnPropertyNames(Map.prototype);for(let u=0;u<a.length;++u){const h=a[u];"entries"!==h&&"size"!==h&&Map.prototype[h]===Map.prototype.entries&&(Kp=h)}}}return Kp}class Wi{constructor(a){this.wrapped=a}static wrap(a){return new Wi(a)}static unwrap(a){return Wi.isWrapped(a)?a.wrapped:a}static isWrapped(a){return a instanceof Wi}}function ph(o){return!!Ab(o)&&(Array.isArray(o)||!(o instanceof Map)&&_c()in o)}function Ab(o){return null!==o&&("function"==typeof o||"object"==typeof o)}function Vs(o,a,u){return o[a]=u}function Br(o,a,u){return!Object.is(o[a],u)&&(o[a]=u,!0)}function $a(o,a,u,h){const f=Br(o,a,u);return Br(o,a+1,h)||f}function Qp(o,a,u,h){const f=Ne();return Br(f,So(),a)&&(Nt(),function(o,a,u,h,f,m){const b=Or(o,a);Pp(a[11],b,m,o.value,u,h,f)}(Fn(),f,o,a,u,h)),Qp}function gh(o,a,u,h){return Br(o,So(),u)?a+pe(u)+h:pt}function bc(o,a,u,h,f,m,b,C,I,N){const k=function(o,a,u,h,f,m){const b=$a(o,a,u,h);return $a(o,a+2,f,m)||b}(o,as(),u,f,b,I);return vi(4),k?a+pe(u)+h+pe(f)+m+pe(b)+C+pe(I)+N:pt}function Fb(o,a,u,h,f,m,b,C){const I=Ne(),N=Nt(),M=o+20,k=N.firstCreatePass?function(o,a,u,h,f,m,b,C,I){const N=a.consts,M=Pa(a,o,4,b||null,ca(N,C));nb(a,u,M,ca(N,I)),vl(a,M);const k=M.tViews=Hl(2,M,h,f,m,a.directiveRegistry,a.pipeRegistry,null,a.schemas,N);return null!==a.queries&&(a.queries.template(a,M),k.queries=a.queries.embeddedTView(M)),M}(M,N,I,a,u,h,f,m,b):N.data[M];Bi(k,!1);const P=I[11].createComment("");Rp(N,I,P,k),fr(P,I),Lp(I,I[M]=xE(P,I,P,k)),wr(k)&&Q0(N,I,k),null!=b&&J0(I,k,C)}function Ec(o){return No(lt.lFrame.contextLView,20+o)}function Dn(o,a=Ye.Default){const u=Ne();return null===u?sn(o,a):Mo(nn(),u,$(o),a)}function eg(o,a,u){const h=Ne();return Br(h,So(),a)&&Ii(Nt(),Fn(),h,o,a,h[11],u,!1),eg}function ay(o,a,u,h,f){const b=f?"class":"style";ni(o,u,a.inputs[b],b,h)}function qa(o,a,u,h){const f=Ne(),m=Nt(),b=20+o,C=f[11],I=f[b]=P0(C,a,lt.lFrame.currentNamespace),N=m.firstCreatePass?function(o,a,u,h,f,m,b){const C=a.consts,N=Pa(a,o,2,f,ca(C,m));return nb(a,u,N,ca(C,b)),null!==N.attrs&&jl(N,N.attrs,!1),null!==N.mergedAttrs&&jl(N,N.mergedAttrs,!0),null!==a.queries&&a.queries.elementStart(a,N),N}(b,m,f,0,a,u,h):m.data[b];Bi(N,!0);const M=N.mergedAttrs;null!==M&&Ts(C,I,M);const k=N.classes;null!==k&&H0(C,I,k);const P=N.styles;null!==P&&dE(C,I,P),64!=(64&N.flags)&&Rp(m,f,I,N),0===lt.lFrame.elementDepthCount&&fr(I,f),lt.lFrame.elementDepthCount++,wr(N)&&(Q0(m,f,N),K0(m,N,f)),null!==h&&J0(f,N)}function wh(){let o=nn();Dd()?ml():(o=o.parent,Bi(o,!1));const a=o;lt.lFrame.elementDepthCount--;const u=Nt();u.firstCreatePass&&(vl(u,o),Su(o)&&u.queries.elementEnd(o)),null!=a.classesWithoutHost&&function(o){return 0!=(16&o.flags)}(a)&&ay(u,a,Ne(),a.classesWithoutHost,!0),null!=a.stylesWithoutHost&&function(o){return 0!=(32&o.flags)}(a)&&ay(u,a,Ne(),a.stylesWithoutHost,!1)}function Hb(o,a,u,h){qa(o,a,u,h),wh()}function Bs(o,a,u){const h=Ne(),f=Nt(),m=o+20,b=f.firstCreatePass?function(o,a,u,h,f){const m=a.consts,b=ca(m,h),C=Pa(a,o,8,"ng-container",b);return null!==b&&jl(C,b,!0),nb(a,u,C,ca(m,f)),null!==a.queries&&a.queries.elementStart(a,C),C}(m,f,h,a,u):f.data[m];Bi(b,!0);const C=h[m]=h[11].createComment("");Rp(f,h,C,b),fr(C,h),wr(b)&&(Q0(f,h,b),K0(f,b,h)),null!=u&&J0(h,b)}function Nc(){let o=nn();const a=Nt();Dd()?ml():(o=o.parent,Bi(o,!1)),a.firstCreatePass&&(vl(a,o),Su(o)&&a.queries.elementEnd(o))}function jb(){return Ne()}function ng(o){return!!o&&"function"==typeof o.then}function ly(o){return!!o&&"function"==typeof o.subscribe}const Eh=ly;function rg(o,a,u,h){const f=Ne(),m=Nt(),b=nn();return function(o,a,u,h,f,m,b,C){const I=wr(h),M=o.firstCreatePass&&db(o),k=a[8],P=Vp(a);let H=!0;if(3&h.type||C){const ee=Or(h,a),Re=C?C(ee):ee,Ce=P.length,qe=C?dt=>C(ln(dt[h.index])):h.index;if(an(u)){let dt=null;if(!C&&I&&(dt=function(o,a,u,h){const f=o.cleanup;if(null!=f)for(let m=0;m<f.length-1;m+=2){const b=f[m];if(b===u&&f[m+1]===h){const C=a[7],I=f[m+2];return C.length>I?C[I]:null}"string"==typeof b&&(m+=2)}return null}(o,a,f,h.index)),null!==dt)(dt.__ngLastListenerFn__||dt).__ngNextListenerFn__=m,dt.__ngLastListenerFn__=m,H=!1;else{m=Sc(h,a,k,m,!1);const Rt=u.listen(Re,f,m);P.push(m,Rt),M&&M.push(f,qe,Ce,Ce+1)}}else m=Sc(h,a,k,m,!0),Re.addEventListener(f,m,b),P.push(m),M&&M.push(f,qe,Ce,b)}else m=Sc(h,a,k,m,!1);const Y=h.outputs;let ae;if(H&&null!==Y&&(ae=Y[f])){const ee=ae.length;if(ee)for(let Re=0;Re<ee;Re+=2){const ar=a[ae[Re]][ae[Re+1]].subscribe(m),Gs=P.length;P.push(m,ar),M&&M.push(f,h.index,Gs,-(Gs+1))}}}(m,f,f[11],b,o,a,!!u,h),rg}function ig(o,a,u,h){try{return!1!==u(h)}catch(f){return hb(o,f),!1}}function Sc(o,a,u,h,f){return function m(b){if(b===Function)return h;const C=2&o.flags?Jr(o.index,a):a;0==(32&a[2])&&Z_(C);let I=ig(a,0,h,b),N=m.__ngNextListenerFn__;for(;N;)I=ig(a,0,N,b)&&I,N=N.__ngNextListenerFn__;return f&&!1===I&&(b.preventDefault(),b.returnValue=!1),I}}function Hr(o=1){return function(o){return(lt.lFrame.contextLView=function(o,a){for(;o>0;)a=a[15],o--;return a}(o,lt.lFrame.contextLView))[8]}(o)}function lD(o,a){let u=null;const h=function(o){const a=o.attrs;if(null!=a){const u=a.indexOf(5);if(0==(1&u))return a[u+1]}return null}(o);for(let f=0;f<a.length;f++){const m=a[f];if("*"!==m){if(null===h?fE(o,m,!0):Ak(h,m))return f}else u=f}return u}function mn(o){const a=Ne()[16][6];if(!a.projection){const h=a.projection=Lo(o?o.length:1,null),f=h.slice();let m=a.child;for(;null!==m;){const b=o?lD(m,o):0;null!==b&&(f[b]?f[b].projectionNext=m:h[b]=m,f[b]=m),m=m.next}}}function uD(o,a=0,u){const h=Ne(),f=Nt(),m=Pa(f,20+o,16,null,u||null);null===m.projection&&(m.projection=a),ml(),64!=(64&m.flags)&&function(o,a,u){Ll(a[11],0,a,u,sE(o,u,a),R_(u.parent||a[6],u,a))}(f,h,m)}function cy(o,a,u){return Yl(o,"",a,"",u),cy}function Yl(o,a,u,h,f){const m=Ne(),b=gh(m,a,u,h);return b!==pt&&Ii(Nt(),Fn(),m,o,b,m[11],f,!1),Yl}function gD(o,a,u,h,f){const m=o[u+1],b=null===a;let C=h?lo(m):Go(m),I=!1;for(;0!==C&&(!1===I||b);){const M=o[C+1];CA(o[C],a)&&(I=!0,o[C+1]=h?xa(M):vE(M)),C=h?lo(M):Go(M)}I&&(o[u+1]=h?vE(m):xa(m))}function CA(o,a){return null===o||null==a||(Array.isArray(o)?o[1]:o)===a||!(!Array.isArray(o)||"string"!=typeof a)&&Vo(o,a)>=0}const xn={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function ag(o){return o.substring(xn.key,xn.keyEnd)}function Gb(o,a){const u=xn.textEnd;return u===a?-1:(a=xn.keyEnd=function(o,a,u){for(;a<u&&o.charCodeAt(a)>32;)a++;return a}(o,xn.key=a,u),co(o,a,u))}function co(o,a,u){for(;a<u&&o.charCodeAt(a)<=32;)a++;return a}function zi(o,a,u){return Us(o,a,u,!1),zi}function gy(o,a){return Us(o,a,null,!0),gy}function my(o){ho(Rn,Zi,o,!0)}function Zi(o,a){for(let u=function(o){return function(o){xn.key=0,xn.keyEnd=0,xn.value=0,xn.valueEnd=0,xn.textEnd=o.length}(o),Gb(o,co(o,0,xn.textEnd))}(a);u>=0;u=Gb(a,u))Rn(o,ag(a),!0)}function Us(o,a,u,h){const f=Ne(),m=Nt(),b=vi(2);m.firstUpdatePass&&Yb(m,o,b,h),a!==pt&&Br(f,b,a)&&Kb(m,m.data[Pr()],f,f[11],o,f[b+1]=function(o,a){return null==o||("string"==typeof a?o+=a:"object"==typeof o&&(o=Q(io(o)))),o}(a,u),h,b)}function ho(o,a,u,h){const f=Nt(),m=vi(2);f.firstUpdatePass&&Yb(f,null,m,h);const b=Ne();if(u!==pt&&Br(b,m,u)){const C=f.data[Pr()];if(Ih(C,h)&&!zb(f,m)){let I=h?C.classesWithoutHost:C.stylesWithoutHost;null!==I&&(u=j(I,u||"")),ay(f,C,b,u,h)}else!function(o,a,u,h,f,m,b,C){f===pt&&(f=W);let I=0,N=0,M=0<f.length?f[0]:null,k=0<m.length?m[0]:null;for(;null!==M||null!==k;){const P=I<f.length?f[I+1]:void 0,H=N<m.length?m[N+1]:void 0;let ae,Y=null;M===k?(I+=2,N+=2,P!==H&&(Y=k,ae=H)):null===k||null!==M&&M<k?(I+=2,Y=M):(N+=2,Y=k,ae=H),null!==Y&&Kb(o,a,u,h,Y,ae,b,C),M=I<f.length?f[I]:null,k=N<m.length?m[N]:null}}(f,C,b,b[11],b[m+1],b[m+1]=function(o,a,u){if(null==u||""===u)return W;const h=[],f=io(u);if(Array.isArray(f))for(let m=0;m<f.length;m++)o(h,f[m],!0);else if("object"==typeof f)for(const m in f)f.hasOwnProperty(m)&&o(h,m,f[m]);else"string"==typeof f&&a(h,f);return h}(o,a,u),h,m)}}function zb(o,a){return a>=o.expandoStartIndex}function Yb(o,a,u,h){const f=o.data;if(null===f[u+1]){const m=f[Pr()],b=zb(o,u);Ih(m,h)&&null===a&&!b&&(a=!1),a=function(o,a,u,h){const f=function(o){const a=lt.lFrame.currentDirectiveIndex;return-1===a?null:o[a]}(o);let m=h?a.residualClasses:a.residualStyles;if(null===f)0===(h?a.classBindings:a.styleBindings)&&(u=Yo(u=yy(null,o,a,u,h),a.attrs,h),m=null);else{const b=a.directiveStylingLast;if(-1===b||o[b]!==f)if(u=yy(f,o,a,u,h),null===m){let I=function(o,a,u){const h=u?a.classBindings:a.styleBindings;if(0!==Go(h))return o[lo(h)]}(o,a,h);void 0!==I&&Array.isArray(I)&&(I=yy(null,o,a,I[1],h),I=Yo(I,a.attrs,h),function(o,a,u,h){o[lo(u?a.classBindings:a.styleBindings)]=h}(o,a,h,I))}else m=function(o,a,u){let h;const f=a.directiveEnd;for(let m=1+a.directiveStylingLast;m<f;m++)h=Yo(h,o[m].hostAttrs,u);return Yo(h,a.attrs,u)}(o,a,h)}return void 0!==m&&(h?a.residualClasses=m:a.residualStyles=m),u}(f,m,a,h),function(o,a,u,h,f,m){let b=m?a.classBindings:a.styleBindings,C=lo(b),I=Go(b);o[h]=u;let M,N=!1;if(Array.isArray(u)){const k=u;M=k[1],(null===M||Vo(k,M)>0)&&(N=!0)}else M=u;if(f)if(0!==I){const P=lo(o[C+1]);o[h+1]=Vl(P,C),0!==P&&(o[P+1]=we(o[P+1],h)),o[C+1]=function(o,a){return 131071&o|a<<17}(o[C+1],h)}else o[h+1]=Vl(C,0),0!==C&&(o[C+1]=we(o[C+1],h)),C=h;else o[h+1]=Vl(I,0),0===C?C=h:o[I+1]=we(o[I+1],h),I=h;N&&(o[h+1]=vE(o[h+1])),gD(o,M,h,!0),gD(o,M,h,!1),function(o,a,u,h,f){const m=f?o.residualClasses:o.residualStyles;null!=m&&"string"==typeof a&&Vo(m,a)>=0&&(u[h+1]=xa(u[h+1]))}(a,M,o,h,m),b=Vl(C,I),m?a.classBindings=b:a.styleBindings=b}(f,m,a,u,b,h)}}function yy(o,a,u,h,f){let m=null;const b=u.directiveEnd;let C=u.directiveStylingLast;for(-1===C?C=u.directiveStart:C++;C<b&&(m=a[C],h=Yo(h,m.hostAttrs,f),m!==o);)C++;return null!==o&&(u.directiveStylingLast=C),h}function Yo(o,a,u){const h=u?1:2;let f=-1;if(null!==a)for(let m=0;m<a.length;m++){const b=a[m];"number"==typeof b?f=b:f===h&&(Array.isArray(o)||(o=void 0===o?[]:["",o]),Rn(o,b,!!u||a[++m]))}return void 0===o?null:o}function Kb(o,a,u,h,f,m,b,C){if(!(3&a.type))return;const I=o.data,N=I[C+1];ug(function(o){return 1==(1&o)}(N)?Rc(I,a,u,f,Go(N),b):void 0)||(ug(m)||function(o){return 2==(2&o)}(N)&&(m=Rc(I,null,u,f,C,b)),function(o,a,u,h,f){const m=an(o);if(a)f?m?o.addClass(u,h):u.classList.add(h):m?o.removeClass(u,h):u.classList.remove(h);else{let b=-1===h.indexOf("-")?void 0:Os.DashCase;if(null==f)m?o.removeStyle(u,h,b):u.style.removeProperty(h);else{const C="string"==typeof f&&f.endsWith("!important");C&&(f=f.slice(0,-10),b|=Os.Important),m?o.setStyle(u,h,f,b):u.style.setProperty(h,f,C?"important":"")}}}(h,b,fl(Pr(),u),f,m))}function Rc(o,a,u,h,f,m){const b=null===a;let C;for(;f>0;){const I=o[f],N=Array.isArray(I),M=N?I[1]:I,k=null===M;let P=u[f+1];P===pt&&(P=k?W:void 0);let H=k?Yn(P,h):M===h?P:void 0;if(N&&!ug(H)&&(H=Yn(I,h)),ug(H)&&(C=H,b))return C;const Y=o[f+1];f=b?lo(Y):Go(Y)}if(null!==a){let I=m?a.residualClasses:a.residualStyles;null!=I&&(C=Yn(I,h))}return C}function ug(o){return void 0!==o}function Ih(o,a){return 0!=(o.flags&(a?16:32))}function bD(o,a=""){const u=Ne(),h=Nt(),f=o+20,m=h.firstCreatePass?Pa(h,f,1,a,null):h.data[f],b=u[f]=T_(u[11],a);Rp(h,u,b,m),Bi(m,!1)}function Qb(o){return kn("",o,""),Qb}function kn(o,a,u){const h=Ne(),f=gh(h,o,a,u);return f!==pt&&function(o,a,u){const h=fl(a,o);rE(o[11],h,u)}(h,Pr(),f),kn}function ew(o,a,u,h,f,m,b,C,I){ho(Rn,Zi,bc(Ne(),o,a,u,h,f,m,b,C,I),!0)}function xc(o,a,u){const h=Ne();return Br(h,So(),a)&&Ii(Nt(),Fn(),h,o,a,h[11],u,!0),xc}const Kl=void 0;var kD=["en",[["a","p"],["AM","PM"],Kl],[["AM","PM"],Kl,Kl],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Kl,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Kl,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Kl,"{1} 'at' {0}",Kl],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(o){const a=Math.floor(Math.abs(o)),u=o.toString().replace(/^[^.]*\.?/,"").length;return 1===a&&0===u?1:5}];let Sh={};function Cy(o){const a=function(o){return o.toLowerCase().replace(/_/g,"-")}(o);let u=PD(a);if(u)return u;const h=a.split("-")[0];if(u=PD(h),u)return u;if("en"===h)return kD;throw new Error(`Missing locale data for the locale "${o}".`)}function OD(o){return Cy(o)[it.PluralCase]}function PD(o){return o in Sh||(Sh[o]=Jt.ng&&Jt.ng.common&&Jt.ng.common.locales&&Jt.ng.common.locales[o]),Sh[o]}var it=(()=>((it=it||{})[it.LocaleId=0]="LocaleId",it[it.DayPeriodsFormat=1]="DayPeriodsFormat",it[it.DayPeriodsStandalone=2]="DayPeriodsStandalone",it[it.DaysFormat=3]="DaysFormat",it[it.DaysStandalone=4]="DaysStandalone",it[it.MonthsFormat=5]="MonthsFormat",it[it.MonthsStandalone=6]="MonthsStandalone",it[it.Eras=7]="Eras",it[it.FirstDayOfWeek=8]="FirstDayOfWeek",it[it.WeekendRange=9]="WeekendRange",it[it.DateFormat=10]="DateFormat",it[it.TimeFormat=11]="TimeFormat",it[it.DateTimeFormat=12]="DateTimeFormat",it[it.NumberSymbols=13]="NumberSymbols",it[it.NumberFormats=14]="NumberFormats",it[it.CurrencyCode=15]="CurrencyCode",it[it.CurrencySymbol=16]="CurrencySymbol",it[it.CurrencyName=17]="CurrencyName",it[it.Currencies=18]="Currencies",it[it.Directionality=19]="Directionality",it[it.PluralCase=20]="PluralCase",it[it.ExtraData=21]="ExtraData",it))();const Sr=["zero","one","two","few","many"],gg="en-US",fs={marker:"element"},Ah={marker:"ICU"};var On=(()=>((On=On||{})[On.SHIFT=2]="SHIFT",On[On.APPEND_EAGERLY=1]="APPEND_EAGERLY",On[On.COMMENT=2]="COMMENT",On))();let iw=gg;function Iy(o){(function(o,a){null==o&&ot(a,o,null,"!=")})(o,"Expected localeId to be defined"),"string"==typeof o&&(iw=o.toLowerCase().replace(/_/g,"-"))}function LD(o,a,u){const h=a.insertBeforeIndex,f=Array.isArray(h)?h[0]:h;return null===f?x_(o,0,u):ln(u[f])}function VD(o,a,u,h,f){const m=a.insertBeforeIndex;if(Array.isArray(m)){let b=h,C=null;if(3&a.type||(C=b,b=f),null!==b&&0==(2&a.flags))for(let I=1;I<m.length;I++)Fl(o,b,u[m[I]],C,!1)}}function _g(o,a){if(o.push(a),o.length>1)for(let u=o.length-2;u>=0;u--){const h=o[u];sw(h)||MA(h,a)&&null===BD(h)&&UD(h,a.index)}}function sw(o){return!(64&o.type)}function MA(o,a){return sw(a)||o.index>a.index}function BD(o){const a=o.insertBeforeIndex;return Array.isArray(a)?a[0]:a}function UD(o,a){const u=o.insertBeforeIndex;Array.isArray(u)?u[0]=a:(uE(LD,VD),o.insertBeforeIndex=a)}function Mh(o,a){const u=o.data[a];return null===u||"string"==typeof u?null:u.hasOwnProperty("currentCaseLViewIndex")?u:u.value}function jD(o,a,u){const h=kp(o,u,64,null,null);return _g(a,h),h}function yg(o,a){const u=a[o.currentCaseLViewIndex];return null===u?u:u<0?~u:u}function $D(o){return o>>>17}function GD(o){return(131070&o)>>>1}let vg=0,bg=0;function qD(o,a,u,h){const f=u[11];let b,m=null;for(let C=0;C<a.length;C++){const I=a[C];if("string"==typeof I){const N=a[++C];null===u[N]&&(u[N]=T_(f,I))}else if("number"==typeof I)switch(1&I){case 0:const N=$D(I);let M,k;if(null===m&&(m=N,b=A_(f,h)),N===m?(M=h,k=b):(M=null,k=ln(u[N])),null!==k){const ae=GD(I);Fl(f,k,u[ae],M,!1);const Re=Mh(o,ae);if(null!==Re&&"object"==typeof Re){const Ce=yg(Re,u);null!==Ce&&qD(o,Re.create[Ce],u,u[Re.anchorIdx])}}break;case 1:const H=a[++C],Y=a[++C];Pp(f,fl(I>>>1,u),null,null,H,Y,null);break;default:throw new Error(`Unable to determine the type of mutate operation for "${I}"`)}else switch(I){case Ah:const N=a[++C],M=a[++C];null===u[M]&&fr(u[M]=wS(f,N),u);break;case fs:const k=a[++C],P=a[++C];null===u[P]&&fr(u[P]=P0(f,k,null),u)}}}function ow(o,a,u,h,f){for(let m=0;m<u.length;m++){const b=u[m],C=u[++m];if(b&f){let I="";for(let N=m+1;N<=m+C;N++){const M=u[N];if("string"==typeof M)I+=M;else if("number"==typeof M)if(M<0)I+=pe(a[h-M]);else{const k=M>>>2;switch(3&M){case 1:const P=u[++N],H=u[++N],Y=o.data[k];"string"==typeof Y?Pp(a[11],a[k],null,Y,P,I,H):Ii(o,Y,a,P,I,a[11],H,!1);break;case 0:const ae=a[k];null!==ae&&rE(a[11],ae,I);break;case 2:kA(o,Mh(o,k),a,I);break;case 3:Zo(o,Mh(o,k),h,a)}}}}else{const I=u[m+1];if(I>0&&3==(3&I)){const M=Mh(o,I>>>2);a[M.currentCaseLViewIndex]<0&&Zo(o,M,h,a)}}m+=C}}function Zo(o,a,u,h){let f=h[a.currentCaseLViewIndex];if(null!==f){let m=vg;f<0&&(f=h[a.currentCaseLViewIndex]=~f,m=-1),ow(o,h,a.update[f],u,m)}}function kA(o,a,u,h){const f=function(o,a){let u=o.cases.indexOf(a);if(-1===u)switch(o.type){case 1:{const h=function(o,a){const u=OD(a)(parseInt(o,10)),h=Sr[u];return void 0!==h?h:"other"}(a,iw);u=o.cases.indexOf(h),-1===u&&"other"!==h&&(u=o.cases.indexOf("other"));break}case 0:u=o.cases.indexOf("other")}return-1===u?null:u}(a,h);if(yg(a,u)!==f&&(Ki(o,a,u),u[a.currentCaseLViewIndex]=null===f?null:~f,null!==f)){const b=u[a.anchorIdx];b&&qD(o,a.create[f],u,b)}}function Ki(o,a,u){let h=yg(a,u);if(null!==h){const f=a.remove[h];for(let m=0;m<f.length;m++){const b=f[m];if(b>0){const C=fl(b,u);null!==C&&U0(u[11],C)}else Ki(o,Mh(o,~b),u)}}}function _n(){const o=[];let u,h,a=-1;function m(C,I){a=0;const N=yg(C,I);h=null!==N?C.remove[N]:W}function b(){if(a<h.length){const C=h[a++];return C>0?u[C]:(o.push(a,h),m(u[1].data[~C],u),b())}return 0===o.length?null:(h=o.pop(),a=o.pop(),b())}return function(C,I){for(u=I;o.length;)o.pop();return m(C.value,I),b}}const $r=/\ufffd(\d+):?\d*\ufffd/gi,ps=/\ufffd(\d+)\ufffd/,Jl=/^\s*(\ufffd\d+:?\d*\ufffd)\s*,\s*(select|plural)\s*,/,xh=/\ufffd\/?\*(\d+:\d+)\ufffd/gi,kh=/\ufffd(\/?[#*]\d+):?\d*\ufffd/gi,OA=/\uE500/g;function Se(o,a,u,h,f,m,b){const C=Ul(o,h,1,null);let I=C<<On.SHIFT,N=Js();a===N&&(N=null),null===N&&(I|=On.APPEND_EAGERLY),b&&(I|=On.COMMENT,function(o){void 0===nc&&(nc=o())}(_n)),f.push(I,null===m?"":m);const M=kp(o,C,b?32:1,null===m?"":m,null);_g(u,M);const k=M.index;return Bi(M,!1),null!==N&&a!==N&&function(o,a){let u=o.insertBeforeIndex;null===u?(uE(LD,VD),u=o.insertBeforeIndex=[null,a]):(function(o,a,u){o!=a&&ot(u,o,a,"==")}(Array.isArray(u),!0,"Expecting array here"),u.push(a))}(N,k),M}function Ty(o,a,u,h,f,m,b){const C=b.match($r),I=Se(o,a,u,m,h,C?null:b,!1);C&&Oh(f,b,I.index,null,0,null)}function Oh(o,a,u,h,f,m){const b=o.length,C=b+1;o.push(null,null);const I=b+2,N=a.split($r);let M=0;for(let k=0;k<N.length;k++){const P=N[k];if(1&k){const H=f+parseInt(P,10);o.push(-1-H),M|=Xl(H)}else""!==P&&o.push(P)}return o.push(u<<2|(h?1:0)),h&&o.push(h,m),o[b]=M,o[C]=o.length-I,M}function Xl(o){return 1<<Math.min(o,31)}function eu(o){let a,m,u="",h=0,f=!1;for(;null!==(a=xh.exec(o));)f?a[0]===`\ufffd/*${m}\ufffd`&&(h=a.index,f=!1):(u+=o.substring(h,a.index+a[0].length),m=a[1],f=!0);return u+=o.substr(h),u}function Ny(o,a,u,h,f,m){let b=0;const C={type:f.type,currentCaseLViewIndex:Ul(o,a,1,null),anchorIdx:m,cases:[],create:[],remove:[],update:[]};(function(o,a,u){o.push(Xl(a.mainBinding),2,-1-a.mainBinding,u<<2|2)})(u,f,m),function(o,a,u){const h=o.data[a];null===h?o.data[a]=u:h.value=u}(o,m,C);const I=f.values;for(let N=0;N<I.length;N++){const M=I[N],k=[];for(let P=0;P<M.length;P++){const H=M[P];if("string"!=typeof H){const Y=k.push(H)-1;M[P]=`\x3c!--\ufffd${Y}\ufffd--\x3e`}}b=aw(o,C,a,u,h,f.cases[N],M.join(""),k)|b}b&&function(o,a,u){o.push(a,1,u<<2|3)}(u,b,m)}function KD(o){const a=[],u=[];let h=1,f=0;const m=si(o=o.replace(Jl,function(b,C,I){return h="select"===I?0:1,f=parseInt(C.substr(1),10),""}));for(let b=0;b<m.length;){let C=m[b++].trim();1===h&&(C=C.replace(/\s*(?:=)?(\w+)\s*/,"$1")),C.length&&a.push(C);const I=si(m[b++]);a.length>u.length&&u.push(I)}return{type:h,mainBinding:f,cases:a,values:u}}function si(o){if(!o)return[];let a=0;const u=[],h=[],f=/[{}]/g;let m;for(f.lastIndex=0;m=f.exec(o);){const C=m.index;if("}"==m[0]){if(u.pop(),0==u.length){const I=o.substring(a,C);Jl.test(I)?h.push(KD(I)):h.push(I),a=C+1}}else{if(0==u.length){const I=o.substring(a,C);h.push(I),a=C+1}u.push("{")}}const b=o.substring(a);return h.push(b),h}function aw(o,a,u,h,f,m,b,C){const I=[],N=[],M=[];a.cases.push(m),a.create.push(I),a.remove.push(N),a.update.push(M);const P=vp(Pm()).getInertBodyElement(b),H=zd(P)||P;return H?Sy(o,a,u,h,I,N,M,H,f,C,0):0}function Sy(o,a,u,h,f,m,b,C,I,N,M){let k=0,P=C.firstChild;for(;P;){const H=Ul(o,u,1,null);switch(P.nodeType){case Node.ELEMENT_NODE:const Y=P,ae=Y.tagName.toLowerCase();if(wp.hasOwnProperty(ae)){Cg(f,fs,ae,I,H),o.data[H]=ae;const qe=Y.attributes;for(let dt=0;dt<qe.length;dt++){const Rt=qe.item(dt),ar=Rt.name.toLowerCase();Rt.value.match($r)?Cp.hasOwnProperty(ar)&&Oh(b,Rt.value,H,Rt.name,0,Rl[ar]?Ml:Rs[ar]?Wd:null):XD(f,H,Rt)}k=Sy(o,a,u,h,f,m,b,P,H,N,M+1)|k,za(m,H,M)}break;case Node.TEXT_NODE:const ee=P.textContent||"",Re=ee.match($r);Cg(f,null,Re?"":ee,I,H),za(m,H,M),Re&&(k=Oh(b,ee,H,null,0,null)|k);break;case Node.COMMENT_NODE:const Ce=ps.exec(P.textContent||"");if(Ce){const dt=N[parseInt(Ce[1],10)];Cg(f,Ah,"",I,H),Ny(o,u,h,I,dt,H),QD(m,H,M)}}P=P.nextSibling}return k}function za(o,a,u){0===u&&o.push(a)}function QD(o,a,u){0===u&&(o.push(~a),o.push(a))}function Cg(o,a,u,h,f){null!==a&&o.push(a),o.push(u,f,function(o,a,u){return 0|a<<17|u<<1}(0,h,f))}function XD(o,a,u){o.push(a<<1|1,u.name,u.value)}function rI(o,a,u=-1){const h=Nt(),f=Ne(),m=20+o,b=ca(h.consts,a),C=Js();h.firstCreatePass&&function(o,a,u,h,f,m){const b=Js(),C=[],I=[],N=[[]],M=function(o){return o.replace(OA," ")}(f=function(o,a){if(function(o){return-1===o}(a))return eu(o);{const u=o.indexOf(`:${a}\ufffd`)+2+a.toString().length,h=o.search(new RegExp(`\ufffd\\/\\*\\d+:${a}\ufffd`));return eu(o.substring(u,h))}}(f,m)).split(kh);for(let k=0;k<M.length;k++){let P=M[k];if(0==(1&k)){const H=si(P);for(let Y=0;Y<H.length;Y++){let ae=H[Y];if(0==(1&Y)){const ee=ae;""!==ee&&Ty(o,b,N[0],C,I,u,ee)}else{const ee=ae;if("object"!=typeof ee)throw new Error(`Unable to parse ICU expression in "${f}" message.`);Ny(o,u,I,a,ee,Se(o,b,N[0],u,C,"",!0).index)}}}else{const H=47===P.charCodeAt(0),ae=(P.charCodeAt(H?1:0),20+Number.parseInt(P.substring(H?2:1)));if(H)N.shift(),Bi(Js(),!1);else{const ee=jD(o,N[0],ae);N.unshift([]),Bi(ee,!0)}}}o.data[h]={create:C,update:I}}(h,null===C?0:C.index,f,m,b,u);const I=h.data[m],M=oE(h,C===f[6]?null:C,f);(function(o,a,u,h){const f=o[11];for(let m=0;m<a.length;m++){const b=a[m++],C=a[m],I=(b&On.COMMENT)===On.COMMENT,N=(b&On.APPEND_EAGERLY)===On.APPEND_EAGERLY,M=b>>>On.SHIFT;let k=o[M];null===k&&(k=o[M]=I?f.createComment(C):T_(f,C)),N&&null!==u&&Fl(f,u,k,h,!1)}})(f,I.create,M,C&&8&C.type?f[C.index]:null),Td(!0)}function iI(o,a,u){rI(o,a,u),Td(!1)}function My(o){return function(o){o&&(vg|=1<<Math.min(bg,31)),bg++}(Br(Ne(),So(),o)),My}function Ni(o){!function(o,a,u){if(bg>0){const h=o.data[u];ow(o,a,Array.isArray(h)?h:h.update,as()-bg-1,vg)}vg=0,bg=0}(Nt(),Ne(),o+20)}function Dg(o,a,u,h,f){if(o=$(o),Array.isArray(o))for(let m=0;m<o.length;m++)Dg(o[m],a,u,h,f);else{const m=Nt(),b=Ne();let C=hc(o)?o:$(o.provide),I=_b(o);const N=nn(),M=1048575&N.providerIndexes,k=N.directiveStart,P=N.providerIndexes>>20;if(hc(o)||!o.multi){const H=new Md(I,f,Dn),Y=tu(C,a,f?M:M+P,k);-1===Y?(qt(eo(N,b),m,C),xy(m,o,a.length),a.push(C),N.directiveStart++,N.directiveEnd++,f&&(N.providerIndexes+=1048576),u.push(H),b.push(H)):(u[Y]=H,b[Y]=H)}else{const H=tu(C,a,M+P,k),Y=tu(C,a,M,M+P),ae=H>=0&&u[H],ee=Y>=0&&u[Y];if(f&&!ee||!f&&!ae){qt(eo(N,b),m,C);const Re=function(o,a,u,h,f){const m=new Md(o,u,Dn);return m.multi=[],m.index=a,m.componentProviders=0,Ya(m,f,h&&!u),m}(f?Pc:aI,u.length,f,h,I);!f&&ee&&(u[Y].providerFactory=Re),xy(m,o,a.length,0),a.push(C),N.directiveStart++,N.directiveEnd++,f&&(N.providerIndexes+=1048576),u.push(Re),b.push(Re)}else xy(m,o,H>-1?H:Y,Ya(u[f?Y:H],I,!f&&h));!f&&h&&ee&&u[Y].componentProviders++}}}function xy(o,a,u,h){const f=hc(a);if(f||function(o){return!!o.useClass}(a)){const b=(a.useClass||a).prototype.ngOnDestroy;if(b){const C=o.destroyHooks||(o.destroyHooks=[]);if(!f&&a.multi){const I=C.indexOf(u);-1===I?C.push(u,[h,b]):C[I+1].push(h,b)}else C.push(u,b)}}}function Ya(o,a,u){return u&&o.componentProviders++,o.multi.push(a)-1}function tu(o,a,u,h){for(let f=u;f<h;f++)if(a[f]===o)return f;return-1}function aI(o,a,u,h){return cw(this.multi,[])}function Pc(o,a,u,h){const f=this.multi;let m;if(this.providerFactory){const b=this.providerFactory.componentProviders,C=An(u,u[1],this.providerFactory.index,h);m=C.slice(0,b),cw(f,m);for(let I=b;I<C.length;I++)m.push(C[I])}else m=[],cw(f,m);return m}function cw(o,a){for(let u=0;u<o.length;u++)a.push((0,o[u])());return a}function dw(o,a=[]){return u=>{u.providersResolver=(h,f)=>function(o,a,u){const h=Nt();if(h.firstCreatePass){const f=Qr(o);Dg(u,h.data,h.blueprint,f,!0),Dg(a,h.data,h.blueprint,f,!1)}}(h,f?f(o):o,a)}}class ru{}const hw="ngComponent";class LA{resolveComponentFactory(a){throw function(o){const a=Error(`No component factory found for ${Q(o)}. Did you add it to @NgModule.entryComponents?`);return a[hw]=o,a}(a)}}let Vh=(()=>{class o{}return o.NULL=new LA,o})();function Za(...o){}function Uh(o,a){return new ms(Or(o,a))}const iu=function(){return Uh(nn(),Ne())};let ms=(()=>{class o{constructor(u){this.nativeElement=u}}return o.__NG_ELEMENT_ID__=iu,o})();function uI(o){return o instanceof ms?o.nativeElement:o}class Hh{}let fw=(()=>{class o{}return o.__NG_ELEMENT_ID__=()=>gw(),o})();const gw=function(){const o=Ne(),u=Jr(nn().index,o);return function(o){return o[11]}(is(u)?u:o)};let Tg=(()=>{class o{}return o.\u0275prov=Kt({token:o,providedIn:"root",factory:()=>null}),o})();class mw{constructor(a){this.full=a,this.major=a.split(".")[0],this.minor=a.split(".")[1],this.patch=a.split(".").slice(2).join(".")}}const _w=new mw("12.2.7");class yw{constructor(){}supports(a){return ph(a)}create(a){return new jA(a)}}const dI=(o,a)=>a;class jA{constructor(a){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=a||dI}forEachItem(a){let u;for(u=this._itHead;null!==u;u=u._next)a(u)}forEachOperation(a){let u=this._itHead,h=this._removalsHead,f=0,m=null;for(;u||h;){const b=!h||u&&u.currentIndex<pI(h,f,m)?u:h,C=pI(b,f,m),I=b.currentIndex;if(b===h)f--,h=h._nextRemoved;else if(u=u._next,null==b.previousIndex)f++;else{m||(m=[]);const N=C-f,M=I-f;if(N!=M){for(let P=0;P<N;P++){const H=P<m.length?m[P]:m[P]=0,Y=H+P;M<=Y&&Y<N&&(m[P]=H+1)}m[b.previousIndex]=M-N}}C!==I&&a(b,C,I)}}forEachPreviousItem(a){let u;for(u=this._previousItHead;null!==u;u=u._nextPrevious)a(u)}forEachAddedItem(a){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)a(u)}forEachMovedItem(a){let u;for(u=this._movesHead;null!==u;u=u._nextMoved)a(u)}forEachRemovedItem(a){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)a(u)}forEachIdentityChange(a){let u;for(u=this._identityChangesHead;null!==u;u=u._nextIdentityChange)a(u)}diff(a){if(null==a&&(a=[]),!ph(a))throw new Error(`Error trying to diff '${Q(a)}'. Only arrays and iterables are allowed`);return this.check(a)?this:null}onDestroy(){}check(a){this._reset();let f,m,b,u=this._itHead,h=!1;if(Array.isArray(a)){this.length=a.length;for(let C=0;C<this.length;C++)m=a[C],b=this._trackByFn(C,m),null!==u&&Object.is(u.trackById,b)?(h&&(u=this._verifyReinsertion(u,m,b,C)),Object.is(u.item,m)||this._addIdentityChange(u,m)):(u=this._mismatch(u,m,b,C),h=!0),u=u._next}else f=0,function(o,a){if(Array.isArray(o))for(let u=0;u<o.length;u++)a(o[u]);else{const u=o[_c()]();let h;for(;!(h=u.next()).done;)a(h.value)}}(a,C=>{b=this._trackByFn(f,C),null!==u&&Object.is(u.trackById,b)?(h&&(u=this._verifyReinsertion(u,C,b,f)),Object.is(u.item,C)||this._addIdentityChange(u,C)):(u=this._mismatch(u,C,b,f),h=!0),u=u._next,f++}),this.length=f;return this._truncate(u),this.collection=a,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let a;for(a=this._previousItHead=this._itHead;null!==a;a=a._next)a._nextPrevious=a._next;for(a=this._additionsHead;null!==a;a=a._nextAdded)a.previousIndex=a.currentIndex;for(this._additionsHead=this._additionsTail=null,a=this._movesHead;null!==a;a=a._nextMoved)a.previousIndex=a.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(a,u,h,f){let m;return null===a?m=this._itTail:(m=a._prev,this._remove(a)),null!==(a=null===this._unlinkedRecords?null:this._unlinkedRecords.get(h,null))?(Object.is(a.item,u)||this._addIdentityChange(a,u),this._reinsertAfter(a,m,f)):null!==(a=null===this._linkedRecords?null:this._linkedRecords.get(h,f))?(Object.is(a.item,u)||this._addIdentityChange(a,u),this._moveAfter(a,m,f)):a=this._addAfter(new fI(u,h),m,f),a}_verifyReinsertion(a,u,h,f){let m=null===this._unlinkedRecords?null:this._unlinkedRecords.get(h,null);return null!==m?a=this._reinsertAfter(m,a._prev,f):a.currentIndex!=f&&(a.currentIndex=f,this._addToMoves(a,f)),a}_truncate(a){for(;null!==a;){const u=a._next;this._addToRemovals(this._unlink(a)),a=u}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(a,u,h){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(a);const f=a._prevRemoved,m=a._nextRemoved;return null===f?this._removalsHead=m:f._nextRemoved=m,null===m?this._removalsTail=f:m._prevRemoved=f,this._insertAfter(a,u,h),this._addToMoves(a,h),a}_moveAfter(a,u,h){return this._unlink(a),this._insertAfter(a,u,h),this._addToMoves(a,h),a}_addAfter(a,u,h){return this._insertAfter(a,u,h),this._additionsTail=null===this._additionsTail?this._additionsHead=a:this._additionsTail._nextAdded=a,a}_insertAfter(a,u,h){const f=null===u?this._itHead:u._next;return a._next=f,a._prev=u,null===f?this._itTail=a:f._prev=a,null===u?this._itHead=a:u._next=a,null===this._linkedRecords&&(this._linkedRecords=new vw),this._linkedRecords.put(a),a.currentIndex=h,a}_remove(a){return this._addToRemovals(this._unlink(a))}_unlink(a){null!==this._linkedRecords&&this._linkedRecords.remove(a);const u=a._prev,h=a._next;return null===u?this._itHead=h:u._next=h,null===h?this._itTail=u:h._prev=u,a}_addToMoves(a,u){return a.previousIndex===u||(this._movesTail=null===this._movesTail?this._movesHead=a:this._movesTail._nextMoved=a),a}_addToRemovals(a){return null===this._unlinkedRecords&&(this._unlinkedRecords=new vw),this._unlinkedRecords.put(a),a.currentIndex=null,a._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=a,a._prevRemoved=null):(a._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=a),a}_addIdentityChange(a,u){return a.item=u,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=a:this._identityChangesTail._nextIdentityChange=a,a}}class fI{constructor(a,u){this.item=a,this.trackById=u,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class $A{constructor(){this._head=null,this._tail=null}add(a){null===this._head?(this._head=this._tail=a,a._nextDup=null,a._prevDup=null):(this._tail._nextDup=a,a._prevDup=this._tail,a._nextDup=null,this._tail=a)}get(a,u){let h;for(h=this._head;null!==h;h=h._nextDup)if((null===u||u<=h.currentIndex)&&Object.is(h.trackById,a))return h;return null}remove(a){const u=a._prevDup,h=a._nextDup;return null===u?this._head=h:u._nextDup=h,null===h?this._tail=u:h._prevDup=u,null===this._head}}class vw{constructor(){this.map=new Map}put(a){const u=a.trackById;let h=this.map.get(u);h||(h=new $A,this.map.set(u,h)),h.add(a)}get(a,u){const f=this.map.get(a);return f?f.get(a,u):null}remove(a){const u=a.trackById;return this.map.get(u).remove(a)&&this.map.delete(u),a}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function pI(o,a,u){const h=o.previousIndex;if(null===h)return h;let f=0;return u&&h<u.length&&(f=u[h]),h+a+f}class Fc{constructor(){}supports(a){return a instanceof Map||Ab(a)}create(){return new jh}}class jh{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(a){let u;for(u=this._mapHead;null!==u;u=u._next)a(u)}forEachPreviousItem(a){let u;for(u=this._previousMapHead;null!==u;u=u._nextPrevious)a(u)}forEachChangedItem(a){let u;for(u=this._changesHead;null!==u;u=u._nextChanged)a(u)}forEachAddedItem(a){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)a(u)}forEachRemovedItem(a){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)a(u)}diff(a){if(a){if(!(a instanceof Map||Ab(a)))throw new Error(`Error trying to diff '${Q(a)}'. Only maps and objects are allowed`)}else a=new Map;return this.check(a)?this:null}onDestroy(){}check(a){this._reset();let u=this._mapHead;if(this._appendAfter=null,this._forEach(a,(h,f)=>{if(u&&u.key===f)this._maybeAddToChanges(u,h),this._appendAfter=u,u=u._next;else{const m=this._getOrCreateRecordForKey(f,h);u=this._insertBeforeOrAppend(u,m)}}),u){u._prev&&(u._prev._next=null),this._removalsHead=u;for(let h=u;null!==h;h=h._nextRemoved)h===this._mapHead&&(this._mapHead=null),this._records.delete(h.key),h._nextRemoved=h._next,h.previousValue=h.currentValue,h.currentValue=null,h._prev=null,h._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(a,u){if(a){const h=a._prev;return u._next=a,u._prev=h,a._prev=u,h&&(h._next=u),a===this._mapHead&&(this._mapHead=u),this._appendAfter=a,a}return this._appendAfter?(this._appendAfter._next=u,u._prev=this._appendAfter):this._mapHead=u,this._appendAfter=u,null}_getOrCreateRecordForKey(a,u){if(this._records.has(a)){const f=this._records.get(a);this._maybeAddToChanges(f,u);const m=f._prev,b=f._next;return m&&(m._next=b),b&&(b._prev=m),f._next=null,f._prev=null,f}const h=new bw(a);return this._records.set(a,h),h.currentValue=u,this._addToAdditions(h),h}_reset(){if(this.isDirty){let a;for(this._previousMapHead=this._mapHead,a=this._previousMapHead;null!==a;a=a._next)a._nextPrevious=a._next;for(a=this._changesHead;null!==a;a=a._nextChanged)a.previousValue=a.currentValue;for(a=this._additionsHead;null!=a;a=a._nextAdded)a.previousValue=a.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(a,u){Object.is(u,a.currentValue)||(a.previousValue=a.currentValue,a.currentValue=u,this._addToChanges(a))}_addToAdditions(a){null===this._additionsHead?this._additionsHead=this._additionsTail=a:(this._additionsTail._nextAdded=a,this._additionsTail=a)}_addToChanges(a){null===this._changesHead?this._changesHead=this._changesTail=a:(this._changesTail._nextChanged=a,this._changesTail=a)}_forEach(a,u){a instanceof Map?a.forEach(u):Object.keys(a).forEach(h=>u(a[h],h))}}class bw{constructor(a){this.key=a,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Ng(){return new Sg([new yw])}let Sg=(()=>{class o{constructor(u){this.factories=u}static create(u,h){if(null!=h){const f=h.factories.slice();u=u.concat(f)}return new o(u)}static extend(u){return{provide:o,useFactory:h=>o.create(u,h||Ng()),deps:[[o,new dr,new Ms]]}}find(u){const h=this.factories.find(f=>f.supports(u));if(null!=h)return h;throw new Error(`Cannot find a differ supporting object '${u}' of type '${function(o){return o.name||typeof o}(u)}'`)}}return o.\u0275prov=Kt({token:o,providedIn:"root",factory:Ng}),o})();function mI(){return new $h([new Fc])}let $h=(()=>{class o{constructor(u){this.factories=u}static create(u,h){if(h){const f=h.factories.slice();u=u.concat(f)}return new o(u)}static extend(u){return{provide:o,useFactory:h=>o.create(u,h||mI()),deps:[[o,new dr,new Ms]]}}find(u){const h=this.factories.find(f=>f.supports(u));if(h)return h;throw new Error(`Cannot find a differ supporting object '${u}'`)}}return o.\u0275prov=Kt({token:o,providedIn:"root",factory:mI}),o})();function Oy(o,a,u,h,f=!1){for(;null!==u;){const m=a[u.index];if(null!==m&&h.push(ln(m)),Vi(m))for(let C=10;C<m.length;C++){const I=m[C],N=I[1].firstChild;null!==N&&Oy(I[1],I,N,h)}const b=u.type;if(8&b)Oy(o,a,u.child,h);else if(32&b){const C=nh(u,a);let I;for(;I=C();)h.push(I)}else if(16&b){const C=V0(a,u);if(Array.isArray(C))h.push(...C);else{const I=Mp(a[16]);Oy(I[1],I,C,h,!0)}}u=f?u.projectionNext:u.next}return h}class Lc{constructor(a,u){this._lView=a,this._cdRefInjectingView=u,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const a=this._lView,u=a[1];return Oy(u,a,u.firstChild,[])}get context(){return this._lView[8]}set context(a){this._lView[8]=a}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const a=this._lView[3];if(Vi(a)){const u=a[8],h=u?u.indexOf(this):-1;h>-1&&(S_(a,h),Fo(u,h))}this._attachedToViewContainer=!1}iE(this._lView[1],this._lView)}onDestroy(a){Op(this._lView[1],this._lView,null,a)}markForCheck(){Z_(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){ub(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(o,a,u){Id(!0);try{ub(o,a,u)}finally{Id(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){var a;this._appRef=null,sc(this._lView[1],a=this._lView,a[11],2,null,null)}attachToAppRef(a){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=a}}class GA extends Lc{constructor(a){super(a),this._view=a}detectChanges(){OE(this._view)}checkNoChanges(){!function(o){Id(!0);try{OE(o)}finally{Id(!1)}}(this._view)}get context(){return null}}const Cw=function(o){return function(o,a,u){if(md(o)&&!u){const h=Jr(o.index,a);return new Lc(h,h)}return 47&o.type?new Lc(a[16],a):null}(nn(),Ne(),16==(16&o))};let Ar=(()=>{class o{}return o.__NG_ELEMENT_ID__=Cw,o})();const zA=[new Fc],ZA=new Sg([new yw]),KA=new $h(zA),_I=function(){return Gh(nn(),Ne())};let Vc=(()=>{class o{}return o.__NG_ELEMENT_ID__=_I,o})();const Py=Vc,Ag=class extends Py{constructor(a,u,h){super(),this._declarationLView=a,this._declarationTContainer=u,this.elementRef=h}createEmbeddedView(a){const u=this._declarationTContainer.tViews,h=oh(this._declarationLView,u,a,16,null,u.declTNode,null,null,null,null);h[17]=this._declarationLView[this._declarationTContainer.index];const m=this._declarationLView[19];return null!==m&&(h[19]=m.createEmbeddedView(u)),lc(u,h,a),new Lc(h)}};function Gh(o,a){return 4&o.type?new Ag(a,o,Uh(o,a)):null}class Ka{}class Ly{}const vI=function(){return By(nn(),Ne())};let Vy=(()=>{class o{}return o.__NG_ELEMENT_ID__=vI,o})();const XA=Vy,Dw=class extends XA{constructor(a,u,h){super(),this._lContainer=a,this._hostTNode=u,this._hostLView=h}get element(){return Uh(this._hostTNode,this._hostLView)}get injector(){return new xo(this._hostTNode,this._hostLView)}get parentInjector(){const a=We(this._hostTNode,this._hostLView);if(Cn(a)){const u=Vu(a,this._hostLView),h=fa(a);return new xo(u[1].data[h+8],u)}return new xo(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(a){const u=Mg(this._lContainer);return null!==u&&u[a]||null}get length(){return this._lContainer.length-10}createEmbeddedView(a,u,h){const f=a.createEmbeddedView(u||{});return this.insert(f,h),f}createComponent(a,u,h,f,m){const b=h||this.parentInjector;if(!m&&null==a.ngModule&&b){const I=b.get(Ka,null);I&&(m=I)}const C=a.create(b,f,void 0,m);return this.insert(C.hostView,u),C}insert(a,u){const h=a._lView,f=h[1];if(Vi(h[3])){const M=this.indexOf(a);if(-1!==M)this.detach(M);else{const k=h[3],P=new Dw(k,k[6],k[3]);P.detach(P.indexOf(a))}}const m=this._adjustIndex(u),b=this._lContainer;!function(o,a,u,h){const f=10+h,m=u.length;h>0&&(u[f-1][4]=a),h<m-10?(a[4]=u[f],ma(u,10+h,a)):(u.push(a),a[4]=null),a[3]=u;const b=a[17];null!==b&&u!==b&&function(o,a){const u=o[9];a[16]!==a[3][3][16]&&(o[2]=!0),null===u?o[9]=[a]:u.push(a)}(b,a);const C=a[19];null!==C&&C.insertView(o),a[2]|=128}(f,h,b,m);const C=B0(m,b),I=h[11],N=A_(I,b[7]);return null!==N&&function(o,a,u,h,f,m){h[0]=f,h[6]=a,sc(o,h,u,1,f,m)}(f,b[6],I,h,N,C),a.attachToViewContainerRef(),ma(Bc(b),m,a),a}move(a,u){return this.insert(a,u)}indexOf(a){const u=Mg(this._lContainer);return null!==u?u.indexOf(a):-1}remove(a){const u=this._adjustIndex(a,-1),h=S_(this._lContainer,u);h&&(Fo(Bc(this._lContainer),u),iE(h[1],h))}detach(a){const u=this._adjustIndex(a,-1),h=S_(this._lContainer,u);return h&&null!=Fo(Bc(this._lContainer),u)?new Lc(h):null}_adjustIndex(a,u=0){return null==a?this.length+u:a}};function Mg(o){return o[8]}function Bc(o){return o[8]||(o[8]=[])}function By(o,a){let u;const h=a[o.index];if(Vi(h))u=h;else{let f;if(8&o.type)f=ln(h);else{const m=a[11];f=m.createComment("");const b=Or(o,a);Fl(m,A_(m,b),f,function(o,a){return an(o)?o.nextSibling(a):a.nextSibling}(m,b),!1)}a[o.index]=u=xE(h,a,f,o),Lp(a,u)}return new Dw(u,o,a)}const lu={};class Kw extends Vh{constructor(a){super(),this.ngModule=a}resolveComponentFactory(a){const u=cr(a);return new HI(u,this.ngModule)}}function BI(o){const a=[];for(let u in o)o.hasOwnProperty(u)&&a.push({propName:o[u],templateName:u});return a}const UI=new hn("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>tc});class HI extends ru{constructor(a,u){super(),this.componentDef=a,this.ngModule=u,this.componentType=a.type,this.selector=a.selectors.map(PS).join(","),this.ngContentSelectors=a.ngContentSelectors?a.ngContentSelectors:[],this.isBoundToModule=!!u}get inputs(){return BI(this.componentDef.inputs)}get outputs(){return BI(this.componentDef.outputs)}create(a,u,h,f){const m=(f=f||this.ngModule)?function(o,a){return{get:(u,h,f)=>{const m=o.get(u,lu,f);return m!==lu||h===lu?m:a.get(u,h,f)}}}(a,f.injector):a,b=m.get(Hh,Qs),C=m.get(Tg,null),I=b.createRenderer(null,this.componentDef),N=this.componentDef.selectors[0][0]||"div",M=h?function(o,a,u){if(an(o))return o.selectRootElement(a,u===Pe.ShadowDom);let h="string"==typeof a?o.querySelector(a):a;return h.textContent="",h}(I,h,this.componentDef.encapsulation):P0(b.createRenderer(null,this.componentDef),N,function(o){const a=o.toLowerCase();return"svg"===a?"http://www.w3.org/2000/svg":"math"===a?"http://www.w3.org/1998/MathML/":null}(N)),k=this.componentDef.onPush?576:528,P=function(o,a){return{components:[],scheduler:o||tc,clean:PE,playerHandler:a||null,flags:0}}(),H=Hl(0,null,null,1,0,null,null,null,null,null),Y=oh(null,H,P,k,null,null,b,I,C,m);let ae,ee;Sd(Y);try{const Re=function(o,a,u,h,f,m){const b=u[1];u[20]=o;const I=Pa(b,20,2,"#host",null),N=I.mergedAttrs=a.hostAttrs;null!==N&&(jl(I,N,!0),null!==o&&(Ts(f,o,N),null!==I.classes&&H0(f,o,I.classes),null!==I.styles&&dE(f,o,I.styles)));const M=h.createRenderer(o,a),k=oh(u,Vr(a),null,a.onPush?64:16,u[20],I,h,M,m||null,null);return b.firstCreatePass&&(qt(eo(I,u),b,a.type),q_(b,I),sb(I,u.length,1)),Lp(u,k),u[20]=k}(M,this.componentDef,Y,b,I);if(M)if(h)Ts(I,M,["ng-version",_w.full]);else{const{attrs:Ce,classes:qe}=function(o){const a=[],u=[];let h=1,f=2;for(;h<o.length;){let m=o[h];if("string"==typeof m)2===f?""!==m&&a.push(m,o[++h]):8===f&&u.push(m);else{if(!ao(f))break;f=m}h++}return{attrs:a,classes:u}}(this.componentDef.selectors[0]);Ce&&Ts(I,M,Ce),qe&&qe.length>0&&H0(I,M,qe.join(" "))}if(ee=wd(H,20),void 0!==u){const Ce=ee.projection=[];for(let qe=0;qe<this.ngContentSelectors.length;qe++){const dt=u[qe];Ce.push(null!=dt?Array.from(dt):null)}}ae=function(o,a,u,h,f){const m=u[1],b=function(o,a,u){const h=nn();o.firstCreatePass&&(u.providersResolver&&u.providersResolver(u),RE(o,h,a,Ul(o,a,1,null),u));const f=An(a,o,h.directiveStart,h);fr(f,a);const m=Or(h,a);return m&&fr(m,a),f}(m,u,a);if(h.components.push(b),o[8]=b,f&&f.forEach(I=>I(b,a)),a.contentQueries){const I=nn();a.contentQueries(1,b,I.directiveStart)}const C=nn();return!m.firstCreatePass||null===a.hostBindings&&null===a.hostAttrs||(yl(C.index),G_(u[1],C,0,C.directiveStart,C.directiveEnd,a),Ir(a,b)),b}(Re,this.componentDef,Y,P,[iy]),lc(H,Y,null)}finally{Fu()}return new EM(this.componentType,ae,Uh(ee,Y),Y,ee)}}class EM extends class{}{constructor(a,u,h,f,m){super(),this.location=h,this._rootLView=f,this._tNode=m,this.instance=u,this.hostView=this.changeDetectorRef=new GA(f),this.componentType=a}get injector(){return new xo(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(a){this.hostView.onDestroy(a)}}const uu=new Map;class Xw extends Ka{constructor(a,u){super(),this._parent=u,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new Kw(this);const h=Fi(a),f=a[ft]||null;f&&Iy(f),this._bootstrapComponents=$i(h.bootstrap),this._r3Injector=gb(a,u,[{provide:Ka,useValue:this},{provide:Vh,useValue:this.componentFactoryResolver}],Q(a)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(a)}get(a,u=cn.THROW_IF_NOT_FOUND,h=Ye.Default){return a===cn||a===Ka||a===uc?this:this._r3Injector.get(a,u,h)}destroy(){const a=this._r3Injector;!a.destroyed&&a.destroy(),this.destroyCbs.forEach(u=>u()),this.destroyCbs=null}onDestroy(a){this.destroyCbs.push(a)}}class Jy extends Ly{constructor(a){super(),this.moduleType=a,null!==Fi(a)&&function(o){const a=new Set;!function u(h){const f=Fi(h,!0),m=f.id;null!==m&&(function(o,a,u){if(a&&a!==u)throw new Error(`Duplicate module registered for ${o} - ${Q(a)} vs ${Q(a.name)}`)}(m,uu.get(m),h),uu.set(m,h));const b=$i(f.imports);for(const C of b)a.has(C)||(a.add(C),u(C))}(o)}(a)}create(a){return new Xw(this.moduleType,a)}}function t1(o,a,u,h){return WI(Ne(),Pn(),o,a,u,h)}function Xy(o,a,u,h,f){return function(o,a,u,h,f,m,b){const C=a+u;return $a(o,C,f,m)?Vs(o,C+2,b?h.call(b,f,m):h(f,m)):Zh(o,C+2)}(Ne(),Pn(),o,a,u,h,f)}function Yc(o,a,u,h,f,m){return function(o,a,u,h,f,m,b,C){const I=a+u;return function(o,a,u,h,f){const m=$a(o,a,u,h);return Br(o,a+2,f)||m}(o,I,f,m,b)?Vs(o,I+3,C?h.call(C,f,m,b):h(f,m,b)):Zh(o,I+3)}(Ne(),Pn(),o,a,u,h,f,m)}function Zh(o,a){const u=o[a];return u===pt?void 0:u}function WI(o,a,u,h,f,m){const b=a+u;return Br(o,b,f)?Vs(o,b+1,m?h.call(m,f):h(f)):Zh(o,b+1)}function Zc(o,a){const u=Nt();let h;const f=o+20;u.firstCreatePass?(h=function(o,a){if(a)for(let u=a.length-1;u>=0;u--){const h=a[u];if(o===h.name)return h}throw new be("302",`The pipe '${o}' could not be found!`)}(a,u.pipeRegistry),u.data[f]=h,h.onDestroy&&(u.destroyHooks||(u.destroyHooks=[])).push(f,h.onDestroy)):h=u.data[f];const m=h.factory||(h.factory=Io(h.type)),b=ki(Dn);try{const C=xd(!1),I=m();return xd(C),function(o,a,u,h){u>=o.data.length&&(o.data[u]=null,o.blueprint[u]=null),a[u]=h}(u,Ne(),f,I),I}finally{ki(b)}}function ev(o,a,u){const h=o+20,f=Ne(),m=No(f,h);return function(o,a){Wi.isWrapped(a)&&(a=Wi.unwrap(a),o[as()]=pt);return a}(f,function(o,a){return o[1].data[a].pure}(f,h)?WI(f,Pn(),a,m.transform,u,m):m.transform(u))}function Kc(o){return a=>{setTimeout(o,void 0,a)}}const Ko=class extends d.xQ{constructor(a=!1){super(),this.__isAsync=a}emit(a){super.next(a)}subscribe(a,u,h){var f,m,b;let C=a,I=u||(()=>null),N=h;if(a&&"object"==typeof a){const k=a;C=null===(f=k.next)||void 0===f?void 0:f.bind(k),I=null===(m=k.error)||void 0===m?void 0:m.bind(k),N=null===(b=k.complete)||void 0===b?void 0:b.bind(k)}this.__isAsync&&(I=Kc(I),C&&(C=Kc(C)),N&&(N=Kc(N)));const M=super.subscribe({next:C,error:I,complete:N});return a instanceof X.w&&a.add(M),M}};function yn(){return this._results[_c()]()}class mr{constructor(a=!1){this._emitDistinctChangesOnly=a,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const u=_c(),h=mr.prototype;h[u]||(h[u]=yn)}get changes(){return this._changes||(this._changes=new Ko)}get(a){return this._results[a]}map(a){return this._results.map(a)}filter(a){return this._results.filter(a)}find(a){return this._results.find(a)}reduce(a,u){return this._results.reduce(a,u)}forEach(a){this._results.forEach(a)}some(a){return this._results.some(a)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(a,u){const h=this;h.dirty=!1;const f=ji(a);(this._changesDetected=!function(o,a,u){if(o.length!==a.length)return!1;for(let h=0;h<o.length;h++){let f=o[h],m=a[h];if(u&&(f=u(f),m=u(m)),m!==f)return!1}return!0}(h._results,f,u))&&(h._results=f,h.length=f.length,h.last=f[this.length-1],h.first=f[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;class Qh{constructor(a){this.queryList=a,this.matches=null}clone(){return new Qh(this.queryList)}setDirty(){this.queryList.setDirty()}}class nv{constructor(a=[]){this.queries=a}createEmbeddedView(a){const u=a.queries;if(null!==u){const h=null!==a.contentQueries?a.contentQueries[0]:u.length,f=[];for(let m=0;m<h;m++){const b=u.getByIndex(m);f.push(this.queries[b.indexInDeclarationView].clone())}return new nv(f)}return null}insertView(a){this.dirtyQueriesWithMatches(a)}detachView(a){this.dirtyQueriesWithMatches(a)}dirtyQueriesWithMatches(a){for(let u=0;u<this.queries.length;u++)null!==OM(a,u).matches&&this.queries[u].setDirty()}}class r1{constructor(a,u,h=null){this.predicate=a,this.flags=u,this.read=h}}class i1{constructor(a=[]){this.queries=a}elementStart(a,u){for(let h=0;h<this.queries.length;h++)this.queries[h].elementStart(a,u)}elementEnd(a){for(let u=0;u<this.queries.length;u++)this.queries[u].elementEnd(a)}embeddedTView(a){let u=null;for(let h=0;h<this.length;h++){const f=null!==u?u.length:0,m=this.getByIndex(h).embeddedTView(a,f);m&&(m.indexInDeclarationView=h,null!==u?u.push(m):u=[m])}return null!==u?new i1(u):null}template(a,u){for(let h=0;h<this.queries.length;h++)this.queries[h].template(a,u)}getByIndex(a){return this.queries[a]}get length(){return this.queries.length}track(a){this.queries.push(a)}}class Gg{constructor(a,u=-1){this.metadata=a,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=u}elementStart(a,u){this.isApplyingToNode(u)&&this.matchTNode(a,u)}elementEnd(a){this._declarationNodeIndex===a.index&&(this._appliesToNextNode=!1)}template(a,u){this.elementStart(a,u)}embeddedTView(a,u){return this.isApplyingToNode(a)?(this.crossesNgTemplate=!0,this.addMatch(-a.index,u),new Gg(this.metadata)):null}isApplyingToNode(a){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const u=this._declarationNodeIndex;let h=a.parent;for(;null!==h&&8&h.type&&h.index!==u;)h=h.parent;return u===(null!==h?h.index:-1)}return this._appliesToNextNode}matchTNode(a,u){const h=this.metadata.predicate;if(Array.isArray(h))for(let f=0;f<h.length;f++){const m=h[f];this.matchTNodeWithReadOption(a,u,AM(u,m)),this.matchTNodeWithReadOption(a,u,Ro(u,a,m,!1,!1))}else h===Vc?4&u.type&&this.matchTNodeWithReadOption(a,u,-1):this.matchTNodeWithReadOption(a,u,Ro(u,a,h,!1,!1))}matchTNodeWithReadOption(a,u,h){if(null!==h){const f=this.metadata.read;if(null!==f)if(f===ms||f===Vy||f===Vc&&4&u.type)this.addMatch(u.index,-2);else{const m=Ro(u,a,f,!1,!1);null!==m&&this.addMatch(u.index,m)}else this.addMatch(u.index,h)}}addMatch(a,u){null===this.matches?this.matches=[a,u]:this.matches.push(a,u)}}function AM(o,a){const u=o.localNames;if(null!==u)for(let h=0;h<u.length;h+=2)if(u[h]===a)return u[h+1];return null}function jn(o,a,u,h){return-1===u?function(o,a){return 11&o.type?Uh(o,a):4&o.type?Gh(o,a):null}(a,o):-2===u?function(o,a,u){return u===ms?Uh(a,o):u===Vc?Gh(a,o):u===Vy?By(a,o):void 0}(o,a,h):An(o,o[1],u,a)}function RM(o,a,u,h){const f=a[19].queries[h];if(null===f.matches){const m=o.data,b=u.matches,C=[];for(let I=0;I<b.length;I+=2){const N=b[I];C.push(N<0?null:jn(a,m[N],b[I+1],u.metadata.read))}f.matches=C}return f.matches}function Kn(o,a,u,h){const f=o.queries.getByIndex(u),m=f.matches;if(null!==m){const b=RM(o,a,f,u);for(let C=0;C<m.length;C+=2){const I=m[C];if(I>0)h.push(b[C/2]);else{const N=m[C+1],M=a[-I];for(let k=10;k<M.length;k++){const P=M[k];P[17]===P[3]&&Kn(P[1],P,N,h)}if(null!==M[9]){const k=M[9];for(let P=0;P<k.length;P++){const H=k[P];Kn(H[1],H,N,h)}}}}}return h}function s1(o){const a=Ne(),u=Nt(),h=Um();Pu(h+1);const f=OM(u,h);if(o.dirty&&Ff(a)===(2==(2&f.metadata.flags))){if(null===f.matches)o.reset([]);else{const m=f.crossesNgTemplate?Kn(u,a,h,[]):RM(u,a,f,h);o.reset(m,uI),o.notifyOnChanges()}return!0}return!1}function nT(o,a,u){const h=Nt();h.firstCreatePass&&(sT(h,new r1(o,a,u),-1),2==(2&a)&&(h.staticViewQueries=!0)),iT(h,Ne(),a)}function rT(o,a,u,h){const f=Nt();if(f.firstCreatePass){const m=nn();sT(f,new r1(a,u,h),m.index),function(o,a){const u=o.contentQueries||(o.contentQueries=[]);a!==(u.length?u[u.length-1]:-1)&&u.push(o.queries.length-1,a)}(f,o),2==(2&u)&&(f.staticContentQueries=!0)}iT(f,Ne(),u)}function o1(){return o=Ne(),a=Um(),o[19].queries[a].queryList;var o,a}function iT(o,a,u){const h=new mr(4==(4&u));Op(o,a,h,h.destroy),null===a[19]&&(a[19]=new nv),a[19].queries.push(new Qh(h))}function sT(o,a,u){null===o.queries&&(o.queries=new i1),o.queries.track(new Gg(a,u))}function OM(o,a){return o.queries.getByIndex(a)}function oT(o,a){return Gh(o,a)}const fu=new hn("Application Initializer");let pu=(()=>{class o{constructor(u){this.appInits=u,this.resolve=Za,this.reject=Za,this.initialized=!1,this.done=!1,this.donePromise=new Promise((h,f)=>{this.resolve=h,this.reject=f})}runInitializers(){if(this.initialized)return;const u=[],h=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let f=0;f<this.appInits.length;f++){const m=this.appInits[f]();if(ng(m))u.push(m);else if(Eh(m)){const b=new Promise((C,I)=>{m.subscribe({complete:C,error:I})});u.push(b)}}Promise.all(u).then(()=>{h()}).catch(f=>{this.reject(f)}),0===u.length&&h(),this.initialized=!0}}return o.\u0275fac=function(u){return new(u||o)(sn(fu,8))},o.\u0275prov=Kt({token:o,factory:o.\u0275fac}),o})();const mT=new hn("AppId"),nR={provide:mT,useFactory:function(){return`${g1()}${g1()}${g1()}`},deps:[]};function g1(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const _T=new hn("Platform Initializer"),yT=new hn("Platform ID"),vT=new hn("appBootstrapListener");let bT=(()=>{class o{log(u){console.log(u)}warn(u){console.warn(u)}}return o.\u0275fac=function(u){return new(u||o)},o.\u0275prov=Kt({token:o,factory:o.\u0275fac}),o})();const uv=new hn("LocaleId"),wT=new hn("DefaultCurrencyCode");class sR{constructor(a,u){this.ngModuleFactory=a,this.componentFactories=u}}const _1=function(o){return new Jy(o)},DT=_1,$s=function(o){return Promise.resolve(_1(o))},y1=function(o){const a=_1(o),h=$i(Fi(o).declarations).reduce((f,m)=>{const b=cr(m);return b&&f.push(new HI(b)),f},[]);return new sR(a,h)},IT=y1,Si=function(o){return Promise.resolve(y1(o))};let Jg=(()=>{class o{constructor(){this.compileModuleSync=DT,this.compileModuleAsync=$s,this.compileModuleAndAllComponentsSync=IT,this.compileModuleAndAllComponentsAsync=Si}clearCache(){}clearCacheFor(u){}getModuleId(u){}}return o.\u0275fac=function(u){return new(u||o)},o.\u0275prov=Kt({token:o,factory:o.\u0275fac}),o})();const Xc=(()=>Promise.resolve(0))();function Xg(o){"undefined"==typeof Zone?Xc.then(()=>{o&&o.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",o)}class ys{constructor({enableLongStackTrace:a=!1,shouldCoalesceEventChangeDetection:u=!1,shouldCoalesceRunChangeDetection:h=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Ko(!1),this.onMicrotaskEmpty=new Ko(!1),this.onStable=new Ko(!1),this.onError=new Ko(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const f=this;f._nesting=0,f._outer=f._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(f._inner=f._inner.fork(new Zone.TaskTrackingZoneSpec)),a&&Zone.longStackTraceZoneSpec&&(f._inner=f._inner.fork(Zone.longStackTraceZoneSpec)),f.shouldCoalesceEventChangeDetection=!h&&u,f.shouldCoalesceRunChangeDetection=h,f.lastRequestAnimationFrameId=-1,f.nativeRequestAnimationFrame=function(){let o=Jt.requestAnimationFrame,a=Jt.cancelAnimationFrame;if("undefined"!=typeof Zone&&o&&a){const u=o[Zone.__symbol__("OriginalDelegate")];u&&(o=u);const h=a[Zone.__symbol__("OriginalDelegate")];h&&(a=h)}return{nativeRequestAnimationFrame:o,nativeCancelAnimationFrame:a}}().nativeRequestAnimationFrame,function(o){const a=()=>{!function(o){o.isCheckStableRunning||-1!==o.lastRequestAnimationFrameId||(o.lastRequestAnimationFrameId=o.nativeRequestAnimationFrame.call(Jt,()=>{o.fakeTopEventTask||(o.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{o.lastRequestAnimationFrameId=-1,w1(o),o.isCheckStableRunning=!0,b1(o),o.isCheckStableRunning=!1},void 0,()=>{},()=>{})),o.fakeTopEventTask.invoke()}),w1(o))}(o)};o._inner=o._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(u,h,f,m,b,C)=>{try{return TT(o),u.invokeTask(f,m,b,C)}finally{(o.shouldCoalesceEventChangeDetection&&"eventTask"===m.type||o.shouldCoalesceRunChangeDetection)&&a(),NT(o)}},onInvoke:(u,h,f,m,b,C,I)=>{try{return TT(o),u.invoke(f,m,b,C,I)}finally{o.shouldCoalesceRunChangeDetection&&a(),NT(o)}},onHasTask:(u,h,f,m)=>{u.hasTask(f,m),h===f&&("microTask"==m.change?(o._hasPendingMicrotasks=m.microTask,w1(o),b1(o)):"macroTask"==m.change&&(o.hasPendingMacrotasks=m.macroTask))},onHandleError:(u,h,f,m)=>(u.handleError(f,m),o.runOutsideAngular(()=>o.onError.emit(m)),!1)})}(f)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!ys.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(ys.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(a,u,h){return this._inner.run(a,u,h)}runTask(a,u,h,f){const m=this._inner,b=m.scheduleEventTask("NgZoneEvent: "+f,a,lR,Za,Za);try{return m.runTask(b,u,h)}finally{m.cancelTask(b)}}runGuarded(a,u,h){return this._inner.runGuarded(a,u,h)}runOutsideAngular(a){return this._outer.run(a)}}const lR={};function b1(o){if(0==o._nesting&&!o.hasPendingMicrotasks&&!o.isStable)try{o._nesting++,o.onMicrotaskEmpty.emit(null)}finally{if(o._nesting--,!o.hasPendingMicrotasks)try{o.runOutsideAngular(()=>o.onStable.emit(null))}finally{o.isStable=!0}}}function w1(o){o.hasPendingMicrotasks=!!(o._hasPendingMicrotasks||(o.shouldCoalesceEventChangeDetection||o.shouldCoalesceRunChangeDetection)&&-1!==o.lastRequestAnimationFrameId)}function TT(o){o._nesting++,o.isStable&&(o.isStable=!1,o.onUnstable.emit(null))}function NT(o){o._nesting--,b1(o)}class uR{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Ko,this.onMicrotaskEmpty=new Ko,this.onStable=new Ko,this.onError=new Ko}run(a,u,h){return a.apply(u,h)}runGuarded(a,u,h){return a.apply(u,h)}runOutsideAngular(a){return a()}runTask(a,u,h,f){return a.apply(u,h)}}let C1=(()=>{class o{constructor(u){this._ngZone=u,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),u.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{ys.assertNotInAngularZone(),Xg(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Xg(()=>{for(;0!==this._callbacks.length;){let u=this._callbacks.pop();clearTimeout(u.timeoutId),u.doneCb(this._didWork)}this._didWork=!1});else{let u=this.getPendingTasks();this._callbacks=this._callbacks.filter(h=>!h.updateCb||!h.updateCb(u)||(clearTimeout(h.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(u=>({source:u.source,creationLocation:u.creationLocation,data:u.data})):[]}addCallback(u,h,f){let m=-1;h&&h>0&&(m=setTimeout(()=>{this._callbacks=this._callbacks.filter(b=>b.timeoutId!==m),u(this._didWork,this.getPendingTasks())},h)),this._callbacks.push({doneCb:u,timeoutId:m,updateCb:f})}whenStable(u,h,f){if(f&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(u,h,f),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(u,h,f){return[]}}return o.\u0275fac=function(u){return new(u||o)(sn(ys))},o.\u0275prov=Kt({token:o,factory:o.\u0275fac}),o})(),ST=(()=>{class o{constructor(){this._applications=new Map,D1.addToWindow(this)}registerApplication(u,h){this._applications.set(u,h)}unregisterApplication(u){this._applications.delete(u)}unregisterAllApplications(){this._applications.clear()}getTestability(u){return this._applications.get(u)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(u,h=!0){return D1.findTestabilityInTree(this,u,h)}}return o.\u0275fac=function(u){return new(u||o)},o.\u0275prov=Kt({token:o,factory:o.\u0275fac}),o})();class AT{addToWindow(a){}findTestabilityInTree(a,u,h){return null}}function E1(o){D1=o}let D1=new AT,MT=!0,fv=!1;function nm(){return fv=!0,MT}function I1(){if(fv)throw new Error("Cannot enable prod mode after platform setup.");MT=!1}let vs;const rm=new hn("AllowMultipleToken");class OT{constructor(a,u){this.name=a,this.token=u}}function pv(o,a,u=[]){const h=`Platform: ${a}`,f=new hn(h);return(m=[])=>{let b=A1();if(!b||b.injector.get(rm,!1))if(o)o(u.concat(m).concat({provide:f,useValue:!0}));else{const C=u.concat(m).concat({provide:f,useValue:!0},{provide:Fa,useValue:"platform"});!function(o){if(vs&&!vs.destroyed&&!vs.injector.get(rm,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");vs=o.get(M1);const a=o.get(_T,null);a&&a.forEach(u=>u())}(cn.create({providers:C,name:h}))}return function(o){const a=A1();if(!a)throw new Error("No platform exists!");if(!a.injector.get(o,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return a}(f)}}function A1(){return vs&&!vs.destroyed?vs:null}let M1=(()=>{class o{constructor(u){this._injector=u,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(u,h){const C=function(o,a){let u;return u="noop"===o?new uR:("zone.js"===o?void 0:o)||new ys({enableLongStackTrace:nm(),shouldCoalesceEventChangeDetection:!!(null==a?void 0:a.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==a?void 0:a.ngZoneRunCoalescing)}),u}(h?h.ngZone:void 0,{ngZoneEventCoalescing:h&&h.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:h&&h.ngZoneRunCoalescing||!1}),I=[{provide:ys,useValue:C}];return C.run(()=>{const N=cn.create({providers:I,parent:this.injector,name:u.moduleType.name}),M=u.create(N),k=M.injector.get(y,null);if(!k)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return C.runOutsideAngular(()=>{const P=C.onError.subscribe({next:H=>{k.handleError(H)}});M.onDestroy(()=>{R1(this._modules,M),P.unsubscribe()})}),function(o,a,u){try{const h=u();return ng(h)?h.catch(f=>{throw a.runOutsideAngular(()=>o.handleError(f)),f}):h}catch(h){throw a.runOutsideAngular(()=>o.handleError(h)),h}}(k,C,()=>{const P=M.injector.get(pu);return P.runInitializers(),P.donePromise.then(()=>(Iy(M.injector.get(uv,gg)||gg),this._moduleDoBootstrap(M),M))})})}bootstrapModule(u,h=[]){const f=PT({},h);return function(o,a,u){const h=new Jy(u);return Promise.resolve(h)}(0,0,u).then(m=>this.bootstrapModuleFactory(m,f))}_moduleDoBootstrap(u){const h=u.injector.get(im);if(u._bootstrapComponents.length>0)u._bootstrapComponents.forEach(f=>h.bootstrap(f));else{if(!u.instance.ngDoBootstrap)throw new Error(`The module ${Q(u.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);u.instance.ngDoBootstrap(h)}this._modules.push(u)}onDestroy(u){this._destroyListeners.push(u)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(u=>u.destroy()),this._destroyListeners.forEach(u=>u()),this._destroyed=!0}get destroyed(){return this._destroyed}}return o.\u0275fac=function(u){return new(u||o)(sn(cn))},o.\u0275prov=Kt({token:o,factory:o.\u0275fac}),o})();function PT(o,a){return Array.isArray(a)?a.reduce(PT,o):Object.assign(Object.assign({},o),a)}let im=(()=>{class o{constructor(u,h,f,m,b){this._zone=u,this._injector=h,this._exceptionHandler=f,this._componentFactoryResolver=m,this._initStatus=b,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const C=new G.y(N=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{N.next(this._stable),N.complete()})}),I=new G.y(N=>{let M;this._zone.runOutsideAngular(()=>{M=this._zone.onStable.subscribe(()=>{ys.assertNotInAngularZone(),Xg(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,N.next(!0))})})});const k=this._zone.onUnstable.subscribe(()=>{ys.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{N.next(!1)}))});return()=>{M.unsubscribe(),k.unsubscribe()}});this.isStable=(0,ye.T)(C,I.pipe((0,he.B)()))}bootstrap(u,h){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let f;f=u instanceof ru?u:this._componentFactoryResolver.resolveComponentFactory(u),this.componentTypes.push(f.componentType);const m=function(o){return o.isBoundToModule}(f)?void 0:this._injector.get(Ka),C=f.create(cn.NULL,[],h||f.selector,m),I=C.location.nativeElement,N=C.injector.get(C1,null),M=N&&C.injector.get(ST);return N&&M&&M.registerApplication(I,N),C.onDestroy(()=>{this.detachView(C.hostView),R1(this.components,C),M&&M.unregisterApplication(I)}),this._loadComponent(C),C}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let u of this._views)u.detectChanges()}catch(u){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(u))}finally{this._runningTick=!1}}attachView(u){const h=u;this._views.push(h),h.attachToAppRef(this)}detachView(u){const h=u;R1(this._views,h),h.detachFromAppRef()}_loadComponent(u){this.attachView(u.hostView),this.tick(),this.components.push(u),this._injector.get(vT,[]).concat(this._bootstrapListeners).forEach(f=>f(u))}ngOnDestroy(){this._views.slice().forEach(u=>u.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return o.\u0275fac=function(u){return new(u||o)(sn(ys),sn(cn),sn(y),sn(Vh),sn(pu))},o.\u0275prov=Kt({token:o,factory:o.\u0275fac}),o})();function R1(o,a){const u=o.indexOf(a);u>-1&&o.splice(u,1)}class EO{}class yR{}const vR={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let bR=(()=>{class o{constructor(u,h){this._compiler=u,this._config=h||vR}load(u){return this.loadAndCompile(u)}loadAndCompile(u){let[h,f]=u.split("#");return void 0===f&&(f="default"),B(8255)(h).then(m=>m[f]).then(m=>O1(m,h,f)).then(m=>this._compiler.compileModuleAsync(m))}loadFactory(u){let[h,f]=u.split("#"),m="NgFactory";return void 0===f&&(f="default",m=""),B(8255)(this._config.factoryPathPrefix+h+this._config.factoryPathSuffix).then(b=>b[f+m]).then(b=>O1(b,h,f))}}return o.\u0275fac=function(u){return new(u||o)(sn(Jg),sn(yR,8))},o.\u0275prov=Kt({token:o,factory:o.\u0275fac}),o})();function O1(o,a,u){if(!o)throw new Error(`Cannot find '${u}' in '${a}'`);return o}const NR=function(o){return null},MR=pv(null,"core",[{provide:yT,useValue:"unknown"},{provide:M1,deps:[cn]},{provide:ST,deps:[]},{provide:bT,deps:[]}]),xR=[{provide:im,useClass:im,deps:[ys,cn,y,Vh,pu]},{provide:UI,deps:[ys],useFactory:function(o){let a=[];return o.onStable.subscribe(()=>{for(;a.length;)a.pop()()}),function(u){a.push(u)}}},{provide:pu,useClass:pu,deps:[[new Ms,fu]]},{provide:Jg,useClass:Jg,deps:[]},nR,{provide:Sg,useFactory:function(){return ZA},deps:[]},{provide:$h,useFactory:function(){return KA},deps:[]},{provide:uv,useFactory:function(o){return Iy(o=o||"undefined"!=typeof $localize&&$localize.locale||gg),o},deps:[[new va(uv),new Ms,new dr]]},{provide:wT,useValue:"USD"}];let kR=(()=>{class o{constructor(u){}}return o.\u0275fac=function(u){return new(u||o)(sn(im))},o.\u0275mod=fd({type:o}),o.\u0275inj=St({providers:xR}),o})()},8939:(He,Ee,B)=>{"use strict";B.d(Ee,{hO:()=>se,xv:()=>j,Dh:()=>Q,GT:()=>J,on:()=>L,pX:()=>he});var d=B(7716),X=B(7841),G=B(9126);He=B.hmd(He);const ye=["ngOnDestroy"],he=(ve,be,fe,Te={})=>new Proxy(ve,{get:(pe,_e)=>fe.runOutsideAngular(()=>{var Fe;if(ve[_e])return(null===(Fe=null==Te?void 0:Te.spy)||void 0===Fe?void 0:Fe.get)&&Te.spy.get(_e,ve[_e]),ve[_e];if(ye.indexOf(_e)>-1)return()=>{};const Be=be.toPromise().then(st=>{const Vt=st&&st[_e];return"function"==typeof Vt?Vt.bind(st):Vt&&Vt.then?Vt.then(It=>fe.run(()=>It)):fe.run(()=>Vt)});return new Proxy(()=>{},{get:(st,Vt)=>Be[Vt],apply:(st,Vt,It)=>Be.then(Ut=>{var Ie;const ie=Ut&&Ut(...It);return(null===(Ie=null==Te?void 0:Te.spy)||void 0===Ie?void 0:Ie.apply)&&Te.spy.apply(_e,It,ie),ie})})})}),J=(ve,be)=>{be.forEach(fe=>{Object.getOwnPropertyNames(fe.prototype||fe).forEach(Te=>{Object.defineProperty(ve.prototype,Te,Object.getOwnPropertyDescriptor(fe.prototype||fe,Te))})})};class re{constructor(be){return be}}const Q=new d.OlP("angularfire2.app.options"),j=new d.OlP("angularfire2.app.name");function L(ve,be,fe){const pe="object"==typeof fe&&fe||{};pe.name=pe.name||"string"==typeof fe&&fe||"[DEFAULT]";const Fe=X.Z.apps.filter(Be=>Be&&Be.name===pe.name)[0]||be.runOutsideAngular(()=>X.Z.initializeApp(ve,pe));try{JSON.stringify(ve)!==JSON.stringify(Fe.options)&&U("error",`${Fe.name} Firebase App already initialized with different options${He.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(Be){}return new re(Fe)}const U=(ve,...be)=>{(0,d.X6Q)()&&"undefined"!=typeof console&&console[ve](...be)},$={provide:re,useFactory:L,deps:[Q,d.R0b,[new d.FiY,j]]};let se=(()=>{class ve{constructor(fe){X.Z.registerVersion("angularfire",G.q4.full,"core"),X.Z.registerVersion("angularfire",G.q4.full,"app-compat"),X.Z.registerVersion("angular",d.q4F.full,fe.toString())}static initializeApp(fe,Te){return{ngModule:ve,providers:[{provide:Q,useValue:fe},{provide:j,useValue:Te}]}}}return ve.\u0275fac=function(fe){return new(fe||ve)(d.LFG(d.Lbi))},ve.\u0275mod=d.oAB({type:ve}),ve.\u0275inj=d.cJS({providers:[$]}),ve})()},9126:(He,Ee,B)=>{"use strict";B.d(Ee,{q4:()=>L,iC:()=>ie,HU:()=>Be,cc:()=>se});var d=B(7716);(0,B(5452).registerVersion)("firebase","9.1.1","app");var he=B(7771),J=B(3637),re=B(8307),Q=B(2639),j=B(9746);He=B.hmd(He);const L=new d.GfV("7.0.4"),U=!!He.hot,$=(ce,...te)=>{(0,d.X6Q)()&&"undefined"!=typeof console&&console[ce](...te)};function se(ce,te,ke,Ge,bt){const[,tt,ze]=globalThis.\u0275AngularfireInstanceCache.find(ot=>ot[0]===ce)||[];if(tt)return function(ce,te){try{return ce.toString()===te.toString()}catch(ke){return ce===te}}(bt,ze)||($("error",`${te} was already initialized on the ${ke} Firebase App with different settings.${U?" You may need to reload as Firebase is not HMR aware.":""}`),$("warn",{is:bt,was:ze})),tt;{const ot=Ge();return globalThis.\u0275AngularfireInstanceCache.push([ce,ot,bt]),ot}}function pe(){}globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[]);class _e{constructor(te,ke=he.N){this.zone=te,this.delegate=ke}now(){return this.delegate.now()}schedule(te,ke,Ge){const bt=this.zone;return this.delegate.schedule(function(ze){bt.runGuarded(()=>{te.apply(this,[ze])})},ke,Ge)}}class Fe{constructor(te){this.zone=te,this.task=null}call(te,ke){const Ge=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",pe,{},pe,pe)),ke.pipe((0,re.b)({next:Ge,complete:Ge,error:Ge})).subscribe(te).add(Ge)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Be=(()=>{class ce{constructor(ke){this.ngZone=ke,this.outsideAngular=ke.runOutsideAngular(()=>new _e(Zone.current)),this.insideAngular=ke.run(()=>new _e(Zone.current,J.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return ce.\u0275fac=function(ke){return new(ke||ce)(d.LFG(d.R0b))},ce.\u0275prov=d.Yz7({token:ce,factory:ce.\u0275fac,providedIn:"root"}),ce})();function st(){const ce=globalThis.\u0275AngularFireScheduler;if(!ce)throw new Error("AngularFireModule has not been provided");return ce}function ie(ce){return st(),function(ce){return function(ke){return(ke=ke.lift(new Fe(ce.ngZone))).pipe((0,Q.R)(ce.outsideAngular),(0,j.QV)(ce.insideAngular))}}(st())(ce)}},4486:(He,Ee,B)=>{"use strict";B.d(Ee,{Z:()=>be});var d=B(3854),X=B(6034),G=B(5452),ye=B(5601);class he{constructor(Te,pe){this._delegate=Te,this.firebase=pe,(0,G._addComponent)(Te,new X.wA("app-compat",()=>this,"PUBLIC")),this.container=Te.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Te){this._delegate.automaticDataCollectionEnabled=Te}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Te=>{this._delegate.checkDestroyed(),Te()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,G.deleteApp)(this._delegate)))}_getService(Te,pe=G._DEFAULT_ENTRY_NAME){var _e;this._delegate.checkDestroyed();const Fe=this._delegate.container.getProvider(Te);return!Fe.isInitialized()&&"EXPLICIT"===(null===(_e=Fe.getComponent())||void 0===_e?void 0:_e.instantiationMode)&&Fe.initialize(),Fe.getImmediate({identifier:pe})}_removeServiceInstance(Te,pe=G._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Te).clearInstance(pe)}_addComponent(Te){(0,G._addComponent)(this._delegate,Te)}_addOrOverwriteComponent(Te){(0,G._addOrOverwriteComponent)(this._delegate,Te)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const re=new d.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),L=function j(){const fe=function(fe){const Te={},pe={__esModule:!0,initializeApp:function(Ut,Ie={}){const ie=G.initializeApp(Ut,Ie);if((0,d.r3)(Te,ie.name))return Te[ie.name];const le=new fe(ie,pe);return Te[ie.name]=le,le},app:Fe,registerVersion:G.registerVersion,setLogLevel:G.setLogLevel,onLog:G.onLog,apps:null,SDK_VERSION:G.SDK_VERSION,INTERNAL:{registerComponent:function(Ut){const Ie=Ut.name,ie=Ie.replace("-compat","");if(G._registerComponent(Ut)&&"PUBLIC"===Ut.type){const le=(me=Fe())=>{if("function"!=typeof me[ie])throw re.create("invalid-app-argument",{appName:Ie});return me[ie]()};void 0!==Ut.serviceProps&&(0,d.ZB)(le,Ut.serviceProps),pe[ie]=le,fe.prototype[ie]=function(...me){return this._getService.bind(this,Ie).apply(this,Ut.multipleInstances?me:[])}}return"PUBLIC"===Ut.type?pe[ie]:null},removeApp:function(Ut){delete Te[Ut]},useAsService:function(Ut,Ie){return"serverAuth"===Ie?null:Ie},modularAPIs:G}};function Fe(Ut){if(!(0,d.r3)(Te,Ut=Ut||G._DEFAULT_ENTRY_NAME))throw re.create("no-app",{appName:Ut});return Te[Ut]}return pe.default=pe,Object.defineProperty(pe,"apps",{get:function(){return Object.keys(Te).map(Ut=>Te[Ut])}}),Fe.App=fe,pe}(he);return fe.INTERNAL=Object.assign(Object.assign({},fe.INTERNAL),{createFirebaseNamespace:j,extendNamespace:function(pe){(0,d.ZB)(fe,pe)},createSubscribe:d.ne,ErrorFactory:d.LL,deepExtend:d.ZB}),fe}(),U=new ye.Yd("@firebase/app-compat");if((0,d.jU)()&&void 0!==self.firebase){U.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const fe=self.firebase.SDK_VERSION;fe&&fe.indexOf("LITE")>=0&&U.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const be=L;(0,G.registerVersion)("@firebase/app-compat","0.1.3",undefined)},5452:(He,Ee,B)=>{"use strict";B.r(Ee),B.d(Ee,{FirebaseError:()=>ye.ZR,SDK_VERSION:()=>xi,_DEFAULT_ENTRY_NAME:()=>bt,_addComponent:()=>bn,_addOrOverwriteComponent:()=>Ri,_apps:()=>ze,_clearComponents:()=>St,_components:()=>ot,_getProvider:()=>Kt,_registerComponent:()=>pi,_removeServiceInstance:()=>en,deleteApp:()=>Ys,getApp:()=>zs,getApps:()=>bo,initializeApp:()=>vo,onLog:()=>Xn,registerVersion:()=>Ye,setLogLevel:()=>ns});var d=B(8239),X=B(6034),G=B(5601),ye=B(3854);class he{constructor(nt){this.container=nt}getPlatformInfoString(){return this.container.getProviders().map(Ht=>{if(function(at){const nt=at.getComponent();return"VERSION"===(null==nt?void 0:nt.type)}(Ht)){const xt=Ht.getImmediate();return`${xt.library}/${xt.version}`}return null}).filter(Ht=>Ht).join(" ")}}const re="@firebase/app",j=new G.Yd("@firebase/app"),bt="[DEFAULT]",tt={[re]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},ze=new Map,ot=new Map;function bn(at,nt){try{at.container.addComponent(nt)}catch(Ht){j.debug(`Component ${nt.name} failed to register with FirebaseApp ${at.name}`,Ht)}}function Ri(at,nt){at.container.addOrOverwriteComponent(nt)}function pi(at){const nt=at.name;if(ot.has(nt))return j.debug(`There were multiple attempts to register component ${nt}.`),!1;ot.set(nt,at);for(const Ht of ze.values())bn(Ht,at);return!0}function Kt(at,nt){return at.container.getProvider(nt)}function en(at,nt,Ht=bt){Kt(at,nt).clearInstance(Ht)}function St(){ot.clear()}const ts=new ye.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function."});class oa{constructor(nt,Ht,xt){this._isDeleted=!1,this._options=Object.assign({},nt),this._config=Object.assign({},Ht),this._name=Ht.name,this._automaticDataCollectionEnabled=Ht.automaticDataCollectionEnabled,this._container=xt,this.container.addComponent(new X.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(nt){this.checkDestroyed(),this._automaticDataCollectionEnabled=nt}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(nt){this._isDeleted=nt}checkDestroyed(){if(this.isDeleted)throw ts.create("app-deleted",{appName:this._name})}}const xi="9.1.1";function vo(at,nt={}){"object"!=typeof nt&&(nt={name:nt});const Ht=Object.assign({name:bt,automaticDataCollectionEnabled:!1},nt),xt=Ht.name;if("string"!=typeof xt||!xt)throw ts.create("bad-app-name",{appName:String(xt)});const yr=ze.get(xt);if(yr){if((0,ye.vZ)(at,yr.options)&&(0,ye.vZ)(Ht,yr.config))return yr;throw ts.create("duplicate-app",{appName:xt})}const Wt=new X.H0(xt);for(const rt of ot.values())Wt.addComponent(rt);const Pe=new oa(at,Ht,Wt);return ze.set(xt,Pe),Pe}function zs(at=bt){const nt=ze.get(at);if(!nt)throw ts.create("no-app",{appName:at});return nt}function bo(){return Array.from(ze.values())}function Ys(at){return aa.apply(this,arguments)}function aa(){return(aa=(0,d.Z)(function*(at){const nt=at.name;ze.has(nt)&&(ze.delete(nt),yield Promise.all(at.container.getProviders().map(Ht=>Ht.delete())),at.isDeleted=!0)})).apply(this,arguments)}function Ye(at,nt,Ht){var xt;let yr=null!==(xt=tt[at])&&void 0!==xt?xt:at;Ht&&(yr+=`-${Ht}`);const Wt=yr.match(/\s|\//),Pe=nt.match(/\s|\//);if(Wt||Pe){const rt=[`Unable to register library "${yr}" with version "${nt}":`];return Wt&&rt.push(`library name "${yr}" contains illegal characters (whitespace or "/")`),Wt&&Pe&&rt.push("and"),Pe&&rt.push(`version name "${nt}" contains illegal characters (whitespace or "/")`),void j.warn(rt.join(" "))}pi(new X.wA(`${yr}-version`,()=>({library:yr,version:nt}),"VERSION"))}function Xn(at,nt){if(null!==at&&"function"!=typeof at)throw ts.create("invalid-log-argument");(0,G.Am)(at,nt)}function ns(at){(0,G.Ub)(at)}pi(new X.wA("platform-logger",nt=>new he(nt),"PRIVATE")),Ye(re,"0.7.2",undefined),Ye("fire-js","")},6034:(He,Ee,B)=>{"use strict";B.d(Ee,{wA:()=>G,H0:()=>Q,zt:()=>he});var d=B(4762),X=B(3854),G=function(){function j(L,U,$){this.name=L,this.instanceFactory=U,this.type=$,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return j.prototype.setInstantiationMode=function(L){return this.instantiationMode=L,this},j.prototype.setMultipleInstances=function(L){return this.multipleInstances=L,this},j.prototype.setServiceProps=function(L){return this.serviceProps=L,this},j.prototype.setInstanceCreatedCallback=function(L){return this.onInstanceCreated=L,this},j}(),ye="[DEFAULT]",he=function(){function j(L,U){this.name=L,this.container=U,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return j.prototype.get=function(L){var U=this.normalizeInstanceIdentifier(L);if(!this.instancesDeferred.has(U)){var $=new X.BH;if(this.instancesDeferred.set(U,$),this.isInitialized(U)||this.shouldAutoInitialize())try{var se=this.getOrInitializeService({instanceIdentifier:U});se&&$.resolve(se)}catch(ve){}}return this.instancesDeferred.get(U).promise},j.prototype.getImmediate=function(L){var U,$=this.normalizeInstanceIdentifier(null==L?void 0:L.identifier),se=null!==(U=null==L?void 0:L.optional)&&void 0!==U&&U;if(!this.isInitialized($)&&!this.shouldAutoInitialize()){if(se)return null;throw Error("Service "+this.name+" is not available")}try{return this.getOrInitializeService({instanceIdentifier:$})}catch(ve){if(se)return null;throw ve}},j.prototype.getComponent=function(){return this.component},j.prototype.setComponent=function(L){var U,$;if(L.name!==this.name)throw Error("Mismatching Component "+L.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=L,this.shouldAutoInitialize()){if(function(j){return"EAGER"===j.instantiationMode}(L))try{this.getOrInitializeService({instanceIdentifier:ye})}catch(Fe){}try{for(var se=(0,d.XA)(this.instancesDeferred.entries()),ve=se.next();!ve.done;ve=se.next()){var be=(0,d.CR)(ve.value,2),Te=be[1],pe=this.normalizeInstanceIdentifier(be[0]);try{var _e=this.getOrInitializeService({instanceIdentifier:pe});Te.resolve(_e)}catch(Fe){}}}catch(Fe){U={error:Fe}}finally{try{ve&&!ve.done&&($=se.return)&&$.call(se)}finally{if(U)throw U.error}}}},j.prototype.clearInstance=function(L){void 0===L&&(L=ye),this.instancesDeferred.delete(L),this.instancesOptions.delete(L),this.instances.delete(L)},j.prototype.delete=function(){return(0,d.mG)(this,void 0,void 0,function(){var L;return(0,d.Jh)(this,function(U){switch(U.label){case 0:return L=Array.from(this.instances.values()),[4,Promise.all((0,d.ev)((0,d.ev)([],(0,d.CR)(L.filter(function($){return"INTERNAL"in $}).map(function($){return $.INTERNAL.delete()}))),(0,d.CR)(L.filter(function($){return"_delete"in $}).map(function($){return $._delete()}))))];case 1:return U.sent(),[2]}})})},j.prototype.isComponentSet=function(){return null!=this.component},j.prototype.isInitialized=function(L){return void 0===L&&(L=ye),this.instances.has(L)},j.prototype.getOptions=function(L){return void 0===L&&(L=ye),this.instancesOptions.get(L)||{}},j.prototype.initialize=function(L){var U,$;void 0===L&&(L={});var se=L.options,ve=void 0===se?{}:se,be=this.normalizeInstanceIdentifier(L.instanceIdentifier);if(this.isInitialized(be))throw Error(this.name+"("+be+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");var fe=this.getOrInitializeService({instanceIdentifier:be,options:ve});try{for(var Te=(0,d.XA)(this.instancesDeferred.entries()),pe=Te.next();!pe.done;pe=Te.next()){var _e=(0,d.CR)(pe.value,2),Be=_e[1];be===this.normalizeInstanceIdentifier(_e[0])&&Be.resolve(fe)}}catch(Vt){U={error:Vt}}finally{try{pe&&!pe.done&&($=Te.return)&&$.call(Te)}finally{if(U)throw U.error}}return fe},j.prototype.onInit=function(L,U){var $,se=this.normalizeInstanceIdentifier(U),ve=null!==($=this.onInitCallbacks.get(se))&&void 0!==$?$:new Set;ve.add(L),this.onInitCallbacks.set(se,ve);var be=this.instances.get(se);return be&&L(be,se),function(){ve.delete(L)}},j.prototype.invokeOnInitCallbacks=function(L,U){var $,se,ve=this.onInitCallbacks.get(U);if(ve)try{for(var be=(0,d.XA)(ve),fe=be.next();!fe.done;fe=be.next()){var Te=fe.value;try{Te(L,U)}catch(pe){}}}catch(pe){$={error:pe}}finally{try{fe&&!fe.done&&(se=be.return)&&se.call(be)}finally{if($)throw $.error}}},j.prototype.getOrInitializeService=function(L){var U=L.instanceIdentifier,$=L.options,se=void 0===$?{}:$,ve=this.instances.get(U);if(!ve&&this.component&&(ve=this.component.instanceFactory(this.container,{instanceIdentifier:J(U),options:se}),this.instances.set(U,ve),this.instancesOptions.set(U,se),this.invokeOnInitCallbacks(ve,U),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,U,ve)}catch(be){}return ve||null},j.prototype.normalizeInstanceIdentifier=function(L){return void 0===L&&(L=ye),this.component?this.component.multipleInstances?L:ye:L},j.prototype.shouldAutoInitialize=function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode},j}();function J(j){return j===ye?void 0:j}var Q=function(){function j(L){this.name=L,this.providers=new Map}return j.prototype.addComponent=function(L){var U=this.getProvider(L.name);if(U.isComponentSet())throw new Error("Component "+L.name+" has already been registered with "+this.name);U.setComponent(L)},j.prototype.addOrOverwriteComponent=function(L){this.getProvider(L.name).isComponentSet()&&this.providers.delete(L.name),this.addComponent(L)},j.prototype.getProvider=function(L){if(this.providers.has(L))return this.providers.get(L);var U=new he(L,this);return this.providers.set(L,U),U},j.prototype.getProviders=function(){return Array.from(this.providers.values())},j}()},5601:(He,Ee,B)=>{"use strict";B.d(Ee,{in:()=>X,Yd:()=>re,Ub:()=>Q,Am:()=>j});const d=[];var X=(()=>{return(L=X||(X={}))[L.DEBUG=0]="DEBUG",L[L.VERBOSE=1]="VERBOSE",L[L.INFO=2]="INFO",L[L.WARN=3]="WARN",L[L.ERROR=4]="ERROR",L[L.SILENT=5]="SILENT",X;var L})();const G={debug:X.DEBUG,verbose:X.VERBOSE,info:X.INFO,warn:X.WARN,error:X.ERROR,silent:X.SILENT},ye=X.INFO,he={[X.DEBUG]:"log",[X.VERBOSE]:"log",[X.INFO]:"info",[X.WARN]:"warn",[X.ERROR]:"error"},J=(L,U,...$)=>{if(U<L.logLevel)return;const se=(new Date).toISOString(),ve=he[U];if(!ve)throw new Error(`Attempted to log a message with an invalid logType (value: ${U})`);console[ve](`[${se}]  ${L.name}:`,...$)};class re{constructor(U){this.name=U,this._logLevel=ye,this._logHandler=J,this._userLogHandler=null,d.push(this)}get logLevel(){return this._logLevel}set logLevel(U){if(!(U in X))throw new TypeError(`Invalid value "${U}" assigned to \`logLevel\``);this._logLevel=U}setLogLevel(U){this._logLevel="string"==typeof U?G[U]:U}get logHandler(){return this._logHandler}set logHandler(U){if("function"!=typeof U)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=U}get userLogHandler(){return this._userLogHandler}set userLogHandler(U){this._userLogHandler=U}debug(...U){this._userLogHandler&&this._userLogHandler(this,X.DEBUG,...U),this._logHandler(this,X.DEBUG,...U)}log(...U){this._userLogHandler&&this._userLogHandler(this,X.VERBOSE,...U),this._logHandler(this,X.VERBOSE,...U)}info(...U){this._userLogHandler&&this._userLogHandler(this,X.INFO,...U),this._logHandler(this,X.INFO,...U)}warn(...U){this._userLogHandler&&this._userLogHandler(this,X.WARN,...U),this._logHandler(this,X.WARN,...U)}error(...U){this._userLogHandler&&this._userLogHandler(this,X.ERROR,...U),this._logHandler(this,X.ERROR,...U)}}function Q(L){d.forEach(U=>{U.setLogLevel(L)})}function j(L,U){for(const $ of d){let se=null;U&&U.level&&(se=G[U.level]),$.userLogHandler=null===L?null:(ve,be,...fe)=>{const Te=fe.map(pe=>{if(null==pe)return null;if("string"==typeof pe)return pe;if("number"==typeof pe||"boolean"==typeof pe)return pe.toString();if(pe instanceof Error)return pe.message;try{return JSON.stringify(pe)}catch(_e){return null}}).filter(pe=>pe).join(" ");be>=(null!=se?se:ve.logLevel)&&L({level:X[be].toLowerCase(),message:Te,args:fe,type:ve.name})}}}},3854:(He,Ee,B)=>{"use strict";B.d(Ee,{BH:()=>se,LL:()=>te,ZR:()=>ce,gQ:()=>bo,hu:()=>X,g5:()=>G,US:()=>J,tV:()=>j,h$:()=>re,r3:()=>Kt,Sg:()=>ve,ne:()=>Ys,p$:()=>L,vZ:()=>ts,ZB:()=>U,gK:()=>at,pd:()=>zs,m9:()=>al,z$:()=>be,GJ:()=>pi,jU:()=>pe,ru:()=>_e,d:()=>Be,xb:()=>St,w1:()=>st,hl:()=>Ie,uI:()=>fe,UG:()=>Te,Yr:()=>It,b$:()=>Fe,G6:()=>Ut,Mn:()=>Vt,w9:()=>Ri,cI:()=>bt,UI:()=>ur,xO:()=>xi,zd:()=>vo,DV:()=>en,ug:()=>Wt,dS:()=>yr,Pz:()=>tt,Dv:()=>ki,Wj:()=>Ht,lb:()=>xt});const X=function(q,W){if(!q)throw G(W)},G=function(q){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+q)},ye=function(q){const W=[];let Z=0;for(let De=0;De<q.length;De++){let ne=q.charCodeAt(De);ne<128?W[Z++]=ne:ne<2048?(W[Z++]=ne>>6|192,W[Z++]=63&ne|128):55296==(64512&ne)&&De+1<q.length&&56320==(64512&q.charCodeAt(De+1))?(ne=65536+((1023&ne)<<10)+(1023&q.charCodeAt(++De)),W[Z++]=ne>>18|240,W[Z++]=ne>>12&63|128,W[Z++]=ne>>6&63|128,W[Z++]=63&ne|128):(W[Z++]=ne>>12|224,W[Z++]=ne>>6&63|128,W[Z++]=63&ne|128)}return W},J={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(q,W){if(!Array.isArray(q))throw Error("encodeByteArray takes an array as a parameter");this.init_();const Z=W?this.byteToCharMapWebSafe_:this.byteToCharMap_,De=[];for(let ne=0;ne<q.length;ne+=3){const $e=q[ne],ft=ne+1<q.length,kt=ft?q[ne+1]:0,tn=ne+2<q.length,dn=tn?q[ne+2]:0;let er=(15&kt)<<2|dn>>6,mi=63&dn;tn||(mi=64,ft||(er=64)),De.push(Z[$e>>2],Z[(3&$e)<<4|kt>>4],Z[er],Z[mi])}return De.join("")},encodeString(q,W){return this.HAS_NATIVE_SUPPORT&&!W?btoa(q):this.encodeByteArray(ye(q),W)},decodeString(q,W){return this.HAS_NATIVE_SUPPORT&&!W?atob(q):function(q){const W=[];let Z=0,De=0;for(;Z<q.length;){const ne=q[Z++];if(ne<128)W[De++]=String.fromCharCode(ne);else if(ne>191&&ne<224){const $e=q[Z++];W[De++]=String.fromCharCode((31&ne)<<6|63&$e)}else if(ne>239&&ne<365){const tn=((7&ne)<<18|(63&q[Z++])<<12|(63&q[Z++])<<6|63&q[Z++])-65536;W[De++]=String.fromCharCode(55296+(tn>>10)),W[De++]=String.fromCharCode(56320+(1023&tn))}else{const $e=q[Z++],ft=q[Z++];W[De++]=String.fromCharCode((15&ne)<<12|(63&$e)<<6|63&ft)}}return W.join("")}(this.decodeStringToByteArray(q,W))},decodeStringToByteArray(q,W){this.init_();const Z=W?this.charToByteMapWebSafe_:this.charToByteMap_,De=[];for(let ne=0;ne<q.length;){const $e=Z[q.charAt(ne++)],kt=ne<q.length?Z[q.charAt(ne)]:0;++ne;const dn=ne<q.length?Z[q.charAt(ne)]:64;++ne;const Mt=ne<q.length?Z[q.charAt(ne)]:64;if(++ne,null==$e||null==kt||null==dn||null==Mt)throw Error();De.push($e<<2|kt>>4),64!==dn&&(De.push(kt<<4&240|dn>>2),64!==Mt&&De.push(dn<<6&192|Mt))}return De},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let q=0;q<this.ENCODED_VALS.length;q++)this.byteToCharMap_[q]=this.ENCODED_VALS.charAt(q),this.charToByteMap_[this.byteToCharMap_[q]]=q,this.byteToCharMapWebSafe_[q]=this.ENCODED_VALS_WEBSAFE.charAt(q),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[q]]=q,q>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(q)]=q,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(q)]=q)}}},re=function(q){const W=ye(q);return J.encodeByteArray(W,!0)},Q=function(q){return re(q).replace(/\./g,"")},j=function(q){try{return J.decodeString(q,!0)}catch(W){console.error("base64Decode failed: ",W)}return null};function L(q){return U(void 0,q)}function U(q,W){if(!(W instanceof Object))return W;switch(W.constructor){case Date:return new Date(W.getTime());case Object:void 0===q&&(q={});break;case Array:q=[];break;default:return W}for(const Z in W)!W.hasOwnProperty(Z)||!$(Z)||(q[Z]=U(q[Z],W[Z]));return q}function $(q){return"__proto__"!==q}class se{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((W,Z)=>{this.resolve=W,this.reject=Z})}wrapCallback(W){return(Z,De)=>{Z?this.reject(Z):this.resolve(De),"function"==typeof W&&(this.promise.catch(()=>{}),1===W.length?W(Z):W(Z,De))}}}function ve(q,W){if(q.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const De=W||"demo-project",ne=q.iat||0,$e=q.sub||q.user_id;if(!$e)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const ft=Object.assign({iss:`https://securetoken.google.com/${De}`,aud:De,iat:ne,exp:ne+3600,auth_time:ne,sub:$e,user_id:$e,firebase:{sign_in_provider:"custom",identities:{}}},q);return[Q(JSON.stringify({alg:"none",type:"JWT"})),Q(JSON.stringify(ft)),""].join(".")}function be(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function fe(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(be())}function Te(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(q){return!1}}function pe(){return"object"==typeof self&&self.self===self}function _e(){const q="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof q&&void 0!==q.id}function Fe(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Be(){return be().indexOf("Electron/")>=0}function st(){const q=be();return q.indexOf("MSIE ")>=0||q.indexOf("Trident/")>=0}function Vt(){return be().indexOf("MSAppHost/")>=0}function It(){return!1}function Ut(){return!Te()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Ie(){return"object"==typeof indexedDB}class ce extends Error{constructor(W,Z,De){super(Z),this.code=W,this.customData=De,this.name="FirebaseError",Object.setPrototypeOf(this,ce.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,te.prototype.create)}}class te{constructor(W,Z,De){this.service=W,this.serviceName=Z,this.errors=De}create(W,...Z){const De=Z[0]||{},ne=`${this.service}/${W}`,$e=this.errors[W],ft=$e?function(q,W){return q.replace(Ge,(Z,De)=>{const ne=W[De];return null!=ne?String(ne):`<${De}?>`})}($e,De):"Error";return new ce(ne,`${this.serviceName}: ${ft} (${ne}).`,De)}}const Ge=/\{\$([^}]+)}/g;function bt(q){return JSON.parse(q)}function tt(q){return JSON.stringify(q)}const ze=function(q){let W={},Z={},De={},ne="";try{const $e=q.split(".");W=bt(j($e[0])||""),Z=bt(j($e[1])||""),ne=$e[2],De=Z.d||{},delete Z.d}catch($e){}return{header:W,claims:Z,data:De,signature:ne}},Ri=function(q){const Z=ze(q).claims;return!!Z&&"object"==typeof Z&&Z.hasOwnProperty("iat")},pi=function(q){const W=ze(q).claims;return"object"==typeof W&&!0===W.admin};function Kt(q,W){return Object.prototype.hasOwnProperty.call(q,W)}function en(q,W){if(Object.prototype.hasOwnProperty.call(q,W))return q[W]}function St(q){for(const W in q)if(Object.prototype.hasOwnProperty.call(q,W))return!1;return!0}function ur(q,W,Z){const De={};for(const ne in q)Object.prototype.hasOwnProperty.call(q,ne)&&(De[ne]=W.call(Z,q[ne],ne,q));return De}function ts(q,W){if(q===W)return!0;const Z=Object.keys(q),De=Object.keys(W);for(const ne of Z){if(!De.includes(ne))return!1;const $e=q[ne],ft=W[ne];if(oa($e)&&oa(ft)){if(!ts($e,ft))return!1}else if($e!==ft)return!1}for(const ne of De)if(!Z.includes(ne))return!1;return!0}function oa(q){return null!==q&&"object"==typeof q}function xi(q){const W=[];for(const[Z,De]of Object.entries(q))Array.isArray(De)?De.forEach(ne=>{W.push(encodeURIComponent(Z)+"="+encodeURIComponent(ne))}):W.push(encodeURIComponent(Z)+"="+encodeURIComponent(De));return W.length?"&"+W.join("&"):""}function vo(q){const W={};return q.replace(/^\?/,"").split("&").forEach(De=>{if(De){const[ne,$e]=De.split("=");W[decodeURIComponent(ne)]=decodeURIComponent($e)}}),W}function zs(q){const W=q.indexOf("?");if(!W)return"";const Z=q.indexOf("#",W);return q.substring(W,Z>0?Z:void 0)}class bo{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let W=1;W<this.blockSize;++W)this.pad_[W]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(W,Z){Z||(Z=0);const De=this.W_;if("string"==typeof W)for(let Mt=0;Mt<16;Mt++)De[Mt]=W.charCodeAt(Z)<<24|W.charCodeAt(Z+1)<<16|W.charCodeAt(Z+2)<<8|W.charCodeAt(Z+3),Z+=4;else for(let Mt=0;Mt<16;Mt++)De[Mt]=W[Z]<<24|W[Z+1]<<16|W[Z+2]<<8|W[Z+3],Z+=4;for(let Mt=16;Mt<80;Mt++){const er=De[Mt-3]^De[Mt-8]^De[Mt-14]^De[Mt-16];De[Mt]=4294967295&(er<<1|er>>>31)}let dn,Zr,ne=this.chain_[0],$e=this.chain_[1],ft=this.chain_[2],kt=this.chain_[3],tn=this.chain_[4];for(let Mt=0;Mt<80;Mt++){Mt<40?Mt<20?(dn=kt^$e&(ft^kt),Zr=1518500249):(dn=$e^ft^kt,Zr=1859775393):Mt<60?(dn=$e&ft|kt&($e|ft),Zr=2400959708):(dn=$e^ft^kt,Zr=3395469782);const er=(ne<<5|ne>>>27)+dn+tn+Zr+De[Mt]&4294967295;tn=kt,kt=ft,ft=4294967295&($e<<30|$e>>>2),$e=ne,ne=er}this.chain_[0]=this.chain_[0]+ne&4294967295,this.chain_[1]=this.chain_[1]+$e&4294967295,this.chain_[2]=this.chain_[2]+ft&4294967295,this.chain_[3]=this.chain_[3]+kt&4294967295,this.chain_[4]=this.chain_[4]+tn&4294967295}update(W,Z){if(null==W)return;void 0===Z&&(Z=W.length);const De=Z-this.blockSize;let ne=0;const $e=this.buf_;let ft=this.inbuf_;for(;ne<Z;){if(0===ft)for(;ne<=De;)this.compress_(W,ne),ne+=this.blockSize;if("string"==typeof W){for(;ne<Z;)if($e[ft]=W.charCodeAt(ne),++ft,++ne,ft===this.blockSize){this.compress_($e),ft=0;break}}else for(;ne<Z;)if($e[ft]=W[ne],++ft,++ne,ft===this.blockSize){this.compress_($e),ft=0;break}}this.inbuf_=ft,this.total_+=Z}digest(){const W=[];let Z=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let ne=this.blockSize-1;ne>=56;ne--)this.buf_[ne]=255&Z,Z/=256;this.compress_(this.buf_);let De=0;for(let ne=0;ne<5;ne++)for(let $e=24;$e>=0;$e-=8)W[De]=this.chain_[ne]>>$e&255,++De;return W}}function Ys(q,W){const Z=new aa(q,W);return Z.subscribe.bind(Z)}class aa{constructor(W,Z){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=Z,this.task.then(()=>{W(this)}).catch(De=>{this.error(De)})}next(W){this.forEachObserver(Z=>{Z.next(W)})}error(W){this.forEachObserver(Z=>{Z.error(W)}),this.close(W)}complete(){this.forEachObserver(W=>{W.complete()}),this.close()}subscribe(W,Z,De){let ne;if(void 0===W&&void 0===Z&&void 0===De)throw new Error("Missing Observer.");ne=function(q,W){if("object"!=typeof q||null===q)return!1;for(const Z of["next","error","complete"])if(Z in q&&"function"==typeof q[Z])return!0;return!1}(W)?W:{next:W,error:Z,complete:De},void 0===ne.next&&(ne.next=ns),void 0===ne.error&&(ne.error=ns),void 0===ne.complete&&(ne.complete=ns);const $e=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?ne.error(this.finalError):ne.complete()}catch(ft){}}),this.observers.push(ne),$e}unsubscribeOne(W){void 0===this.observers||void 0===this.observers[W]||(delete this.observers[W],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(W){if(!this.finalized)for(let Z=0;Z<this.observers.length;Z++)this.sendOne(Z,W)}sendOne(W,Z){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[W])try{Z(this.observers[W])}catch(De){"undefined"!=typeof console&&console.error&&console.error(De)}})}close(W){this.finalized||(this.finalized=!0,void 0!==W&&(this.finalError=W),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function ns(){}const ki=function(q,W,Z,De){let ne;if(De<W?ne="at least "+W:De>Z&&(ne=0===Z?"none":"no more than "+Z),ne)throw new Error(q+" failed: Was called with "+De+(1===De?" argument.":" arguments.")+" Expects "+ne+".")};function at(q,W){return`${q} failed: ${W} argument `}function Ht(q,W,Z,De){if((!De||Z)&&"function"!=typeof Z)throw new Error(at(q,W)+"must be a valid function.")}function xt(q,W,Z,De){if((!De||Z)&&("object"!=typeof Z||null===Z))throw new Error(at(q,W)+"must be a valid context object.")}const yr=function(q){const W=[];let Z=0;for(let De=0;De<q.length;De++){let ne=q.charCodeAt(De);if(ne>=55296&&ne<=56319){const $e=ne-55296;De++,X(De<q.length,"Surrogate pair missing trail surrogate."),ne=65536+($e<<10)+(q.charCodeAt(De)-56320)}ne<128?W[Z++]=ne:ne<2048?(W[Z++]=ne>>6|192,W[Z++]=63&ne|128):ne<65536?(W[Z++]=ne>>12|224,W[Z++]=ne>>6&63|128,W[Z++]=63&ne|128):(W[Z++]=ne>>18|240,W[Z++]=ne>>12&63|128,W[Z++]=ne>>6&63|128,W[Z++]=63&ne|128)}return W},Wt=function(q){let W=0;for(let Z=0;Z<q.length;Z++){const De=q.charCodeAt(Z);De<128?W++:De<2048?W+=2:De>=55296&&De<=56319?(W+=4,Z++):W+=3}return W};function al(q){return q&&q._delegate?q._delegate:q}},7841:(He,Ee,B)=>{"use strict";B.d(Ee,{Z:()=>d.Z});var d=B(4486);d.Z.registerVersion("firebase","9.1.1","app-compat")},5128:(He,Ee,B)=>{"use strict";B.r(Ee);var d=B(8239),X=B(4486),G=B(3854),ye=B(5452),he=B(4762),J=B(5601),re=B(6034);const be=function(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},fe=function(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Te=new G.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),_e=new J.Yd("@firebase/auth");function Fe(E,...y){_e.logLevel<=J.in.ERROR&&_e.error(`Auth (${ye.SDK_VERSION}): ${E}`,...y)}function Be(E,...y){throw Ut(E,...y)}function st(E,...y){return Ut(E,...y)}function Vt(E,y,v){const D=Object.assign(Object.assign({},fe()),{[y]:v});return new G.LL("auth","Firebase",D).create(y,{appName:E.name})}function It(E,y,v){if(!(y instanceof v))throw v.name!==y.constructor.name&&Be(E,"argument-error"),Vt(E,"argument-error",`Type of ${y.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Ut(E,...y){if("string"!=typeof E){const v=y[0],D=[...y.slice(1)];return D[0]&&(D[0].appName=E.name),E._errorFactory.create(v,...D)}return Te.create(E,...y)}function Ie(E,y,...v){if(!E)throw Ut(y,...v)}function ie(E){const y="INTERNAL ASSERTION FAILED: "+E;throw Fe(y),new Error(y)}function le(E,y){E||ie(y)}const me=new Map;function oe(E){le(E instanceof Function,"Expected a class definition");let y=me.get(E);return y?(le(y instanceof E,"Instance stored in cache mismatched with class"),y):(y=new E,me.set(E,y),y)}function ke(){var E;return"undefined"!=typeof self&&(null===(E=self.location)||void 0===E?void 0:E.href)||""}function Ge(){return"http:"===bt()||"https:"===bt()}function bt(){var E;return"undefined"!=typeof self&&(null===(E=self.location)||void 0===E?void 0:E.protocol)||null}class ot{constructor(y,v){this.shortDelay=y,this.longDelay=v,le(v>y,"Short delay should be less than long delay!"),this.isMobile=(0,G.uI)()||(0,G.b$)()}get(){return"undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Ge()||(0,G.ru)()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function bn(E,y){le(E.emulator,"Emulator should always be set here");const{url:v}=E.emulator;return y?`${v}${y.startsWith("/")?y.slice(1):y}`:v}class Ri{static initialize(y,v,D){this.fetchImpl=y,v&&(this.headersImpl=v),D&&(this.responseImpl=D)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void ie("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void ie("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void ie("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const pi={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Kt=new ot(3e4,6e4);function en(E,y){return E.tenantId&&!y.tenantId?Object.assign(Object.assign({},y),{tenantId:E.tenantId}):y}function St(E,y,v,D){return ur.apply(this,arguments)}function ur(){return(ur=(0,d.Z)(function*(E,y,v,D,R={}){return ts(E,R,()=>{let O={},K={};D&&("GET"===y?K=D:O={body:JSON.stringify(D)});const ge=(0,G.xO)(Object.assign({key:E.config.apiKey},K)).slice(1),xe=new(Ri.headers());return xe.set("Content-Type","application/json"),xe.set("X-Client-Version",E._getSdkClientVersion()),E.languageCode&&xe.set("X-Firebase-Locale",E.languageCode),Ri.fetch()(zs(E,E.config.apiHost,v,ge),Object.assign({method:y,headers:xe,referrerPolicy:"no-referrer"},O))})})).apply(this,arguments)}function ts(E,y,v){return oa.apply(this,arguments)}function oa(){return(oa=(0,d.Z)(function*(E,y,v){E._canInitEmulator=!1;const D=Object.assign(Object.assign({},pi),y);try{const R=new bo(E),O=yield Promise.race([v(),R.promise]);R.clearNetworkTimeout();const K=yield O.json();if("needConfirmation"in K)throw Ys(E,"account-exists-with-different-credential",K);if(O.ok&&!("errorMessage"in K))return K;{const ge=O.ok?K.errorMessage:K.error.message,[xe,je]=ge.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===xe)throw Ys(E,"credential-already-in-use",K);if("EMAIL_EXISTS"===xe)throw Ys(E,"email-already-in-use",K);const ut=D[xe]||xe.toLowerCase().replace(/[_\s]+/g,"-");if(je)throw Vt(E,ut,je);Be(E,ut)}}catch(R){if(R instanceof G.ZR)throw R;Be(E,"network-request-failed")}})).apply(this,arguments)}function xi(E,y,v,D){return vo.apply(this,arguments)}function vo(){return(vo=(0,d.Z)(function*(E,y,v,D,R={}){const O=yield St(E,y,v,D,R);return"mfaPendingCredential"in O&&Be(E,"multi-factor-auth-required",{serverResponse:O}),O})).apply(this,arguments)}function zs(E,y,v,D){const R=`${y}${v}?${D}`;return E.config.emulator?bn(E.config,R):`${E.config.apiScheme}://${R}`}class bo{constructor(y){this.auth=y,this.timer=null,this.promise=new Promise((v,D)=>{this.timer=setTimeout(()=>D(st(this.auth,"timeout")),Kt.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Ys(E,y,v){const D={appName:E.name};v.email&&(D.email=v.email),v.phoneNumber&&(D.phoneNumber=v.phoneNumber);const R=st(E,y,D);return R.customData._tokenResponse=v,R}function Ye(){return(Ye=(0,d.Z)(function*(E,y){return St(E,"POST","/v1/accounts:delete",y)})).apply(this,arguments)}function Xn(E,y){return ns.apply(this,arguments)}function ns(){return(ns=(0,d.Z)(function*(E,y){return St(E,"POST","/v1/accounts:update",y)})).apply(this,arguments)}function ki(E,y){return at.apply(this,arguments)}function at(){return(at=(0,d.Z)(function*(E,y){return St(E,"POST","/v1/accounts:lookup",y)})).apply(this,arguments)}function nt(E){if(E)try{const y=new Date(Number(E));if(!isNaN(y.getTime()))return y.toUTCString()}catch(y){}}function yr(){return(yr=(0,d.Z)(function*(E,y=!1){const v=(0,G.m9)(E),D=yield v.getIdToken(y),R=Pe(D);Ie(R&&R.exp&&R.auth_time&&R.iat,v.auth,"internal-error");const O="object"==typeof R.firebase?R.firebase:void 0,K=null==O?void 0:O.sign_in_provider;return{claims:R,token:D,authTime:nt(Wt(R.auth_time)),issuedAtTime:nt(Wt(R.iat)),expirationTime:nt(Wt(R.exp)),signInProvider:K||null,signInSecondFactor:(null==O?void 0:O.sign_in_second_factor)||null}})).apply(this,arguments)}function Wt(E){return 1e3*Number(E)}function Pe(E){const[y,v,D]=E.split(".");if(void 0===y||void 0===v||void 0===D)return Fe("JWT malformed, contained fewer than 3 sections"),null;try{const R=(0,G.tV)(v);return R?JSON.parse(R):(Fe("Failed to decode base64 JWT payload"),null)}catch(R){return Fe("Caught error parsing JWT payload as JSON",R),null}}function Oi(E,y){return wo.apply(this,arguments)}function wo(){return(wo=(0,d.Z)(function*(E,y,v=!1){if(v)return y;try{return yield y}catch(D){throw D instanceof G.ZR&&Es(D)&&E.auth.currentUser===E&&(yield E.auth.signOut()),D}})).apply(this,arguments)}function Es({code:E}){return"auth/user-disabled"===E||"auth/user-token-expired"===E}class Jt{constructor(y){this.user=y,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(y){var v;if(y){const D=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),D}{this.errorBackoff=3e4;const R=(null!==(v=this.user.stsTokenManager.expirationTime)&&void 0!==v?v:0)-Date.now()-3e5;return Math.max(0,R)}}schedule(y=!1){var v=this;if(!this.isRunning)return;const D=this.getInterval(y);this.timerId=setTimeout((0,d.Z)(function*(){yield v.iteration()}),D)}iteration(){var y=this;return(0,d.Z)(function*(){try{yield y.user.getIdToken(!0)}catch(v){return void("auth/network-request-failed"===v.code&&y.schedule(!0))}y.schedule()})()}}class gi{constructor(y,v){this.createdAt=y,this.lastLoginAt=v,this._initializeTime()}_initializeTime(){this.lastSignInTime=nt(this.lastLoginAt),this.creationTime=nt(this.createdAt)}_copy(y){this.createdAt=y.createdAt,this.lastLoginAt=y.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function al(E){return q.apply(this,arguments)}function q(){return(q=(0,d.Z)(function*(E){var y;const v=E.auth,D=yield E.getIdToken(),R=yield Oi(E,ki(v,{idToken:D}));Ie(null==R?void 0:R.users.length,v,"internal-error");const O=R.users[0];E._notifyReloadListener(O);const K=(null===(y=O.providerUserInfo)||void 0===y?void 0:y.length)?ne(O.providerUserInfo):[],ge=De(E.providerData,K),ut=!!E.isAnonymous&&!(E.email&&O.passwordHash||(null==ge?void 0:ge.length)),et={uid:O.localId,displayName:O.displayName||null,photoURL:O.photoUrl||null,email:O.email||null,emailVerified:O.emailVerified||!1,phoneNumber:O.phoneNumber||null,tenantId:O.tenantId||null,providerData:ge,metadata:new gi(O.createdAt,O.lastLoginAt),isAnonymous:ut};Object.assign(E,et)})).apply(this,arguments)}function Z(){return(Z=(0,d.Z)(function*(E){const y=(0,G.m9)(E);yield al(y),yield y.auth._persistUserIfCurrent(y),y.auth._notifyListenersIfCurrent(y)})).apply(this,arguments)}function De(E,y){return[...E.filter(D=>!y.some(R=>R.providerId===D.providerId)),...y]}function ne(E){return E.map(y=>{var{providerId:v}=y,D=(0,he._T)(y,["providerId"]);return{providerId:v,uid:D.rawId||"",displayName:D.displayName||null,email:D.email||null,phoneNumber:D.phoneNumber||null,photoURL:D.photoUrl||null}})}function ft(){return(ft=(0,d.Z)(function*(E,y){const v=yield ts(E,{},()=>{const D=(0,G.xO)({grant_type:"refresh_token",refresh_token:y}).slice(1),{tokenApiHost:R,apiKey:O}=E.config,K=zs(E,R,"/v1/token",`key=${O}`);return Ri.fetch()(K,{method:"POST",headers:{"X-Client-Version":E._getSdkClientVersion(),"Content-Type":"application/x-www-form-urlencoded"},body:D})});return{accessToken:v.access_token,expiresIn:v.expires_in,refreshToken:v.refresh_token}})).apply(this,arguments)}class kt{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(y){Ie(y.idToken,"internal-error"),Ie(void 0!==y.idToken,"internal-error"),Ie(void 0!==y.refreshToken,"internal-error");const v="expiresIn"in y&&void 0!==y.expiresIn?Number(y.expiresIn):function(E){const y=Pe(E);return Ie(y,"internal-error"),Ie(void 0!==y.exp,"internal-error"),Ie(void 0!==y.iat,"internal-error"),Number(y.exp)-Number(y.iat)}(y.idToken);this.updateTokensAndExpiration(y.idToken,y.refreshToken,v)}getToken(y,v=!1){var D=this;return(0,d.Z)(function*(){return Ie(!D.accessToken||D.refreshToken,y,"user-token-expired"),v||!D.accessToken||D.isExpired?D.refreshToken?(yield D.refresh(y,D.refreshToken),D.accessToken):null:D.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(y,v){var D=this;return(0,d.Z)(function*(){const{accessToken:R,refreshToken:O,expiresIn:K}=yield function(E,y){return ft.apply(this,arguments)}(y,v);D.updateTokensAndExpiration(R,O,Number(K))})()}updateTokensAndExpiration(y,v,D){this.refreshToken=v||null,this.accessToken=y||null,this.expirationTime=Date.now()+1e3*D}static fromJSON(y,v){const{refreshToken:D,accessToken:R,expirationTime:O}=v,K=new kt;return D&&(Ie("string"==typeof D,"internal-error",{appName:y}),K.refreshToken=D),R&&(Ie("string"==typeof R,"internal-error",{appName:y}),K.accessToken=R),O&&(Ie("number"==typeof O,"internal-error",{appName:y}),K.expirationTime=O),K}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(y){this.accessToken=y.accessToken,this.refreshToken=y.refreshToken,this.expirationTime=y.expirationTime}_clone(){return Object.assign(new kt,this.toJSON())}_performRefresh(){return ie("not implemented")}}function tn(E,y){Ie("string"==typeof E||void 0===E,"internal-error",{appName:y})}class dn{constructor(y){var{uid:v,auth:D,stsTokenManager:R}=y,O=(0,he._T)(y,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.emailVerified=!1,this.isAnonymous=!1,this.tenantId=null,this.providerData=[],this.proactiveRefresh=new Jt(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=v,this.auth=D,this.stsTokenManager=R,this.accessToken=R.accessToken,this.displayName=O.displayName||null,this.email=O.email||null,this.emailVerified=O.emailVerified||!1,this.phoneNumber=O.phoneNumber||null,this.photoURL=O.photoURL||null,this.isAnonymous=O.isAnonymous||!1,this.metadata=new gi(O.createdAt||void 0,O.lastLoginAt||void 0)}getIdToken(y){var v=this;return(0,d.Z)(function*(){const D=yield Oi(v,v.stsTokenManager.getToken(v.auth,y));return Ie(D,v.auth,"internal-error"),v.accessToken!==D&&(v.accessToken=D,yield v.auth._persistUserIfCurrent(v),v.auth._notifyListenersIfCurrent(v)),D})()}getIdTokenResult(y){return function(E){return yr.apply(this,arguments)}(this,y)}reload(){return function(E){return Z.apply(this,arguments)}(this)}_assign(y){this!==y&&(Ie(this.uid===y.uid,this.auth,"internal-error"),this.displayName=y.displayName,this.photoURL=y.photoURL,this.email=y.email,this.emailVerified=y.emailVerified,this.phoneNumber=y.phoneNumber,this.isAnonymous=y.isAnonymous,this.tenantId=y.tenantId,this.providerData=y.providerData.map(v=>Object.assign({},v)),this.metadata._copy(y.metadata),this.stsTokenManager._assign(y.stsTokenManager))}_clone(y){return new dn(Object.assign(Object.assign({},this),{auth:y,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(y){Ie(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=y,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(y){this.reloadListener?this.reloadListener(y):this.reloadUserInfo=y}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(y,v=!1){var D=this;return(0,d.Z)(function*(){let R=!1;y.idToken&&y.idToken!==D.stsTokenManager.accessToken&&(D.stsTokenManager.updateFromServerResponse(y),R=!0),v&&(yield al(D)),yield D.auth._persistUserIfCurrent(D),R&&D.auth._notifyListenersIfCurrent(D)})()}delete(){var y=this;return(0,d.Z)(function*(){const v=yield y.getIdToken();return yield Oi(y,function(E,y){return Ye.apply(this,arguments)}(y.auth,{idToken:v})),y.stsTokenManager.clearRefreshToken(),y.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(y=>Object.assign({},y)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(y,v){var D,R,O,K,ge,xe,je,ut;const et=null!==(D=v.displayName)&&void 0!==D?D:void 0,Bn=null!==(R=v.email)&&void 0!==R?R:void 0,ei=null!==(O=v.phoneNumber)&&void 0!==O?O:void 0,tc=null!==(K=v.photoURL)&&void 0!==K?K:void 0,E_=null!==(ge=v.tenantId)&&void 0!==ge?ge:void 0,Ma=null!==(xe=v._redirectEventId)&&void 0!==xe?xe:void 0,D_=null!==(je=v.createdAt)&&void 0!==je?je:void 0,Ra=null!==(ut=v.lastLoginAt)&&void 0!==ut?ut:void 0,{uid:$i,emailVerified:R0,isAnonymous:x0,providerData:th,stsTokenManager:k0}=v;Ie($i&&k0,y,"internal-error");const Os=kt.fromJSON(this.name,k0);Ie("string"==typeof $i,y,"internal-error"),tn(et,y.name),tn(Bn,y.name),Ie("boolean"==typeof R0,y,"internal-error"),Ie("boolean"==typeof x0,y,"internal-error"),tn(ei,y.name),tn(tc,y.name),tn(E_,y.name),tn(Ma,y.name),tn(D_,y.name),tn(Ra,y.name);const nc=new dn({uid:$i,auth:y,email:Bn,emailVerified:R0,displayName:et,isAnonymous:x0,photoURL:tc,phoneNumber:ei,tenantId:E_,stsTokenManager:Os,createdAt:D_,lastLoginAt:Ra});return th&&Array.isArray(th)&&(nc.providerData=th.map(nh=>Object.assign({},nh))),Ma&&(nc._redirectEventId=Ma),nc}static _fromIdTokenResponse(y,v,D=!1){return(0,d.Z)(function*(){const R=new kt;R.updateFromServerResponse(v);const O=new dn({uid:v.localId,auth:y,stsTokenManager:R,isAnonymous:D});return yield al(O),O})()}}const Mt=(()=>{class E{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,d.Z)(function*(){return!0})()}_set(v,D){var R=this;return(0,d.Z)(function*(){R.storage[v]=D})()}_get(v){var D=this;return(0,d.Z)(function*(){const R=D.storage[v];return void 0===R?null:R})()}_remove(v){var D=this;return(0,d.Z)(function*(){delete D.storage[v]})()}_addListener(v,D){}_removeListener(v,D){}}return E.type="NONE",E})();function er(E,y,v){return`firebase:${E}:${y}:${v}`}class mi{constructor(y,v,D){this.persistence=y,this.auth=v,this.userKey=D;const{config:R,name:O}=this.auth;this.fullUserKey=er(this.userKey,R.apiKey,O),this.fullPersistenceKey=er("persistence",R.apiKey,O),this.boundEventHandler=v._onStorageEvent.bind(v),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(y){return this.persistence._set(this.fullUserKey,y.toJSON())}getCurrentUser(){var y=this;return(0,d.Z)(function*(){const v=yield y.persistence._get(y.fullUserKey);return v?dn._fromJSON(y.auth,v):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(y){var v=this;return(0,d.Z)(function*(){if(v.persistence===y)return;const D=yield v.getCurrentUser();return yield v.removeCurrentUser(),v.persistence=y,D?v.setCurrentUser(D):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(y,v,D="authUser"){return(0,d.Z)(function*(){if(!v.length)return new mi(oe(Mt),y,D);const R=(yield Promise.all(v.map(function(){var je=(0,d.Z)(function*(ut){if(yield ut._isAvailable())return ut});return function(ut){return je.apply(this,arguments)}}()))).filter(je=>je);let O=R[0]||oe(Mt);const K=er(D,y.config.apiKey,y.name);let ge=null;for(const je of v)try{const ut=yield je._get(K);if(ut){const et=dn._fromJSON(y,ut);je!==O&&(ge=et),O=je;break}}catch(ut){}const xe=R.filter(je=>je._shouldAllowMigration);return O._shouldAllowMigration&&xe.length?(O=xe[0],ge&&(yield O._set(K,ge.toJSON())),yield Promise.all(v.map(function(){var je=(0,d.Z)(function*(ut){if(ut!==O)try{yield ut._remove(K)}catch(et){}});return function(ut){return je.apply(this,arguments)}}())),new mi(O,y,D)):new mi(O,y,D)})()}}function Eu(E){const y=E.toLowerCase();if(y.includes("opera/")||y.includes("opr/")||y.includes("opios/"))return"Opera";if(gd(y))return"IEMobile";if(y.includes("msie")||y.includes("trident/"))return"IE";if(y.includes("edge/"))return"Edge";if(fd(y))return"Firefox";if(y.includes("silk/"))return"Silk";if(cr(y))return"Blackberry";if(Pi(y))return"Webos";if(pd(y))return"Safari";if((y.includes("chrome/")||Sf(y))&&!y.includes("edge/"))return"Chrome";if(ll(y))return"Android";{const D=E.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==D?void 0:D.length))return D[1]}return"Other"}function fd(E=(0,G.z$)()){return/firefox\//i.test(E)}function pd(E=(0,G.z$)()){const y=E.toLowerCase();return y.includes("safari/")&&!y.includes("chrome/")&&!y.includes("crios/")&&!y.includes("android")}function Sf(E=(0,G.z$)()){return/crios\//i.test(E)}function gd(E=(0,G.z$)()){return/iemobile/i.test(E)}function ll(E=(0,G.z$)()){return/android/i.test(E)}function cr(E=(0,G.z$)()){return/blackberry/i.test(E)}function Pi(E=(0,G.z$)()){return/webos/i.test(E)}function vr(E=(0,G.z$)()){return/iphone|ipad|ipod/i.test(E)}function Le(E=(0,G.z$)()){return vr(E)||ll(E)||Pi(E)||cr(E)||/windows phone/i.test(E)||gd(E)}function Qt(E,y=[]){let v;switch(E){case"Browser":v=Eu((0,G.z$)());break;case"Worker":v=`${Eu((0,G.z$)())}-${E}`;break;default:v=E}const D=y.length?y.join(","):"FirebaseCore-web";return`${v}/JsCore/${ye.SDK_VERSION}/${D}`}class _i{constructor(y,v){this.app=y,this.config=v,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Wn(this),this.idTokenSubscription=new Wn(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Te,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=y.name,this.clientVersion=v.sdkClientVersion}_initializeWithPersistence(y,v){var D=this;return v&&(this._popupRedirectResolver=oe(v)),this._initializationPromise=this.queue((0,d.Z)(function*(){var R;D._deleted||(D.persistenceManager=yield mi.create(D,y),!D._deleted&&((null===(R=D._popupRedirectResolver)||void 0===R?void 0:R._shouldInitProactively)&&(yield D._popupRedirectResolver._initialize(D)),yield D.initializeCurrentUser(v),!D._deleted&&(D._isInitialized=!0)))})),this._initializationPromise}_onStorageEvent(){var y=this;return(0,d.Z)(function*(){if(y._deleted)return;const v=yield y.assertedPersistence.getCurrentUser();if(y.currentUser||v){if(y.currentUser&&v&&y.currentUser.uid===v.uid)return y._currentUser._assign(v),void(yield y.currentUser.getIdToken());yield y._updateCurrentUser(v)}})()}initializeCurrentUser(y){var v=this;return(0,d.Z)(function*(){var D;let R=yield v.assertedPersistence.getCurrentUser();if(y&&v.config.authDomain){yield v.getOrInitRedirectPersistenceManager();const O=null===(D=v.redirectUser)||void 0===D?void 0:D._redirectEventId,K=null==R?void 0:R._redirectEventId,ge=yield v.tryRedirectSignIn(y);(!O||O===K)&&(null==ge?void 0:ge.user)&&(R=ge.user)}return R?R._redirectEventId?(Ie(v._popupRedirectResolver,v,"argument-error"),yield v.getOrInitRedirectPersistenceManager(),v.redirectUser&&v.redirectUser._redirectEventId===R._redirectEventId?v.directlySetCurrentUser(R):v.reloadAndSetCurrentUserOrClear(R)):v.reloadAndSetCurrentUserOrClear(R):v.directlySetCurrentUser(null)})()}tryRedirectSignIn(y){var v=this;return(0,d.Z)(function*(){let D=null;try{D=yield v._popupRedirectResolver._completeRedirectFn(v,y,!0)}catch(R){yield v._setRedirectUser(null)}return D})()}reloadAndSetCurrentUserOrClear(y){var v=this;return(0,d.Z)(function*(){try{yield al(y)}catch(D){if("auth/network-request-failed"!==D.code)return v.directlySetCurrentUser(null)}return v.directlySetCurrentUser(y)})()}useDeviceLanguage(){this.languageCode=function(){if("undefined"==typeof navigator)return null;const E=navigator;return E.languages&&E.languages[0]||E.language||null}()}_delete(){var y=this;return(0,d.Z)(function*(){y._deleted=!0})()}updateCurrentUser(y){var v=this;return(0,d.Z)(function*(){const D=y?(0,G.m9)(y):null;return D&&Ie(D.auth.config.apiKey===v.config.apiKey,v,"invalid-user-token"),v._updateCurrentUser(D&&D._clone(v))})()}_updateCurrentUser(y){var v=this;return(0,d.Z)(function*(){if(!v._deleted)return y&&Ie(v.tenantId===y.tenantId,v,"tenant-id-mismatch"),v.queue((0,d.Z)(function*(){yield v.directlySetCurrentUser(y),v.notifyAuthListeners()}))})()}signOut(){var y=this;return(0,d.Z)(function*(){return(y.redirectPersistenceManager||y._popupRedirectResolver)&&(yield y._setRedirectUser(null)),y._updateCurrentUser(null)})()}setPersistence(y){var v=this;return this.queue((0,d.Z)(function*(){yield v.assertedPersistence.setPersistence(oe(y))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(y){this._errorFactory=new G.LL("auth","Firebase",y())}onAuthStateChanged(y,v,D){return this.registerStateListener(this.authStateSubscription,y,v,D)}onIdTokenChanged(y,v,D){return this.registerStateListener(this.idTokenSubscription,y,v,D)}toJSON(){var y;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(y=this._currentUser)||void 0===y?void 0:y.toJSON()}}_setRedirectUser(y,v){var D=this;return(0,d.Z)(function*(){const R=yield D.getOrInitRedirectPersistenceManager(v);return null===y?R.removeCurrentUser():R.setCurrentUser(y)})()}getOrInitRedirectPersistenceManager(y){var v=this;return(0,d.Z)(function*(){if(!v.redirectPersistenceManager){const D=y&&oe(y)||v._popupRedirectResolver;Ie(D,v,"argument-error"),v.redirectPersistenceManager=yield mi.create(v,[oe(D._redirectPersistence)],"redirectUser"),v.redirectUser=yield v.redirectPersistenceManager.getCurrentUser()}return v.redirectPersistenceManager})()}_redirectUserForId(y){var v=this;return(0,d.Z)(function*(){var D,R;return v._isInitialized&&(yield v.queue((0,d.Z)(function*(){}))),(null===(D=v._currentUser)||void 0===D?void 0:D._redirectEventId)===y?v._currentUser:(null===(R=v.redirectUser)||void 0===R?void 0:R._redirectEventId)===y?v.redirectUser:null})()}_persistUserIfCurrent(y){var v=this;return(0,d.Z)(function*(){if(y===v.currentUser)return v.queue((0,d.Z)(function*(){return v.directlySetCurrentUser(y)}))})()}_notifyListenersIfCurrent(y){y===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var y,v;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const D=null!==(v=null===(y=this.currentUser)||void 0===y?void 0:y.uid)&&void 0!==v?v:null;this.lastNotifiedUid!==D&&(this.lastNotifiedUid=D,this.authStateSubscription.next(this.currentUser))}registerStateListener(y,v,D,R){if(this._deleted)return()=>{};const O="function"==typeof v?v:v.next.bind(v),K=this._isInitialized?Promise.resolve():this._initializationPromise;return Ie(K,this,"internal-error"),K.then(()=>O(this.currentUser)),"function"==typeof v?y.addObserver(v,D,R):y.addObserver(v)}directlySetCurrentUser(y){var v=this;return(0,d.Z)(function*(){v.currentUser&&v.currentUser!==y&&(v._currentUser._stopProactiveRefresh(),y&&v.isProactiveRefreshEnabled&&y._startProactiveRefresh()),v.currentUser=y,y?yield v.assertedPersistence.setCurrentUser(y):yield v.assertedPersistence.removeCurrentUser()})()}queue(y){return this.operations=this.operations.then(y,y),this.operations}get assertedPersistence(){return Ie(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(y){!y||this.frameworks.includes(y)||(this.frameworks.push(y),this.frameworks.sort(),this.clientVersion=Qt(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getSdkClientVersion(){return this.clientVersion}}function on(E){return(0,G.m9)(E)}class Wn{constructor(y){this.auth=y,this.observer=null,this.addObserver=(0,G.ne)(v=>this.observer=v)}get next(){return Ie(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function wn(E){const y=E.indexOf(":");return y<0?"":E.substr(0,y+1)}function la(E){if(!E)return null;const y=Number(E);return isNaN(y)?null:y}class Li{constructor(y,v){this.providerId=y,this.signInMethod=v}toJSON(){return ie("not implemented")}_getIdTokenResponse(y){return ie("not implemented")}_linkToIdToken(y,v){return ie("not implemented")}_getReauthenticationResolver(y){return ie("not implemented")}}function Co(E,y){return Iu.apply(this,arguments)}function Iu(){return(Iu=(0,d.Z)(function*(E,y){return St(E,"POST","/v1/accounts:resetPassword",en(E,y))})).apply(this,arguments)}function ul(E,y){return br.apply(this,arguments)}function br(){return(br=(0,d.Z)(function*(E,y){return St(E,"POST","/v1/accounts:update",y)})).apply(this,arguments)}function cl(E,y){return Eo.apply(this,arguments)}function Eo(){return(Eo=(0,d.Z)(function*(E,y){return St(E,"POST","/v1/accounts:update",en(E,y))})).apply(this,arguments)}function wt(){return(wt=(0,d.Z)(function*(E,y){return xi(E,"POST","/v1/accounts:signInWithPassword",en(E,y))})).apply(this,arguments)}function Tu(E,y){return Af.apply(this,arguments)}function Af(){return(Af=(0,d.Z)(function*(E,y){return St(E,"POST","/v1/accounts:sendOobCode",en(E,y))})).apply(this,arguments)}function tr(E,y){return Nu.apply(this,arguments)}function Nu(){return(Nu=(0,d.Z)(function*(E,y){return Tu(E,y)})).apply(this,arguments)}function dl(E,y){return Do.apply(this,arguments)}function Do(){return(Do=(0,d.Z)(function*(E,y){return Tu(E,y)})).apply(this,arguments)}function Ks(E,y){return nr.apply(this,arguments)}function nr(){return(nr=(0,d.Z)(function*(E,y){return Tu(E,y)})).apply(this,arguments)}function Jv(E,y){return is.apply(this,arguments)}function is(){return(is=(0,d.Z)(function*(E,y){return Tu(E,y)})).apply(this,arguments)}function Su(){return(Su=(0,d.Z)(function*(E,y){return xi(E,"POST","/v1/accounts:signInWithEmailLink",en(E,y))})).apply(this,arguments)}function wr(){return(wr=(0,d.Z)(function*(E,y){return xi(E,"POST","/v1/accounts:signInWithEmailLink",en(E,y))})).apply(this,arguments)}class Qr extends Li{constructor(y,v,D,R=null){super("password",D),this._email=y,this._password=v,this._tenantId=R}static _fromEmailAndPassword(y,v){return new Qr(y,v,"password")}static _fromEmailAndCode(y,v,D=null){return new Qr(y,v,"emailLink",D)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(y){const v="string"==typeof y?JSON.parse(y):y;if((null==v?void 0:v.email)&&(null==v?void 0:v.password)){if("password"===v.signInMethod)return this._fromEmailAndPassword(v.email,v.password);if("emailLink"===v.signInMethod)return this._fromEmailAndCode(v.email,v.password,v.tenantId)}return null}_getIdTokenResponse(y){var v=this;return(0,d.Z)(function*(){switch(v.signInMethod){case"password":return function(E,y){return wt.apply(this,arguments)}(y,{returnSecureToken:!0,email:v._email,password:v._password});case"emailLink":return function(E,y){return Su.apply(this,arguments)}(y,{email:v._email,oobCode:v._password});default:Be(y,"internal-error")}})()}_linkToIdToken(y,v){var D=this;return(0,d.Z)(function*(){switch(D.signInMethod){case"password":return ul(y,{idToken:v,returnSecureToken:!0,email:D._email,password:D._password});case"emailLink":return function(E,y){return wr.apply(this,arguments)}(y,{idToken:v,email:D._email,oobCode:D._password});default:Be(y,"internal-error")}})()}_getReauthenticationResolver(y){return this._getIdTokenResponse(y)}}function qn(E,y){return Sm.apply(this,arguments)}function Sm(){return(Sm=(0,d.Z)(function*(E,y){return xi(E,"POST","/v1/accounts:signInWithIdp",en(E,y))})).apply(this,arguments)}class Ds extends Li{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(y){const v=new Ds(y.providerId,y.signInMethod);return y.idToken||y.accessToken?(y.idToken&&(v.idToken=y.idToken),y.accessToken&&(v.accessToken=y.accessToken),y.nonce&&!y.pendingToken&&(v.nonce=y.nonce),y.pendingToken&&(v.pendingToken=y.pendingToken)):y.oauthToken&&y.oauthTokenSecret?(v.accessToken=y.oauthToken,v.secret=y.oauthTokenSecret):Be("argument-error"),v}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(y){const v="string"==typeof y?JSON.parse(y):y,{providerId:D,signInMethod:R}=v,O=(0,he._T)(v,["providerId","signInMethod"]);if(!D||!R)return null;const K=new Ds(D,R);return Object.assign(K,O),K}_getIdTokenResponse(y){return qn(y,this.buildRequest())}_linkToIdToken(y,v){const D=this.buildRequest();return D.idToken=v,qn(y,D)}_getReauthenticationResolver(y){const v=this.buildRequest();return v.autoCreate=!1,qn(y,v)}buildRequest(){const y={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)y.pendingToken=this.pendingToken;else{const v={};this.idToken&&(v.id_token=this.idToken),this.accessToken&&(v.access_token=this.accessToken),this.secret&&(v.oauth_token_secret=this.secret),v.providerId=this.providerId,this.nonce&&!this.pendingToken&&(v.nonce=this.nonce),y.postBody=(0,G.xO)(v)}return y}}function PC(E,y){return Am.apply(this,arguments)}function Am(){return(Am=(0,d.Z)(function*(E,y){return St(E,"POST","/v1/accounts:sendVerificationCode",en(E,y))})).apply(this,arguments)}function Mm(){return(Mm=(0,d.Z)(function*(E,y){return xi(E,"POST","/v1/accounts:signInWithPhoneNumber",en(E,y))})).apply(this,arguments)}function Rm(){return(Rm=(0,d.Z)(function*(E,y){const v=yield xi(E,"POST","/v1/accounts:signInWithPhoneNumber",en(E,y));if(v.temporaryProof)throw Ys(E,"account-exists-with-different-credential",v);return v})).apply(this,arguments)}const VC={USER_NOT_FOUND:"user-not-found"};function xm(){return(xm=(0,d.Z)(function*(E,y){return xi(E,"POST","/v1/accounts:signInWithPhoneNumber",en(E,Object.assign(Object.assign({},y),{operation:"REAUTH"})),VC)})).apply(this,arguments)}class hl extends Li{constructor(y){super("phone","phone"),this.params=y}static _fromVerification(y,v){return new hl({verificationId:y,verificationCode:v})}static _fromTokenResponse(y,v){return new hl({phoneNumber:y,temporaryProof:v})}_getIdTokenResponse(y){return function(E,y){return Mm.apply(this,arguments)}(y,this._makeVerificationRequest())}_linkToIdToken(y,v){return function(E,y){return Rm.apply(this,arguments)}(y,Object.assign({idToken:v},this._makeVerificationRequest()))}_getReauthenticationResolver(y){return function(E,y){return xm.apply(this,arguments)}(y,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:y,phoneNumber:v,verificationId:D,verificationCode:R}=this.params;return y&&v?{temporaryProof:y,phoneNumber:v}:{sessionInfo:D,code:R}}toJSON(){const y={providerId:this.providerId};return this.params.phoneNumber&&(y.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(y.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(y.verificationCode=this.params.verificationCode),this.params.verificationId&&(y.verificationId=this.params.verificationId),y}static fromJSON(y){"string"==typeof y&&(y=JSON.parse(y));const{verificationId:v,verificationCode:D,phoneNumber:R,temporaryProof:O}=y;return D||v||R||O?new hl({verificationId:v,verificationCode:D,phoneNumber:R,temporaryProof:O}):null}}class _d{constructor(y){var v,D,R,O,K,ge;const xe=(0,G.zd)((0,G.pd)(y)),je=null!==(v=xe.apiKey)&&void 0!==v?v:null,ut=null!==(D=xe.oobCode)&&void 0!==D?D:null,et=function(E){switch(E){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(R=xe.mode)&&void 0!==R?R:null);Ie(je&&ut&&et,"argument-error"),this.apiKey=je,this.operation=et,this.code=ut,this.continueUrl=null!==(O=xe.continueUrl)&&void 0!==O?O:null,this.languageCode=null!==(K=xe.languageCode)&&void 0!==K?K:null,this.tenantId=null!==(ge=xe.tenantId)&&void 0!==ge?ge:null}static parseLink(y){const v=function(E){const y=(0,G.zd)((0,G.pd)(E)).link,v=y?(0,G.zd)((0,G.pd)(y)).deep_link_id:null,D=(0,G.zd)((0,G.pd)(E)).deep_link_id;return(D?(0,G.zd)((0,G.pd)(D)).link:null)||D||v||y||E}(y);try{return new _d(v)}catch(D){return null}}}let yd=(()=>{class E{constructor(){this.providerId=E.PROVIDER_ID}static credential(v,D){return Qr._fromEmailAndPassword(v,D)}static credentialWithLink(v,D){const R=_d.parseLink(D);return Ie(R,"argument-error"),Qr._fromEmailAndCode(v,R.code,R.tenantId)}}return E.PROVIDER_ID="password",E.EMAIL_PASSWORD_SIGN_IN_METHOD="password",E.EMAIL_LINK_SIGN_IN_METHOD="emailLink",E})();class ss{constructor(y){this.providerId=y,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(y){this.defaultLanguageCode=y}setCustomParameters(y){return this.customParameters=y,this}getCustomParameters(){return this.customParameters}}class Au extends ss{constructor(){super(...arguments),this.scopes=[]}addScope(y){return this.scopes.includes(y)||this.scopes.push(y),this}getScopes(){return[...this.scopes]}}class ua extends Au{static credentialFromJSON(y){const v="string"==typeof y?JSON.parse(y):y;return Ie("providerId"in v&&"signInMethod"in v,"argument-error"),Ds._fromParams(v)}credential(y){return this._credential(y)}_credential(y){return Ie(y.idToken||y.accessToken,"argument-error"),Ds._fromParams(Object.assign(Object.assign({},y),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(y){return ua.oauthCredentialFromTaggedObject(y)}static credentialFromError(y){return ua.oauthCredentialFromTaggedObject(y.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:y}){if(!y)return null;const{oauthIdToken:v,oauthAccessToken:D,oauthTokenSecret:R,pendingToken:O,nonce:K,providerId:ge}=y;if(!D&&!R&&!v&&!O||!ge)return null;try{return new ua(ge)._credential({idToken:v,accessToken:D,rawNonce:K,pendingToken:O})}catch(xe){return null}}}let Mf=(()=>{class E extends Au{constructor(){super("facebook.com")}static credential(v){return Ds._fromParams({providerId:E.PROVIDER_ID,signInMethod:E.FACEBOOK_SIGN_IN_METHOD,accessToken:v})}static credentialFromResult(v){return E.credentialFromTaggedObject(v)}static credentialFromError(v){return E.credentialFromTaggedObject(v.customData||{})}static credentialFromTaggedObject({_tokenResponse:v}){if(!v||!("oauthAccessToken"in v)||!v.oauthAccessToken)return null;try{return E.credential(v.oauthAccessToken)}catch(D){return null}}}return E.FACEBOOK_SIGN_IN_METHOD="facebook.com",E.PROVIDER_ID="facebook.com",E})(),Io=(()=>{class E extends Au{constructor(){super("google.com"),this.addScope("profile")}static credential(v,D){return Ds._fromParams({providerId:E.PROVIDER_ID,signInMethod:E.GOOGLE_SIGN_IN_METHOD,idToken:v,accessToken:D})}static credentialFromResult(v){return E.credentialFromTaggedObject(v)}static credentialFromError(v){return E.credentialFromTaggedObject(v.customData||{})}static credentialFromTaggedObject({_tokenResponse:v}){if(!v)return null;const{oauthIdToken:D,oauthAccessToken:R}=v;if(!D&&!R)return null;try{return E.credential(D,R)}catch(O){return null}}}return E.GOOGLE_SIGN_IN_METHOD="google.com",E.PROVIDER_ID="google.com",E})(),km=(()=>{class E extends Au{constructor(){super("github.com")}static credential(v){return Ds._fromParams({providerId:E.PROVIDER_ID,signInMethod:E.GITHUB_SIGN_IN_METHOD,accessToken:v})}static credentialFromResult(v){return E.credentialFromTaggedObject(v)}static credentialFromError(v){return E.credentialFromTaggedObject(v.customData||{})}static credentialFromTaggedObject({_tokenResponse:v}){if(!v||!("oauthAccessToken"in v)||!v.oauthAccessToken)return null;try{return E.credential(v.oauthAccessToken)}catch(D){return null}}}return E.GITHUB_SIGN_IN_METHOD="github.com",E.PROVIDER_ID="github.com",E})();class To extends Li{constructor(y,v){super(y,y),this.pendingToken=v}_getIdTokenResponse(y){return qn(y,this.buildRequest())}_linkToIdToken(y,v){const D=this.buildRequest();return D.idToken=v,qn(y,D)}_getReauthenticationResolver(y){const v=this.buildRequest();return v.autoCreate=!1,qn(y,v)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(y){const v="string"==typeof y?JSON.parse(y):y,{providerId:D,signInMethod:R,pendingToken:O}=v;return D&&R&&O&&D===R?new To(D,O):null}static _create(y,v){return new To(y,v)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}let xf=(()=>{class E extends Au{constructor(){super("twitter.com")}static credential(v,D){return Ds._fromParams({providerId:E.PROVIDER_ID,signInMethod:E.TWITTER_SIGN_IN_METHOD,oauthToken:v,oauthTokenSecret:D})}static credentialFromResult(v){return E.credentialFromTaggedObject(v)}static credentialFromError(v){return E.credentialFromTaggedObject(v.customData||{})}static credentialFromTaggedObject({_tokenResponse:v}){if(!v)return null;const{oauthAccessToken:D,oauthTokenSecret:R}=v;if(!D||!R)return null;try{return E.credential(D,R)}catch(O){return null}}}return E.TWITTER_SIGN_IN_METHOD="twitter.com",E.PROVIDER_ID="twitter.com",E})();function kf(E,y){return vd.apply(this,arguments)}function vd(){return(vd=(0,d.Z)(function*(E,y){return xi(E,"POST","/v1/accounts:signUp",en(E,y))})).apply(this,arguments)}class yi{constructor(y){this.user=y.user,this.providerId=y.providerId,this._tokenResponse=y._tokenResponse,this.operationType=y.operationType}static _fromIdTokenResponse(y,v,D,R=!1){return(0,d.Z)(function*(){const O=yield dn._fromIdTokenResponse(y,D,R),K=t0(D);return new yi({user:O,providerId:K,_tokenResponse:D,operationType:v})})()}static _forOperation(y,v,D){return(0,d.Z)(function*(){yield y._updateTokensIfNecessary(D,!0);const R=t0(D);return new yi({user:y,providerId:R,_tokenResponse:D,operationType:v})})()}}function t0(E){return E.providerId?E.providerId:"phoneNumber"in E?"phone":null}function Mu(){return(Mu=(0,d.Z)(function*(E){var y;const v=on(E);if(yield v._initializationPromise,null===(y=v.currentUser)||void 0===y?void 0:y.isAnonymous)return new yi({user:v.currentUser,providerId:null,operationType:"signIn"});const D=yield kf(v,{returnSecureToken:!0}),R=yield yi._fromIdTokenResponse(v,"signIn",D,!0);return yield v._updateCurrentUser(R.user),R})).apply(this,arguments)}class Ru extends G.ZR{constructor(y,v,D,R){var O;super(v.code,v.message),this.operationType=D,this.user=R,this.name="FirebaseError",Object.setPrototypeOf(this,Ru.prototype),this.appName=y.name,this.code=v.code,this.tenantId=null!==(O=y.tenantId)&&void 0!==O?O:void 0,this.serverResponse=v.customData.serverResponse}static _fromErrorAndOperation(y,v,D,R){return new Ru(y,v,D,R)}}function xu(E,y,v,D){return("reauthenticate"===y?v._getReauthenticationResolver(E):v._getIdTokenResponse(E)).catch(O=>{throw"auth/multi-factor-auth-required"===O.code?Ru._fromErrorAndOperation(E,O,y,D):O})}function Om(E){return new Set(E.map(({providerId:y})=>y).filter(y=>!!y))}function Fm(){return(Fm=(0,d.Z)(function*(E,y){const v=(0,G.m9)(E);yield Qs(!0,v,y);const{providerUserInfo:D}=yield Xn(v.auth,{idToken:yield v.getIdToken(),deleteProvider:[y]}),R=Om(D||[]);return v.providerData=v.providerData.filter(O=>R.has(O.providerId)),R.has("phone")||(v.phoneNumber=null),yield v.auth._persistUserIfCurrent(v),v})).apply(this,arguments)}function an(E,y){return bd.apply(this,arguments)}function bd(){return(bd=(0,d.Z)(function*(E,y,v=!1){const D=yield Oi(E,y._linkToIdToken(E.auth,yield E.getIdToken()),v);return yi._forOperation(E,"link",D)})).apply(this,arguments)}function Qs(E,y,v){return Of.apply(this,arguments)}function Of(){return(Of=(0,d.Z)(function*(E,y,v){yield al(y);const R=!1===E?"provider-already-linked":"no-such-provider";Ie(Om(y.providerData).has(v)===E,y.auth,R)})).apply(this,arguments)}function ln(E,y){return Pf.apply(this,arguments)}function Pf(){return(Pf=(0,d.Z)(function*(E,y,v=!1){const{auth:D}=E,R="reauthenticate";try{const O=yield Oi(E,xu(D,R,y,E),v);Ie(O.idToken,D,"internal-error");const K=Pe(O.idToken);Ie(K,D,"internal-error");const{sub:ge}=K;return Ie(E.uid===ge,D,"user-mismatch"),yi._forOperation(E,R,O)}catch(O){throw"auth/user-not-found"===(null==O?void 0:O.code)&&Be(D,"user-mismatch"),O}})).apply(this,arguments)}function Lm(E,y){return fl.apply(this,arguments)}function fl(){return(fl=(0,d.Z)(function*(E,y,v=!1){const D="signIn",R=yield xu(E,D,y),O=yield yi._fromIdTokenResponse(E,D,R);return v||(yield E._updateCurrentUser(O.user)),O})).apply(this,arguments)}function Or(E,y){return ku.apply(this,arguments)}function ku(){return(ku=(0,d.Z)(function*(E,y){return Lm(on(E),y)})).apply(this,arguments)}function wd(E,y){return No.apply(this,arguments)}function No(){return(No=(0,d.Z)(function*(E,y){const v=(0,G.m9)(E);return yield Qs(!1,v,y.providerId),an(v,y)})).apply(this,arguments)}function Jr(E,y){return Ff.apply(this,arguments)}function Ff(){return(Ff=(0,d.Z)(function*(E,y){return ln((0,G.m9)(E),y)})).apply(this,arguments)}function Vm(E,y){return pl.apply(this,arguments)}function pl(){return(pl=(0,d.Z)(function*(E,y){return xi(E,"POST","/v1/accounts:signInWithCustomToken",en(E,y))})).apply(this,arguments)}function Cd(){return(Cd=(0,d.Z)(function*(E,y){const v=on(E),D=yield Vm(v,{token:y,returnSecureToken:!0}),R=yield yi._fromIdTokenResponse(v,"signIn",D);return yield v._updateCurrentUser(R.user),R})).apply(this,arguments)}class gl{constructor(y,v){this.factorId=y,this.uid=v.mfaEnrollmentId,this.enrollmentTime=new Date(v.enrolledAt).toUTCString(),this.displayName=v.displayName}static _fromServerResponse(y,v){return"phoneInfo"in v?lt._fromServerResponse(y,v):Be(y,"internal-error")}}class lt extends gl{constructor(y){super("phone",y),this.phoneNumber=y.phoneInfo}static _fromServerResponse(y,v){return new lt(v)}}function Ed(E,y,v){var D;Ie((null===(D=v.url)||void 0===D?void 0:D.length)>0,E,"invalid-continue-uri"),Ie(void 0===v.dynamicLinkDomain||v.dynamicLinkDomain.length>0,E,"invalid-dynamic-link-domain"),y.continueUrl=v.url,y.dynamicLinkDomain=v.dynamicLinkDomain,y.canHandleCodeInApp=v.handleCodeInApp,v.iOS&&(Ie(v.iOS.bundleId.length>0,E,"missing-ios-bundle-id"),y.iOSBundleId=v.iOS.bundleId),v.android&&(Ie(v.android.packageName.length>0,E,"missing-android-pkg-name"),y.androidInstallApp=v.android.installApp,y.androidMinimumVersionCode=v.android.minimumVersion,y.androidPackageName=v.android.packageName)}function Lf(){return(Lf=(0,d.Z)(function*(E,y,v){const D=(0,G.m9)(E),R={requestType:"PASSWORD_RESET",email:y};v&&Ed(D,R,v),yield dl(D,R)})).apply(this,arguments)}function Vf(){return(Vf=(0,d.Z)(function*(E,y,v){yield Co((0,G.m9)(E),{oobCode:y,newPassword:v})})).apply(this,arguments)}function da(){return(da=(0,d.Z)(function*(E,y){yield cl((0,G.m9)(E),{oobCode:y})})).apply(this,arguments)}function Ne(E,y){return Nt.apply(this,arguments)}function Nt(){return(Nt=(0,d.Z)(function*(E,y){const v=(0,G.m9)(E),D=yield Co(v,{oobCode:y}),R=D.requestType;switch(Ie(R,v,"internal-error"),R){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":Ie(D.newEmail,v,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":Ie(D.mfaInfo,v,"internal-error");default:Ie(D.email,v,"internal-error")}let O=null;return D.mfaInfo&&(O=gl._fromServerResponse(on(v),D.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===D.requestType?D.newEmail:D.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===D.requestType?D.email:D.newEmail)||null,multiFactorInfo:O},operation:R}})).apply(this,arguments)}function nn(){return(nn=(0,d.Z)(function*(E,y){const{data:v}=yield Ne((0,G.m9)(E),y);return v.email})).apply(this,arguments)}function Js(){return(Js=(0,d.Z)(function*(E,y,v){const D=on(E),R=yield kf(D,{returnSecureToken:!0,email:y,password:v}),O=yield yi._fromIdTokenResponse(D,"signIn",R);return yield D._updateCurrentUser(O.user),O})).apply(this,arguments)}function ml(){return(ml=(0,d.Z)(function*(E,y,v){const D=(0,G.m9)(E),R={requestType:"EMAIL_SIGNIN",email:y};Ie(v.handleCodeInApp,D,"argument-error"),v&&Ed(D,R,v),yield Ks(D,R)})).apply(this,arguments)}function _l(){return(_l=(0,d.Z)(function*(E,y,v){const D=(0,G.m9)(E),R=yd.credentialWithLink(y,v||ke());return Ie(R._tenantId===(D.tenantId||null),D,"tenant-id-mismatch"),Or(D,R)})).apply(this,arguments)}function Id(E,y){return Pn.apply(this,arguments)}function Pn(){return(Pn=(0,d.Z)(function*(E,y){return St(E,"POST","/v1/accounts:createAuthUri",en(E,y))})).apply(this,arguments)}function Hf(){return(Hf=(0,d.Z)(function*(E,y){const D={identifier:y,continueUri:Ge()?ke():"http://localhost"},{signinMethods:R}=yield Id((0,G.m9)(E),D);return R||[]})).apply(this,arguments)}function vi(){return(vi=(0,d.Z)(function*(E,y){const v=(0,G.m9)(E),R={requestType:"VERIFY_EMAIL",idToken:yield E.getIdToken()};y&&Ed(v.auth,R,y);const{email:O}=yield tr(v.auth,R);O!==E.email&&(yield E.reload())})).apply(this,arguments)}function Td(){return(Td=(0,d.Z)(function*(E,y,v){const D=(0,G.m9)(E),O={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield E.getIdToken(),newEmail:y};v&&Ed(D.auth,O,v);const{email:K}=yield Jv(D.auth,O);K!==E.email&&(yield E.reload())})).apply(this,arguments)}function Bm(E,y){return jf.apply(this,arguments)}function jf(){return(jf=(0,d.Z)(function*(E,y){return St(E,"POST","/v1/accounts:update",y)})).apply(this,arguments)}function Ou(){return(Ou=(0,d.Z)(function*(E,{displayName:y,photoURL:v}){if(void 0===y&&void 0===v)return;const D=(0,G.m9)(E),O={idToken:yield D.getIdToken(),displayName:y,photoUrl:v,returnSecureToken:!0},K=yield Oi(D,Bm(D.auth,O));D.displayName=K.displayName||null,D.photoURL=K.photoUrl||null;const ge=D.providerData.find(({providerId:xe})=>"password"===xe);ge&&(ge.displayName=D.displayName,ge.photoURL=D.photoURL),yield D._updateTokensIfNecessary(K)})).apply(this,arguments)}function Gf(E,y,v){return Nd.apply(this,arguments)}function Nd(){return(Nd=(0,d.Z)(function*(E,y,v){const{auth:D}=E,O={idToken:yield E.getIdToken(),returnSecureToken:!0};y&&(O.email=y),v&&(O.password=v);const K=yield Oi(E,ul(D,O));yield E._updateTokensIfNecessary(K,!0)})).apply(this,arguments)}class ha{constructor(y,v,D={}){this.isNewUser=y,this.providerId=v,this.profile=D}}class Hm extends ha{constructor(y,v,D,R){super(y,v,D),this.username=R}}class jm extends ha{constructor(y,v){super(y,"facebook.com",v)}}class a0 extends Hm{constructor(y,v){super(y,"github.com",v,"string"==typeof(null==v?void 0:v.login)?null==v?void 0:v.login:null)}}class Fu extends ha{constructor(y,v){super(y,"google.com",v)}}class l0 extends Hm{constructor(y,v,D){super(y,"twitter.com",v,D)}}function u0(E){const{user:y,_tokenResponse:v}=E;return y.isAnonymous&&!v?{providerId:null,isNewUser:!1,profile:null}:function(E){var y,v;if(!E)return null;const{providerId:D}=E,R=E.rawUserInfo?JSON.parse(E.rawUserInfo):{},O=E.isNewUser||"identitytoolkit#SignupNewUserResponse"===E.kind;if(!D&&(null==E?void 0:E.idToken)){const K=null===(v=null===(y=Pe(E.idToken))||void 0===y?void 0:y.firebase)||void 0===v?void 0:v.sign_in_provider;if(K)return new ha(O,"anonymous"!==K&&"custom"!==K?K:null)}if(!D)return null;switch(D){case"facebook.com":return new jm(O,R);case"github.com":return new a0(O,R);case"google.com":return new Fu(O,R);case"twitter.com":return new l0(O,R,E.screenName||null);case"custom":case"anonymous":return new ha(O,null);default:return new ha(O,D,R)}}(v)}class Xs{constructor(y,v){this.type=y,this.credential=v}static _fromIdtoken(y){return new Xs("enroll",y)}static _fromMfaPendingCredential(y){return new Xs("signin",y)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(y){var v,D;if(null==y?void 0:y.multiFactorSession){if(null===(v=y.multiFactorSession)||void 0===v?void 0:v.pendingCredential)return Xs._fromMfaPendingCredential(y.multiFactorSession.pendingCredential);if(null===(D=y.multiFactorSession)||void 0===D?void 0:D.idToken)return Xs._fromIdtoken(y.multiFactorSession.idToken)}return null}}class vl{constructor(y,v,D){this.session=y,this.hints=v,this.signInResolver=D}static _fromError(y,v){const D=on(y),R=(v.serverResponse.mfaInfo||[]).map(K=>gl._fromServerResponse(D,K));Ie(v.serverResponse.mfaPendingCredential,D,"internal-error");const O=Xs._fromMfaPendingCredential(v.serverResponse.mfaPendingCredential);return new vl(O,R,function(){var K=(0,d.Z)(function*(ge){const xe=yield ge._process(D,O);delete v.serverResponse.mfaInfo,delete v.serverResponse.mfaPendingCredential;const je=Object.assign(Object.assign({},v.serverResponse),{idToken:xe.idToken,refreshToken:xe.refreshToken});switch(v.operationType){case"signIn":const ut=yield yi._fromIdTokenResponse(D,v.operationType,je);return yield D._updateCurrentUser(ut.user),ut;case"reauthenticate":return Ie(v.user,D,"internal-error"),yi._forOperation(v.user,v.operationType,je);default:Be(D,"internal-error")}});return function(ge){return K.apply(this,arguments)}}())}resolveSignIn(y){var v=this;return(0,d.Z)(function*(){return v.signInResolver(y)})()}}function Ad(E,y){return St(E,"POST","/v2/accounts/mfaEnrollment:start",en(E,y))}class zf{constructor(y){this.user=y,this.enrolledFactors=[],y._onReload(v=>{v.mfaInfo&&(this.enrolledFactors=v.mfaInfo.map(D=>gl._fromServerResponse(y.auth,D)))})}static _fromUser(y){return new zf(y)}getSession(){var y=this;return(0,d.Z)(function*(){return Xs._fromIdtoken(yield y.user.getIdToken())})()}enroll(y,v){var D=this;return(0,d.Z)(function*(){const R=y,O=yield D.getSession(),K=yield Oi(D.user,R._process(D.user.auth,O,v));return yield D.user._updateTokensIfNecessary(K),D.user.reload()})()}unenroll(y){var v=this;return(0,d.Z)(function*(){const D="string"==typeof y?y:y.uid,R=yield v.user.getIdToken(),O=yield Oi(v.user,function(E,y){return St(E,"POST","/v2/accounts/mfaEnrollment:withdraw",en(E,y))}(v.user.auth,{idToken:R,mfaEnrollmentId:D}));v.enrolledFactors=v.enrolledFactors.filter(({uid:K})=>K!==D),yield v.user._updateTokensIfNecessary(O);try{yield v.user.reload()}catch(K){if("auth/user-token-expired"!==K.code)throw K}})()}}const Is=new WeakMap,Yf="__sak";class Gm{constructor(y,v){this.storage=y,this.type=v}_isAvailable(){try{return this.storage?(this.storage.setItem(Yf,"1"),this.storage.removeItem(Yf),Promise.resolve(!0)):Promise.resolve(!1)}catch(y){return Promise.resolve(!1)}}_set(y,v){return this.storage.setItem(y,JSON.stringify(v)),Promise.resolve()}_get(y){const v=this.storage.getItem(y);return Promise.resolve(v?JSON.parse(v):null)}_remove(y){return this.storage.removeItem(y),Promise.resolve()}}const Kf=(()=>{class E extends Gm{constructor(){super(window.localStorage,"LOCAL"),this.boundEventHandler=(v,D)=>this.onStorageEvent(v,D),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const E=(0,G.z$)();return pd(E)||vr(E)}()&&function(){try{return!(!window||window===window.top)}catch(E){return!1}}(),this.fallbackToPolling=Le(),this._shouldAllowMigration=!0}forAllChangedKeys(v){for(const D of Object.keys(this.listeners)){const R=this.storage.getItem(D),O=this.localCache[D];R!==O&&v(D,O,R)}}onStorageEvent(v,D=!1){if(!v.key)return void this.forAllChangedKeys((ge,xe,je)=>{this.notifyListeners(ge,je)});const R=v.key;if(D?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const ge=this.storage.getItem(R);if(v.newValue!==ge)null!==v.newValue?this.storage.setItem(R,v.newValue):this.storage.removeItem(R);else if(this.localCache[R]===v.newValue&&!D)return}const O=()=>{const ge=this.storage.getItem(R);!D&&this.localCache[R]===ge||this.notifyListeners(R,ge)},K=this.storage.getItem(R);(0,G.w1)()&&10===document.documentMode&&K!==v.newValue&&v.newValue!==v.oldValue?setTimeout(O,10):O()}notifyListeners(v,D){this.localCache[v]=D;const R=this.listeners[v];if(R)for(const O of Array.from(R))O(D&&JSON.parse(D))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((v,D,R)=>{this.onStorageEvent(new StorageEvent("storage",{key:v,oldValue:D,newValue:R}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(v,D){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[v]||(this.listeners[v]=new Set,this.localCache[v]=this.storage.getItem(v)),this.listeners[v].add(D)}_removeListener(v,D){this.listeners[v]&&(this.listeners[v].delete(D),0===this.listeners[v].size&&delete this.listeners[v]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(v,D){var R=()=>super._set,O=this;return(0,d.Z)(function*(){yield R().call(O,v,D),O.localCache[v]=JSON.stringify(D)})()}_get(v){var D=()=>super._get,R=this;return(0,d.Z)(function*(){const O=yield D().call(R,v);return R.localCache[v]=JSON.stringify(O),O})()}_remove(v){var D=()=>super._remove,R=this;return(0,d.Z)(function*(){yield D().call(R,v),delete R.localCache[v]})()}}return E.type="LOCAL",E})(),Ts=(()=>{class E extends Gm{constructor(){super(window.sessionStorage,"SESSION")}_addListener(v,D){}_removeListener(v,D){}}return E.type="SESSION",E})();let Ns=(()=>{class E{constructor(v){this.eventTarget=v,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(v){const D=this.receivers.find(O=>O.isListeningto(v));if(D)return D;const R=new E(v);return this.receivers.push(R),R}isListeningto(v){return this.eventTarget===v}handleEvent(v){var D=this;return(0,d.Z)(function*(){const R=v,{eventId:O,eventType:K,data:ge}=R.data,xe=D.handlersMap[K];if(!(null==xe?void 0:xe.size))return;R.ports[0].postMessage({status:"ack",eventId:O,eventType:K});const je=Array.from(xe).map(function(){var et=(0,d.Z)(function*(Bn){return Bn(R.origin,ge)});return function(Bn){return et.apply(this,arguments)}}()),ut=yield function(E){return Promise.all(E.map(function(){var y=(0,d.Z)(function*(v){try{return{fulfilled:!0,value:yield v}}catch(D){return{fulfilled:!1,reason:D}}});return function(v){return y.apply(this,arguments)}}()))}(je);R.ports[0].postMessage({status:"done",eventId:O,eventType:K,response:ut})})()}_subscribe(v,D){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[v]||(this.handlersMap[v]=new Set),this.handlersMap[v].add(D)}_unsubscribe(v,D){this.handlersMap[v]&&D&&this.handlersMap[v].delete(D),(!D||0===this.handlersMap[v].size)&&delete this.handlersMap[v],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return E.receivers=[],E})();function Ao(E="",y=10){let v="";for(let D=0;D<y;D++)v+=Math.floor(10*Math.random());return E+v}class qm{constructor(y){this.target=y,this.handlers=new Set}removeMessageHandler(y){y.messageChannel&&(y.messageChannel.port1.removeEventListener("message",y.onMessage),y.messageChannel.port1.close()),this.handlers.delete(y)}_send(y,v,D=50){var R=this;return(0,d.Z)(function*(){const O="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!O)throw new Error("connection_unavailable");let K,ge;return new Promise((xe,je)=>{const ut=Ao("",20);O.port1.start();const et=setTimeout(()=>{je(new Error("unsupported_event"))},D);ge={messageChannel:O,onMessage(Bn){const ei=Bn;if(ei.data.eventId===ut)switch(ei.data.status){case"ack":clearTimeout(et),K=setTimeout(()=>{je(new Error("timeout"))},3e3);break;case"done":clearTimeout(K),xe(ei.data.response);break;default:clearTimeout(et),clearTimeout(K),je(new Error("invalid_response"))}}},R.handlers.add(ge),O.port1.addEventListener("message",ge.onMessage),R.target.postMessage({eventType:y,eventId:ut,data:v},[O.port2])}).finally(()=>{ge&&R.removeMessageHandler(ge)})})()}}function Cn(){return window}function zm(){return void 0!==Cn().WorkerGlobalScope&&"function"==typeof Cn().importScripts}function Rd(){return(Rd=(0,d.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(E){return null}})).apply(this,arguments)}const Qf="firebaseLocalStorageDb",Jf="firebaseLocalStorage",h0="fbase_key";class eo{constructor(y){this.request=y}toPromise(){return new Promise((y,v)=>{this.request.addEventListener("success",()=>{y(this.request.result)}),this.request.addEventListener("error",()=>{v(this.request.error)})})}}function Bu(E,y){return E.transaction([Jf],y?"readwrite":"readonly").objectStore(Jf)}function We(){const E=indexedDB.open(Qf,1);return new Promise((y,v)=>{E.addEventListener("error",()=>{v(E.error)}),E.addEventListener("upgradeneeded",()=>{const D=E.result;try{D.createObjectStore(Jf,{keyPath:h0})}catch(R){v(R)}}),E.addEventListener("success",(0,d.Z)(function*(){const D=E.result;D.objectStoreNames.contains(Jf)?y(D):(D.close(),yield function(){const E=indexedDB.deleteDatabase(Qf);return new eo(E).toPromise()}(),y(yield We()))}))})}function qt(E,y,v){return kd.apply(this,arguments)}function kd(){return(kd=(0,d.Z)(function*(E,y,v){const D=Bu(E,!0).put({[h0]:y,value:v});return new eo(D).toPromise()})).apply(this,arguments)}function pa(){return(pa=(0,d.Z)(function*(E,y){const v=Bu(E,!1).get(y),D=yield new eo(v).toPromise();return void 0===D?null:D.value})).apply(this,arguments)}function Mo(E,y){const v=Bu(E,!0).delete(y);return new eo(v).toPromise()}const Ro=(()=>{class E{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var v=this;return(0,d.Z)(function*(){return v.db||(v.db=yield We()),v.db})()}_withRetries(v){var D=this;return(0,d.Z)(function*(){let R=0;for(;;)try{const O=yield D._openDb();return yield v(O)}catch(O){if(R++>3)throw O;D.db&&(D.db.close(),D.db=void 0)}})()}initializeServiceWorkerMessaging(){var v=this;return(0,d.Z)(function*(){return zm()?v.initializeReceiver():v.initializeSender()})()}initializeReceiver(){var v=this;return(0,d.Z)(function*(){v.receiver=Ns._getInstance(zm()?self:null),v.receiver._subscribe("keyChanged",function(){var D=(0,d.Z)(function*(R,O){return{keyProcessed:(yield v._poll()).includes(O.key)}});return function(R,O){return D.apply(this,arguments)}}()),v.receiver._subscribe("ping",function(){var D=(0,d.Z)(function*(R,O){return["keyChanged"]});return function(R,O){return D.apply(this,arguments)}}())})()}initializeSender(){var v=this;return(0,d.Z)(function*(){var D,R;if(v.activeServiceWorker=yield function(){return Rd.apply(this,arguments)}(),!v.activeServiceWorker)return;v.sender=new qm(v.activeServiceWorker);const O=yield v.sender._send("ping",{},800);!O||(null===(D=O[0])||void 0===D?void 0:D.fulfilled)&&(null===(R=O[0])||void 0===R?void 0:R.value.includes("keyChanged"))&&(v.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(v){var D=this;return(0,d.Z)(function*(){if(D.sender&&D.activeServiceWorker&&function(){var E;return(null===(E=null==navigator?void 0:navigator.serviceWorker)||void 0===E?void 0:E.controller)||null}()===D.activeServiceWorker)try{yield D.sender._send("keyChanged",{key:v},D.serviceWorkerReceiverAvailable?800:50)}catch(R){}})()}_isAvailable(){return(0,d.Z)(function*(){try{if(!indexedDB)return!1;const v=yield We();return yield qt(v,Yf,"1"),yield Mo(v,Yf),!0}catch(v){}return!1})()}_withPendingWrite(v){var D=this;return(0,d.Z)(function*(){D.pendingWrites++;try{yield v()}finally{D.pendingWrites--}})()}_set(v,D){var R=this;return(0,d.Z)(function*(){return R._withPendingWrite((0,d.Z)(function*(){return yield R._withRetries(O=>qt(O,v,D)),R.localCache[v]=D,R.notifyServiceWorker(v)}))})()}_get(v){var D=this;return(0,d.Z)(function*(){const R=yield D._withRetries(O=>function(E,y){return pa.apply(this,arguments)}(O,v));return D.localCache[v]=R,R})()}_remove(v){var D=this;return(0,d.Z)(function*(){return D._withPendingWrite((0,d.Z)(function*(){return yield D._withRetries(R=>Mo(R,v)),delete D.localCache[v],D.notifyServiceWorker(v)}))})()}_poll(){var v=this;return(0,d.Z)(function*(){const D=yield v._withRetries(K=>{const ge=Bu(K,!1).getAll();return new eo(ge).toPromise()});if(!D)return[];if(0!==v.pendingWrites)return[];const R=[],O=new Set;for(const{fbase_key:K,value:ge}of D)O.add(K),JSON.stringify(v.localCache[K])!==JSON.stringify(ge)&&(v.notifyListeners(K,ge),R.push(K));for(const K of Object.keys(v.localCache))v.localCache[K]&&!O.has(K)&&(v.notifyListeners(K,null),R.push(K));return R})()}notifyListeners(v,D){this.localCache[v]=D;const R=this.listeners[v];if(R)for(const O of Array.from(R))O(D)}startPolling(){var v=this;this.stopPolling(),this.pollTimer=setInterval((0,d.Z)(function*(){return v._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(v,D){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[v]||(this.listeners[v]=new Set,this._get(v)),this.listeners[v].add(D)}_removeListener(v,D){this.listeners[v]&&(this.listeners[v].delete(D),0===this.listeners[v].size&&delete this.listeners[v]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return E.type="LOCAL",E})();function An(E,y){return St(E,"POST","/v2/accounts/mfaSignIn:start",en(E,y))}function Uu(){return(Uu=(0,d.Z)(function*(E){return(yield St(E,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function tp(E){return new Promise((y,v)=>{const D=document.createElement("script");D.setAttribute("src",E),D.onload=y,D.onerror=R=>{const O=st("internal-error");O.customData=R,v(O)},D.type="text/javascript",D.charset="UTF-8",function(){var E,y;return null!==(y=null===(E=document.getElementsByTagName("head"))||void 0===E?void 0:E[0])&&void 0!==y?y:document}().appendChild(D)})}function Pd(E){return`__${E}${Math.floor(1e6*Math.random())}`}const Ui=1e12;class wl{constructor(y){this.auth=y,this.counter=Ui,this._widgets=new Map}render(y,v){const D=this.counter;return this._widgets.set(D,new ko(y,this.auth.name,v||{})),this.counter++,D}reset(y){var v;const D=y||Ui;null===(v=this._widgets.get(D))||void 0===v||v.delete(),this._widgets.delete(D)}getResponse(y){var v;return(null===(v=this._widgets.get(y||Ui))||void 0===v?void 0:v.getResponse())||""}execute(y){var v=this;return(0,d.Z)(function*(){var D;return null===(D=v._widgets.get(y||Ui))||void 0===D||D.execute(),""})()}}class ko{constructor(y,v,D){this.params=D,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const R="string"==typeof y?document.getElementById(y):y;Ie(R,"argument-error",{appName:v}),this.container=R,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function(E){const y=[],v="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let D=0;D<50;D++)y.push(v.charAt(Math.floor(Math.random()*v.length)));return y.join("")}();const{callback:y,"expired-callback":v}=this.params;if(y)try{y(this.responseToken)}catch(D){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,v)try{v()}catch(D){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Ss=Pd("rcb"),YC=new ot(3e4,6e4);class Hi{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!Cn().grecaptcha}load(y,v=""){return Ie((E=v).length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(E),y,"argument-error"),this.shouldResolveImmediately(v)?Promise.resolve(Cn().grecaptcha):new Promise((D,R)=>{const O=Cn().setTimeout(()=>{R(st(y,"network-request-failed"))},YC.get());Cn()[Ss]=()=>{Cn().clearTimeout(O),delete Cn()[Ss];const ge=Cn().grecaptcha;if(!ge)return void R(st(y,"internal-error"));const xe=ge.render;ge.render=(je,ut)=>{const et=xe(je,ut);return this.counter++,et},this.hostLanguage=v,D(ge)},tp(`https://www.google.com/recaptcha/api.js??${(0,G.xO)({onload:Ss,render:"explicit",hl:v})}`).catch(()=>{clearTimeout(O),R(st(y,"internal-error"))})});var E}clearedOneInstance(){this.counter--}shouldResolveImmediately(y){return!!Cn().grecaptcha&&(y===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class f0{load(y){return(0,d.Z)(function*(){return new wl(y)})()}clearedOneInstance(){}}const hn="recaptcha",ZC={theme:"light",type:"image"};class np{constructor(y,v=Object.assign({},ZC),D){this.parameters=v,this.type=hn,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=on(D),this.isInvisible="invisible"===this.parameters.size,Ie("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const R="string"==typeof y?document.getElementById(y):y;Ie(R,this.auth,"argument-error"),this.container=R,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new f0:new Hi,this.validateStartingState()}verify(){var y=this;return(0,d.Z)(function*(){y.assertNotDestroyed();const v=yield y.render(),D=y.getAssertedRecaptcha();return D.getResponse(v)||new Promise(O=>{const K=ge=>{!ge||(y.tokenChangeListeners.delete(K),O(ge))};y.tokenChangeListeners.add(K),y.isInvisible&&D.execute(v)})})()}render(){try{this.assertNotDestroyed()}catch(y){return Promise.reject(y)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(y=>{throw this.renderPromise=null,y})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(y=>{this.container.removeChild(y)})}validateStartingState(){Ie(!this.parameters.sitekey,this.auth,"argument-error"),Ie(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Ie("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(y){return v=>{if(this.tokenChangeListeners.forEach(D=>D(v)),"function"==typeof y)y(v);else if("string"==typeof y){const D=Cn()[y];"function"==typeof D&&D(v)}}}assertNotDestroyed(){Ie(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var y=this;return(0,d.Z)(function*(){if(yield y.init(),!y.widgetId){let v=y.container;if(!y.isInvisible){const D=document.createElement("div");v.appendChild(D),v=D}y.widgetId=y.getAssertedRecaptcha().render(v,y.parameters)}return y.widgetId})()}init(){var y=this;return(0,d.Z)(function*(){Ie(Ge()&&!zm(),y.auth,"internal-error"),yield function(){let E=null;return new Promise(y=>{"complete"!==document.readyState?(E=()=>y(),window.addEventListener("load",E)):y()}).catch(y=>{throw E&&window.removeEventListener("load",E),y})}(),y.recaptcha=yield y._recaptchaLoader.load(y.auth,y.auth.languageCode||void 0);const v=yield function(E){return Uu.apply(this,arguments)}(y.auth);Ie(v,y.auth,"internal-error"),y.parameters.sitekey=v})()}getAssertedRecaptcha(){return Ie(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Zm{constructor(y,v){this.verificationId=y,this.onConfirmation=v}confirm(y){const v=hl._fromVerification(this.verificationId,y);return this.onConfirmation(v)}}function Oo(){return(Oo=(0,d.Z)(function*(E,y,v){const D=on(E),R=yield rp(D,y,(0,G.m9)(v));return new Zm(R,O=>Or(D,O))})).apply(this,arguments)}function Km(){return(Km=(0,d.Z)(function*(E,y,v){const D=(0,G.m9)(E);yield Qs(!1,D,"phone");const R=yield rp(D.auth,y,(0,G.m9)(v));return new Zm(R,O=>wd(D,O))})).apply(this,arguments)}function fn(){return(fn=(0,d.Z)(function*(E,y,v){const D=(0,G.m9)(E),R=yield rp(D.auth,y,(0,G.m9)(v));return new Zm(R,O=>Jr(D,O))})).apply(this,arguments)}function rp(E,y,v){return ga.apply(this,arguments)}function ga(){return(ga=(0,d.Z)(function*(E,y,v){var D;const R=yield v.verify();try{let O;if(Ie("string"==typeof R,E,"argument-error"),Ie(v.type===hn,E,"argument-error"),O="string"==typeof y?{phoneNumber:y}:y,"session"in O){const K=O.session;if("phoneNumber"in O)return Ie("enroll"===K.type,E,"internal-error"),(yield Ad(E,{idToken:K.credential,phoneEnrollmentInfo:{phoneNumber:O.phoneNumber,recaptchaToken:R}})).phoneSessionInfo.sessionInfo;{Ie("signin"===K.type,E,"internal-error");const ge=(null===(D=O.multiFactorHint)||void 0===D?void 0:D.uid)||O.multiFactorUid;return Ie(ge,E,"missing-multi-factor-info"),(yield An(E,{mfaPendingCredential:K.credential,mfaEnrollmentId:ge,phoneSignInInfo:{recaptchaToken:R}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:K}=yield PC(E,{phoneNumber:O.phoneNumber,recaptchaToken:R});return K}}finally{v._reset()}})).apply(this,arguments)}function Mn(){return(Mn=(0,d.Z)(function*(E,y){yield an((0,G.m9)(E),y)})).apply(this,arguments)}let Po=(()=>{class E{constructor(v){this.providerId=E.PROVIDER_ID,this.auth=on(v)}verifyPhoneNumber(v,D){return rp(this.auth,v,(0,G.m9)(D))}static credential(v,D){return hl._fromVerification(v,D)}static credentialFromResult(v){return E.credentialFromTaggedObject(v)}static credentialFromError(v){return E.credentialFromTaggedObject(v.customData||{})}static credentialFromTaggedObject({_tokenResponse:v}){if(!v)return null;const{phoneNumber:D,temporaryProof:R}=v;return D&&R?hl._fromTokenResponse(D,R):null}}return E.PROVIDER_ID="phone",E.PHONE_SIGN_IN_METHOD="phone",E})();function rn(E,y){return y?oe(y):(Ie(E._popupRedirectResolver,E,"argument-error"),E._popupRedirectResolver)}class Dl extends Li{constructor(y){super("custom","custom"),this.params=y}_getIdTokenResponse(y){return qn(y,this._buildIdpRequest())}_linkToIdToken(y,v){return qn(y,this._buildIdpRequest(v))}_getReauthenticationResolver(y){return qn(y,this._buildIdpRequest())}_buildIdpRequest(y){const v={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return y&&(v.idToken=y),v}}function ip(E){return Lm(E.auth,new Dl(E),E.bypassAuthState)}function ji(E){const{auth:y,user:v}=E;return Ie(v,y,"internal-error"),ln(v,new Dl(E),E.bypassAuthState)}function As(E){return ma.apply(this,arguments)}function ma(){return(ma=(0,d.Z)(function*(E){const{auth:y,user:v}=E;return Ie(v,y,"internal-error"),an(v,new Dl(E),E.bypassAuthState)})).apply(this,arguments)}class Fo{constructor(y,v,D,R,O=!1){this.auth=y,this.resolver=D,this.user=R,this.bypassAuthState=O,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(v)?v:[v]}execute(){var y=this;return new Promise(function(){var v=(0,d.Z)(function*(D,R){y.pendingPromise={resolve:D,reject:R};try{y.eventManager=yield y.resolver._initialize(y.auth),yield y.onExecution(),y.eventManager.registerConsumer(y)}catch(O){y.reject(O)}});return function(D,R){return v.apply(this,arguments)}}())}onAuthEvent(y){var v=this;return(0,d.Z)(function*(){const{urlResponse:D,sessionId:R,postBody:O,tenantId:K,error:ge,type:xe}=y;if(ge)return void v.reject(ge);const je={auth:v.auth,requestUri:D,sessionId:R,tenantId:K||void 0,postBody:O||void 0,user:v.user,bypassAuthState:v.bypassAuthState};try{v.resolve(yield v.getIdpTask(xe)(je))}catch(ut){v.reject(ut)}})()}onError(y){this.reject(y)}getIdpTask(y){switch(y){case"signInViaPopup":case"signInViaRedirect":return ip;case"linkViaPopup":case"linkViaRedirect":return As;case"reauthViaPopup":case"reauthViaRedirect":return ji;default:Be(this.auth,"internal-error")}}resolve(y){le(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(y),this.unregisterAndCleanUp()}reject(y){le(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(y),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Lo=new ot(2e3,1e4);function Fd(){return(Fd=(0,d.Z)(function*(E,y,v){const D=on(E);It(E,y,ss);const R=rn(D,v);return new Rn(D,"signInViaPopup",y,R).executeNotNull()})).apply(this,arguments)}function Jm(){return(Jm=(0,d.Z)(function*(E,y,v){const D=(0,G.m9)(E);It(D.auth,y,ss);const R=rn(D.auth,v);return new Rn(D.auth,"reauthViaPopup",y,R,D).executeNotNull()})).apply(this,arguments)}function Ld(){return(Ld=(0,d.Z)(function*(E,y,v){const D=(0,G.m9)(E);It(D.auth,y,ss);const R=rn(D.auth,v);return new Rn(D.auth,"linkViaPopup",y,R,D).executeNotNull()})).apply(this,arguments)}let Rn=(()=>{class E extends Fo{constructor(v,D,R,O,K){super(v,D,O,K),this.provider=R,this.authWindow=null,this.pollId=null,E.currentPopupAction&&E.currentPopupAction.cancel(),E.currentPopupAction=this}executeNotNull(){var v=this;return(0,d.Z)(function*(){const D=yield v.execute();return Ie(D,v.auth,"internal-error"),D})()}onExecution(){var v=this;return(0,d.Z)(function*(){le(1===v.filter.length,"Popup operations only handle one event");const D=Ao();v.authWindow=yield v.resolver._openPopup(v.auth,v.provider,v.filter[0],D),v.authWindow.associatedEvent=D,v.resolver._originValidation(v.auth).catch(R=>{v.reject(R)}),v.resolver._isIframeWebStorageSupported(v.auth,R=>{R||v.reject(st(v.auth,"web-storage-unsupported"))}),v.pollUserCancellation()})()}get eventId(){var v;return(null===(v=this.authWindow)||void 0===v?void 0:v.associatedEvent)||null}cancel(){this.reject(st(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,E.currentPopupAction=null}pollUserCancellation(){const v=()=>{var D,R;this.pollId=(null===(R=null===(D=this.authWindow)||void 0===D?void 0:D.window)||void 0===R?void 0:R.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(st(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(v,Lo.get())};v()}}return E.currentPopupAction=null,E})();const Vo=new Map;class m0 extends Fo{constructor(y,v,D=!1){super(y,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],v,void 0,D),this.eventId=null}execute(){var y=()=>super.execute,v=this;return(0,d.Z)(function*(){let D=Vo.get(v.auth._key());if(!D){try{const O=(yield function(E,y){return sp.apply(this,arguments)}(v.resolver,v.auth))?yield y().call(v):null;D=()=>Promise.resolve(O)}catch(R){D=()=>Promise.reject(R)}Vo.set(v.auth._key(),D)}return D()})()}onAuthEvent(y){var v=()=>super.onAuthEvent,D=this;return(0,d.Z)(function*(){if("signInViaRedirect"===y.type)return v().call(D,y);if("unknown"!==y.type){if(y.eventId){const R=yield D.auth._redirectUserForId(y.eventId);if(R)return D.user=R,v().call(D,y);D.resolve(null)}}else D.resolve(null)})()}onExecution(){return(0,d.Z)(function*(){})()}cleanUp(){}}function sp(){return(sp=(0,d.Z)(function*(E,y){const v=ya(y),D="true"===(yield _a(E)._get(v));return yield _a(E)._remove(v),D})).apply(this,arguments)}function op(E,y){return us.apply(this,arguments)}function us(){return(us=(0,d.Z)(function*(E,y){return _a(E)._set(ya(y),"true")})).apply(this,arguments)}function _a(E){return oe(E._redirectPersistence)}function ya(E){return er("pendingRedirect",E.config.apiKey,E.name)}function e_(){return(e_=(0,d.Z)(function*(E,y,v){const D=on(E);It(E,y,ss);const R=rn(D,v);return yield op(R,D),R._openRedirect(D,y,"signInViaRedirect")})).apply(this,arguments)}function Bo(){return(Bo=(0,d.Z)(function*(E,y,v){const D=(0,G.m9)(E);It(D.auth,y,ss);const R=rn(D.auth,v);yield op(R,D.auth);const O=yield _t(D);return R._openRedirect(D.auth,y,"reauthViaRedirect",O)})).apply(this,arguments)}function cp(){return(cp=(0,d.Z)(function*(E,y,v){const D=(0,G.m9)(E);It(D.auth,y,ss);const R=rn(D.auth,v);yield Qs(!1,D,y.providerId),yield op(R,D.auth);const O=yield _t(D);return R._openRedirect(D.auth,y,"linkViaRedirect",O)})).apply(this,arguments)}function r_(){return(r_=(0,d.Z)(function*(E,y){return yield on(E)._initializationPromise,Il(E,y,!1)})).apply(this,arguments)}function Il(E,y){return Uo.apply(this,arguments)}function Uo(){return(Uo=(0,d.Z)(function*(E,y,v=!1){const D=on(E),R=rn(D,y),K=yield new m0(D,R,v).execute();return K&&!v&&(delete K.user._redirectEventId,yield D._persistUserIfCurrent(K.user),yield D._setRedirectUser(null,y)),K})).apply(this,arguments)}function _t(E){return hp.apply(this,arguments)}function hp(){return(hp=(0,d.Z)(function*(E){const y=Ao(`${E.uid}:::`);return E._redirectEventId=y,yield E.auth._setRedirectUser(E),yield E.auth._persistUserIfCurrent(E),y})).apply(this,arguments)}class Bd{constructor(y){this.auth=y,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(y){this.consumers.add(y),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,y)&&(this.sendToConsumer(this.queuedRedirectEvent,y),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(y){this.consumers.delete(y)}onEvent(y){if(this.hasEventBeenHandled(y))return!1;let v=!1;return this.consumers.forEach(D=>{this.isEventForConsumer(y,D)&&(v=!0,this.sendToConsumer(y,D),this.saveEventToCache(y))}),this.hasHandledPotentialRedirect||!function(E){switch(E.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Ho(E);default:return!1}}(y)||(this.hasHandledPotentialRedirect=!0,v||(this.queuedRedirectEvent=y,v=!0)),v}sendToConsumer(y,v){var D;if(y.error&&!Ho(y)){const R=(null===(D=y.error.code)||void 0===D?void 0:D.split("auth/")[1])||"internal-error";v.onError(st(this.auth,R))}else v.onAuthEvent(y)}isEventForConsumer(y,v){const D=null===v.eventId||!!y.eventId&&y.eventId===v.eventId;return v.filter.includes(y.type)&&D}hasEventBeenHandled(y){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(fp(y))}saveEventToCache(y){this.cachedEventUids.add(fp(y)),this.lastProcessedEventTime=Date.now()}}function fp(E){return[E.type,E.eventId,E.sessionId,E.tenantId].filter(y=>y).join("-")}function Ho({type:E,error:y}){return"unknown"===E&&"auth/no-auth-event"===(null==y?void 0:y.code)}function i_(E){return bi.apply(this,arguments)}function bi(){return(bi=(0,d.Z)(function*(E,y={}){return St(E,"GET","/v1/projects",y)})).apply(this,arguments)}const pp=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,_0=/^https?/;function Ms(){return(Ms=(0,d.Z)(function*(E){if(E.config.emulator)return;const{authorizedDomains:y}=yield i_(E);for(const v of y)try{if(Vn(v))return}catch(D){}Be(E,"unauthorized-domain")})).apply(this,arguments)}function Vn(E){const y=ke(),{protocol:v,hostname:D}=new URL(y);if(E.startsWith("chrome-extension://")){const K=new URL(E);return""===K.hostname&&""===D?"chrome-extension:"===v&&E.replace("chrome-extension://","")===y.replace("chrome-extension://",""):"chrome-extension:"===v&&K.hostname===D}if(!_0.test(v))return!1;if(pp.test(E))return D===E;const R=E.replace(/\./g,"\\.");return new RegExp("^(.+\\."+R+"|"+R+")$","i").test(D)}const dr=new ot(3e4,6e4);function s_(){const E=Cn().___jsl;if(null==E?void 0:E.H)for(const y of Object.keys(E.H))if(E.H[y].r=E.H[y].r||[],E.H[y].L=E.H[y].L||[],E.H[y].r=[...E.H[y].L],E.CP)for(let v=0;v<E.CP.length;v++)E.CP[v]=null}let ba=null;function $u(E){return ba=ba||function(E){return new Promise((y,v)=>{var D,R,O;function K(){s_(),gapi.load("gapi.iframes",{callback:()=>{y(gapi.iframes.getContext())},ontimeout:()=>{s_(),v(st(E,"network-request-failed"))},timeout:dr.get()})}if(null===(R=null===(D=Cn().gapi)||void 0===D?void 0:D.iframes)||void 0===R?void 0:R.Iframe)y(gapi.iframes.getContext());else{if(!(null===(O=Cn().gapi)||void 0===O?void 0:O.load)){const ge=Pd("iframefcb");return Cn()[ge]=()=>{gapi.load?K():v(st(E,"network-request-failed"))},tp(`https://apis.google.com/js/api.js?onload=${ge}`)}K()}}).catch(y=>{throw ba=null,y})}(E),ba}const a_=new ot(5e3,15e3),wa={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},Tl=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Ud(E){const y=E.config;Ie(y.authDomain,E,"auth-domain-config-required");const v=y.emulator?bn(y,"emulator/auth/iframe"):`https://${E.config.authDomain}/__/auth/iframe`,D={apiKey:y.apiKey,appName:E.name,v:ye.SDK_VERSION},R=Tl.get(E.config.apiHost);R&&(D.eid=R);const O=E._getFrameworks();return O.length&&(D.fw=O.join(",")),`${v}?${(0,G.xO)(D).slice(1)}`}function Et(){return(Et=(0,d.Z)(function*(E){const y=yield $u(E),v=Cn().gapi;return Ie(v,E,"internal-error"),y.open({where:document.body,url:Ud(E),messageHandlersFilter:v.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:wa,dontclear:!0},D=>new Promise(function(){var R=(0,d.Z)(function*(O,K){yield D.restyle({setHideOnLeave:!1});const ge=st(E,"network-request-failed"),xe=Cn().setTimeout(()=>{K(ge)},a_.get());function je(){Cn().clearTimeout(xe),O(D)}D.ping(je).then(je,()=>{K(ge)})});return function(O,K){return R.apply(this,arguments)}}()))})).apply(this,arguments)}const Gu={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Sl{constructor(y){this.window=y,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(y){}}}function qu(E,y,v,D,R,O){Ie(E.config.authDomain,E,"auth-domain-config-required"),Ie(E.config.apiKey,E,"invalid-api-key");const K={apiKey:E.config.apiKey,appName:E.name,authType:v,redirectUrl:D,v:ye.SDK_VERSION,eventId:R};if(y instanceof ss){y.setDefaultLanguage(E.languageCode),K.providerId=y.providerId||"",(0,G.xb)(y.getCustomParameters())||(K.customParameters=JSON.stringify(y.getCustomParameters()));for(const[xe,je]of Object.entries(O||{}))K[xe]=je}if(y instanceof Au){const xe=y.getScopes().filter(je=>""!==je);xe.length>0&&(K.scopes=xe.join(","))}E.tenantId&&(K.tid=E.tenantId);const ge=K;for(const xe of Object.keys(ge))void 0===ge[xe]&&delete ge[xe];return`${function({config:E}){return E.emulator?bn(E,"emulator/auth/handler"):`https://${E.authDomain}/__/auth/handler`}(E)}?${(0,G.xO)(ge).slice(1)}`}const Ea="webStorageSupport";class ro extends class{constructor(y){this.factorId=y}_process(y,v,D){switch(v.type){case"enroll":return this._finalizeEnroll(y,v.credential,D);case"signin":return this._finalizeSignIn(y,v.credential);default:return ie("unexpected MultiFactorSessionType")}}}{constructor(y){super("phone"),this.credential=y}static _fromCredential(y){return new ro(y)}_finalizeEnroll(y,v,D){return function(E,y){return St(E,"POST","/v2/accounts/mfaEnrollment:finalize",en(E,y))}(y,{idToken:v,displayName:D,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(y,v){return function(E,y){return St(E,"POST","/v2/accounts/mfaSignIn:finalize",en(E,y))}(y,{mfaPendingCredential:v,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let b0=(()=>{class E{constructor(){}static assertion(v){return ro._fromCredential(v)}}return E.FACTOR_ID="phone",E})();var E;class C0{constructor(y){this.auth=y,this.internalListeners=new Map}getUid(){var y;return this.assertAuthConfigured(),(null===(y=this.auth.currentUser)||void 0===y?void 0:y.uid)||null}getToken(y){var v=this;return(0,d.Z)(function*(){return v.assertAuthConfigured(),yield v.auth._initializationPromise,v.auth.currentUser?{accessToken:yield v.auth.currentUser.getIdToken(y)}:null})()}addAuthTokenListener(y){if(this.assertAuthConfigured(),this.internalListeners.has(y))return;const v=this.auth.onIdTokenChanged(D=>{var R;y((null===(R=D)||void 0===R?void 0:R.stsTokenManager.accessToken)||null)});this.internalListeners.set(y,v),this.updateProactiveRefresh()}removeAuthTokenListener(y){this.assertAuthConfigured();const v=this.internalListeners.get(y);!v||(this.internalListeners.delete(y),v(),this.updateProactiveRefresh())}assertAuthConfigured(){Ie(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function jo(){return window}function Zu(){return(Zu=(0,d.Z)(function*(E,y,v){var D;const{BuildInfo:R}=jo();le(y.sessionId,"AuthEvent did not contain a session ID");const O=yield h_(y.sessionId),K={};return vr()?K.ibi=R.packageName:ll()?K.apn=R.packageName:Be(E,"operation-not-supported-in-this-environment"),R.displayName&&(K.appDisplayName=R.displayName),K.sessionId=O,qu(E,v,y.type,void 0,null!==(D=y.eventId)&&void 0!==D?D:void 0,K)})).apply(this,arguments)}function Da(){return(Da=(0,d.Z)(function*(E){const{BuildInfo:y}=jo(),v={};vr()?v.iosBundleId=y.packageName:ll()?v.androidPackageName=y.packageName:Be(E,"operation-not-supported-in-this-environment"),yield i_(E,v)})).apply(this,arguments)}function bp(){return(bp=(0,d.Z)(function*(E,y,v){const{cordova:D}=jo();let R=()=>{};try{yield new Promise((O,K)=>{let ge=null;function xe(){var et;O();const Bn=null===(et=D.plugins.browsertab)||void 0===et?void 0:et.close;"function"==typeof Bn&&Bn(),"function"==typeof(null==v?void 0:v.close)&&v.close()}function je(){ge||(ge=window.setTimeout(()=>{K(st(E,"redirect-cancelled-by-user"))},2e3))}function ut(){"visible"===(null==document?void 0:document.visibilityState)&&je()}y.addPassiveListener(xe),document.addEventListener("resume",je,!1),ll()&&document.addEventListener("visibilitychange",ut,!1),R=()=>{y.removePassiveListener(xe),document.removeEventListener("resume",je,!1),document.removeEventListener("visibilitychange",ut,!1),ge&&window.clearTimeout(ge)}})}finally{R()}})).apply(this,arguments)}function h_(E){return f_.apply(this,arguments)}function f_(){return(f_=(0,d.Z)(function*(E){const y=Gd(E),v=yield crypto.subtle.digest("SHA-256",y);return Array.from(new Uint8Array(v)).map(R=>R.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function Gd(E){if(le(/[0-9a-zA-Z]+/.test(E),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(E);const y=new ArrayBuffer(E.length),v=new Uint8Array(y);for(let D=0;D<E.length;D++)v[D]=E.charCodeAt(D);return v}E="Browser",(0,ye._registerComponent)(new re.wA("auth",(y,{options:v})=>{const D=y.getProvider("app").getImmediate(),{apiKey:R,authDomain:O}=D.options;return(K=>{Ie(R&&!R.includes(":"),"invalid-api-key",{appName:K.name}),Ie(!(null==O?void 0:O.includes(":")),"argument-error",{appName:K.name});const ge={apiKey:R,authDomain:O,clientPlatform:E,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Qt(E)},xe=new _i(K,ge);return function(E,y){const v=(null==y?void 0:y.persistence)||[],D=(Array.isArray(v)?v:[v]).map(oe);(null==y?void 0:y.errorMap)&&E._updateErrorMap(y.errorMap),E._initializeWithPersistence(D,null==y?void 0:y.popupRedirectResolver)}(xe,v),xe})(D)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((y,v,D)=>{y.getProvider("auth-internal").initialize()})),(0,ye._registerComponent)(new re.wA("auth-internal",y=>{const v=on(y.getProvider("auth").getImmediate());return new C0(v)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,ye.registerVersion)("@firebase/auth","0.18.1",void 0);class Wd extends Bd{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(y=>{this.resolveInialized=y})}addPassiveListener(y){this.passiveListeners.add(y)}removePassiveListener(y){this.passiveListeners.delete(y)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(y){return this.resolveInialized(),this.passiveListeners.forEach(v=>v(y)),super.onEvent(y)}initialized(){var y=this;return(0,d.Z)(function*(){yield y.initPromise})()}}function Ku(E){return qd.apply(this,arguments)}function qd(){return(qd=(0,d.Z)(function*(E){const y=yield p_()._get(g_(E));return y&&(yield p_()._remove(g_(E))),y})).apply(this,arguments)}function D0(){const E=[],y="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let v=0;v<20;v++){const D=Math.floor(Math.random()*y.length);E.push(y.charAt(D))}return E.join("")}function p_(){return oe(Kf)}function g_(E){return er("authEvent",E.config.apiKey,E.name)}function Rs(E){if(!(null==E?void 0:E.includes("?")))return{};const[y,...v]=E.split("?");return(0,G.zd)(v.join("?"))}function __(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:st("no-auth-event")}}function $o(){var E;return(null===(E=null==self?void 0:self.location)||void 0===E?void 0:E.protocol)||null}function zd(E=(0,G.z$)()){return!("file:"!==$o()&&"ionic:"!==$o()||!E.toLowerCase().match(/iphone|ipad|ipod|android/))}function Yd(){try{const E=self.localStorage,y=Ao();if(E)return E.setItem(y,"1"),E.removeItem(y),!function(E=(0,G.z$)()){return(0,G.w1)()&&11===(null==document?void 0:document.documentMode)||function(E=(0,G.z$)()){return/Edge\/\d+/.test(E)}(E)}()||(0,G.hl)()}catch(E){return Zd()&&(0,G.hl)()}return!1}function Zd(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function Kd(){return("http:"===$o()||"https:"===$o()||(0,G.ru)()||zd())&&!((0,G.b$)()||(0,G.UG)())&&Yd()&&!Zd()}function w_(){return zd()&&"undefined"!=typeof document}function xs(){return(xs=(0,d.Z)(function*(){return!!w_()&&new Promise(E=>{const y=setTimeout(()=>{E(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(y),E(!0)})})})).apply(this,arguments)}const wi={LOCAL:"local",NONE:"none",SESSION:"session"},ks=Ie,S0="persistence";function hr(E){return ec.apply(this,arguments)}function ec(){return(ec=(0,d.Z)(function*(E){yield E._initializationPromise;const y=Ta(),v=er(S0,E.config.apiKey,E.name);(null==y?void 0:y.sessionStorage)&&y.sessionStorage.setItem(v,E._getPersistence())})).apply(this,arguments)}function Ta(){return"undefined"!=typeof window?window:null}const fr=Ie;class Ci{constructor(){this.browserResolver=oe(class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Ts,this._completeRedirectFn=Il}_openPopup(y,v,D,R){var O=this;return(0,d.Z)(function*(){var K;le(null===(K=O.eventManagers[y._key()])||void 0===K?void 0:K.manager,"_initialize() not called before _openPopup()");const ge=qu(y,v,D,ke(),R);return function(E,y,v,D=500,R=600){const O=Math.max((window.screen.availHeight-R)/2,0).toString(),K=Math.max((window.screen.availWidth-D)/2,0).toString();let ge="";const xe=Object.assign(Object.assign({},Gu),{width:D.toString(),height:R.toString(),top:O,left:K}),je=(0,G.z$)().toLowerCase();v&&(ge=Sf(je)?"_blank":v),fd(je)&&(y=y||"http://localhost",xe.scrollbars="yes");const ut=Object.entries(xe).reduce((Bn,[ei,tc])=>`${Bn}${ei}=${tc},`,"");if(function(E=(0,G.z$)()){var y;return vr(E)&&!!(null===(y=window.navigator)||void 0===y?void 0:y.standalone)}(je)&&"_self"!==ge)return function(E,y){const v=document.createElement("a");v.href=E,v.target=y;const D=document.createEvent("MouseEvent");D.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),v.dispatchEvent(D)}(y||"",ge),new Sl(null);const et=window.open(y||"",ge,ut);Ie(et,E,"popup-blocked");try{et.focus()}catch(Bn){}return new Sl(et)}(y,ge,Ao())})()}_openRedirect(y,v,D,R){var O=this;return(0,d.Z)(function*(){return yield O._originValidation(y),E=qu(y,v,D,ke(),R),Cn().location.href=E,new Promise(()=>{});var E})()}_initialize(y){const v=y._key();if(this.eventManagers[v]){const{manager:R,promise:O}=this.eventManagers[v];return R?Promise.resolve(R):(le(O,"If manager is not set, promise should be"),O)}const D=this.initAndGetManager(y);return this.eventManagers[v]={promise:D},D}initAndGetManager(y){var v=this;return(0,d.Z)(function*(){const D=yield function(E){return Et.apply(this,arguments)}(y),R=new Bd(y);return D.register("authEvent",O=>(Ie(null==O?void 0:O.authEvent,y,"invalid-auth-event"),{status:R.onEvent(O.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),v.eventManagers[y._key()]={manager:R},v.iframes[y._key()]=D,R})()}_isIframeWebStorageSupported(y,v){this.iframes[y._key()].send(Ea,{type:Ea},R=>{var O;const K=null===(O=null==R?void 0:R[0])||void 0===O?void 0:O[Ea];void 0!==K&&v(!!K),Be(y,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(y){const v=y._key();return this.originValidationPromises[v]||(this.originValidationPromises[v]=function(E){return Ms.apply(this,arguments)}(y)),this.originValidationPromises[v]}get _shouldInitProactively(){return Le()||pd()||vr()}}),this.cordovaResolver=oe(class{constructor(){this._redirectPersistence=Ts,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Il}_initialize(y){var v=this;return(0,d.Z)(function*(){const D=y._key();let R=v.eventManagers.get(D);return R||(R=new Wd(y),v.eventManagers.set(D,R),v.attachCallbackListeners(y,R)),R})()}_openPopup(y){Be(y,"operation-not-supported-in-this-environment")}_openRedirect(y,v,D,R){var O=this;return(0,d.Z)(function*(){!function(E){var y,v,D,R,O,K,ge,xe,je,ut;const et=jo();Ie("function"==typeof(null===(y=null==et?void 0:et.universalLinks)||void 0===y?void 0:y.subscribe),E,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),Ie(void 0!==(null===(v=null==et?void 0:et.BuildInfo)||void 0===v?void 0:v.packageName),E,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),Ie("function"==typeof(null===(O=null===(R=null===(D=null==et?void 0:et.cordova)||void 0===D?void 0:D.plugins)||void 0===R?void 0:R.browsertab)||void 0===O?void 0:O.openUrl),E,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Ie("function"==typeof(null===(xe=null===(ge=null===(K=null==et?void 0:et.cordova)||void 0===K?void 0:K.plugins)||void 0===ge?void 0:ge.browsertab)||void 0===xe?void 0:xe.isAvailable),E,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Ie("function"==typeof(null===(ut=null===(je=null==et?void 0:et.cordova)||void 0===je?void 0:je.InAppBrowser)||void 0===ut?void 0:ut.open),E,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(y);const K=yield O._initialize(y);yield K.initialized(),K.resetRedirect(),Vo.clear(),yield O._originValidation(y);const ge=function(E,y,v=null){return{type:y,eventId:v,urlResponse:null,sessionId:D0(),postBody:null,tenantId:E.tenantId,error:st(E,"no-auth-event")}}(y,D,R);yield function(E,y){return p_()._set(g_(E),y)}(y,ge);const xe=yield function(E,y,v){return Zu.apply(this,arguments)}(y,ge,v),je=yield function(E){const{cordova:y}=jo();return new Promise(v=>{y.plugins.browsertab.isAvailable(D=>{let R=null;D?y.plugins.browsertab.openUrl(E):R=y.InAppBrowser.open(E,function(E=(0,G.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(E)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(E)}()?"_blank":"_system","location=yes"),v(R)})})}(xe);return function(E,y,v){return bp.apply(this,arguments)}(y,K,je)})()}_isIframeWebStorageSupported(y,v){throw new Error("Method not implemented.")}_originValidation(y){const v=y._key();return this.originValidationPromises[v]||(this.originValidationPromises[v]=function(E){return Da.apply(this,arguments)}(y)),this.originValidationPromises[v]}attachCallbackListeners(y,v){const{universalLinks:D,handleOpenURL:R,BuildInfo:O}=jo(),K=setTimeout((0,d.Z)(function*(){yield Ku(y),v.onEvent(__())}),500),ge=function(){var ut=(0,d.Z)(function*(et){clearTimeout(K);const Bn=yield Ku(y);let ei=null;Bn&&(null==et?void 0:et.url)&&(ei=function(E,y){var v,D;const R=function(E){const y=Rs(E),v=y.link?decodeURIComponent(y.link):void 0,D=Rs(v).link,R=y.deep_link_id?decodeURIComponent(y.deep_link_id):void 0;return Rs(R).link||R||D||v||E}(y);if(R.includes("/__/auth/callback")){const O=Rs(R),K=O.firebaseError?function(E){try{return JSON.parse(E)}catch(y){return null}}(decodeURIComponent(O.firebaseError)):null,ge=null===(D=null===(v=null==K?void 0:K.code)||void 0===v?void 0:v.split("auth/"))||void 0===D?void 0:D[1],xe=ge?st(ge):null;return xe?{type:E.type,eventId:E.eventId,tenantId:E.tenantId,error:xe,urlResponse:null,sessionId:null,postBody:null}:{type:E.type,eventId:E.eventId,tenantId:E.tenantId,sessionId:E.sessionId,urlResponse:R,postBody:null}}return null}(Bn,et.url)),v.onEvent(ei||__())});return function(Bn){return ut.apply(this,arguments)}}();void 0!==D&&"function"==typeof D.subscribe&&D.subscribe(null,ge);const xe=R,je=`${O.packageName.toLowerCase()}://`;jo().handleOpenURL=function(){var ut=(0,d.Z)(function*(et){if(et.toLowerCase().startsWith(je)&&ge({url:et}),"function"==typeof xe)try{xe(et)}catch(Bn){console.error(Bn)}});return function(et){return ut.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=Ts,this._completeRedirectFn=Il}_initialize(y){var v=this;return(0,d.Z)(function*(){return yield v.selectUnderlyingResolver(),v.assertedUnderlyingResolver._initialize(y)})()}_openPopup(y,v,D,R){var O=this;return(0,d.Z)(function*(){return yield O.selectUnderlyingResolver(),O.assertedUnderlyingResolver._openPopup(y,v,D,R)})()}_openRedirect(y,v,D,R){var O=this;return(0,d.Z)(function*(){return yield O.selectUnderlyingResolver(),O.assertedUnderlyingResolver._openRedirect(y,v,D,R)})()}_isIframeWebStorageSupported(y,v){this.assertedUnderlyingResolver._isIframeWebStorageSupported(y,v)}_originValidation(y){return this.assertedUnderlyingResolver._originValidation(y)}get _shouldInitProactively(){return w_()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return fr(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var y=this;return(0,d.Z)(function*(){if(y.underlyingResolver)return;const v=yield function(){return xs.apply(this,arguments)}();y.underlyingResolver=v?y.cordovaResolver:y.browserResolver})()}}function Qd(E){return E.unwrap()}function Tp(E){return Np(E)}function Ei(E,y){var v;const D=null===(v=y.customData)||void 0===v?void 0:v._tokenResponse;if("auth/multi-factor-auth-required"===y.code)y.resolver=new M0(E,function(E,y){var v;const D=(0,G.m9)(E),R=y;return Ie(y.operationType,D,"argument-error"),Ie(null===(v=R.serverResponse)||void 0===v?void 0:v.mfaPendingCredential,D,"argument-error"),vl._fromError(D,R)}(E,y));else if(D){const R=Np(y),O=y;R&&(O.credential=R,O.tenantId=D.tenantId||void 0,O.email=D.email||void 0,O.phoneNumber=D.phoneNumber||void 0)}}function Np(E){const{_tokenResponse:y}=E instanceof G.ZR?E.customData:E;if(!y)return null;if(!(E instanceof G.ZR)&&"temporaryProof"in y&&"phoneNumber"in y)return Po.credentialFromResult(E);const v=y.providerId;if(!v||"password"===v)return null;let D;switch(v){case"google.com":D=Io;break;case"facebook.com":D=Mf;break;case"github.com":D=km;break;case"twitter.com":D=xf;break;default:const{oauthIdToken:R,oauthAccessToken:O,oauthTokenSecret:K,pendingToken:ge,nonce:xe}=y;return O||K||R||ge?ge?v.startsWith("saml.")?To._create(v,ge):Ds._fromParams({providerId:v,signInMethod:v,pendingToken:ge,idToken:R,accessToken:O}):new ua(v).credential({idToken:R,accessToken:O,rawNonce:xe}):null}return E instanceof G.ZR?D.credentialFromError(E):D.credentialFromResult(E)}function Er(E,y){return kl.apply(this,arguments)}function kl(){return(kl=(0,d.Z)(function*(E,y){let v;try{v=yield y}catch(O){throw O instanceof G.ZR&&Ei(E,O),O}const{operationType:D,user:R}=v;return{operationType:D,credential:Tp(v),additionalUserInfo:u0(v),user:oo.getOrCreate(R)}})).apply(this,arguments)}function Na(E,y){return Sp.apply(this,arguments)}function Sp(){return(Sp=(0,d.Z)(function*(E,y){const v=yield y;return{verificationId:v.verificationId,confirm:D=>Er(E,v.confirm(D))}})).apply(this,arguments)}class M0{constructor(y,v){this.resolver=v,this.auth=function(E){return E.wrapped()}(y)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(y){return Er(Qd(this.auth),this.resolver.resolveSignIn(y))}}class oo{constructor(y){this._delegate=y,this.multiFactor=function(E){const y=(0,G.m9)(E);return Is.has(y)||Is.set(y,zf._fromUser(y)),Is.get(y)}(y)}static getOrCreate(y){return oo.USER_MAP.has(y)||oo.USER_MAP.set(y,new oo(y)),oo.USER_MAP.get(y)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(y){return this._delegate.getIdTokenResult(y)}getIdToken(y){return this._delegate.getIdToken(y)}linkAndRetrieveDataWithCredential(y){return this.linkWithCredential(y)}linkWithCredential(y){var v=this;return(0,d.Z)(function*(){return Er(v.auth,wd(v._delegate,y))})()}linkWithPhoneNumber(y,v){var D=this;return(0,d.Z)(function*(){return Na(D.auth,function(E,y,v){return Km.apply(this,arguments)}(D._delegate,y,v))})()}linkWithPopup(y){var v=this;return(0,d.Z)(function*(){return Er(v.auth,function(E,y,v){return Ld.apply(this,arguments)}(v._delegate,y,Ci))})()}linkWithRedirect(y){var v=this;return(0,d.Z)(function*(){return yield hr(on(v.auth)),function(E,y,v){return function(E,y,v){return cp.apply(this,arguments)}(E,y,v)}(v._delegate,y,Ci)})()}reauthenticateAndRetrieveDataWithCredential(y){return this.reauthenticateWithCredential(y)}reauthenticateWithCredential(y){var v=this;return(0,d.Z)(function*(){return Er(v.auth,Jr(v._delegate,y))})()}reauthenticateWithPhoneNumber(y,v){return Na(this.auth,function(E,y,v){return fn.apply(this,arguments)}(this._delegate,y,v))}reauthenticateWithPopup(y){return Er(this.auth,function(E,y,v){return Jm.apply(this,arguments)}(this._delegate,y,Ci))}reauthenticateWithRedirect(y){var v=this;return(0,d.Z)(function*(){return yield hr(on(v.auth)),function(E,y,v){return function(E,y,v){return Bo.apply(this,arguments)}(E,y,v)}(v._delegate,y,Ci)})()}sendEmailVerification(y){return function(E,y){return vi.apply(this,arguments)}(this._delegate,y)}unlink(y){var v=this;return(0,d.Z)(function*(){return yield function(E,y){return Fm.apply(this,arguments)}(v._delegate,y),v})()}updateEmail(y){return function(E,y){return Gf((0,G.m9)(E),y,null)}(this._delegate,y)}updatePassword(y){return function(E,y){return Gf((0,G.m9)(E),null,y)}(this._delegate,y)}updatePhoneNumber(y){return function(E,y){return Mn.apply(this,arguments)}(this._delegate,y)}updateProfile(y){return function(E,y){return Ou.apply(this,arguments)}(this._delegate,y)}verifyBeforeUpdateEmail(y,v){return function(E,y,v){return Td.apply(this,arguments)}(this._delegate,y,v)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}oo.USER_MAP=new WeakMap;const Ol=Ie;let Sa=(()=>{class E{constructor(v,D){if(this.app=v,D.isInitialized())return this._delegate=D.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:R}=v.options;Ol(R,"invalid-api-key",{appName:v.name});let O=[Mt];if("undefined"!=typeof window){O=function(E,y){const v=Ta();if(!(null==v?void 0:v.sessionStorage))return[];const D=er(S0,E,y);switch(v.sessionStorage.getItem(D)){case wi.NONE:return[Mt];case wi.LOCAL:return[Ro,Ts];case wi.SESSION:return[Ts];default:return[]}}(R,v.name);for(const ge of[Ro,Kf,Ts])O.includes(ge)||O.push(ge)}Ol(R,"invalid-api-key",{appName:v.name});const K="undefined"!=typeof window?Ci:void 0;this._delegate=D.initialize({options:{persistence:O,popupRedirectResolver:K}}),this._delegate._updateErrorMap(be),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?oo.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(v){this._delegate.languageCode=v}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(v){this._delegate.tenantId=v}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(v,D){!function(E,y,v){const D=on(E);Ie(D._canInitEmulator,D,"emulator-config-failed"),Ie(/^https?:\/\//.test(y),D,"invalid-emulator-scheme");const R=!!(null==v?void 0:v.disableWarnings),O=wn(y),{host:K,port:ge}=function(E){const y=wn(E),v=/(\/\/)?([^?#/]+)/.exec(E.substr(y.length));if(!v)return{host:"",port:null};const D=v[2].split("@").pop()||"",R=/^(\[[^\]]+\])(:|$)/.exec(D);if(R){const O=R[1];return{host:O,port:la(D.substr(O.length+1))}}{const[O,K]=D.split(":");return{host:O,port:la(K)}}}(y);D.config.emulator={url:`${O}//${K}${null===ge?"":`:${ge}`}/`},D.settings.appVerificationDisabledForTesting=!0,D.emulatorConfig=Object.freeze({host:K,port:ge,protocol:O.replace(":",""),options:Object.freeze({disableWarnings:R})}),function(E){function y(){const v=document.createElement("p"),D=v.style;v.innerText="Running in emulator mode. Do not use with production credentials.",D.position="fixed",D.width="100%",D.backgroundColor="#ffffff",D.border=".1em solid #000000",D.color="#b50000",D.bottom="0px",D.left="0px",D.margin="0px",D.zIndex="10000",D.textAlign="center",v.classList.add("firebase-emulator-warning"),document.body.appendChild(v)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&!E&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",y):y())}(R)}(this._delegate,v,D)}applyActionCode(v){return function(E,y){return da.apply(this,arguments)}(this._delegate,v)}checkActionCode(v){return Ne(this._delegate,v)}confirmPasswordReset(v,D){return function(E,y,v){return Vf.apply(this,arguments)}(this._delegate,v,D)}createUserWithEmailAndPassword(v,D){var R=this;return(0,d.Z)(function*(){return Er(R._delegate,function(E,y,v){return Js.apply(this,arguments)}(R._delegate,v,D))})()}fetchProvidersForEmail(v){return this.fetchSignInMethodsForEmail(v)}fetchSignInMethodsForEmail(v){return function(E,y){return Hf.apply(this,arguments)}(this._delegate,v)}isSignInWithEmailLink(v){return function(E,y){const v=_d.parseLink(y);return"EMAIL_SIGNIN"===(null==v?void 0:v.operation)}(0,v)}getRedirectResult(){var v=this;return(0,d.Z)(function*(){Ol(Kd(),v._delegate,"operation-not-supported-in-this-environment");const D=yield function(E,y){return r_.apply(this,arguments)}(v._delegate,Ci);return D?Er(v._delegate,Promise.resolve(D)):{credential:null,user:null}})()}addFrameworkForLogging(v){!function(E,y){on(E)._logFramework(y)}(this._delegate,v)}onAuthStateChanged(v,D,R){const{next:O,error:K,complete:ge}=Jd(v,D,R);return this._delegate.onAuthStateChanged(O,K,ge)}onIdTokenChanged(v,D,R){const{next:O,error:K,complete:ge}=Jd(v,D,R);return this._delegate.onIdTokenChanged(O,K,ge)}sendSignInLinkToEmail(v,D){return function(E,y,v){return ml.apply(this,arguments)}(this._delegate,v,D)}sendPasswordResetEmail(v,D){return function(E,y,v){return Lf.apply(this,arguments)}(this._delegate,v,D||void 0)}setPersistence(v){var D=this;return(0,d.Z)(function*(){let R;switch(function(E,y){ks(Object.values(wi).includes(y),E,"invalid-persistence-type"),(0,G.b$)()?ks(y!==wi.SESSION,E,"unsupported-persistence-type"):(0,G.UG)()?ks(y===wi.NONE,E,"unsupported-persistence-type"):Zd()?ks(y===wi.NONE||y===wi.LOCAL&&(0,G.hl)(),E,"unsupported-persistence-type"):ks(y===wi.NONE||Yd(),E,"unsupported-persistence-type")}(D._delegate,v),v){case wi.SESSION:R=Ts;break;case wi.LOCAL:R=(yield oe(Ro)._isAvailable())?Ro:Kf;break;case wi.NONE:R=Mt;break;default:return Be("argument-error",{appName:D._delegate.name})}return D._delegate.setPersistence(R)})()}signInAndRetrieveDataWithCredential(v){return this.signInWithCredential(v)}signInAnonymously(){return Er(this._delegate,function(E){return Mu.apply(this,arguments)}(this._delegate))}signInWithCredential(v){return Er(this._delegate,Or(this._delegate,v))}signInWithCustomToken(v){return Er(this._delegate,function(E,y){return Cd.apply(this,arguments)}(this._delegate,v))}signInWithEmailAndPassword(v,D){return Er(this._delegate,function(E,y,v){return Or((0,G.m9)(E),yd.credential(y,v))}(this._delegate,v,D))}signInWithEmailLink(v,D){return Er(this._delegate,function(E,y,v){return _l.apply(this,arguments)}(this._delegate,v,D))}signInWithPhoneNumber(v,D){return Na(this._delegate,function(E,y,v){return Oo.apply(this,arguments)}(this._delegate,v,D))}signInWithPopup(v){var D=this;return(0,d.Z)(function*(){return Ol(Kd(),D._delegate,"operation-not-supported-in-this-environment"),Er(D._delegate,function(E,y,v){return Fd.apply(this,arguments)}(D._delegate,v,Ci))})()}signInWithRedirect(v){var D=this;return(0,d.Z)(function*(){return Ol(Kd(),D._delegate,"operation-not-supported-in-this-environment"),yield hr(D._delegate),function(E,y,v){return function(E,y,v){return e_.apply(this,arguments)}(E,y,v)}(D._delegate,v,Ci)})()}updateCurrentUser(v){return this._delegate.updateCurrentUser(v)}verifyPasswordResetCode(v){return function(E,y){return nn.apply(this,arguments)}(this._delegate,v)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return E.Persistence=wi,E})();function Jd(E,y,v){let D=E;"function"!=typeof E&&({next:D,error:y,complete:v}=E);const R=D;return{next:K=>R(K&&oo.getOrCreate(K)),error:y,complete:v}}class Xd{constructor(){this.providerId="phone",this._delegate=new Po(Qd(X.Z.auth()))}static credential(y,v){return Po.credential(y,v)}verifyPhoneNumber(y,v){return this._delegate.verifyPhoneNumber(y,v)}unwrap(){return this._delegate}}Xd.PHONE_SIGN_IN_METHOD=Po.PHONE_SIGN_IN_METHOD,Xd.PROVIDER_ID=Po.PROVIDER_ID;const eh=Ie;class Ap{constructor(y,v,D=X.Z.app()){var R;eh(null===(R=D.options)||void 0===R?void 0:R.apiKey,"invalid-api-key",{appName:D.name}),this._delegate=new np(y,v,D.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function(E){E.INTERNAL.registerComponent(new re.wA("auth-compat",y=>{const v=y.getProvider("app-compat").getImmediate(),D=y.getProvider("auth");return new Sa(v,D)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:yd,FacebookAuthProvider:Mf,GithubAuthProvider:km,GoogleAuthProvider:Io,OAuthProvider:ua,PhoneAuthProvider:Xd,PhoneMultiFactorGenerator:b0,RecaptchaVerifier:Ap,TwitterAuthProvider:xf,Auth:Sa,AuthCredential:Li,Error:G.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),E.registerVersion("@firebase/auth-compat","0.1.4")}(X.Z)},1593:(He,Ee,B)=>{"use strict";B.d(Ee,{P:()=>re});var d=B(9193),X=B(5917),G=B(7574);class re{constructor(j,L,U){this.kind=j,this.value=L,this.error=U,this.hasValue="N"===j}observe(j){switch(this.kind){case"N":return j.next&&j.next(this.value);case"E":return j.error&&j.error(this.error);case"C":return j.complete&&j.complete()}}do(j,L,U){switch(this.kind){case"N":return j&&j(this.value);case"E":return L&&L(this.error);case"C":return U&&U()}}accept(j,L,U){return j&&"function"==typeof j.next?this.observe(j):this.do(j,L,U)}toObservable(){switch(this.kind){case"N":return(0,X.of)(this.value);case"E":return Q=this.error,new G.y(L=>L.error(Q));case"C":return(0,d.c)()}var Q;throw new Error("unexpected notification kind value")}static createNext(j){return void 0!==j?new re("N",j):re.undefinedValueNotification}static createError(j){return new re("E",void 0,j)}static createComplete(){return re.completeNotification}}re.completeNotification=new re("C"),re.undefinedValueNotification=new re("N",void 0)},7574:(He,Ee,B)=>{"use strict";B.d(Ee,{y:()=>U});var d=B(7393),G=B(9181),ye=B(6490),J=B(6554),re=B(4487);var L=B(2494);let U=(()=>{class se{constructor(be){this._isScalar=!1,be&&(this._subscribe=be)}lift(be){const fe=new se;return fe.source=this,fe.operator=be,fe}subscribe(be,fe,Te){const{operator:pe}=this,_e=function(se,ve,be){if(se){if(se instanceof d.L)return se;if(se[G.b])return se[G.b]()}return se||ve||be?new d.L(se,ve,be):new d.L(ye.c)}(be,fe,Te);if(_e.add(pe?pe.call(_e,this.source):this.source||L.v.useDeprecatedSynchronousErrorHandling&&!_e.syncErrorThrowable?this._subscribe(_e):this._trySubscribe(_e)),L.v.useDeprecatedSynchronousErrorHandling&&_e.syncErrorThrowable&&(_e.syncErrorThrowable=!1,_e.syncErrorThrown))throw _e.syncErrorValue;return _e}_trySubscribe(be){try{return this._subscribe(be)}catch(fe){L.v.useDeprecatedSynchronousErrorHandling&&(be.syncErrorThrown=!0,be.syncErrorValue=fe),function(se){for(;se;){const{closed:ve,destination:be,isStopped:fe}=se;if(ve||fe)return!1;se=be&&be instanceof d.L?be:null}return!0}(be)?be.error(fe):console.warn(fe)}}forEach(be,fe){return new(fe=$(fe))((Te,pe)=>{let _e;_e=this.subscribe(Fe=>{try{be(Fe)}catch(Be){pe(Be),_e&&_e.unsubscribe()}},pe,Te)})}_subscribe(be){const{source:fe}=this;return fe&&fe.subscribe(be)}[J.L](){return this}pipe(...be){return 0===be.length?this:function(se){return 0===se.length?re.y:1===se.length?se[0]:function(be){return se.reduce((fe,Te)=>Te(fe),be)}}(be)(this)}toPromise(be){return new(be=$(be))((fe,Te)=>{let pe;this.subscribe(_e=>pe=_e,_e=>Te(_e),()=>fe(pe))})}}return se.create=ve=>new se(ve),se})();function $(se){if(se||(se=L.v.Promise||Promise),!se)throw new Error("no Promise impl found");return se}},6490:(He,Ee,B)=>{"use strict";B.d(Ee,{c:()=>G});var d=B(2494),X=B(4449);const G={closed:!0,next(ye){},error(ye){if(d.v.useDeprecatedSynchronousErrorHandling)throw ye;(0,X.z)(ye)},complete(){}}},9765:(He,Ee,B)=>{"use strict";B.d(Ee,{Yc:()=>re,xQ:()=>Q});var d=B(7574),X=B(7393),G=B(5319),ye=B(7971),he=B(8858),J=B(9181);class re extends X.L{constructor(U){super(U),this.destination=U}}let Q=(()=>{class L extends d.y{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[J.b](){return new re(this)}lift($){const se=new j(this,this);return se.operator=$,se}next($){if(this.closed)throw new ye.N;if(!this.isStopped){const{observers:se}=this,ve=se.length,be=se.slice();for(let fe=0;fe<ve;fe++)be[fe].next($)}}error($){if(this.closed)throw new ye.N;this.hasError=!0,this.thrownError=$,this.isStopped=!0;const{observers:se}=this,ve=se.length,be=se.slice();for(let fe=0;fe<ve;fe++)be[fe].error($);this.observers.length=0}complete(){if(this.closed)throw new ye.N;this.isStopped=!0;const{observers:$}=this,se=$.length,ve=$.slice();for(let be=0;be<se;be++)ve[be].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe($){if(this.closed)throw new ye.N;return super._trySubscribe($)}_subscribe($){if(this.closed)throw new ye.N;return this.hasError?($.error(this.thrownError),G.w.EMPTY):this.isStopped?($.complete(),G.w.EMPTY):(this.observers.push($),new he.W(this,$))}asObservable(){const $=new d.y;return $.source=this,$}}return L.create=(U,$)=>new j(U,$),L})();class j extends Q{constructor(U,$){super(),this.destination=U,this.source=$}next(U){const{destination:$}=this;$&&$.next&&$.next(U)}error(U){const{destination:$}=this;$&&$.error&&this.destination.error(U)}complete(){const{destination:U}=this;U&&U.complete&&this.destination.complete()}_subscribe(U){const{source:$}=this;return $?this.source.subscribe(U):G.w.EMPTY}}},8858:(He,Ee,B)=>{"use strict";B.d(Ee,{W:()=>X});var d=B(5319);class X extends d.w{constructor(ye,he){super(),this.subject=ye,this.subscriber=he,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const ye=this.subject,he=ye.observers;if(this.subject=null,!he||0===he.length||ye.isStopped||ye.closed)return;const J=he.indexOf(this.subscriber);-1!==J&&he.splice(J,1)}}},7393:(He,Ee,B)=>{"use strict";B.d(Ee,{L:()=>re});var d=B(9105),X=B(6490),G=B(5319),ye=B(9181),he=B(2494),J=B(4449);class re extends G.w{constructor(L,U,$){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=X.c;break;case 1:if(!L){this.destination=X.c;break}if("object"==typeof L){L instanceof re?(this.syncErrorThrowable=L.syncErrorThrowable,this.destination=L,L.add(this)):(this.syncErrorThrowable=!0,this.destination=new Q(this,L));break}default:this.syncErrorThrowable=!0,this.destination=new Q(this,L,U,$)}}[ye.b](){return this}static create(L,U,$){const se=new re(L,U,$);return se.syncErrorThrowable=!1,se}next(L){this.isStopped||this._next(L)}error(L){this.isStopped||(this.isStopped=!0,this._error(L))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(L){this.destination.next(L)}_error(L){this.destination.error(L),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:L}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=L,this}}class Q extends re{constructor(L,U,$,se){super(),this._parentSubscriber=L;let ve,be=this;(0,d.m)(U)?ve=U:U&&(ve=U.next,$=U.error,se=U.complete,U!==X.c&&(be=Object.create(U),(0,d.m)(be.unsubscribe)&&this.add(be.unsubscribe.bind(be)),be.unsubscribe=this.unsubscribe.bind(this))),this._context=be,this._next=ve,this._error=$,this._complete=se}next(L){if(!this.isStopped&&this._next){const{_parentSubscriber:U}=this;he.v.useDeprecatedSynchronousErrorHandling&&U.syncErrorThrowable?this.__tryOrSetError(U,this._next,L)&&this.unsubscribe():this.__tryOrUnsub(this._next,L)}}error(L){if(!this.isStopped){const{_parentSubscriber:U}=this,{useDeprecatedSynchronousErrorHandling:$}=he.v;if(this._error)$&&U.syncErrorThrowable?(this.__tryOrSetError(U,this._error,L),this.unsubscribe()):(this.__tryOrUnsub(this._error,L),this.unsubscribe());else if(U.syncErrorThrowable)$?(U.syncErrorValue=L,U.syncErrorThrown=!0):(0,J.z)(L),this.unsubscribe();else{if(this.unsubscribe(),$)throw L;(0,J.z)(L)}}}complete(){if(!this.isStopped){const{_parentSubscriber:L}=this;if(this._complete){const U=()=>this._complete.call(this._context);he.v.useDeprecatedSynchronousErrorHandling&&L.syncErrorThrowable?(this.__tryOrSetError(L,U),this.unsubscribe()):(this.__tryOrUnsub(U),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(L,U){try{L.call(this._context,U)}catch($){if(this.unsubscribe(),he.v.useDeprecatedSynchronousErrorHandling)throw $;(0,J.z)($)}}__tryOrSetError(L,U,$){if(!he.v.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{U.call(this._context,$)}catch(se){return he.v.useDeprecatedSynchronousErrorHandling?(L.syncErrorValue=se,L.syncErrorThrown=!0,!0):((0,J.z)(se),!0)}return!1}_unsubscribe(){const{_parentSubscriber:L}=this;this._context=null,this._parentSubscriber=null,L.unsubscribe()}}},5319:(He,Ee,B)=>{"use strict";B.d(Ee,{w:()=>J});var d=B(9796),X=B(1555),G=B(9105);const he=(()=>{function Q(j){return Error.call(this),this.message=j?`${j.length} errors occurred during unsubscription:\n${j.map((L,U)=>`${U+1}) ${L.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=j,this}return Q.prototype=Object.create(Error.prototype),Q})();class J{constructor(j){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,j&&(this._ctorUnsubscribe=!0,this._unsubscribe=j)}unsubscribe(){let j;if(this.closed)return;let{_parentOrParents:L,_ctorUnsubscribe:U,_unsubscribe:$,_subscriptions:se}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,L instanceof J)L.remove(this);else if(null!==L)for(let ve=0;ve<L.length;++ve)L[ve].remove(this);if((0,G.m)($)){U&&(this._unsubscribe=void 0);try{$.call(this)}catch(ve){j=ve instanceof he?re(ve.errors):[ve]}}if((0,d.k)(se)){let ve=-1,be=se.length;for(;++ve<be;){const fe=se[ve];if((0,X.K)(fe))try{fe.unsubscribe()}catch(Te){j=j||[],Te instanceof he?j=j.concat(re(Te.errors)):j.push(Te)}}}if(j)throw new he(j)}add(j){let L=j;if(!j)return J.EMPTY;switch(typeof j){case"function":L=new J(j);case"object":if(L===this||L.closed||"function"!=typeof L.unsubscribe)return L;if(this.closed)return L.unsubscribe(),L;if(!(L instanceof J)){const se=L;L=new J,L._subscriptions=[se]}break;default:throw new Error("unrecognized teardown "+j+" added to Subscription.")}let{_parentOrParents:U}=L;if(null===U)L._parentOrParents=this;else if(U instanceof J){if(U===this)return L;L._parentOrParents=[U,this]}else{if(-1!==U.indexOf(this))return L;U.push(this)}const $=this._subscriptions;return null===$?this._subscriptions=[L]:$.push(L),L}remove(j){const L=this._subscriptions;if(L){const U=L.indexOf(j);-1!==U&&L.splice(U,1)}}}var Q;function re(Q){return Q.reduce((j,L)=>j.concat(L instanceof he?L.errors:L),[])}J.EMPTY=((Q=new J).closed=!0,Q)},2494:(He,Ee,B)=>{"use strict";B.d(Ee,{v:()=>X});let d=!1;const X={Promise:void 0,set useDeprecatedSynchronousErrorHandling(G){if(G){const ye=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+ye.stack)}else d&&console.log("RxJS: Back to a better error behavior. Thank you. <3");d=G},get useDeprecatedSynchronousErrorHandling(){return d}}},5345:(He,Ee,B)=>{"use strict";B.d(Ee,{IY:()=>ye,Ds:()=>J,ft:()=>Q});var d=B(7393),X=B(7574),G=B(7444);class ye extends d.L{constructor(L){super(),this.parent=L}_next(L){this.parent.notifyNext(L)}_error(L){this.parent.notifyError(L),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class J extends d.L{notifyNext(L){this.destination.next(L)}notifyError(L){this.destination.error(L)}notifyComplete(){this.destination.complete()}}function Q(j,L){if(L.closed)return;if(j instanceof X.y)return j.subscribe(L);let U;try{U=(0,G.s)(j)(L)}catch($){L.error($)}return U}},2441:(He,Ee,B)=>{"use strict";B.d(Ee,{c:()=>he,N:()=>J});var d=B(9765),X=B(7574),G=B(5319),ye=B(1307);class he extends X.y{constructor(U,$){super(),this.source=U,this.subjectFactory=$,this._refCount=0,this._isComplete=!1}_subscribe(U){return this.getSubject().subscribe(U)}getSubject(){const U=this._subject;return(!U||U.isStopped)&&(this._subject=this.subjectFactory()),this._subject}connect(){let U=this._connection;return U||(this._isComplete=!1,U=this._connection=new G.w,U.add(this.source.subscribe(new re(this.getSubject(),this))),U.closed&&(this._connection=null,U=G.w.EMPTY)),U}refCount(){return(0,ye.x)()(this)}}const J=(()=>{const L=he.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:L._subscribe},_isComplete:{value:L._isComplete,writable:!0},getSubject:{value:L.getSubject},connect:{value:L.connect},refCount:{value:L.refCount}}})();class re extends d.Yc{constructor(U,$){super(U),this.connectable=$}_error(U){this._unsubscribe(),super._error(U)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const U=this.connectable;if(U){this.connectable=null;const $=U._connection;U._refCount=0,U._subject=null,U._connection=null,$&&$.unsubscribe()}}}},9193:(He,Ee,B)=>{"use strict";B.d(Ee,{E:()=>X,c:()=>G});var d=B(7574);const X=new d.y(he=>he.complete());function G(he){return he?function(he){return new d.y(J=>he.schedule(()=>J.complete()))}(he):X}},4402:(He,Ee,B)=>{"use strict";B.d(Ee,{D:()=>be});var d=B(7574),X=B(7444),G=B(5319),ye=B(6554),re=B(4087),Q=B(377),U=B(4072),$=B(9489);function be(fe,Te){return Te?function(fe,Te){if(null!=fe){if(function(fe){return fe&&"function"==typeof fe[ye.L]}(fe))return function(fe,Te){return new d.y(pe=>{const _e=new G.w;return _e.add(Te.schedule(()=>{const Fe=fe[ye.L]();_e.add(Fe.subscribe({next(Be){_e.add(Te.schedule(()=>pe.next(Be)))},error(Be){_e.add(Te.schedule(()=>pe.error(Be)))},complete(){_e.add(Te.schedule(()=>pe.complete()))}}))})),_e})}(fe,Te);if((0,U.t)(fe))return function(fe,Te){return new d.y(pe=>{const _e=new G.w;return _e.add(Te.schedule(()=>fe.then(Fe=>{_e.add(Te.schedule(()=>{pe.next(Fe),_e.add(Te.schedule(()=>pe.complete()))}))},Fe=>{_e.add(Te.schedule(()=>pe.error(Fe)))}))),_e})}(fe,Te);if((0,$.z)(fe))return(0,re.r)(fe,Te);if(function(fe){return fe&&"function"==typeof fe[Q.hZ]}(fe)||"string"==typeof fe)return function(fe,Te){if(!fe)throw new Error("Iterable cannot be null");return new d.y(pe=>{const _e=new G.w;let Fe;return _e.add(()=>{Fe&&"function"==typeof Fe.return&&Fe.return()}),_e.add(Te.schedule(()=>{Fe=fe[Q.hZ](),_e.add(Te.schedule(function(){if(pe.closed)return;let Be,st;try{const Vt=Fe.next();Be=Vt.value,st=Vt.done}catch(Vt){return void pe.error(Vt)}st?pe.complete():(pe.next(Be),this.schedule())}))})),_e})}(fe,Te)}throw new TypeError((null!==fe&&typeof fe||fe)+" is not observable")}(fe,Te):fe instanceof d.y?fe:new d.y((0,X.s)(fe))}},6693:(He,Ee,B)=>{"use strict";B.d(Ee,{n:()=>ye});var d=B(7574),X=B(5015),G=B(4087);function ye(he,J){return J?(0,G.r)(he,J):new d.y((0,X.V)(he))}},6682:(He,Ee,B)=>{"use strict";B.d(Ee,{T:()=>he});var d=B(7574),X=B(4869),G=B(3282),ye=B(6693);function he(...J){let re=Number.POSITIVE_INFINITY,Q=null,j=J[J.length-1];return(0,X.K)(j)?(Q=J.pop(),J.length>1&&"number"==typeof J[J.length-1]&&(re=J.pop())):"number"==typeof j&&(re=J.pop()),null===Q&&1===J.length&&J[0]instanceof d.y?J[0]:(0,G.J)(re)((0,ye.n)(J,Q))}},5917:(He,Ee,B)=>{"use strict";B.d(Ee,{of:()=>ye});var d=B(4869),X=B(6693),G=B(4087);function ye(...he){let J=he[he.length-1];return(0,d.K)(J)?(he.pop(),(0,G.r)(he,J)):(0,X.n)(he)}},8002:(He,Ee,B)=>{"use strict";B.d(Ee,{U:()=>X});var d=B(7393);function X(he,J){return function(Q){if("function"!=typeof he)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return Q.lift(new G(he,J))}}class G{constructor(J,re){this.project=J,this.thisArg=re}call(J,re){return re.subscribe(new ye(J,this.project,this.thisArg))}}class ye extends d.L{constructor(J,re,Q){super(J),this.project=re,this.count=0,this.thisArg=Q||this}_next(J){let re;try{re=this.project.call(this.thisArg,J,this.count++)}catch(Q){return void this.destination.error(Q)}this.destination.next(re)}}},3282:(He,Ee,B)=>{"use strict";B.d(Ee,{J:()=>G});var d=B(9773),X=B(4487);function G(ye=Number.POSITIVE_INFINITY){return(0,d.zg)(X.y,ye)}},9773:(He,Ee,B)=>{"use strict";B.d(Ee,{zg:()=>ye});var d=B(8002),X=B(4402),G=B(5345);function ye(Q,j,L=Number.POSITIVE_INFINITY){return"function"==typeof j?U=>U.pipe(ye(($,se)=>(0,X.D)(Q($,se)).pipe((0,d.U)((ve,be)=>j($,ve,se,be))),L)):("number"==typeof j&&(L=j),U=>U.lift(new he(Q,L)))}class he{constructor(j,L=Number.POSITIVE_INFINITY){this.project=j,this.concurrent=L}call(j,L){return L.subscribe(new J(j,this.project,this.concurrent))}}class J extends G.Ds{constructor(j,L,U=Number.POSITIVE_INFINITY){super(j),this.project=L,this.concurrent=U,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(j){this.active<this.concurrent?this._tryNext(j):this.buffer.push(j)}_tryNext(j){let L;const U=this.index++;try{L=this.project(j,U)}catch($){return void this.destination.error($)}this.active++,this._innerSub(L)}_innerSub(j){const L=new G.IY(this),U=this.destination;U.add(L);const $=(0,G.ft)(j,L);$!==L&&U.add($)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(j){this.destination.next(j)}notifyComplete(){const j=this.buffer;this.active--,j.length>0?this._next(j.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}},9746:(He,Ee,B)=>{"use strict";B.d(Ee,{QV:()=>G,ht:()=>he});var d=B(7393),X=B(1593);function G(re,Q=0){return function(L){return L.lift(new ye(re,Q))}}class ye{constructor(Q,j=0){this.scheduler=Q,this.delay=j}call(Q,j){return j.subscribe(new he(Q,this.scheduler,this.delay))}}class he extends d.L{constructor(Q,j,L=0){super(Q),this.scheduler=j,this.delay=L}static dispatch(Q){const{notification:j,destination:L}=Q;j.observe(L),this.unsubscribe()}scheduleMessage(Q){this.destination.add(this.scheduler.schedule(he.dispatch,this.delay,new J(Q,this.destination)))}_next(Q){this.scheduleMessage(X.P.createNext(Q))}_error(Q){this.scheduleMessage(X.P.createError(Q)),this.unsubscribe()}_complete(){this.scheduleMessage(X.P.createComplete()),this.unsubscribe()}}class J{constructor(Q,j){this.notification=Q,this.destination=j}}},1307:(He,Ee,B)=>{"use strict";B.d(Ee,{x:()=>X});var d=B(7393);function X(){return function(J){return J.lift(new G(J))}}class G{constructor(J){this.connectable=J}call(J,re){const{connectable:Q}=this;Q._refCount++;const j=new ye(J,Q),L=re.subscribe(j);return j.closed||(j.connection=Q.connect()),L}}class ye extends d.L{constructor(J,re){super(J),this.connectable=re}_unsubscribe(){const{connectable:J}=this;if(!J)return void(this.connection=null);this.connectable=null;const re=J._refCount;if(re<=0)return void(this.connection=null);if(J._refCount=re-1,re>1)return void(this.connection=null);const{connection:Q}=this,j=J._connection;this.connection=null,j&&(!Q||j===Q)&&j.unsubscribe()}}},8819:(He,Ee,B)=>{"use strict";B.d(Ee,{B:()=>re});var d=B(2441);var ye=B(1307),he=B(9765);function J(){return new he.xQ}function re(){return Q=>(0,ye.x)()(function(Q,j){return function(U){let $;$="function"==typeof Q?Q:function(){return Q};const se=Object.create(U,d.N);return se.source=U,se.subjectFactory=$,se}}(J)(Q))}},2639:(He,Ee,B)=>{"use strict";B.d(Ee,{R:()=>fe});var d=B(7574);let X=1;const G=Promise.resolve(),ye={};function he(pe){return pe in ye&&(delete ye[pe],!0)}const J={setImmediate(pe){const _e=X++;return ye[_e]=!0,G.then(()=>he(_e)&&pe()),_e},clearImmediate(pe){he(pe)}};var Q=B(6465),L=B(6102);const se=new class extends L.v{flush(_e){this.active=!0,this.scheduled=void 0;const{actions:Fe}=this;let Be,st=-1,Vt=Fe.length;_e=_e||Fe.shift();do{if(Be=_e.execute(_e.state,_e.delay))break}while(++st<Vt&&(_e=Fe.shift()));if(this.active=!1,Be){for(;++st<Vt&&(_e=Fe.shift());)_e.unsubscribe();throw Be}}}(class extends Q.o{constructor(_e,Fe){super(_e,Fe),this.scheduler=_e,this.work=Fe}requestAsyncId(_e,Fe,Be=0){return null!==Be&&Be>0?super.requestAsyncId(_e,Fe,Be):(_e.actions.push(this),_e.scheduled||(_e.scheduled=J.setImmediate(_e.flush.bind(_e,null))))}recycleAsyncId(_e,Fe,Be=0){if(null!==Be&&Be>0||null===Be&&this.delay>0)return super.recycleAsyncId(_e,Fe,Be);0===_e.actions.length&&(J.clearImmediate(Fe),_e.scheduled=void 0)}});var ve=B(6561);class be extends d.y{constructor(_e,Fe=0,Be=se){super(),this.source=_e,this.delayTime=Fe,this.scheduler=Be,(!(0,ve.k)(Fe)||Fe<0)&&(this.delayTime=0),(!Be||"function"!=typeof Be.schedule)&&(this.scheduler=se)}static create(_e,Fe=0,Be=se){return new be(_e,Fe,Be)}static dispatch(_e){const{source:Fe,subscriber:Be}=_e;return this.add(Fe.subscribe(Be))}_subscribe(_e){return this.scheduler.schedule(be.dispatch,this.delayTime,{source:this.source,subscriber:_e})}}function fe(pe,_e=0){return function(Be){return Be.lift(new Te(pe,_e))}}class Te{constructor(_e,Fe){this.scheduler=_e,this.delay=Fe}call(_e,Fe){return new be(Fe,this.delay,this.scheduler).subscribe(_e)}}},8307:(He,Ee,B)=>{"use strict";B.d(Ee,{b:()=>ye});var d=B(7393),X=B(8640),G=B(9105);function ye(re,Q,j){return function(U){return U.lift(new he(re,Q,j))}}class he{constructor(Q,j,L){this.nextOrObserver=Q,this.error=j,this.complete=L}call(Q,j){return j.subscribe(new J(Q,this.nextOrObserver,this.error,this.complete))}}class J extends d.L{constructor(Q,j,L,U){super(Q),this._tapNext=X.Z,this._tapError=X.Z,this._tapComplete=X.Z,this._tapError=L||X.Z,this._tapComplete=U||X.Z,(0,G.m)(j)?(this._context=this,this._tapNext=j):j&&(this._context=j,this._tapNext=j.next||X.Z,this._tapError=j.error||X.Z,this._tapComplete=j.complete||X.Z)}_next(Q){try{this._tapNext.call(this._context,Q)}catch(j){return void this.destination.error(j)}this.destination.next(Q)}_error(Q){try{this._tapError.call(this._context,Q)}catch(j){return void this.destination.error(j)}this.destination.error(Q)}_complete(){try{this._tapComplete.call(this._context)}catch(Q){return void this.destination.error(Q)}return this.destination.complete()}}},4087:(He,Ee,B)=>{"use strict";B.d(Ee,{r:()=>G});var d=B(7574),X=B(5319);function G(ye,he){return new d.y(J=>{const re=new X.w;let Q=0;return re.add(he.schedule(function(){Q!==ye.length?(J.next(ye[Q++]),J.closed||re.add(this.schedule())):J.complete()})),re})}},6465:(He,Ee,B)=>{"use strict";B.d(Ee,{o:()=>G});var d=B(5319);class X extends d.w{constructor(he,J){super()}schedule(he,J=0){return this}}class G extends X{constructor(he,J){super(he,J),this.scheduler=he,this.work=J,this.pending=!1}schedule(he,J=0){if(this.closed)return this;this.state=he;const re=this.id,Q=this.scheduler;return null!=re&&(this.id=this.recycleAsyncId(Q,re,J)),this.pending=!0,this.delay=J,this.id=this.id||this.requestAsyncId(Q,this.id,J),this}requestAsyncId(he,J,re=0){return setInterval(he.flush.bind(he,this),re)}recycleAsyncId(he,J,re=0){if(null!==re&&this.delay===re&&!1===this.pending)return J;clearInterval(J)}execute(he,J){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const re=this._execute(he,J);if(re)return re;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(he,J){let Q,re=!1;try{this.work(he)}catch(j){re=!0,Q=!!j&&j||new Error(j)}if(re)return this.unsubscribe(),Q}_unsubscribe(){const he=this.id,J=this.scheduler,re=J.actions,Q=re.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==Q&&re.splice(Q,1),null!=he&&(this.id=this.recycleAsyncId(J,he,null)),this.delay=null}}},6102:(He,Ee,B)=>{"use strict";B.d(Ee,{v:()=>X});let d=(()=>{class G{constructor(he,J=G.now){this.SchedulerAction=he,this.now=J}schedule(he,J=0,re){return new this.SchedulerAction(this,he).schedule(re,J)}}return G.now=()=>Date.now(),G})();class X extends d{constructor(ye,he=d.now){super(ye,()=>X.delegate&&X.delegate!==this?X.delegate.now():he()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(ye,he=0,J){return X.delegate&&X.delegate!==this?X.delegate.schedule(ye,he,J):super.schedule(ye,he,J)}flush(ye){const{actions:he}=this;if(this.active)return void he.push(ye);let J;this.active=!0;do{if(J=ye.execute(ye.state,ye.delay))break}while(ye=he.shift());if(this.active=!1,J){for(;ye=he.shift();)ye.unsubscribe();throw J}}}},3637:(He,Ee,B)=>{"use strict";B.d(Ee,{z:()=>G,P:()=>ye});var d=B(6465);const G=new(B(6102).v)(d.o),ye=G},7771:(He,Ee,B)=>{"use strict";B.d(Ee,{c:()=>J,N:()=>he});var d=B(6465),G=B(6102);const he=new class extends G.v{}(class extends d.o{constructor(Q,j){super(Q,j),this.scheduler=Q,this.work=j}schedule(Q,j=0){return j>0?super.schedule(Q,j):(this.delay=j,this.state=Q,this.scheduler.flush(this),this)}execute(Q,j){return j>0||this.closed?super.execute(Q,j):this._execute(Q,j)}requestAsyncId(Q,j,L=0){return null!==L&&L>0||null===L&&this.delay>0?super.requestAsyncId(Q,j,L):Q.flush(this)}}),J=he},377:(He,Ee,B)=>{"use strict";B.d(Ee,{hZ:()=>X});const X="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"},6554:(He,Ee,B)=>{"use strict";B.d(Ee,{L:()=>d});const d="function"==typeof Symbol&&Symbol.observable||"@@observable"},9181:(He,Ee,B)=>{"use strict";B.d(Ee,{b:()=>d});const d="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()},7971:(He,Ee,B)=>{"use strict";B.d(Ee,{N:()=>X});const X=(()=>{function G(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return G.prototype=Object.create(Error.prototype),G})()},4449:(He,Ee,B)=>{"use strict";function d(X){setTimeout(()=>{throw X},0)}B.d(Ee,{z:()=>d})},4487:(He,Ee,B)=>{"use strict";function d(X){return X}B.d(Ee,{y:()=>d})},9796:(He,Ee,B)=>{"use strict";B.d(Ee,{k:()=>d});const d=Array.isArray||(X=>X&&"number"==typeof X.length)},9489:(He,Ee,B)=>{"use strict";B.d(Ee,{z:()=>d});const d=X=>X&&"number"==typeof X.length&&"function"!=typeof X},9105:(He,Ee,B)=>{"use strict";function d(X){return"function"==typeof X}B.d(Ee,{m:()=>d})},6561:(He,Ee,B)=>{"use strict";B.d(Ee,{k:()=>X});var d=B(9796);function X(G){return!(0,d.k)(G)&&G-parseFloat(G)+1>=0}},1555:(He,Ee,B)=>{"use strict";function d(X){return null!==X&&"object"==typeof X}B.d(Ee,{K:()=>d})},4072:(He,Ee,B)=>{"use strict";function d(X){return!!X&&"function"!=typeof X.subscribe&&"function"==typeof X.then}B.d(Ee,{t:()=>d})},4869:(He,Ee,B)=>{"use strict";function d(X){return X&&"function"==typeof X.schedule}B.d(Ee,{K:()=>d})},8640:(He,Ee,B)=>{"use strict";function d(){}B.d(Ee,{Z:()=>d})},7444:(He,Ee,B)=>{"use strict";B.d(Ee,{s:()=>U});var d=B(5015),X=B(4449),ye=B(377),J=B(6554),Q=B(9489),j=B(4072),L=B(1555);const U=$=>{if($&&"function"==typeof $[J.L])return($=>se=>{const ve=$[J.L]();if("function"!=typeof ve.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return ve.subscribe(se)})($);if((0,Q.z)($))return(0,d.V)($);if((0,j.t)($))return($=>se=>($.then(ve=>{se.closed||(se.next(ve),se.complete())},ve=>se.error(ve)).then(null,X.z),se))($);if($&&"function"==typeof $[ye.hZ])return($=>se=>{const ve=$[ye.hZ]();for(;;){let be;try{be=ve.next()}catch(fe){return se.error(fe),se}if(be.done){se.complete();break}if(se.next(be.value),se.closed)break}return"function"==typeof ve.return&&se.add(()=>{ve.return&&ve.return()}),se})($);{const ve=`You provided ${(0,L.K)($)?"an invalid object":`'${$}'`} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`;throw new TypeError(ve)}}},5015:(He,Ee,B)=>{"use strict";B.d(Ee,{V:()=>d});const d=X=>G=>{for(let ye=0,he=X.length;ye<he&&!G.closed;ye++)G.next(X[ye]);G.complete()}},4278:(He,Ee,B)=>{"use strict";var d=B(7716);let X=null;function G(){return X}const re=new d.OlP("DocumentToken");let Q=(()=>{class i{historyGo(n){throw new Error("Not implemented")}}return i.\u0275fac=function(n){return new(n||i)},i.\u0275prov=(0,d.Yz7)({factory:j,token:i,providedIn:"platform"}),i})();function j(){return(0,d.LFG)(U)}const L=new d.OlP("Location Initialized");let U=(()=>{class i extends Q{constructor(n){super(),this._doc=n,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return G().getBaseHref(this._doc)}onPopState(n){const s=G().getGlobalEventTarget(this._doc,"window");return s.addEventListener("popstate",n,!1),()=>s.removeEventListener("popstate",n)}onHashChange(n){const s=G().getGlobalEventTarget(this._doc,"window");return s.addEventListener("hashchange",n,!1),()=>s.removeEventListener("hashchange",n)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(n){this.location.pathname=n}pushState(n,s,l){$()?this._history.pushState(n,s,l):this.location.hash=l}replaceState(n,s,l){$()?this._history.replaceState(n,s,l):this.location.hash=l}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}}return i.\u0275fac=function(n){return new(n||i)(d.LFG(re))},i.\u0275prov=(0,d.Yz7)({factory:se,token:i,providedIn:"platform"}),i})();function $(){return!!window.history.pushState}function se(){return new U((0,d.LFG)(re))}function ve(i,r){if(0==i.length)return r;if(0==r.length)return i;let n=0;return i.endsWith("/")&&n++,r.startsWith("/")&&n++,2==n?i+r.substring(1):1==n?i+r:i+"/"+r}function be(i){const r=i.match(/#|\?|$/),n=r&&r.index||i.length;return i.slice(0,n-("/"===i[n-1]?1:0))+i.slice(n)}function fe(i){return i&&"?"!==i[0]?"?"+i:i}let Te=(()=>{class i{historyGo(n){throw new Error("Not implemented")}}return i.\u0275fac=function(n){return new(n||i)},i.\u0275prov=(0,d.Yz7)({factory:pe,token:i,providedIn:"root"}),i})();function pe(i){const r=(0,d.LFG)(re).location;return new Fe((0,d.LFG)(Q),r&&r.origin||"")}const _e=new d.OlP("appBaseHref");let Fe=(()=>{class i extends Te{constructor(n,s){if(super(),this._platformLocation=n,this._removeListenerFns=[],null==s&&(s=this._platformLocation.getBaseHrefFromDOM()),null==s)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=s}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return ve(this._baseHref,n)}path(n=!1){const s=this._platformLocation.pathname+fe(this._platformLocation.search),l=this._platformLocation.hash;return l&&n?`${s}${l}`:s}pushState(n,s,l,c){const g=this.prepareExternalUrl(l+fe(c));this._platformLocation.pushState(n,s,g)}replaceState(n,s,l,c){const g=this.prepareExternalUrl(l+fe(c));this._platformLocation.replaceState(n,s,g)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(n=0){var s,l;null===(l=(s=this._platformLocation).historyGo)||void 0===l||l.call(s,n)}}return i.\u0275fac=function(n){return new(n||i)(d.LFG(Q),d.LFG(_e,8))},i.\u0275prov=d.Yz7({token:i,factory:i.\u0275fac}),i})(),Be=(()=>{class i extends Te{constructor(n,s){super(),this._platformLocation=n,this._baseHref="",this._removeListenerFns=[],null!=s&&(this._baseHref=s)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}path(n=!1){let s=this._platformLocation.hash;return null==s&&(s="#"),s.length>0?s.substring(1):s}prepareExternalUrl(n){const s=ve(this._baseHref,n);return s.length>0?"#"+s:s}pushState(n,s,l,c){let g=this.prepareExternalUrl(l+fe(c));0==g.length&&(g=this._platformLocation.pathname),this._platformLocation.pushState(n,s,g)}replaceState(n,s,l,c){let g=this.prepareExternalUrl(l+fe(c));0==g.length&&(g=this._platformLocation.pathname),this._platformLocation.replaceState(n,s,g)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(n=0){var s,l;null===(l=(s=this._platformLocation).historyGo)||void 0===l||l.call(s,n)}}return i.\u0275fac=function(n){return new(n||i)(d.LFG(Q),d.LFG(_e,8))},i.\u0275prov=d.Yz7({token:i,factory:i.\u0275fac}),i})(),st=(()=>{class i{constructor(n,s){this._subject=new d.vpe,this._urlChangeListeners=[],this._platformStrategy=n;const l=this._platformStrategy.getBaseHref();this._platformLocation=s,this._baseHref=be(Ut(l)),this._platformStrategy.onPopState(c=>{this._subject.emit({url:this.path(!0),pop:!0,state:c.state,type:c.type})})}path(n=!1){return this.normalize(this._platformStrategy.path(n))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(n,s=""){return this.path()==this.normalize(n+fe(s))}normalize(n){return i.stripTrailingSlash(function(i,r){return i&&r.startsWith(i)?r.substring(i.length):r}(this._baseHref,Ut(n)))}prepareExternalUrl(n){return n&&"/"!==n[0]&&(n="/"+n),this._platformStrategy.prepareExternalUrl(n)}go(n,s="",l=null){this._platformStrategy.pushState(l,"",n,s),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+fe(s)),l)}replaceState(n,s="",l=null){this._platformStrategy.replaceState(l,"",n,s),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+fe(s)),l)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(n=0){var s,l;null===(l=(s=this._platformStrategy).historyGo)||void 0===l||l.call(s,n)}onUrlChange(n){this._urlChangeListeners.push(n),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(s=>{this._notifyUrlChangeListeners(s.url,s.state)}))}_notifyUrlChangeListeners(n="",s){this._urlChangeListeners.forEach(l=>l(n,s))}subscribe(n,s,l){return this._subject.subscribe({next:n,error:s,complete:l})}}return i.\u0275fac=function(n){return new(n||i)(d.LFG(Te),d.LFG(Q))},i.normalizeQueryParams=fe,i.joinWithSlash=ve,i.stripTrailingSlash=be,i.\u0275prov=(0,d.Yz7)({factory:Vt,token:i,providedIn:"root"}),i})();function Vt(){return new st((0,d.LFG)(Te),(0,d.LFG)(Q))}function Ut(i){return i.replace(/\/index.html$/,"")}var le=(()=>((le=le||{})[le.Zero=0]="Zero",le[le.One=1]="One",le[le.Two=2]="Two",le[le.Few=3]="Few",le[le.Many=4]="Many",le[le.Other=5]="Other",le))();const zs=d.kL8;class Li{}let Iu=(()=>{class i extends Li{constructor(n){super(),this.locale=n}getPluralCategory(n,s){switch(zs(s||this.locale)(n)){case le.Zero:return"zero";case le.One:return"one";case le.Two:return"two";case le.Few:return"few";case le.Many:return"many";default:return"other"}}}return i.\u0275fac=function(n){return new(n||i)(d.LFG(d.soG))},i.\u0275prov=d.Yz7({token:i,factory:i.\u0275fac}),i})(),cl=(()=>{class i{constructor(n,s,l,c){this._iterableDiffers=n,this._keyValueDiffers=s,this._ngEl=l,this._renderer=c,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(n){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof n?n.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(n){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof n?n.split(/\s+/):n,this._rawClass&&((0,d.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const n=this._iterableDiffer.diff(this._rawClass);n&&this._applyIterableChanges(n)}else if(this._keyValueDiffer){const n=this._keyValueDiffer.diff(this._rawClass);n&&this._applyKeyValueChanges(n)}}_applyKeyValueChanges(n){n.forEachAddedItem(s=>this._toggleClass(s.key,s.currentValue)),n.forEachChangedItem(s=>this._toggleClass(s.key,s.currentValue)),n.forEachRemovedItem(s=>{s.previousValue&&this._toggleClass(s.key,!1)})}_applyIterableChanges(n){n.forEachAddedItem(s=>{if("string"!=typeof s.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,d.AaK)(s.item)}`);this._toggleClass(s.item,!0)}),n.forEachRemovedItem(s=>this._toggleClass(s.item,!1))}_applyClasses(n){n&&(Array.isArray(n)||n instanceof Set?n.forEach(s=>this._toggleClass(s,!0)):Object.keys(n).forEach(s=>this._toggleClass(s,!!n[s])))}_removeClasses(n){n&&(Array.isArray(n)||n instanceof Set?n.forEach(s=>this._toggleClass(s,!1)):Object.keys(n).forEach(s=>this._toggleClass(s,!1)))}_toggleClass(n,s){(n=n.trim())&&n.split(/\s+/g).forEach(l=>{s?this._renderer.addClass(this._ngEl.nativeElement,l):this._renderer.removeClass(this._ngEl.nativeElement,l)})}}return i.\u0275fac=function(n){return new(n||i)(d.Y36(d.ZZ4),d.Y36(d.aQg),d.Y36(d.SBq),d.Y36(d.Qsj))},i.\u0275dir=d.lG2({type:i,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),i})();class rs{constructor(r,n,s,l){this.$implicit=r,this.ngForOf=n,this.index=s,this.count=l}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let wt=(()=>{class i{constructor(n,s,l){this._viewContainer=n,this._template=s,this._differs=l,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(n){this._ngForOf=n,this._ngForOfDirty=!0}set ngForTrackBy(n){this._trackByFn=n}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(n){n&&(this._template=n)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const n=this._ngForOf;if(!this._differ&&n)try{this._differ=this._differs.find(n).create(this.ngForTrackBy)}catch(s){throw new Error(`Cannot find a differ supporting object '${n}' of type '${function(i){return i.name||typeof i}(n)}'. NgFor only supports binding to Iterables such as Arrays.`)}}if(this._differ){const n=this._differ.diff(this._ngForOf);n&&this._applyChanges(n)}}_applyChanges(n){const s=[];n.forEachOperation((l,c,g)=>{if(null==l.previousIndex){const _=this._viewContainer.createEmbeddedView(this._template,new rs(null,this._ngForOf,-1,-1),null===g?void 0:g),w=new Tu(l,_);s.push(w)}else if(null==g)this._viewContainer.remove(null===c?void 0:c);else if(null!==c){const _=this._viewContainer.get(c);this._viewContainer.move(_,g);const w=new Tu(l,_);s.push(w)}});for(let l=0;l<s.length;l++)this._perViewChange(s[l].view,s[l].record);for(let l=0,c=this._viewContainer.length;l<c;l++){const g=this._viewContainer.get(l);g.context.index=l,g.context.count=c,g.context.ngForOf=this._ngForOf}n.forEachIdentityChange(l=>{this._viewContainer.get(l.currentIndex).context.$implicit=l.item})}_perViewChange(n,s){n.context.$implicit=s.item}static ngTemplateContextGuard(n,s){return!0}}return i.\u0275fac=function(n){return new(n||i)(d.Y36(d.s_b),d.Y36(d.Rgc),d.Y36(d.ZZ4))},i.\u0275dir=d.lG2({type:i,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),i})();class Tu{constructor(r,n){this.record=r,this.view=n}}let tr=(()=>{class i{constructor(n,s){this._viewContainer=n,this._context=new Nu,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=s}set ngIf(n){this._context.$implicit=this._context.ngIf=n,this._updateView()}set ngIfThen(n){dl("ngIfThen",n),this._thenTemplateRef=n,this._thenViewRef=null,this._updateView()}set ngIfElse(n){dl("ngIfElse",n),this._elseTemplateRef=n,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(n,s){return!0}}return i.\u0275fac=function(n){return new(n||i)(d.Y36(d.s_b),d.Y36(d.Rgc))},i.\u0275dir=d.lG2({type:i,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),i})();class Nu{constructor(){this.$implicit=null,this.ngIf=null}}function dl(i,r){if(r&&!r.createEmbeddedView)throw new Error(`${i} must be a TemplateRef, but received '${(0,d.AaK)(r)}'.`)}let kr=(()=>{class i{}return i.\u0275fac=function(n){return new(n||i)},i.\u0275mod=d.oAB({type:i}),i.\u0275inj=d.cJS({providers:[{provide:Li,useClass:Iu}]}),i})();function vd(i){return"server"===i}let Mu=(()=>{class i{}return i.\u0275prov=(0,d.Yz7)({token:i,providedIn:"root",factory:()=>new Ru((0,d.LFG)(re),window)}),i})();class Ru{constructor(r,n){this.document=r,this.window=n,this.offset=()=>[0,0]}setOffset(r){this.offset=Array.isArray(r)?()=>r:r}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(r){this.supportsScrolling()&&this.window.scrollTo(r[0],r[1])}scrollToAnchor(r){if(!this.supportsScrolling())return;const n=function(i,r){const n=i.getElementById(r)||i.getElementsByName(r)[0];if(n)return n;if("function"==typeof i.createTreeWalker&&i.body&&(i.body.createShadowRoot||i.body.attachShadow)){const s=i.createTreeWalker(i.body,NodeFilter.SHOW_ELEMENT);let l=s.currentNode;for(;l;){const c=l.shadowRoot;if(c){const g=c.getElementById(r)||c.querySelector(`[name="${r}"]`);if(g)return g}l=s.nextNode()}}return null}(this.document,r);n&&(this.scrollToElement(n),this.attemptFocus(n))}setHistoryScrollRestoration(r){if(this.supportScrollRestoration()){const n=this.window.history;n&&n.scrollRestoration&&(n.scrollRestoration=r)}}scrollToElement(r){const n=r.getBoundingClientRect(),s=n.left+this.window.pageXOffset,l=n.top+this.window.pageYOffset,c=this.offset();this.window.scrollTo(s-c[0],l-c[1])}attemptFocus(r){return r.focus(),this.document.activeElement===r}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const r=xu(this.window.history)||xu(Object.getPrototypeOf(this.window.history));return!(!r||!r.writable&&!r.set)}catch(r){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(r){return!1}}}function xu(i){return Object.getOwnPropertyDescriptor(i,"scrollRestoration")}class bd extends class extends class{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){var i;i=new bd,X||(X=i)}onAndCancel(r,n,s){return r.addEventListener(n,s,!1),()=>{r.removeEventListener(n,s,!1)}}dispatchEvent(r,n){r.dispatchEvent(n)}remove(r){r.parentNode&&r.parentNode.removeChild(r)}createElement(r,n){return(n=n||this.getDefaultDocument()).createElement(r)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(r){return r.nodeType===Node.ELEMENT_NODE}isShadowRoot(r){return r instanceof DocumentFragment}getGlobalEventTarget(r,n){return"window"===n?window:"document"===n?r:"body"===n?r.body:null}getBaseHref(r){const n=(Qs=Qs||document.querySelector("base"),Qs?Qs.getAttribute("href"):null);return null==n?null:function(i){ln=ln||document.createElement("a"),ln.setAttribute("href",i);const r=ln.pathname;return"/"===r.charAt(0)?r:`/${r}`}(n)}resetBaseElement(){Qs=null}getUserAgent(){return window.navigator.userAgent}getCookie(r){return function(i,r){r=encodeURIComponent(r);for(const n of i.split(";")){const s=n.indexOf("="),[l,c]=-1==s?[n,""]:[n.slice(0,s),n.slice(s+1)];if(l.trim()===r)return decodeURIComponent(c)}return null}(document.cookie,r)}}let ln,Qs=null;const Lm=new d.OlP("TRANSITION_ID"),Or=[{provide:d.ip1,useFactory:function(i,r,n){return()=>{n.get(d.CZH).donePromise.then(()=>{const s=G(),l=r.querySelectorAll(`style[ng-transition="${i}"]`);for(let c=0;c<l.length;c++)s.remove(l[c])})}},deps:[Lm,re,d.zs3],multi:!0}];class ku{static init(){(0,d.VLi)(new ku)}addToWindow(r){d.dqk.getAngularTestability=(s,l=!0)=>{const c=r.findTestabilityInTree(s,l);if(null==c)throw new Error("Could not find testability for element.");return c},d.dqk.getAllAngularTestabilities=()=>r.getAllTestabilities(),d.dqk.getAllAngularRootElements=()=>r.getAllRootElements(),d.dqk.frameworkStabilizers||(d.dqk.frameworkStabilizers=[]),d.dqk.frameworkStabilizers.push(s=>{const l=d.dqk.getAllAngularTestabilities();let c=l.length,g=!1;const _=function(w){g=g||w,c--,0==c&&s(g)};l.forEach(function(w){w.whenStable(_)})})}findTestabilityInTree(r,n,s){if(null==n)return null;const l=r.getTestability(n);return null!=l?l:s?G().isShadowRoot(n)?this.findTestabilityInTree(r,n.host,!0):this.findTestabilityInTree(r,n.parentElement,!0):null}}let wd=(()=>{class i{build(){return new XMLHttpRequest}}return i.\u0275fac=function(n){return new(n||i)},i.\u0275prov=d.Yz7({token:i,factory:i.\u0275fac}),i})();const da=new d.OlP("EventManagerPlugins");let Ne=(()=>{class i{constructor(n,s){this._zone=s,this._eventNameToPlugin=new Map,n.forEach(l=>l.manager=this),this._plugins=n.slice().reverse()}addEventListener(n,s,l){return this._findPluginFor(s).addEventListener(n,s,l)}addGlobalEventListener(n,s,l){return this._findPluginFor(s).addGlobalEventListener(n,s,l)}getZone(){return this._zone}_findPluginFor(n){const s=this._eventNameToPlugin.get(n);if(s)return s;const l=this._plugins;for(let c=0;c<l.length;c++){const g=l[c];if(g.supports(n))return this._eventNameToPlugin.set(n,g),g}throw new Error(`No event manager plugin found for event ${n}`)}}return i.\u0275fac=function(n){return new(n||i)(d.LFG(da),d.LFG(d.R0b))},i.\u0275prov=d.Yz7({token:i,factory:i.\u0275fac}),i})();class Nt{constructor(r){this._doc=r}addGlobalEventListener(r,n,s){const l=G().getGlobalEventTarget(this._doc,r);if(!l)throw new Error(`Unsupported event target ${l} for event ${n}`);return this.addEventListener(l,n,s)}}let Bf=(()=>{class i{constructor(){this._stylesSet=new Set}addStyles(n){const s=new Set;n.forEach(l=>{this._stylesSet.has(l)||(this._stylesSet.add(l),s.add(l))}),this.onStylesAdded(s)}onStylesAdded(n){}getAllStyles(){return Array.from(this._stylesSet)}}return i.\u0275fac=function(n){return new(n||i)},i.\u0275prov=d.Yz7({token:i,factory:i.\u0275fac}),i})(),nn=(()=>{class i extends Bf{constructor(n){super(),this._doc=n,this._hostNodes=new Map,this._hostNodes.set(n.head,[])}_addStylesToHost(n,s,l){n.forEach(c=>{const g=this._doc.createElement("style");g.textContent=c,l.push(s.appendChild(g))})}addHost(n){const s=[];this._addStylesToHost(this._stylesSet,n,s),this._hostNodes.set(n,s)}removeHost(n){const s=this._hostNodes.get(n);s&&s.forEach(Uf),this._hostNodes.delete(n)}onStylesAdded(n){this._hostNodes.forEach((s,l)=>{this._addStylesToHost(n,l,s)})}ngOnDestroy(){this._hostNodes.forEach(n=>n.forEach(Uf))}}return i.\u0275fac=function(n){return new(n||i)(d.LFG(re))},i.\u0275prov=d.Yz7({token:i,factory:i.\u0275fac}),i})();function Uf(i){G().remove(i)}const Js={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},Bi=/%COMP%/g;function Pn(i,r,n){for(let s=0;s<r.length;s++){let l=r[s];Array.isArray(l)?Pn(i,l,n):(l=l.replace(Bi,i),n.push(l))}return n}function as(i){return r=>{if("__ngUnwrap__"===r)return i;!1===i(r)&&(r.preventDefault(),r.returnValue=!1)}}let So=(()=>{class i{constructor(n,s,l){this.eventManager=n,this.sharedStylesHost=s,this.appId=l,this.rendererByCompId=new Map,this.defaultRenderer=new vi(n)}createRenderer(n,s){if(!n||!s)return this.defaultRenderer;switch(s.encapsulation){case d.ifc.Emulated:{let l=this.rendererByCompId.get(s.id);return l||(l=new jf(this.eventManager,this.sharedStylesHost,s,this.appId),this.rendererByCompId.set(s.id,l)),l.applyToHost(n),l}case 1:case d.ifc.ShadowDom:return new $f(this.eventManager,this.sharedStylesHost,n,s);default:if(!this.rendererByCompId.has(s.id)){const l=Pn(s.id,s.styles,[]);this.sharedStylesHost.addStyles(l),this.rendererByCompId.set(s.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return i.\u0275fac=function(n){return new(n||i)(d.LFG(Ne),d.LFG(nn),d.LFG(d.AFp))},i.\u0275prov=d.Yz7({token:i,factory:i.\u0275fac}),i})();class vi{constructor(r){this.eventManager=r,this.data=Object.create(null)}destroy(){}createElement(r,n){return n?document.createElementNS(Js[n]||n,r):document.createElement(r)}createComment(r){return document.createComment(r)}createText(r){return document.createTextNode(r)}appendChild(r,n){r.appendChild(n)}insertBefore(r,n,s){r&&r.insertBefore(n,s)}removeChild(r,n){r&&r.removeChild(n)}selectRootElement(r,n){let s="string"==typeof r?document.querySelector(r):r;if(!s)throw new Error(`The selector "${r}" did not match any elements`);return n||(s.textContent=""),s}parentNode(r){return r.parentNode}nextSibling(r){return r.nextSibling}setAttribute(r,n,s,l){if(l){n=l+":"+n;const c=Js[l];c?r.setAttributeNS(c,n,s):r.setAttribute(n,s)}else r.setAttribute(n,s)}removeAttribute(r,n,s){if(s){const l=Js[s];l?r.removeAttributeNS(l,n):r.removeAttribute(`${s}:${n}`)}else r.removeAttribute(n)}addClass(r,n){r.classList.add(n)}removeClass(r,n){r.classList.remove(n)}setStyle(r,n,s,l){l&(d.JOm.DashCase|d.JOm.Important)?r.style.setProperty(n,s,l&d.JOm.Important?"important":""):r.style[n]=s}removeStyle(r,n,s){s&d.JOm.DashCase?r.style.removeProperty(n):r.style[n]=""}setProperty(r,n,s){r[n]=s}setValue(r,n){r.nodeValue=n}listen(r,n,s){return"string"==typeof r?this.eventManager.addGlobalEventListener(r,n,as(s)):this.eventManager.addEventListener(r,n,as(s))}}class jf extends vi{constructor(r,n,s,l){super(r),this.component=s;const c=Pn(l+"-"+s.id,s.styles,[]);n.addStyles(c),this.contentAttr="_ngcontent-%COMP%".replace(Bi,l+"-"+s.id),this.hostAttr=function(i){return"_nghost-%COMP%".replace(Bi,i)}(l+"-"+s.id)}applyToHost(r){super.setAttribute(r,this.hostAttr,"")}createElement(r,n){const s=super.createElement(r,n);return super.setAttribute(s,this.contentAttr,""),s}}class $f extends vi{constructor(r,n,s,l){super(r),this.sharedStylesHost=n,this.hostEl=s,this.shadowRoot=s.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const c=Pn(l.id,l.styles,[]);for(let g=0;g<c.length;g++){const _=document.createElement("style");_.textContent=c[g],this.shadowRoot.appendChild(_)}}nodeOrShadowRoot(r){return r===this.hostEl?this.shadowRoot:r}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(r,n){return super.appendChild(this.nodeOrShadowRoot(r),n)}insertBefore(r,n,s){return super.insertBefore(this.nodeOrShadowRoot(r),n,s)}removeChild(r,n){return super.removeChild(this.nodeOrShadowRoot(r),n)}parentNode(r){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(r)))}}let Ou=(()=>{class i extends Nt{constructor(n){super(n)}supports(n){return!0}addEventListener(n,s,l){return n.addEventListener(s,l,!1),()=>this.removeEventListener(n,s,l)}removeEventListener(n,s,l){return n.removeEventListener(s,l)}}return i.\u0275fac=function(n){return new(n||i)(d.LFG(re))},i.\u0275prov=d.Yz7({token:i,factory:i.\u0275fac}),i})();const Fu=["alt","control","meta","shift"],u0={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Pr={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},WC={alt:i=>i.altKey,control:i=>i.ctrlKey,meta:i=>i.metaKey,shift:i=>i.shiftKey};let qC=(()=>{class i extends Nt{constructor(n){super(n)}supports(n){return null!=i.parseEventName(n)}addEventListener(n,s,l){const c=i.parseEventName(s),g=i.eventCallback(c.fullKey,l,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>G().onAndCancel(n,c.domEventName,g))}static parseEventName(n){const s=n.toLowerCase().split("."),l=s.shift();if(0===s.length||"keydown"!==l&&"keyup"!==l)return null;const c=i._normalizeKey(s.pop());let g="";if(Fu.forEach(w=>{const T=s.indexOf(w);T>-1&&(s.splice(T,1),g+=w+".")}),g+=c,0!=s.length||0===c.length)return null;const _={};return _.domEventName=l,_.fullKey=g,_}static getEventFullKey(n){let s="",l=function(i){let r=i.key;if(null==r){if(r=i.keyIdentifier,null==r)return"Unidentified";r.startsWith("U+")&&(r=String.fromCharCode(parseInt(r.substring(2),16)),3===i.location&&Pr.hasOwnProperty(r)&&(r=Pr[r]))}return u0[r]||r}(n);return l=l.toLowerCase()," "===l?l="space":"."===l&&(l="dot"),Fu.forEach(c=>{c!=l&&WC[c](n)&&(s+=c+".")}),s+=l,s}static eventCallback(n,s,l){return c=>{i.getEventFullKey(c)===n&&l.runGuarded(()=>s(c))}}static _normalizeKey(n){switch(n){case"esc":return"escape";default:return n}}}return i.\u0275fac=function(n){return new(n||i)(d.LFG(re))},i.\u0275prov=d.Yz7({token:i,factory:i.\u0275fac}),i})();const Lu=(0,d.eFA)(d._c5,"browser",[{provide:d.Lbi,useValue:"browser"},{provide:d.g9A,useValue:function(){bd.makeCurrent(),ku.init()},multi:!0},{provide:re,useFactory:function(){return(0,d.RDi)(document),document},deps:[]}]),Zf=[[],{provide:d.zSh,useValue:"root"},{provide:d.qLn,useFactory:function(){return new d.qLn},deps:[]},{provide:da,useClass:Ou,multi:!0,deps:[re,d.R0b,d.Lbi]},{provide:da,useClass:qC,multi:!0,deps:[re]},[],{provide:So,useClass:So,deps:[Ne,nn,d.AFp]},{provide:d.FYo,useExisting:So},{provide:Bf,useExisting:nn},{provide:nn,useClass:nn,deps:[re]},{provide:d.dDg,useClass:d.dDg,deps:[d.R0b]},{provide:Ne,useClass:Ne,deps:[da,d.R0b]},{provide:class{},useClass:wd,deps:[]},[]];let c0=(()=>{class i{constructor(n){if(n)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(n){return{ngModule:i,providers:[{provide:d.AFp,useValue:n.appId},{provide:Lm,useExisting:d.AFp},Or]}}}return i.\u0275fac=function(n){return new(n||i)(d.LFG(i,12))},i.\u0275mod=d.oAB({type:i}),i.\u0275inj=d.cJS({providers:Zf,imports:[kr,d.hGG]}),i})();"undefined"!=typeof window&&window;var un=B(4402),We=B(5917),qt=B(9765),kd=B(7971);class Ln extends qt.xQ{constructor(r){super(),this._value=r}get value(){return this.getValue()}_subscribe(r){const n=super._subscribe(r);return n&&!n.closed&&r.next(this._value),n}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new kd.N;return this._value}next(r){super.next(this._value=r)}}var pa=B(4869),Mo=B(9796),Cr=B(7393);class Xf extends Cr.L{notifyNext(r,n,s,l,c){this.destination.next(n)}notifyError(r,n){this.destination.error(r)}notifyComplete(r){this.destination.complete()}}class zC extends Cr.L{constructor(r,n,s){super(),this.parent=r,this.outerValue=n,this.outerIndex=s,this.index=0}_next(r){this.parent.notifyNext(this.outerValue,r,this.outerIndex,this.index++,this)}_error(r){this.parent.notifyError(r,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}var Ro=B(7444),An=B(7574);function ep(i,r,n,s,l=new zC(i,n,s)){if(!l.closed)return r instanceof An.y?r.subscribe(l):(0,Ro.s)(r)(l)}var Od=B(6693);const Uu={};class tp{constructor(r){this.resultSelector=r}call(r,n){return n.subscribe(new Pd(r,this.resultSelector))}}class Pd extends Xf{constructor(r,n){super(r),this.resultSelector=n,this.active=0,this.values=[],this.observables=[]}_next(r){this.values.push(Uu),this.observables.push(r)}_complete(){const r=this.observables,n=r.length;if(0===n)this.destination.complete();else{this.active=n,this.toRespond=n;for(let s=0;s<n;s++)this.add(ep(this,r[s],void 0,s))}}notifyComplete(r){0==(this.active-=1)&&this.destination.complete()}notifyNext(r,n,s){const l=this.values,g=this.toRespond?l[s]===Uu?--this.toRespond:this.toRespond:0;l[s]=n,0===g&&(this.resultSelector?this._tryResultSelector(l):this.destination.next(l.slice()))}_tryResultSelector(r){let n;try{n=this.resultSelector.apply(this,r)}catch(s){return void this.destination.error(s)}this.destination.next(n)}}const to=(()=>{function i(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return i.prototype=Object.create(Error.prototype),i})();var Ui=B(3282);function ko(...i){return(0,Ui.J)(1)((0,We.of)(...i))}var ls=B(9193);function Ss(i){return new An.y(r=>{let n;try{n=i()}catch(l){return void r.error(l)}return(n?(0,un.D)(n):(0,ls.c)()).subscribe(r)})}var YC=B(2441),Xe=B(8002),Hi=B(5345);function zn(i,r){return"function"==typeof r?n=>n.pipe(zn((s,l)=>(0,un.D)(i(s,l)).pipe((0,Xe.U)((c,g)=>r(s,c,l,g))))):n=>n.lift(new f0(i))}class f0{constructor(r){this.project=r}call(r,n){return n.subscribe(new hn(r,this.project))}}class hn extends Hi.Ds{constructor(r,n){super(r),this.project=n,this.index=0}_next(r){let n;const s=this.index++;try{n=this.project(r,s)}catch(l){return void this.destination.error(l)}this._innerSub(n)}_innerSub(r){const n=this.innerSubscription;n&&n.unsubscribe();const s=new Hi.IY(this),l=this.destination;l.add(s),this.innerSubscription=(0,Hi.ft)(r,s),this.innerSubscription!==s&&l.add(this.innerSubscription)}_complete(){const{innerSubscription:r}=this;(!r||r.closed)&&super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(r){this.destination.next(r)}}const np=(()=>{function i(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return i.prototype=Object.create(Error.prototype),i})();function Xr(i){return r=>0===i?(0,ls.c)():r.lift(new Zm(i))}class Zm{constructor(r){if(this.total=r,this.total<0)throw new np}call(r,n){return n.subscribe(new KC(r,this.total))}}class KC extends Cr.L{constructor(r,n){super(r),this.total=n,this.count=0}_next(r){const n=this.total,s=++this.count;s<=n&&(this.destination.next(r),s===n&&(this.destination.complete(),this.unsubscribe()))}}function Oo(...i){const r=i[i.length-1];return(0,pa.K)(r)?(i.pop(),n=>ko(i,n,r)):n=>ko(i,n)}function Cl(i,r){let n=!1;return arguments.length>=2&&(n=!0),function(l){return l.lift(new Km(i,r,n))}}class Km{constructor(r,n,s=!1){this.accumulator=r,this.seed=n,this.hasSeed=s}call(r,n){return n.subscribe(new QC(r,this.accumulator,this.seed,this.hasSeed))}}class QC extends Cr.L{constructor(r,n,s,l){super(r),this.accumulator=n,this._seed=s,this.hasSeed=l,this.index=0}get seed(){return this._seed}set seed(r){this.hasSeed=!0,this._seed=r}_next(r){if(this.hasSeed)return this._tryNext(r);this.seed=r,this.destination.next(r)}_tryNext(r){const n=this.index++;let s;try{s=this.accumulator(this.seed,r,n)}catch(l){this.destination.error(l)}this.seed=s,this.destination.next(s)}}function fn(i,r){return function(s){return s.lift(new rp(i,r))}}class rp{constructor(r,n){this.predicate=r,this.thisArg=n}call(r,n){return n.subscribe(new ga(r,this.predicate,this.thisArg))}}class ga extends Cr.L{constructor(r,n,s){super(r),this.predicate=n,this.thisArg=s,this.count=0}_next(r){let n;try{n=this.predicate.call(this.thisArg,r,this.count++)}catch(s){return void this.destination.error(s)}n&&this.destination.next(r)}}function El(i){return function(n){const s=new Mn(i),l=n.lift(s);return s.caught=l}}class Mn{constructor(r){this.selector=r}call(r,n){return n.subscribe(new Po(r,this.selector,this.caught))}}class Po extends Hi.Ds{constructor(r,n,s){super(r),this.selector=n,this.caught=s}error(r){if(!this.isStopped){let n;try{n=this.selector(r,this.caught)}catch(c){return void super.error(c)}this._unsubscribeAndRecycle();const s=new Hi.IY(this);this.add(s);const l=(0,Hi.ft)(n,s);l!==s&&this.add(l)}}}var rn=B(9773);function Dl(i,r){return(0,rn.zg)(i,r,1)}function ip(i){return function(n){return 0===i?(0,ls.c)():n.lift(new ji(i))}}class ji{constructor(r){if(this.total=r,this.total<0)throw new np}call(r,n){return n.subscribe(new As(r,this.total))}}class As extends Cr.L{constructor(r,n){super(r),this.total=n,this.ring=new Array,this.count=0}_next(r){const n=this.ring,s=this.total,l=this.count++;n.length<s?n.push(r):n[l%s]=r}_complete(){const r=this.destination;let n=this.count;if(n>0){const s=this.count>=this.total?this.total:this.count,l=this.ring;for(let c=0;c<s;c++){const g=n++%s;r.next(l[g])}}r.complete()}}function ma(i=Qm){return r=>r.lift(new Fo(i))}class Fo{constructor(r){this.errorFactory=r}call(r,n){return n.subscribe(new Lo(r,this.errorFactory))}}class Lo extends Cr.L{constructor(r,n){super(r),this.errorFactory=n,this.hasValue=!1}_next(r){this.hasValue=!0,this.destination.next(r)}_complete(){if(this.hasValue)return this.destination.complete();{let r;try{r=this.errorFactory()}catch(n){r=n}this.destination.error(r)}}}function Qm(){return new to}function Fd(i=null){return r=>r.lift(new p0(i))}class p0{constructor(r){this.defaultValue=r}call(r,n){return n.subscribe(new Jm(r,this.defaultValue))}}class Jm extends Cr.L{constructor(r,n){super(r),this.defaultValue=n,this.isEmpty=!0}_next(r){this.isEmpty=!1,this.destination.next(r)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}var g0=B(4487);function Rn(i,r){const n=arguments.length>=2;return s=>s.pipe(i?fn((l,c)=>i(l,c,s)):g0.y,Xr(1),n?Fd(r):ma(()=>new to))}var Yn=B(8307),Vo=B(1307),m0=B(5319);class sp{constructor(r){this.callback=r}call(r,n){return n.subscribe(new op(r,this.callback))}}class op extends Cr.L{constructor(r,n){super(r),this.add(new m0.w(n))}}class us{constructor(r,n){this.id=r,this.url=n}}class ap extends us{constructor(r,n,s="imperative",l=null){super(r,n),this.navigationTrigger=s,this.restoredState=l}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class _a extends us{constructor(r,n,s){super(r,n),this.urlAfterRedirects=s}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class ya extends us{constructor(r,n,s){super(r,n),this.reason=s}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class lp extends us{constructor(r,n,s){super(r,n),this.error=s}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Vd extends us{constructor(r,n,s,l){super(r,n),this.urlAfterRedirects=s,this.state=l}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class e_ extends us{constructor(r,n,s,l){super(r,n),this.urlAfterRedirects=s,this.state=l}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Hu extends us{constructor(r,n,s,l,c){super(r,n),this.urlAfterRedirects=s,this.state=l,this.shouldActivate=c}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class up extends us{constructor(r,n,s,l){super(r,n),this.urlAfterRedirects=s,this.state=l}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Bo extends us{constructor(r,n,s,l){super(r,n),this.urlAfterRedirects=s,this.state=l}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class t_{constructor(r){this.route=r}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class n_{constructor(r){this.route=r}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class cp{constructor(r){this.snapshot=r}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class dp{constructor(r){this.snapshot=r}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class r_{constructor(r){this.snapshot=r}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Il{constructor(r){this.snapshot=r}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Uo{constructor(r,n,s){this.routerEvent=r,this.position=n,this.anchor=s}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const _t="primary";class hp{constructor(r){this.params=r||{}}has(r){return Object.prototype.hasOwnProperty.call(this.params,r)}get(r){if(this.has(r)){const n=this.params[r];return Array.isArray(n)?n[0]:n}return null}getAll(r){if(this.has(r)){const n=this.params[r];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}}function sn(i){return new hp(i)}const Bd="ngNavigationCancelingError";function fp(i){const r=Error("NavigationCancelingError: "+i);return r[Bd]=!0,r}function ju(i,r,n){const s=n.path.split("/");if(s.length>i.length||"full"===n.pathMatch&&(r.hasChildren()||s.length<i.length))return null;const l={};for(let c=0;c<s.length;c++){const g=s[c],_=i[c];if(g.startsWith(":"))l[g.substring(1)]=_;else if(g!==_.path)return null}return{consumed:i.slice(0,s.length),posParams:l}}function bi(i,r){const n=i?Object.keys(i):void 0,s=r?Object.keys(r):void 0;if(!n||!s||n.length!=s.length)return!1;let l;for(let c=0;c<n.length;c++)if(l=n[c],!pp(i[l],r[l]))return!1;return!0}function pp(i,r){if(Array.isArray(i)&&Array.isArray(r)){if(i.length!==r.length)return!1;const n=[...i].sort(),s=[...r].sort();return n.every((l,c)=>s[c]===l)}return i===r}function _0(i){return Array.prototype.concat.apply([],i)}function va(i){return i.length>0?i[i.length-1]:null}function Vn(i,r){for(const n in i)i.hasOwnProperty(n)&&r(i[n],n)}function dr(i){return(0,d.CqO)(i)?i:(0,d.QGY)(i)?(0,un.D)(Promise.resolve(i)):(0,We.of)(i)}const o_={exact:function l_(i,r,n){if(!Ca(i.segments,r.segments)||!Ud(i.segments,r.segments,n)||i.numberOfChildren!==r.numberOfChildren)return!1;for(const s in r.children)if(!i.children[s]||!l_(i.children[s],r.children[s],n))return!1;return!0},subset:wa},ba={exact:function(i,r){return bi(i,r)},subset:function(i,r){return Object.keys(r).length<=Object.keys(i).length&&Object.keys(r).every(n=>pp(i[n],r[n]))},ignored:()=>!0};function $u(i,r,n){return o_[n.paths](i.root,r.root,n.matrixParams)&&ba[n.queryParams](i.queryParams,r.queryParams)&&!("exact"===n.fragment&&i.fragment!==r.fragment)}function wa(i,r,n){return Tl(i,r,r.segments,n)}function Tl(i,r,n,s){if(i.segments.length>n.length){const l=i.segments.slice(0,n.length);return!(!Ca(l,n)||r.hasChildren()||!Ud(l,n,s))}if(i.segments.length===n.length){if(!Ca(i.segments,n)||!Ud(i.segments,n,s))return!1;for(const l in r.children)if(!i.children[l]||!wa(i.children[l],r.children[l],s))return!1;return!0}{const l=n.slice(0,i.segments.length),c=n.slice(i.segments.length);return!!(Ca(i.segments,l)&&Ud(i.segments,l,s)&&i.children[_t])&&Tl(i.children[_t],r,c,s)}}function Ud(i,r,n){return r.every((s,l)=>ba[n](i[l].parameters,s.parameters))}class Nl{constructor(r,n,s){this.root=r,this.queryParams=n,this.fragment=s}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=sn(this.queryParams)),this._queryParamMap}toString(){return mp.serialize(this)}}class Et{constructor(r,n){this.segments=r,this.children=n,this.parent=null,Vn(n,(s,l)=>s.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return no(this)}}class Gu{constructor(r,n){this.path=r,this.parameters=n}get parameterMap(){return this._parameterMap||(this._parameterMap=sn(this.parameters)),this._parameterMap}toString(){return _p(this)}}function Ca(i,r){return i.length===r.length&&i.every((n,s)=>n.path===r[s].path)}class gp{}class Sl{parse(r){const n=new jo(r);return new Nl(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(r){var i;return`${`/${Wu(r.root,!0)}`}${function(i){const r=Object.keys(i).map(n=>{const s=i[n];return Array.isArray(s)?s.map(l=>`${qu(n)}=${qu(l)}`).join("&"):`${qu(n)}=${qu(s)}`}).filter(n=>!!n);return r.length?`?${r.join("&")}`:""}(r.queryParams)}${"string"==typeof r.fragment?`#${i=r.fragment,encodeURI(i)}`:""}`}}const mp=new Sl;function no(i){return i.segments.map(r=>_p(r)).join("/")}function Wu(i,r){if(!i.hasChildren())return no(i);if(r){const n=i.children[_t]?Wu(i.children[_t],!1):"",s=[];return Vn(i.children,(l,c)=>{c!==_t&&s.push(`${c}:${Wu(l,!1)}`)}),s.length>0?`${n}(${s.join("//")})`:n}{const n=function(i,r){let n=[];return Vn(i.children,(s,l)=>{l===_t&&(n=n.concat(r(s,l)))}),Vn(i.children,(s,l)=>{l!==_t&&(n=n.concat(r(s,l)))}),n}(i,(s,l)=>l===_t?[Wu(i.children[_t],!1)]:[`${l}:${Wu(s,!1)}`]);return 1===Object.keys(i.children).length&&null!=i.children[_t]?`${no(i)}/${n[0]}`:`${no(i)}/(${n.join("//")})`}}function u_(i){return encodeURIComponent(i).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function qu(i){return u_(i).replace(/%3B/gi,";")}function Ea(i){return u_(i).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function zu(i){return decodeURIComponent(i)}function jd(i){return zu(i.replace(/\+/g,"%20"))}function _p(i){return`${Ea(i.path)}${function(i){return Object.keys(i).map(r=>`;${Ea(r)}=${Ea(i[r])}`).join("")}(i.parameters)}`}const w0=/^[^\/()?;=#]+/;function $d(i){const r=i.match(w0);return r?r[0]:""}const C0=/^[^=?&#]+/,io=/^[^?&#]+/;class jo{constructor(r){this.url=r,this.remaining=r}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Et([],{}):new Et([],this.parseChildren())}parseQueryParams(){const r={};if(this.consumeOptional("?"))do{this.parseQueryParam(r)}while(this.consumeOptional("&"));return r}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const r=[];for(this.peekStartsWith("(")||r.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),r.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let s={};return this.peekStartsWith("(")&&(s=this.parseParens(!1)),(r.length>0||Object.keys(n).length>0)&&(s[_t]=new Et(r,n)),s}parseSegment(){const r=$d(this.remaining);if(""===r&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(r),new Gu(zu(r),this.parseMatrixParams())}parseMatrixParams(){const r={};for(;this.consumeOptional(";");)this.parseParam(r);return r}parseParam(r){const n=$d(this.remaining);if(!n)return;this.capture(n);let s="";if(this.consumeOptional("=")){const l=$d(this.remaining);l&&(s=l,this.capture(s))}r[zu(n)]=zu(s)}parseQueryParam(r){const n=function(i){const r=i.match(C0);return r?r[0]:""}(this.remaining);if(!n)return;this.capture(n);let s="";if(this.consumeOptional("=")){const g=function(i){const r=i.match(io);return r?r[0]:""}(this.remaining);g&&(s=g,this.capture(s))}const l=jd(n),c=jd(s);if(r.hasOwnProperty(l)){let g=r[l];Array.isArray(g)||(g=[g],r[l]=g),g.push(c)}else r[l]=c}parseParens(r){const n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const s=$d(this.remaining),l=this.remaining[s.length];if("/"!==l&&")"!==l&&";"!==l)throw new Error(`Cannot parse url '${this.url}'`);let c;s.indexOf(":")>-1?(c=s.substr(0,s.indexOf(":")),this.capture(c),this.capture(":")):r&&(c=_t);const g=this.parseChildren();n[c]=1===Object.keys(g).length?g[_t]:new Et([],g),this.consumeOptional("//")}return n}peekStartsWith(r){return this.remaining.startsWith(r)}consumeOptional(r){return!!this.peekStartsWith(r)&&(this.remaining=this.remaining.substring(r.length),!0)}capture(r){if(!this.consumeOptional(r))throw new Error(`Expected "${r}".`)}}class c_{constructor(r){this._root=r}get root(){return this._root.value}parent(r){const n=this.pathFromRoot(r);return n.length>1?n[n.length-2]:null}children(r){const n=yp(r,this._root);return n?n.children.map(s=>s.value):[]}firstChild(r){const n=yp(r,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(r){const n=Zu(r,this._root);return n.length<2?[]:n[n.length-2].children.map(l=>l.value).filter(l=>l!==r)}pathFromRoot(r){return Zu(r,this._root).map(n=>n.value)}}function yp(i,r){if(i===r.value)return r;for(const n of r.children){const s=yp(i,n);if(s)return s}return null}function Zu(i,r){if(i===r.value)return[r];for(const n of r.children){const s=Zu(i,n);if(s.length)return s.unshift(r),s}return[]}class so{constructor(r,n){this.value=r,this.children=n}toString(){return`TreeNode(${this.value})`}}function Da(i){const r={};return i&&i.children.forEach(n=>r[n.value.outlet]=n),r}class vp extends c_{constructor(r,n){super(r),this.snapshot=n,Wd(this,r)}toString(){return this.snapshot.toString()}}function d_(i,r){const n=function(i,r){const g=new Gd([],{},{},"",{},_t,r,null,i.root,-1,{});return new Ml("",new so(g,[]))}(i,r),s=new Ln([new Gu("",{})]),l=new Ln({}),c=new Ln({}),g=new Ln({}),_=new Ln(""),w=new Al(s,l,g,_,c,_t,r,n.root);return w.snapshot=n.root,new vp(new so(w,[]),n)}class Al{constructor(r,n,s,l,c,g,_,w){this.url=r,this.params=n,this.queryParams=s,this.fragment=l,this.data=c,this.outlet=g,this.component=_,this._futureSnapshot=w}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Xe.U)(r=>sn(r)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Xe.U)(r=>sn(r)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function h_(i,r="emptyOnly"){const n=i.pathFromRoot;let s=0;if("always"!==r)for(s=n.length-1;s>=1;){const l=n[s],c=n[s-1];if(l.routeConfig&&""===l.routeConfig.path)s--;else{if(c.component)break;s--}}return function(i){return i.reduce((r,n)=>({params:Object.assign(Object.assign({},r.params),n.params),data:Object.assign(Object.assign({},r.data),n.data),resolve:Object.assign(Object.assign({},r.resolve),n._resolvedData)}),{params:{},data:{},resolve:{}})}(n.slice(s))}class Gd{constructor(r,n,s,l,c,g,_,w,T,S,A){this.url=r,this.params=n,this.queryParams=s,this.fragment=l,this.data=c,this.outlet=g,this.component=_,this.routeConfig=w,this._urlSegment=T,this._lastPathIndex=S,this._resolve=A}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=sn(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=sn(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(s=>s.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Ml extends c_{constructor(r,n){super(n),this.url=r,Wd(this,n)}toString(){return cs(this._root)}}function Wd(i,r){r.value._routerState=i,r.children.forEach(n=>Wd(i,n))}function cs(i){const r=i.children.length>0?` { ${i.children.map(cs).join(", ")} } `:"";return`${i.value}${r}`}function Ia(i){if(i.snapshot){const r=i.snapshot,n=i._futureSnapshot;i.snapshot=n,bi(r.queryParams,n.queryParams)||i.queryParams.next(n.queryParams),r.fragment!==n.fragment&&i.fragment.next(n.fragment),bi(r.params,n.params)||i.params.next(n.params),function(i,r){if(i.length!==r.length)return!1;for(let n=0;n<i.length;++n)if(!bi(i[n],r[n]))return!1;return!0}(r.url,n.url)||i.url.next(n.url),bi(r.data,n.data)||i.data.next(n.data)}else i.snapshot=i._futureSnapshot,i.data.next(i._futureSnapshot.data)}function Ku(i,r){return bi(i.params,r.params)&&function(i,r){return Ca(i,r)&&i.every((n,s)=>bi(n.parameters,r[s].parameters))}(i.url,r.url)&&!(!i.parent!=!r.parent)&&(!i.parent||Ku(i.parent,r.parent))}function Qu(i,r,n){if(n&&i.shouldReuseRoute(r.value,n.value.snapshot)){const s=n.value;s._futureSnapshot=r.value;const l=function(i,r,n){return r.children.map(s=>{for(const l of n.children)if(i.shouldReuseRoute(s.value,l.value.snapshot))return Qu(i,s,l);return Qu(i,s)})}(i,r,n);return new so(s,l)}{if(i.shouldAttach(r.value)){const c=i.retrieve(r.value);if(null!==c){const g=c.route;return D0(r,g),g}}const s=function(i){return new Al(new Ln(i.url),new Ln(i.params),new Ln(i.queryParams),new Ln(i.fragment),new Ln(i.data),i.outlet,i.component,i)}(r.value),l=r.children.map(c=>Qu(i,c));return new so(s,l)}}function D0(i,r){if(i.value.routeConfig!==r.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(i.children.length!==r.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");r.value._futureSnapshot=i.value;for(let n=0;n<i.children.length;++n)D0(i.children[n],r.children[n])}function Rl(i){return"object"==typeof i&&null!=i&&!i.outlets&&!i.segmentPath}function Rs(i){return"object"==typeof i&&null!=i&&i.outlets}function m_(i,r,n,s,l){let c={};return s&&Vn(s,(g,_)=>{c[_]=Array.isArray(g)?g.map(w=>`${w}`):`${g}`}),new Nl(n.root===i?r:I0(n.root,i,r),c,l)}function I0(i,r,n){const s={};return Vn(i.children,(l,c)=>{s[c]=l===r?n:I0(l,r,n)}),new Et(i.segments,s)}class Cp{constructor(r,n,s){if(this.isAbsolute=r,this.numberOfDoubleDots=n,this.commands=s,r&&s.length>0&&Rl(s[0]))throw new Error("Root segment cannot have matrix parameters");const l=s.find(Rs);if(l&&l!==va(s))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Ep{constructor(r,n,s){this.segmentGroup=r,this.processChildren=n,this.index=s}}function $o(i,r,n){if(i||(i=new Et([],{})),0===i.segments.length&&i.hasChildren())return Ju(i,r,n);const s=function(i,r,n){let s=0,l=r;const c={match:!1,pathIndex:0,commandIndex:0};for(;l<i.segments.length;){if(s>=n.length)return c;const g=i.segments[l],_=n[s];if(Rs(_))break;const w=`${_}`,T=s<n.length-1?n[s+1]:null;if(l>0&&void 0===w)break;if(w&&T&&"object"==typeof T&&void 0===T.outlets){if(!b_(w,T,g))return c;s+=2}else{if(!b_(w,{},g))return c;s++}l++}return{match:!0,pathIndex:l,commandIndex:s}}(i,r,n),l=n.slice(s.commandIndex);if(s.match&&s.pathIndex<i.segments.length){const c=new Et(i.segments.slice(0,s.pathIndex),{});return c.children[_t]=new Et(i.segments.slice(s.pathIndex),i.children),Ju(c,0,l)}return s.match&&0===l.length?new Et(i.segments,{}):s.match&&!i.hasChildren()?Dp(i,r,n):s.match?Ju(i,0,l):Dp(i,r,n)}function Ju(i,r,n){if(0===n.length)return new Et(i.segments,{});{const s=function(i){return Rs(i[0])?i[0].outlets:{[_t]:i}}(n),l={};return Vn(s,(c,g)=>{"string"==typeof c&&(c=[c]),null!==c&&(l[g]=$o(i.children[g],r,c))}),Vn(i.children,(c,g)=>{void 0===s[g]&&(l[g]=c)}),new Et(i.segments,l)}}function Dp(i,r,n){const s=i.segments.slice(0,r);let l=0;for(;l<n.length;){const c=n[l];if(Rs(c)){const w=En(c.outlets);return new Et(s,w)}if(0===l&&Rl(n[0])){s.push(new Gu(i.segments[r].path,v_(n[0]))),l++;continue}const g=Rs(c)?c.outlets[_t]:`${c}`,_=l<n.length-1?n[l+1]:null;g&&_&&Rl(_)?(s.push(new Gu(g,v_(_))),l+=2):(s.push(new Gu(g,{})),l++)}return new Et(s,{})}function En(i){const r={};return Vn(i,(n,s)=>{"string"==typeof n&&(n=[n]),null!==n&&(r[s]=Dp(new Et([],{}),0,n))}),r}function v_(i){const r={};return Vn(i,(n,s)=>r[s]=`${n}`),r}function b_(i,r,n){return i==n.path&&bi(r,n.parameters)}class Zd{constructor(r,n,s,l){this.routeReuseStrategy=r,this.futureState=n,this.currState=s,this.forwardEvent=l}activate(r){const n=this.futureState._root,s=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,s,r),Ia(this.futureState.root),this.activateChildRoutes(n,s,r)}deactivateChildRoutes(r,n,s){const l=Da(n);r.children.forEach(c=>{const g=c.value.outlet;this.deactivateRoutes(c,l[g],s),delete l[g]}),Vn(l,(c,g)=>{this.deactivateRouteAndItsChildren(c,s)})}deactivateRoutes(r,n,s){const l=r.value,c=n?n.value:null;if(l===c)if(l.component){const g=s.getContext(l.outlet);g&&this.deactivateChildRoutes(r,n,g.children)}else this.deactivateChildRoutes(r,n,s);else c&&this.deactivateRouteAndItsChildren(n,s)}deactivateRouteAndItsChildren(r,n){this.routeReuseStrategy.shouldDetach(r.value.snapshot)?this.detachAndStoreRouteSubtree(r,n):this.deactivateRouteAndOutlet(r,n)}detachAndStoreRouteSubtree(r,n){const s=n.getContext(r.value.outlet);if(s&&s.outlet){const l=s.outlet.detach(),c=s.children.onOutletDeactivated();this.routeReuseStrategy.store(r.value.snapshot,{componentRef:l,route:r,contexts:c})}}deactivateRouteAndOutlet(r,n){const s=n.getContext(r.value.outlet),l=s&&r.value.component?s.children:n,c=Da(r);for(const g of Object.keys(c))this.deactivateRouteAndItsChildren(c[g],l);s&&s.outlet&&(s.outlet.deactivate(),s.children.onOutletDeactivated(),s.attachRef=null,s.resolver=null,s.route=null)}activateChildRoutes(r,n,s){const l=Da(n);r.children.forEach(c=>{this.activateRoutes(c,l[c.value.outlet],s),this.forwardEvent(new Il(c.value.snapshot))}),r.children.length&&this.forwardEvent(new dp(r.value.snapshot))}activateRoutes(r,n,s){const l=r.value,c=n?n.value:null;if(Ia(l),l===c)if(l.component){const g=s.getOrCreateContext(l.outlet);this.activateChildRoutes(r,n,g.children)}else this.activateChildRoutes(r,n,s);else if(l.component){const g=s.getOrCreateContext(l.outlet);if(this.routeReuseStrategy.shouldAttach(l.snapshot)){const _=this.routeReuseStrategy.retrieve(l.snapshot);this.routeReuseStrategy.store(l.snapshot,null),g.children.onOutletReAttached(_.contexts),g.attachRef=_.componentRef,g.route=_.route.value,g.outlet&&g.outlet.attach(_.componentRef,_.route.value),Kd(_.route)}else{const _=function(i){for(let r=i.parent;r;r=r.parent){const n=r.routeConfig;if(n&&n._loadedConfig)return n._loadedConfig;if(n&&n.component)return null}return null}(l.snapshot),w=_?_.module.componentFactoryResolver:null;g.attachRef=null,g.route=l,g.resolver=w,g.outlet&&g.outlet.activateWith(l,w),this.activateChildRoutes(r,null,g.children)}}else this.activateChildRoutes(r,null,s)}}function Kd(i){Ia(i.value),i.children.forEach(Kd)}class Ip{constructor(r,n){this.routes=r,this.module=n}}function xs(i){return"function"==typeof i}function ks(i){return i instanceof Nl}const xl=Symbol("INITIAL_VALUE");function Ta(){return zn(i=>function(...i){let r,n;return(0,pa.K)(i[i.length-1])&&(n=i.pop()),"function"==typeof i[i.length-1]&&(r=i.pop()),1===i.length&&(0,Mo.k)(i[0])&&(i=i[0]),(0,Od.n)(i,n).lift(new tp(r))}(i.map(r=>r.pipe(Xr(1),Oo(xl)))).pipe(Cl((r,n)=>{let s=!1;return n.reduce((l,c,g)=>l!==xl?l:(c===xl&&(s=!0),s||!1!==c&&g!==n.length-1&&!ks(c)?l:c),r)},xl),fn(r=>r!==xl),(0,Xe.U)(r=>ks(r)?r:!0===r),Xr(1)))}let fr=(()=>{class i{}return i.\u0275fac=function(n){return new(n||i)},i.\u0275cmp=d.Xpm({type:i,selectors:[["ng-component"]],decls:1,vars:0,template:function(n,s){1&n&&d._UZ(0,"router-outlet")},directives:function(){return[Rp]},encapsulation:2}),i})();function Ci(i,r=""){for(let n=0;n<i.length;n++){const s=i[n];Qd(s,A0(r,s))}}function Qd(i,r){i.children&&Ci(i.children,r)}function A0(i,r){return r?i||r.path?i&&!r.path?`${i}/`:!i&&r.path?r.path:`${i}/${r.path}`:"":i}function Tp(i){const r=i.children&&i.children.map(Tp),n=r?Object.assign(Object.assign({},i),{children:r}):Object.assign({},i);return!n.component&&(r||n.loadChildren)&&n.outlet&&n.outlet!==_t&&(n.component=fr),n}function Ei(i){return i.outlet||_t}function Np(i,r){const n=i.filter(s=>Ei(s)===r);return n.push(...i.filter(s=>Ei(s)!==r)),n}const Er={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function kl(i,r,n){var s;if(""===r.path)return"full"===r.pathMatch&&(i.hasChildren()||n.length>0)?Object.assign({},Er):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const c=(r.matcher||ju)(n,i,r);if(!c)return Object.assign({},Er);const g={};Vn(c.posParams,(w,T)=>{g[T]=w.path});const _=c.consumed.length>0?Object.assign(Object.assign({},g),c.consumed[c.consumed.length-1].parameters):g;return{matched:!0,consumedSegments:c.consumed,lastChild:c.consumed.length,parameters:_,positionalParamSegments:null!==(s=c.posParams)&&void 0!==s?s:{}}}function Na(i,r,n,s,l="corrected"){if(n.length>0&&function(i,r,n){return n.some(s=>Sa(i,r,s)&&Ei(s)!==_t)}(i,n,s)){const g=new Et(r,function(i,r,n,s){const l={};l[_t]=s,s._sourceSegment=i,s._segmentIndexShift=r.length;for(const c of n)if(""===c.path&&Ei(c)!==_t){const g=new Et([],{});g._sourceSegment=i,g._segmentIndexShift=r.length,l[Ei(c)]=g}return l}(i,r,s,new Et(n,i.children)));return g._sourceSegment=i,g._segmentIndexShift=r.length,{segmentGroup:g,slicedSegments:[]}}if(0===n.length&&function(i,r,n){return n.some(s=>Sa(i,r,s))}(i,n,s)){const g=new Et(i.segments,function(i,r,n,s,l,c){const g={};for(const _ of s)if(Sa(i,n,_)&&!l[Ei(_)]){const w=new Et([],{});w._sourceSegment=i,w._segmentIndexShift="legacy"===c?i.segments.length:r.length,g[Ei(_)]=w}return Object.assign(Object.assign({},l),g)}(i,r,n,s,i.children,l));return g._sourceSegment=i,g._segmentIndexShift=r.length,{segmentGroup:g,slicedSegments:n}}const c=new Et(i.segments,i.children);return c._sourceSegment=i,c._segmentIndexShift=r.length,{segmentGroup:c,slicedSegments:n}}function Sa(i,r,n){return(!(i.hasChildren()||r.length>0)||"full"!==n.pathMatch)&&""===n.path}function Jd(i,r,n,s){return!!(Ei(i)===s||s!==_t&&Sa(r,n,i))&&("**"===i.path||kl(r,i,n).matched)}function Xd(i,r,n){return 0===r.length&&!i.children[n]}class eh{constructor(r){this.segmentGroup=r||null}}class Ap{constructor(r){this.urlTree=r}}function Aa(i){return new An.y(r=>r.error(new eh(i)))}function C_(i){return new An.y(r=>r.error(new Ap(i)))}function E(i){return new An.y(r=>r.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${i}'`)))}class D{constructor(r,n,s,l,c){this.configLoader=n,this.urlSerializer=s,this.urlTree=l,this.config=c,this.allowRedirects=!0,this.ngModule=r.get(d.h0i)}apply(){const r=Na(this.urlTree.root,[],[],this.config).segmentGroup,n=new Et(r.segments,r.children);return this.expandSegmentGroup(this.ngModule,this.config,n,_t).pipe((0,Xe.U)(c=>this.createUrlTree(O(c),this.urlTree.queryParams,this.urlTree.fragment))).pipe(El(c=>{if(c instanceof Ap)return this.allowRedirects=!1,this.match(c.urlTree);throw c instanceof eh?this.noMatchError(c):c}))}match(r){return this.expandSegmentGroup(this.ngModule,this.config,r.root,_t).pipe((0,Xe.U)(l=>this.createUrlTree(O(l),r.queryParams,r.fragment))).pipe(El(l=>{throw l instanceof eh?this.noMatchError(l):l}))}noMatchError(r){return new Error(`Cannot match any routes. URL Segment: '${r.segmentGroup}'`)}createUrlTree(r,n,s){const l=r.segments.length>0?new Et([],{[_t]:r}):r;return new Nl(l,n,s)}expandSegmentGroup(r,n,s,l){return 0===s.segments.length&&s.hasChildren()?this.expandChildren(r,n,s).pipe((0,Xe.U)(c=>new Et([],c))):this.expandSegment(r,s,n,s.segments,l,!0)}expandChildren(r,n,s){const l=[];for(const c of Object.keys(s.children))"primary"===c?l.unshift(c):l.push(c);return(0,un.D)(l).pipe(Dl(c=>{const g=s.children[c],_=Np(n,c);return this.expandSegmentGroup(r,_,g,c).pipe((0,Xe.U)(w=>({segment:w,outlet:c})))}),Cl((c,g)=>(c[g.outlet]=g.segment,c),{}),function(i,r){const n=arguments.length>=2;return s=>s.pipe(i?fn((l,c)=>i(l,c,s)):g0.y,ip(1),n?Fd(r):ma(()=>new to))}())}expandSegment(r,n,s,l,c,g){return(0,un.D)(s).pipe(Dl(_=>this.expandSegmentAgainstRoute(r,n,s,_,l,c,g).pipe(El(T=>{if(T instanceof eh)return(0,We.of)(null);throw T}))),Rn(_=>!!_),El((_,w)=>{if(_ instanceof to||"EmptyError"===_.name){if(Xd(n,l,c))return(0,We.of)(new Et([],{}));throw new eh(n)}throw _}))}expandSegmentAgainstRoute(r,n,s,l,c,g,_){return Jd(l,n,c,g)?void 0===l.redirectTo?this.matchSegmentAgainstRoute(r,n,l,c,g):_&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(r,n,s,l,c,g):Aa(n):Aa(n)}expandSegmentAgainstRouteUsingRedirect(r,n,s,l,c,g){return"**"===l.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(r,s,l,g):this.expandRegularSegmentAgainstRouteUsingRedirect(r,n,s,l,c,g)}expandWildCardWithParamsAgainstRouteUsingRedirect(r,n,s,l){const c=this.applyRedirectCommands([],s.redirectTo,{});return s.redirectTo.startsWith("/")?C_(c):this.lineralizeSegments(s,c).pipe((0,rn.zg)(g=>{const _=new Et(g,{});return this.expandSegment(r,_,n,g,l,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(r,n,s,l,c,g){const{matched:_,consumedSegments:w,lastChild:T,positionalParamSegments:S}=kl(n,l,c);if(!_)return Aa(n);const A=this.applyRedirectCommands(w,l.redirectTo,S);return l.redirectTo.startsWith("/")?C_(A):this.lineralizeSegments(l,A).pipe((0,rn.zg)(x=>this.expandSegment(r,n,s,x.concat(c.slice(T)),g,!1)))}matchSegmentAgainstRoute(r,n,s,l,c){if("**"===s.path)return s.loadChildren?(s._loadedConfig?(0,We.of)(s._loadedConfig):this.configLoader.load(r.injector,s)).pipe((0,Xe.U)(x=>(s._loadedConfig=x,new Et(l,{})))):(0,We.of)(new Et(l,{}));const{matched:g,consumedSegments:_,lastChild:w}=kl(n,s,l);if(!g)return Aa(n);const T=l.slice(w);return this.getChildConfig(r,s,l).pipe((0,rn.zg)(A=>{const x=A.module,V=A.routes,{segmentGroup:z,slicedSegments:ue}=Na(n,_,T,V),Ae=new Et(z.segments,z.children);if(0===ue.length&&Ae.hasChildren())return this.expandChildren(x,V,Ae).pipe((0,Xe.U)(Gt=>new Et(_,Gt)));if(0===V.length&&0===ue.length)return(0,We.of)(new Et(_,{}));const Qe=Ei(s)===c;return this.expandSegment(x,Ae,V,ue,Qe?_t:c,!0).pipe((0,Xe.U)(yt=>new Et(_.concat(yt.segments),yt.children)))}))}getChildConfig(r,n,s){return n.children?(0,We.of)(new Ip(n.children,r)):n.loadChildren?void 0!==n._loadedConfig?(0,We.of)(n._loadedConfig):this.runCanLoadGuards(r.injector,n,s).pipe((0,rn.zg)(l=>{return l?this.configLoader.load(r.injector,n).pipe((0,Xe.U)(c=>(n._loadedConfig=c,c))):(i=n,new An.y(r=>r.error(fp(`Cannot load children because the guard of the route "path: '${i.path}'" returned false`))));var i})):(0,We.of)(new Ip([],r))}runCanLoadGuards(r,n,s){const l=n.canLoad;if(!l||0===l.length)return(0,We.of)(!0);const c=l.map(g=>{const _=r.get(g);let w;if((i=_)&&xs(i.canLoad))w=_.canLoad(n,s);else{if(!xs(_))throw new Error("Invalid CanLoad guard");w=_(n,s)}var i;return dr(w)});return(0,We.of)(c).pipe(Ta(),(0,Yn.b)(g=>{if(!ks(g))return;const _=fp(`Redirecting to "${this.urlSerializer.serialize(g)}"`);throw _.url=g,_}),(0,Xe.U)(g=>!0===g))}lineralizeSegments(r,n){let s=[],l=n.root;for(;;){if(s=s.concat(l.segments),0===l.numberOfChildren)return(0,We.of)(s);if(l.numberOfChildren>1||!l.children[_t])return E(r.redirectTo);l=l.children[_t]}}applyRedirectCommands(r,n,s){return this.applyRedirectCreatreUrlTree(n,this.urlSerializer.parse(n),r,s)}applyRedirectCreatreUrlTree(r,n,s,l){const c=this.createSegmentGroup(r,n.root,s,l);return new Nl(c,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(r,n){const s={};return Vn(r,(l,c)=>{if("string"==typeof l&&l.startsWith(":")){const _=l.substring(1);s[c]=n[_]}else s[c]=l}),s}createSegmentGroup(r,n,s,l){const c=this.createSegments(r,n.segments,s,l);let g={};return Vn(n.children,(_,w)=>{g[w]=this.createSegmentGroup(r,_,s,l)}),new Et(c,g)}createSegments(r,n,s,l){return n.map(c=>c.path.startsWith(":")?this.findPosParam(r,c,l):this.findOrReturn(c,s))}findPosParam(r,n,s){const l=s[n.path.substring(1)];if(!l)throw new Error(`Cannot redirect to '${r}'. Cannot find '${n.path}'.`);return l}findOrReturn(r,n){let s=0;for(const l of n){if(l.path===r.path)return n.splice(s),l;s++}return r}}function O(i){const r={};for(const s of Object.keys(i.children)){const c=O(i.children[s]);(c.segments.length>0||c.hasChildren())&&(r[s]=c)}return function(i){if(1===i.numberOfChildren&&i.children[_t]){const r=i.children[_t];return new Et(i.segments.concat(r.segments),r.children)}return i}(new Et(i.segments,r))}class ge{constructor(r){this.path=r,this.route=this.path[this.path.length-1]}}class xe{constructor(r,n){this.component=r,this.route=n}}function je(i,r,n){const s=i._root;return ei(s,r?r._root:null,n,[s.value])}function et(i,r,n){const s=function(i){if(!i)return null;for(let r=i.parent;r;r=r.parent){const n=r.routeConfig;if(n&&n._loadedConfig)return n._loadedConfig}return null}(r);return(s?s.module.injector:n).get(i)}function ei(i,r,n,s,l={canDeactivateChecks:[],canActivateChecks:[]}){const c=Da(r);return i.children.forEach(g=>{(function(i,r,n,s,l={canDeactivateChecks:[],canActivateChecks:[]}){const c=i.value,g=r?r.value:null,_=n?n.getContext(i.value.outlet):null;if(g&&c.routeConfig===g.routeConfig){const w=function(i,r,n){if("function"==typeof n)return n(i,r);switch(n){case"pathParamsChange":return!Ca(i.url,r.url);case"pathParamsOrQueryParamsChange":return!Ca(i.url,r.url)||!bi(i.queryParams,r.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Ku(i,r)||!bi(i.queryParams,r.queryParams);case"paramsChange":default:return!Ku(i,r)}}(g,c,c.routeConfig.runGuardsAndResolvers);w?l.canActivateChecks.push(new ge(s)):(c.data=g.data,c._resolvedData=g._resolvedData),ei(i,r,c.component?_?_.children:null:n,s,l),w&&_&&_.outlet&&_.outlet.isActivated&&l.canDeactivateChecks.push(new xe(_.outlet.component,g))}else g&&Ma(r,_,l),l.canActivateChecks.push(new ge(s)),ei(i,null,c.component?_?_.children:null:n,s,l)})(g,c[g.value.outlet],n,s.concat([g.value]),l),delete c[g.value.outlet]}),Vn(c,(g,_)=>Ma(g,n.getContext(_),l)),l}function Ma(i,r,n){const s=Da(i),l=i.value;Vn(s,(c,g)=>{Ma(c,l.component?r?r.children.getContext(g):null:r,n)}),n.canDeactivateChecks.push(new xe(l.component&&r&&r.outlet&&r.outlet.isActivated?r.outlet.component:null,l))}class nc{}function nh(i){return new An.y(r=>r.error(i))}class XC{constructor(r,n,s,l,c,g){this.rootComponentType=r,this.config=n,this.urlTree=s,this.url=l,this.paramsInheritanceStrategy=c,this.relativeLinkResolution=g}recognize(){const r=Na(this.urlTree.root,[],[],this.config.filter(g=>void 0===g.redirectTo),this.relativeLinkResolution).segmentGroup,n=this.processSegmentGroup(this.config,r,_t);if(null===n)return null;const s=new Gd([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},_t,this.rootComponentType,null,this.urlTree.root,-1,{}),l=new so(s,n),c=new Ml(this.url,l);return this.inheritParamsAndData(c._root),c}inheritParamsAndData(r){const n=r.value,s=h_(n,this.paramsInheritanceStrategy);n.params=Object.freeze(s.params),n.data=Object.freeze(s.data),r.children.forEach(l=>this.inheritParamsAndData(l))}processSegmentGroup(r,n,s){return 0===n.segments.length&&n.hasChildren()?this.processChildren(r,n):this.processSegment(r,n,n.segments,s)}processChildren(r,n){const s=[];for(const c of Object.keys(n.children)){const g=n.children[c],_=Np(r,c),w=this.processSegmentGroup(_,g,c);if(null===w)return null;s.push(...w)}const l=I_(s);return l.sort((r,n)=>r.value.outlet===_t?-1:n.value.outlet===_t?1:r.value.outlet.localeCompare(n.value.outlet)),l}processSegment(r,n,s,l){for(const c of r){const g=this.processSegmentAgainstRoute(c,n,s,l);if(null!==g)return g}return Xd(n,s,l)?[]:null}processSegmentAgainstRoute(r,n,s,l){if(r.redirectTo||!Jd(r,n,s,l))return null;let c,g=[],_=[];if("**"===r.path){const V=s.length>0?va(s).parameters:{};c=new Gd(s,V,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,rc(r),Ei(r),r.component,r,O0(n),bS(n)+s.length,T_(r))}else{const V=kl(n,r,s);if(!V.matched)return null;g=V.consumedSegments,_=s.slice(V.lastChild),c=new Gd(g,V.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,rc(r),Ei(r),r.component,r,O0(n),bS(n)+g.length,T_(r))}const w=(i=r).children?i.children:i.loadChildren?i._loadedConfig.routes:[],{segmentGroup:T,slicedSegments:S}=Na(n,g,_,w.filter(V=>void 0===V.redirectTo),this.relativeLinkResolution);var i;if(0===S.length&&T.hasChildren()){const V=this.processChildren(w,T);return null===V?null:[new so(c,V)]}if(0===w.length&&0===S.length)return[new so(c,[])];const A=Ei(r)===l,x=this.processSegment(w,T,S,A?_t:l);return null===x?null:[new so(c,x)]}}function tE(i){const r=i.value.routeConfig;return r&&""===r.path&&void 0===r.redirectTo}function I_(i){const r=[],n=new Set;for(const s of i){if(!tE(s)){r.push(s);continue}const l=r.find(c=>s.value.routeConfig===c.value.routeConfig);void 0!==l?(l.children.push(...s.children),n.add(l)):r.push(s)}for(const s of n){const l=I_(s.children);r.push(new so(s.value,l))}return r.filter(s=>!n.has(s))}function O0(i){let r=i;for(;r._sourceSegment;)r=r._sourceSegment;return r}function bS(i){let r=i,n=r._segmentIndexShift?r._segmentIndexShift:0;for(;r._sourceSegment;)r=r._sourceSegment,n+=r._segmentIndexShift?r._segmentIndexShift:0;return n-1}function rc(i){return i.data||{}}function T_(i){return i.resolve||{}}function F0(i){return zn(r=>{const n=i(r);return n?(0,un.D)(n).pipe((0,Xe.U)(()=>r)):(0,We.of)(r)})}class TS extends class{shouldDetach(r){return!1}store(r,n){}shouldAttach(r){return!1}retrieve(r){return null}shouldReuseRoute(r,n){return r.routeConfig===n.routeConfig}}{}const N_=new d.OlP("ROUTES");class S_{constructor(r,n,s,l){this.loader=r,this.compiler=n,this.onLoadStartListener=s,this.onLoadEndListener=l}load(r,n){if(n._loader$)return n._loader$;this.onLoadStartListener&&this.onLoadStartListener(n);const l=this.loadModuleFactory(n.loadChildren).pipe((0,Xe.U)(c=>{this.onLoadEndListener&&this.onLoadEndListener(n);const g=c.create(r);return new Ip(_0(g.injector.get(N_,void 0,d.XFs.Self|d.XFs.Optional)).map(Tp),g)}),El(c=>{throw n._loader$=void 0,c}));return n._loader$=new YC.c(l,()=>new qt.xQ).pipe((0,Vo.x)()),n._loader$}loadModuleFactory(r){return"string"==typeof r?(0,un.D)(this.loader.load(r)):dr(r()).pipe((0,rn.zg)(n=>n instanceof d.YKP?(0,We.of)(n):(0,un.D)(this.compiler.compileModuleAsync(n))))}}class iE{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Pl,this.attachRef=null}}class Pl{constructor(){this.contexts=new Map}onChildOutletCreated(r,n){const s=this.getOrCreateContext(r);s.outlet=n,this.contexts.set(r,s)}onChildOutletDestroyed(r){const n=this.getContext(r);n&&(n.outlet=null)}onOutletDeactivated(){const r=this.contexts;return this.contexts=new Map,r}onOutletReAttached(r){this.contexts=r}getOrCreateContext(r){let n=this.getContext(r);return n||(n=new iE,this.contexts.set(r,n)),n}getContext(r){return this.contexts.get(r)||null}}class SS{shouldProcessUrl(r){return!0}extract(r){return r}merge(r,n){return r}}function sE(i){throw i}function oE(i,r,n){return r.parse("/")}function Fl(i,r){return(0,We.of)(null)}const aE={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},lE={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Gi=(()=>{class i{constructor(n,s,l,c,g,_,w,T){this.rootComponentType=n,this.urlSerializer=s,this.rootContexts=l,this.location=c,this.config=T,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.lastLocationChangeInfo=null,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new qt.xQ,this.errorHandler=sE,this.malformedUriErrorHandler=oE,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:Fl,afterPreactivation:Fl},this.urlHandlingStrategy=new SS,this.routeReuseStrategy=new TS,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=g.get(d.h0i),this.console=g.get(d.c2e);const x=g.get(d.R0b);this.isNgZoneEnabled=x instanceof d.R0b&&d.R0b.isInAngularZone(),this.resetConfig(T),this.currentUrlTree=new Nl(new Et([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new S_(_,w,V=>this.triggerEvent(new t_(V)),V=>this.triggerEvent(new n_(V))),this.routerState=d_(this.currentUrlTree,this.rootComponentType),this.transitions=new Ln({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var n;return null===(n=this.location.getState())||void 0===n?void 0:n.\u0275routerPageId}setupNavigations(n){const s=this.events;return n.pipe(fn(l=>0!==l.id),(0,Xe.U)(l=>Object.assign(Object.assign({},l),{extractedUrl:this.urlHandlingStrategy.extract(l.rawUrl)})),zn(l=>{let c=!1,g=!1;return(0,We.of)(l).pipe((0,Yn.b)(_=>{this.currentNavigation={id:_.id,initialUrl:_.currentRawUrl,extractedUrl:_.extractedUrl,trigger:_.source,extras:_.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),zn(_=>{const w=this.browserUrlTree.toString(),T=!this.navigated||_.extractedUrl.toString()!==w||w!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||T)&&this.urlHandlingStrategy.shouldProcessUrl(_.rawUrl))return M_(_.source)&&(this.browserUrlTree=_.extractedUrl),(0,We.of)(_).pipe(zn(A=>{const x=this.transitions.getValue();return s.next(new ap(A.id,this.serializeUrl(A.extractedUrl),A.source,A.restoredState)),x!==this.transitions.getValue()?ls.E:Promise.resolve(A)}),function(i,r,n,s){return zn(l=>function(i,r,n,s,l){return new D(i,r,n,s,l).apply()}(i,r,n,l.extractedUrl,s).pipe((0,Xe.U)(c=>Object.assign(Object.assign({},l),{urlAfterRedirects:c}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,Yn.b)(A=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:A.urlAfterRedirects})}),function(i,r,n,s,l){return(0,rn.zg)(c=>function(i,r,n,s,l="emptyOnly",c="legacy"){try{const g=new XC(i,r,n,s,l,c).recognize();return null===g?nh(new nc):(0,We.of)(g)}catch(g){return nh(g)}}(i,r,c.urlAfterRedirects,n(c.urlAfterRedirects),s,l).pipe((0,Xe.U)(g=>Object.assign(Object.assign({},c),{targetSnapshot:g}))))}(this.rootComponentType,this.config,A=>this.serializeUrl(A),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,Yn.b)(A=>{"eager"===this.urlUpdateStrategy&&(A.extras.skipLocationChange||this.setBrowserUrl(A.urlAfterRedirects,A),this.browserUrlTree=A.urlAfterRedirects);const x=new Vd(A.id,this.serializeUrl(A.extractedUrl),this.serializeUrl(A.urlAfterRedirects),A.targetSnapshot);s.next(x)}));if(T&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:x,extractedUrl:V,source:z,restoredState:ue,extras:Ae}=_,Qe=new ap(x,this.serializeUrl(V),z,ue);s.next(Qe);const Je=d_(V,this.rootComponentType).snapshot;return(0,We.of)(Object.assign(Object.assign({},_),{targetSnapshot:Je,urlAfterRedirects:V,extras:Object.assign(Object.assign({},Ae),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=_.rawUrl,this.browserUrlTree=_.urlAfterRedirects,_.resolve(null),ls.E}),F0(_=>{const{targetSnapshot:w,id:T,extractedUrl:S,rawUrl:A,extras:{skipLocationChange:x,replaceUrl:V}}=_;return this.hooks.beforePreactivation(w,{navigationId:T,appliedUrlTree:S,rawUrlTree:A,skipLocationChange:!!x,replaceUrl:!!V})}),(0,Yn.b)(_=>{const w=new e_(_.id,this.serializeUrl(_.extractedUrl),this.serializeUrl(_.urlAfterRedirects),_.targetSnapshot);this.triggerEvent(w)}),(0,Xe.U)(_=>Object.assign(Object.assign({},_),{guards:je(_.targetSnapshot,_.currentSnapshot,this.rootContexts)})),function(i,r){return(0,rn.zg)(n=>{const{targetSnapshot:s,currentSnapshot:l,guards:{canActivateChecks:c,canDeactivateChecks:g}}=n;return 0===g.length&&0===c.length?(0,We.of)(Object.assign(Object.assign({},n),{guardsResult:!0})):function(i,r,n,s){return(0,un.D)(i).pipe((0,rn.zg)(l=>function(i,r,n,s,l){const c=r&&r.routeConfig?r.routeConfig.canDeactivate:null;if(!c||0===c.length)return(0,We.of)(!0);const g=c.map(_=>{const w=et(_,r,l);let T;if(function(i){return i&&xs(i.canDeactivate)}(w))T=dr(w.canDeactivate(i,r,n,s));else{if(!xs(w))throw new Error("Invalid CanDeactivate guard");T=dr(w(i,r,n,s))}return T.pipe(Rn())});return(0,We.of)(g).pipe(Ta())}(l.component,l.route,n,r,s)),Rn(l=>!0!==l,!0))}(g,s,l,i).pipe((0,rn.zg)(_=>_&&function(i){return"boolean"==typeof i}(_)?function(i,r,n,s){return(0,un.D)(r).pipe(Dl(l=>ko(function(i,r){return null!==i&&r&&r(new cp(i)),(0,We.of)(!0)}(l.route.parent,s),function(i,r){return null!==i&&r&&r(new r_(i)),(0,We.of)(!0)}(l.route,s),function(i,r,n){const s=r[r.length-1],c=r.slice(0,r.length-1).reverse().map(g=>function(i){const r=i.routeConfig?i.routeConfig.canActivateChild:null;return r&&0!==r.length?{node:i,guards:r}:null}(g)).filter(g=>null!==g).map(g=>Ss(()=>{const _=g.guards.map(w=>{const T=et(w,g.node,n);let S;if(function(i){return i&&xs(i.canActivateChild)}(T))S=dr(T.canActivateChild(s,i));else{if(!xs(T))throw new Error("Invalid CanActivateChild guard");S=dr(T(s,i))}return S.pipe(Rn())});return(0,We.of)(_).pipe(Ta())}));return(0,We.of)(c).pipe(Ta())}(i,l.path,n),function(i,r,n){const s=r.routeConfig?r.routeConfig.canActivate:null;if(!s||0===s.length)return(0,We.of)(!0);const l=s.map(c=>Ss(()=>{const g=et(c,r,n);let _;if(function(i){return i&&xs(i.canActivate)}(g))_=dr(g.canActivate(r,i));else{if(!xs(g))throw new Error("Invalid CanActivate guard");_=dr(g(r,i))}return _.pipe(Rn())}));return(0,We.of)(l).pipe(Ta())}(i,l.route,n))),Rn(l=>!0!==l,!0))}(s,c,i,r):(0,We.of)(_)),(0,Xe.U)(_=>Object.assign(Object.assign({},n),{guardsResult:_})))})}(this.ngModule.injector,_=>this.triggerEvent(_)),(0,Yn.b)(_=>{if(ks(_.guardsResult)){const T=fp(`Redirecting to "${this.serializeUrl(_.guardsResult)}"`);throw T.url=_.guardsResult,T}const w=new Hu(_.id,this.serializeUrl(_.extractedUrl),this.serializeUrl(_.urlAfterRedirects),_.targetSnapshot,!!_.guardsResult);this.triggerEvent(w)}),fn(_=>!!_.guardsResult||(this.restoreHistory(_),this.cancelNavigationTransition(_,""),!1)),F0(_=>{if(_.guards.canActivateChecks.length)return(0,We.of)(_).pipe((0,Yn.b)(w=>{const T=new up(w.id,this.serializeUrl(w.extractedUrl),this.serializeUrl(w.urlAfterRedirects),w.targetSnapshot);this.triggerEvent(T)}),zn(w=>{let T=!1;return(0,We.of)(w).pipe(function(i,r){return(0,rn.zg)(n=>{const{targetSnapshot:s,guards:{canActivateChecks:l}}=n;if(!l.length)return(0,We.of)(n);let c=0;return(0,un.D)(l).pipe(Dl(g=>function(i,r,n,s){return function(i,r,n,s){const l=Object.keys(i);if(0===l.length)return(0,We.of)({});const c={};return(0,un.D)(l).pipe((0,rn.zg)(g=>function(i,r,n,s){const l=et(i,r,s);return dr(l.resolve?l.resolve(r,n):l(r,n))}(i[g],r,n,s).pipe((0,Yn.b)(_=>{c[g]=_}))),ip(1),(0,rn.zg)(()=>Object.keys(c).length===l.length?(0,We.of)(c):ls.E))}(i._resolve,i,r,s).pipe((0,Xe.U)(c=>(i._resolvedData=c,i.data=Object.assign(Object.assign({},i.data),h_(i,n).resolve),null)))}(g.route,s,i,r)),(0,Yn.b)(()=>c++),ip(1),(0,rn.zg)(g=>c===l.length?(0,We.of)(n):ls.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,Yn.b)({next:()=>T=!0,complete:()=>{T||(this.restoreHistory(w),this.cancelNavigationTransition(w,"At least one route resolver didn't emit any value."))}}))}),(0,Yn.b)(w=>{const T=new Bo(w.id,this.serializeUrl(w.extractedUrl),this.serializeUrl(w.urlAfterRedirects),w.targetSnapshot);this.triggerEvent(T)}))}),F0(_=>{const{targetSnapshot:w,id:T,extractedUrl:S,rawUrl:A,extras:{skipLocationChange:x,replaceUrl:V}}=_;return this.hooks.afterPreactivation(w,{navigationId:T,appliedUrlTree:S,rawUrlTree:A,skipLocationChange:!!x,replaceUrl:!!V})}),(0,Xe.U)(_=>{const w=function(i,r,n){const s=Qu(i,r._root,n?n._root:void 0);return new vp(s,r)}(this.routeReuseStrategy,_.targetSnapshot,_.currentRouterState);return Object.assign(Object.assign({},_),{targetRouterState:w})}),(0,Yn.b)(_=>{this.currentUrlTree=_.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(_.urlAfterRedirects,_.rawUrl),this.routerState=_.targetRouterState,"deferred"===this.urlUpdateStrategy&&(_.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,_),this.browserUrlTree=_.urlAfterRedirects)}),((i,r,n)=>(0,Xe.U)(s=>(new Zd(r,s.targetRouterState,s.currentRouterState,n).activate(i),s)))(this.rootContexts,this.routeReuseStrategy,_=>this.triggerEvent(_)),(0,Yn.b)({next(){c=!0},complete(){c=!0}}),function(i){return r=>r.lift(new sp(i))}(()=>{if(!c&&!g){const _=`Navigation ID ${l.id} is not equal to the current navigation id ${this.navigationId}`;"replace"===this.canceledNavigationResolution?(this.restoreHistory(l),this.cancelNavigationTransition(l,_)):this.cancelNavigationTransition(l,_)}this.currentNavigation=null}),El(_=>{if(g=!0,function(i){return i&&i[Bd]}(_)){const w=ks(_.url);w||(this.navigated=!0,this.restoreHistory(l,!0));const T=new ya(l.id,this.serializeUrl(l.extractedUrl),_.message);s.next(T),w?setTimeout(()=>{const S=this.urlHandlingStrategy.merge(_.url,this.rawUrlTree),A={skipLocationChange:l.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||M_(l.source)};this.scheduleNavigation(S,"imperative",null,A,{resolve:l.resolve,reject:l.reject,promise:l.promise})},0):l.resolve(!1)}else{this.restoreHistory(l,!0);const w=new lp(l.id,this.serializeUrl(l.extractedUrl),_);s.next(w);try{l.resolve(this.errorHandler(_))}catch(T){l.reject(T)}}return ls.E}))}))}resetRootComponentType(n){this.rootComponentType=n,this.routerState.root.component=this.rootComponentType}getTransition(){const n=this.transitions.value;return n.urlAfterRedirects=this.browserUrlTree,n}setTransition(n){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),n))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(n=>{const s=this.extractLocationChangeInfoFromEvent(n);this.shouldScheduleNavigation(this.lastLocationChangeInfo,s)&&setTimeout(()=>{const{source:l,state:c,urlTree:g}=s,_={replaceUrl:!0};if(c){const w=Object.assign({},c);delete w.navigationId,delete w.\u0275routerPageId,0!==Object.keys(w).length&&(_.state=w)}this.scheduleNavigation(g,l,c,_)},0),this.lastLocationChangeInfo=s}))}extractLocationChangeInfoFromEvent(n){var s;return{source:"popstate"===n.type?"popstate":"hashchange",urlTree:this.parseUrl(n.url),state:(null===(s=n.state)||void 0===s?void 0:s.navigationId)?n.state:null,transitionId:this.getTransition().id}}shouldScheduleNavigation(n,s){if(!n)return!0;const l=s.urlTree.toString()===n.urlTree.toString();return s.transitionId!==n.transitionId||!l||!("hashchange"===s.source&&"popstate"===n.source||"popstate"===s.source&&"hashchange"===n.source)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(n){this.events.next(n)}resetConfig(n){Ci(n),this.config=n.map(Tp),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(n,s={}){const{relativeTo:l,queryParams:c,fragment:g,queryParamsHandling:_,preserveFragment:w}=s,T=l||this.routerState.root,S=w?this.currentUrlTree.fragment:g;let A=null;switch(_){case"merge":A=Object.assign(Object.assign({},this.currentUrlTree.queryParams),c);break;case"preserve":A=this.currentUrlTree.queryParams;break;default:A=c||null}return null!==A&&(A=this.removeEmptyProps(A)),function(i,r,n,s,l){if(0===n.length)return m_(r.root,r.root,r,s,l);const c=function(i){if("string"==typeof i[0]&&1===i.length&&"/"===i[0])return new Cp(!0,0,i);let r=0,n=!1;const s=i.reduce((l,c,g)=>{if("object"==typeof c&&null!=c){if(c.outlets){const _={};return Vn(c.outlets,(w,T)=>{_[T]="string"==typeof w?w.split("/"):w}),[...l,{outlets:_}]}if(c.segmentPath)return[...l,c.segmentPath]}return"string"!=typeof c?[...l,c]:0===g?(c.split("/").forEach((_,w)=>{0==w&&"."===_||(0==w&&""===_?n=!0:".."===_?r++:""!=_&&l.push(_))}),l):[...l,c]},[]);return new Cp(n,r,s)}(n);if(c.toRoot())return m_(r.root,new Et([],{}),r,s,l);const g=function(i,r,n){if(i.isAbsolute)return new Ep(r.root,!0,0);if(-1===n.snapshot._lastPathIndex){const c=n.snapshot._urlSegment;return new Ep(c,c===r.root,0)}const s=Rl(i.commands[0])?0:1;return function(i,r,n){let s=i,l=r,c=n;for(;c>l;){if(c-=l,s=s.parent,!s)throw new Error("Invalid number of '../'");l=s.segments.length}return new Ep(s,!1,l-c)}(n.snapshot._urlSegment,n.snapshot._lastPathIndex+s,i.numberOfDoubleDots)}(c,r,i),_=g.processChildren?Ju(g.segmentGroup,g.index,c.commands):$o(g.segmentGroup,g.index,c.commands);return m_(g.segmentGroup,_,r,s,l)}(T,this.currentUrlTree,n,A,null!=S?S:null)}navigateByUrl(n,s={skipLocationChange:!1}){const l=ks(n)?n:this.parseUrl(n),c=this.urlHandlingStrategy.merge(l,this.rawUrlTree);return this.scheduleNavigation(c,"imperative",null,s)}navigate(n,s={skipLocationChange:!1}){return function(i){for(let r=0;r<i.length;r++){const n=i[r];if(null==n)throw new Error(`The requested path contains ${n} segment at index ${r}`)}}(n),this.navigateByUrl(this.createUrlTree(n,s),s)}serializeUrl(n){return this.urlSerializer.serialize(n)}parseUrl(n){let s;try{s=this.urlSerializer.parse(n)}catch(l){s=this.malformedUriErrorHandler(l,this.urlSerializer,n)}return s}isActive(n,s){let l;if(l=!0===s?Object.assign({},aE):!1===s?Object.assign({},lE):s,ks(n))return $u(this.currentUrlTree,n,l);const c=this.parseUrl(n);return $u(this.currentUrlTree,c,l)}removeEmptyProps(n){return Object.keys(n).reduce((s,l)=>{const c=n[l];return null!=c&&(s[l]=c),s},{})}processNavigations(){this.navigations.subscribe(n=>{this.navigated=!0,this.lastSuccessfulId=n.id,this.currentPageId=n.targetPageId,this.events.next(new _a(n.id,this.serializeUrl(n.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,n.resolve(!0)},n=>{this.console.warn(`Unhandled Navigation Error: ${n}`)})}scheduleNavigation(n,s,l,c,g){var _,w;if(this.disposed)return Promise.resolve(!1);const T=this.getTransition(),S=M_(s)&&T&&!M_(T.source),V=(this.lastSuccessfulId===T.id||this.currentNavigation?T.rawUrl:T.urlAfterRedirects).toString()===n.toString();if(S&&V)return Promise.resolve(!0);let z,ue,Ae;g?(z=g.resolve,ue=g.reject,Ae=g.promise):Ae=new Promise((yt,Gt)=>{z=yt,ue=Gt});const Qe=++this.navigationId;let Je;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(l=this.location.getState()),Je=l&&l.\u0275routerPageId?l.\u0275routerPageId:c.replaceUrl||c.skipLocationChange?null!==(_=this.browserPageId)&&void 0!==_?_:0:(null!==(w=this.browserPageId)&&void 0!==w?w:0)+1):Je=0,this.setTransition({id:Qe,targetPageId:Je,source:s,restoredState:l,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:n,extras:c,resolve:z,reject:ue,promise:Ae,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),Ae.catch(yt=>Promise.reject(yt))}setBrowserUrl(n,s){const l=this.urlSerializer.serialize(n),c=Object.assign(Object.assign({},s.extras.state),this.generateNgRouterState(s.id,s.targetPageId));this.location.isCurrentPathEqualTo(l)||s.extras.replaceUrl?this.location.replaceState(l,"",c):this.location.go(l,"",c)}restoreHistory(n,s=!1){var l,c;if("computed"===this.canceledNavigationResolution){const g=this.currentPageId-n.targetPageId;"popstate"!==n.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(l=this.currentNavigation)||void 0===l?void 0:l.finalUrl)||0===g?this.currentUrlTree===(null===(c=this.currentNavigation)||void 0===c?void 0:c.finalUrl)&&0===g&&(this.resetState(n),this.browserUrlTree=n.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(g)}else"replace"===this.canceledNavigationResolution&&(s&&this.resetState(n),this.resetUrlToCurrentUrlTree())}resetState(n){this.routerState=n.currentRouterState,this.currentUrlTree=n.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(n,s){const l=new ya(n.id,this.serializeUrl(n.extractedUrl),s);this.triggerEvent(l),n.resolve(!1)}generateNgRouterState(n,s){return"computed"===this.canceledNavigationResolution?{navigationId:n,\u0275routerPageId:s}:{navigationId:n}}}return i.\u0275fac=function(n){return new(n||i)(d.LFG(d.DyG),d.LFG(gp),d.LFG(Pl),d.LFG(st),d.LFG(d.zs3),d.LFG(d.v3s),d.LFG(d.Sil),d.LFG(void 0))},i.\u0275prov=d.Yz7({token:i,factory:i.\u0275fac}),i})();function M_(i){return"imperative"!==i}let Rp=(()=>{class i{constructor(n,s,l,c,g){this.parentContexts=n,this.location=s,this.resolver=l,this.changeDetector=g,this.activated=null,this._activatedRoute=null,this.activateEvents=new d.vpe,this.deactivateEvents=new d.vpe,this.name=c||_t,n.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const n=this.parentContexts.getContext(this.name);n&&n.route&&(n.attachRef?this.attach(n.attachRef,n.route):this.activateWith(n.route,n.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const n=this.activated;return this.activated=null,this._activatedRoute=null,n}attach(n,s){this.activated=n,this._activatedRoute=s,this.location.insert(n.hostView)}deactivate(){if(this.activated){const n=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,s){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=n;const g=(s=s||this.resolver).resolveComponentFactory(n._futureSnapshot.routeConfig.component),_=this.parentContexts.getOrCreateContext(this.name).children,w=new k_(n,_,this.location.injector);this.activated=this.location.createComponent(g,this.location.length,w),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return i.\u0275fac=function(n){return new(n||i)(d.Y36(Pl),d.Y36(d.s_b),d.Y36(d._Vd),d.$8M("name"),d.Y36(d.sBO))},i.\u0275dir=d.lG2({type:i,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),i})();class k_{constructor(r,n,s){this.route=r,this.childContexts=n,this.parent=s}get(r,n){return r===Al?this.route:r===Pl?this.childContexts:this.parent.get(r,n)}}class V0{}class U0{preload(r,n){return(0,We.of)(null)}}let O_=(()=>{class i{constructor(n,s,l,c,g){this.router=n,this.injector=c,this.preloadingStrategy=g,this.loader=new S_(s,l,T=>n.triggerEvent(new t_(T)),T=>n.triggerEvent(new n_(T)))}setUpPreloading(){this.subscription=this.router.events.pipe(fn(n=>n instanceof _a),Dl(()=>this.preload())).subscribe(()=>{})}preload(){const n=this.injector.get(d.h0i);return this.processRoutes(n,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(n,s){const l=[];for(const c of s)if(c.loadChildren&&!c.canLoad&&c._loadedConfig){const g=c._loadedConfig;l.push(this.processRoutes(g.module,g.routes))}else c.loadChildren&&!c.canLoad?l.push(this.preloadConfig(n,c)):c.children&&l.push(this.processRoutes(n,c.children));return(0,un.D)(l).pipe((0,Ui.J)(),(0,Xe.U)(c=>{}))}preloadConfig(n,s){return this.preloadingStrategy.preload(s,()=>(s._loadedConfig?(0,We.of)(s._loadedConfig):this.loader.load(n.injector,s)).pipe((0,rn.zg)(c=>(s._loadedConfig=c,this.processRoutes(c.module,c.routes)))))}}return i.\u0275fac=function(n){return new(n||i)(d.LFG(Gi),d.LFG(d.v3s),d.LFG(d.Sil),d.LFG(d.zs3),d.LFG(V0))},i.\u0275prov=d.Yz7({token:i,factory:i.\u0275fac}),i})(),sc=(()=>{class i{constructor(n,s,l={}){this.router=n,this.viewportScroller=s,this.options=l,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},l.scrollPositionRestoration=l.scrollPositionRestoration||"disabled",l.anchorScrolling=l.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(n=>{n instanceof ap?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=n.navigationTrigger,this.restoredId=n.restoredState?n.restoredState.navigationId:0):n instanceof _a&&(this.lastId=n.id,this.scheduleScrollEvent(n,this.router.parseUrl(n.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(n=>{n instanceof Uo&&(n.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(n.position):n.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(n.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(n,s){this.router.triggerEvent(new Uo(n,"popstate"===this.lastSource?this.store[this.restoredId]:null,s))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return i.\u0275fac=function(n){return new(n||i)(d.LFG(Gi),d.LFG(Mu),d.LFG(void 0))},i.\u0275prov=d.Yz7({token:i,factory:i.\u0275fac}),i})();const Ll=new d.OlP("ROUTER_CONFIGURATION"),cE=new d.OlP("ROUTER_FORROOT_GUARD"),dE=[st,{provide:gp,useClass:Sl},{provide:Gi,useFactory:function(i,r,n,s,l,c,g,_={},w,T){const S=new Gi(null,i,r,n,s,l,c,_0(g));return w&&(S.urlHandlingStrategy=w),T&&(S.routeReuseStrategy=T),function(i,r){i.errorHandler&&(r.errorHandler=i.errorHandler),i.malformedUriErrorHandler&&(r.malformedUriErrorHandler=i.malformedUriErrorHandler),i.onSameUrlNavigation&&(r.onSameUrlNavigation=i.onSameUrlNavigation),i.paramsInheritanceStrategy&&(r.paramsInheritanceStrategy=i.paramsInheritanceStrategy),i.relativeLinkResolution&&(r.relativeLinkResolution=i.relativeLinkResolution),i.urlUpdateStrategy&&(r.urlUpdateStrategy=i.urlUpdateStrategy)}(_,S),_.enableTracing&&S.events.subscribe(A=>{var x,V;null===(x=console.group)||void 0===x||x.call(console,`Router Event: ${A.constructor.name}`),console.log(A.toString()),console.log(A),null===(V=console.groupEnd)||void 0===V||V.call(console)}),S},deps:[gp,Pl,st,d.zs3,d.v3s,d.Sil,N_,Ll,[class{},new d.FiY],[class{},new d.FiY]]},Pl,{provide:Al,useFactory:function(i){return i.routerState.root},deps:[Gi]},{provide:d.v3s,useClass:d.EAV},O_,U0,class{preload(r,n){return n().pipe(El(()=>(0,We.of)(null)))}},{provide:Ll,useValue:{enableTracing:!1}}];function H0(){return new d.PXZ("Router",Gi)}let j0=(()=>{class i{constructor(n,s){}static forRoot(n,s){return{ngModule:i,providers:[dE,$0(n),{provide:cE,useFactory:MS,deps:[[Gi,new d.FiY,new d.tp0]]},{provide:Ll,useValue:s||{}},{provide:Te,useFactory:hE,deps:[Q,[new d.tBr(_e),new d.FiY],Ll]},{provide:sc,useFactory:Sk,deps:[Gi,Mu,Ll]},{provide:V0,useExisting:s&&s.preloadingStrategy?s.preloadingStrategy:U0},{provide:d.PXZ,multi:!0,useFactory:H0},[G0,{provide:d.ip1,multi:!0,useFactory:fE,deps:[G0]},{provide:pE,useFactory:kS,deps:[G0]},{provide:d.tb,multi:!0,useExisting:pE}]]}}static forChild(n){return{ngModule:i,providers:[$0(n)]}}}return i.\u0275fac=function(n){return new(n||i)(d.LFG(cE,8),d.LFG(Gi,8))},i.\u0275mod=d.oAB({type:i}),i.\u0275inj=d.cJS({}),i})();function Sk(i,r,n){return n.scrollOffset&&r.setOffset(n.scrollOffset),new sc(i,r,n)}function hE(i,r,n={}){return n.useHash?new Be(i,r):new Fe(i,r)}function MS(i){return"guarded"}function $0(i){return[{provide:d.deG,multi:!0,useValue:i},{provide:N_,multi:!0,useValue:i}]}let G0=(()=>{class i{constructor(n){this.injector=n,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new qt.xQ}appInitializer(){return this.injector.get(L,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let s=null;const l=new Promise(_=>s=_),c=this.injector.get(Gi),g=this.injector.get(Ll);return"disabled"===g.initialNavigation?(c.setUpLocationChangeListener(),s(!0)):"enabled"===g.initialNavigation||"enabledBlocking"===g.initialNavigation?(c.hooks.afterPreactivation=()=>this.initNavigation?(0,We.of)(null):(this.initNavigation=!0,s(!0),this.resultOfPreactivationDone),c.initialNavigation()):s(!0),l})}bootstrapListener(n){const s=this.injector.get(Ll),l=this.injector.get(O_),c=this.injector.get(sc),g=this.injector.get(Gi),_=this.injector.get(d.z2F);n===_.components[0]&&(("enabledNonBlocking"===s.initialNavigation||void 0===s.initialNavigation)&&g.initialNavigation(),l.setUpPreloading(),c.init(),g.resetRootComponentType(_.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return i.\u0275fac=function(n){return new(n||i)(d.LFG(d.zs3))},i.\u0275prov=d.Yz7({token:i,factory:i.\u0275fac}),i})();function fE(i){return i.appInitializer.bind(i)}function kS(i){return i.bootstrapListener.bind(i)}const pE=new d.OlP("Router Initializer"),gE=[];let PS=(()=>{class i{}return i.\u0275fac=function(n){return new(n||i)},i.\u0275mod=d.oAB({type:i}),i.\u0275inj=d.cJS({imports:[[j0.forRoot(gE)],j0]}),i})();var P_=B(3637),pn=B(9126);function pt(){return i=>i.lift(new mE)}class mE{call(r,n){return n.subscribe(new _E(r))}}class _E extends Cr.L{constructor(r){super(r),this.hasPrev=!1}_next(r){let n;this.hasPrev?n=[this.prev,r]:this.hasPrev=!0,this.prev=r,n&&this.destination.next(n)}}function Vl(i,r){return n=>n.lift(new lo(i,r))}class lo{constructor(r,n){this.compare=r,this.keySelector=n}call(r,n){return n.subscribe(new yE(r,this.compare,this.keySelector))}}class yE extends Cr.L{constructor(r,n,s){super(r),this.keySelector=s,this.hasKey=!1,"function"==typeof n&&(this.compare=n)}compare(r,n){return r===n}_next(r){let n;try{const{keySelector:l}=this;n=l?l(r):r}catch(l){return this.destination.error(l)}let s=!1;if(this.hasKey)try{const{compare:l}=this;s=l(this.key,n)}catch(l){return this.destination.error(l)}else this.hasKey=!0;s||(this.key=n,this.destination.next(r))}}var Ue,Ps=B(8939),Go=(B(5128),B(4486)),we=B(8239),oc=B(5452),xa=B(6034),ka=B(5601),F=B(3854),Mk="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Fr={},rh=rh||{},gt=Mk||self;function W0(){}function q0(i){var r=typeof i;return"array"==(r="object"!=r?r:i?Array.isArray(i)?"array":r:"null")||"object"==r&&"number"==typeof i.length}function ih(i){var r=typeof i;return"object"==r&&null!=i||"function"==r}var z0="closure_uid_"+(1e9*Math.random()>>>0),xk=0;function bE(i,r,n){return i.call.apply(i.bind,arguments)}function wE(i,r,n){if(!i)throw Error();if(2<arguments.length){var s=Array.prototype.slice.call(arguments,2);return function(){var l=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(l,s),i.apply(r,l)}}return function(){return i.apply(r,arguments)}}function Lr(i,r,n){return(Lr=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?bE:wE).apply(null,arguments)}function sh(i,r){var n=Array.prototype.slice.call(arguments,1);return function(){var s=n.slice();return s.push.apply(s,arguments),i.apply(this,s)}}function ti(i,r){function n(){}n.prototype=r.prototype,i.Z=r.prototype,i.prototype=new n,i.prototype.constructor=i,i.Vb=function(s,l,c){for(var g=Array(arguments.length-2),_=2;_<arguments.length;_++)g[_-2]=arguments[_];return r.prototype[l].apply(s,g)}}function ac(){this.s=this.s,this.o=this.o}var Ok={};ac.prototype.s=!1,ac.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var i=function(i){return Object.prototype.hasOwnProperty.call(i,z0)&&i[z0]||(i[z0]=++xk)}(this);delete Ok[i]}},ac.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const FS=Array.prototype.indexOf?function(i,r){return Array.prototype.indexOf.call(i,r,void 0)}:function(i,r){if("string"==typeof i)return"string"!=typeof r||1!=r.length?-1:i.indexOf(r,0);for(let n=0;n<i.length;n++)if(n in i&&i[n]===r)return n;return-1},LS=Array.prototype.forEach?function(i,r,n){Array.prototype.forEach.call(i,r,n)}:function(i,r,n){const s=i.length,l="string"==typeof i?i.split(""):i;for(let c=0;c<s;c++)c in l&&r.call(n,l[c],c,i)};function VS(i){return Array.prototype.concat.apply([],arguments)}function CE(i){const r=i.length;if(0<r){const n=Array(r);for(let s=0;s<r;s++)n[s]=i[s];return n}return[]}function Y0(i){return/^[\s\xa0]*$/.test(i)}var Di,BS=String.prototype.trim?function(i){return i.trim()}:function(i){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(i)[1]};function Un(i,r){return-1!=i.indexOf(r)}function xp(i,r){return i<r?-1:i>r?1:0}e:{var Z0=gt.navigator;if(Z0){var F_=Z0.userAgent;if(F_){Di=F_;break e}}Di=""}function L_(i,r,n){for(const s in i)r.call(n,i[s],s,i)}function V_(i){const r={};for(const n in i)r[n]=i[n];return r}var EE="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Oa(i,r){let n,s;for(let l=1;l<arguments.length;l++){for(n in s=arguments[l],s)i[n]=s[n];for(let c=0;c<EE.length;c++)n=EE[c],Object.prototype.hasOwnProperty.call(s,n)&&(i[n]=s[n])}}function B_(i){return B_[" "](i),i}B_[" "]=W0;var Pa,i,Fk=Un(Di,"Opera"),Bl=Un(Di,"Trident")||Un(Di,"MSIE"),DE=Un(Di,"Edge"),U_=DE||Bl,IE=Un(Di,"Gecko")&&!(Un(Di.toLowerCase(),"webkit")&&!Un(Di,"Edge"))&&!(Un(Di,"Trident")||Un(Di,"MSIE"))&&!Un(Di,"Edge"),HS=Un(Di.toLowerCase(),"webkit")&&!Un(Di,"Edge");function oh(){var i=gt.document;return i?i.documentMode:void 0}e:{var kp="",Ul=(i=Di,IE?/rv:([^\);]+)(\)|;)/.exec(i):DE?/Edge\/([\d\.]+)/.exec(i):Bl?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(i):HS?/WebKit\/(\S+)/.exec(i):Fk?/(?:Version)[ \/]?(\S+)/.exec(i):void 0);if(Ul&&(kp=Ul?Ul[1]:""),Bl){var lc=oh();if(null!=lc&&lc>parseFloat(kp)){Pa=String(lc);break e}}Pa=kp}var ah={};function jS(){return r=ah,Object.prototype.hasOwnProperty.call(r,9)?r[9]:r[9]=function(){let i=0;const r=BS(String(Pa)).split("."),n=BS("9").split("."),s=Math.max(r.length,n.length);for(let g=0;0==i&&g<s;g++){var l=r[g]||"",c=n[g]||"";do{if(l=/(\d*)(\D*)(.*)/.exec(l)||["","","",""],c=/(\d*)(\D*)(.*)/.exec(c)||["","","",""],0==l[0].length&&0==c[0].length)break;i=xp(0==l[1].length?0:parseInt(l[1],10),0==c[1].length?0:parseInt(c[1],10))||xp(0==l[2].length,0==c[2].length)||xp(l[2],c[2]),l=l[3],c=c[3]}while(0==i)}return 0<=i}();var r}var Q0=gt.document&&Bl&&(oh()||parseInt(Pa,10))||void 0,J0=function(){if(!gt.addEventListener||!Object.defineProperty)return!1;var i=!1,r=Object.defineProperty({},"passive",{get:function(){i=!0}});try{gt.addEventListener("test",W0,r),gt.removeEventListener("test",W0,r)}catch(n){}return i}();function Vr(i,r){this.type=i,this.g=this.target=r,this.defaultPrevented=!1}function Hl(i,r){if(Vr.call(this,i?i.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,i){var n=this.type=i.type,s=i.changedTouches&&i.changedTouches.length?i.changedTouches[0]:null;if(this.target=i.target||i.srcElement,this.g=r,r=i.relatedTarget){if(IE){e:{try{B_(r.nodeName);var l=!0;break e}catch(c){}l=!1}l||(r=null)}}else"mouseover"==n?r=i.fromElement:"mouseout"==n&&(r=i.toElement);this.relatedTarget=r,s?(this.clientX=void 0!==s.clientX?s.clientX:s.pageX,this.clientY=void 0!==s.clientY?s.clientY:s.pageY,this.screenX=s.screenX||0,this.screenY=s.screenY||0):(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0),this.button=i.button,this.key=i.key||"",this.ctrlKey=i.ctrlKey,this.altKey=i.altKey,this.shiftKey=i.shiftKey,this.metaKey=i.metaKey,this.pointerId=i.pointerId||0,this.pointerType="string"==typeof i.pointerType?i.pointerType:$S[i.pointerType]||"",this.state=i.state,this.i=i,i.defaultPrevented&&Hl.Z.h.call(this)}}Vr.prototype.h=function(){this.defaultPrevented=!0},ti(Hl,Vr);var $S={2:"touch",3:"pen",4:"mouse"};Hl.prototype.h=function(){Hl.Z.h.call(this);var i=this.i;i.preventDefault?i.preventDefault():i.returnValue=!1};var lh="closure_listenable_"+(1e6*Math.random()|0),Lk=0;function TE(i,r,n,s,l){this.listener=i,this.proxy=null,this.src=r,this.type=n,this.capture=!!s,this.ia=l,this.key=++Lk,this.ca=this.fa=!1}function Op(i){i.ca=!0,i.listener=null,i.proxy=null,i.src=null,i.ia=null}function j_(i){this.src=i,this.g={},this.h=0}function $_(i,r){var n=r.type;if(n in i.g){var c,s=i.g[n],l=FS(s,r);(c=0<=l)&&Array.prototype.splice.call(s,l,1),c&&(Op(r),0==i.g[n].length&&(delete i.g[n],i.h--))}}function X0(i,r,n,s){for(var l=0;l<i.length;++l){var c=i[l];if(!c.ca&&c.listener==r&&c.capture==!!n&&c.ia==s)return l}return-1}j_.prototype.add=function(i,r,n,s,l){var c=i.toString();(i=this.g[c])||(i=this.g[c]=[],this.h++);var g=X0(i,r,s,l);return-1<g?(r=i[g],n||(r.fa=!1)):((r=new TE(r,this.src,c,!!s,l)).fa=n,i.push(r)),r};var eb="closure_lm_"+(1e6*Math.random()|0),Ii={};function NE(i,r,n,s,l){if(s&&s.once)return GS(i,r,n,s,l);if(Array.isArray(r)){for(var c=0;c<r.length;c++)NE(i,r[c],n,s,l);return null}return n=ib(n),i&&i[lh]?i.N(r,n,ih(s)?!!s.capture:!!s,l):SE(i,r,n,!1,s,l)}function SE(i,r,n,s,l,c){if(!r)throw Error("Invalid event type");var g=ih(l)?!!l.capture:!!l,_=G_(i);if(_||(i[eb]=_=new j_(i)),(n=_.add(r,n,s,g,c)).proxy)return n;if(s=function(){var r=nb;return function i(n){return r.call(i.src,i.listener,n)}}(),n.proxy=s,s.src=i,s.listener=n,i.addEventListener)J0||(l=g),void 0===l&&(l=!1),i.addEventListener(r.toString(),s,l);else if(i.attachEvent)i.attachEvent(ME(r.toString()),s);else{if(!i.addListener||!i.removeListener)throw Error("addEventListener and attachEvent are unavailable.");i.addListener(s)}return n}function GS(i,r,n,s,l){if(Array.isArray(r)){for(var c=0;c<r.length;c++)GS(i,r[c],n,s,l);return null}return n=ib(n),i&&i[lh]?i.O(r,n,ih(s)?!!s.capture:!!s,l):SE(i,r,n,!0,s,l)}function tb(i,r,n,s,l){if(Array.isArray(r))for(var c=0;c<r.length;c++)tb(i,r[c],n,s,l);else s=ih(s)?!!s.capture:!!s,n=ib(n),i&&i[lh]?(i=i.i,(r=String(r).toString())in i.g&&-1<(n=X0(c=i.g[r],n,s,l))&&(Op(c[n]),Array.prototype.splice.call(c,n,1),0==c.length&&(delete i.g[r],i.h--))):i&&(i=G_(i))&&(r=i.g[r.toString()],i=-1,r&&(i=X0(r,n,s,l)),(n=-1<i?r[i]:null)&&AE(n))}function AE(i){if("number"!=typeof i&&i&&!i.ca){var r=i.src;if(r&&r[lh])$_(r.i,i);else{var n=i.type,s=i.proxy;r.removeEventListener?r.removeEventListener(n,s,i.capture):r.detachEvent?r.detachEvent(ME(n),s):r.addListener&&r.removeListener&&r.removeListener(s),(n=G_(r))?($_(n,i),0==n.h&&(n.src=null,r[eb]=null)):Op(i)}}}function ME(i){return i in Ii?Ii[i]:Ii[i]="on"+i}function nb(i,r){if(i.ca)i=!0;else{r=new Hl(r,this);var n=i.listener,s=i.ia||i.src;i.fa&&AE(i),i=n.call(s,r)}return i}function G_(i){return(i=i[eb])instanceof j_?i:null}var rb="__closure_events_fn_"+(1e9*Math.random()>>>0);function ib(i){return"function"==typeof i?i:(i[rb]||(i[rb]=function(r){return i.handleEvent(r)}),i[rb])}function Dr(){ac.call(this),this.i=new j_(this),this.P=this,this.I=null}function Ir(i,r){var n,s=i.I;if(s)for(n=[];s;s=s.I)n.push(s);if(i=i.P,s=r.type||r,"string"==typeof r)r=new Vr(r,i);else if(r instanceof Vr)r.target=r.target||i;else{var l=r;Oa(r=new Vr(s,i),l)}if(l=!0,n)for(var c=n.length-1;0<=c;c--){var g=r.g=n[c];l=W_(g,s,!0,r)&&l}if(l=W_(g=r.g=i,s,!0,r)&&l,l=W_(g,s,!1,r)&&l,n)for(c=0;c<n.length;c++)l=W_(g=r.g=n[c],s,!1,r)&&l}function W_(i,r,n,s){if(!(r=i.i.g[String(r)]))return!0;r=r.concat();for(var l=!0,c=0;c<r.length;++c){var g=r[c];if(g&&!g.ca&&g.capture==n){var _=g.listener,w=g.ia||g.src;g.fa&&$_(i.i,g),l=!1!==_.call(w,s)&&l}}return l&&!s.defaultPrevented}ti(Dr,ac),Dr.prototype[lh]=!0,Dr.prototype.removeEventListener=function(i,r,n,s){tb(this,i,r,n,s)},Dr.prototype.M=function(){if(Dr.Z.M.call(this),this.i){var r,i=this.i;for(r in i.g){for(var n=i.g[r],s=0;s<n.length;s++)Op(n[s]);delete i.g[r],i.h--}}this.I=null},Dr.prototype.N=function(i,r,n,s){return this.i.add(String(i),r,!1,n,s)},Dr.prototype.O=function(i,r,n,s){return this.i.add(String(i),r,!0,n,s)};var q_=gt.JSON.stringify;function WS(){var i=ZS;let r=null;return i.g&&(r=i.g,i.g=i.g.next,i.g||(i.h=null),r.next=null),r}var Pp,sb=new class{constructor(i,r){this.i=i,this.j=r,this.h=0,this.g=null}get(){let i;return 0<this.h?(this.h--,i=this.g,this.g=i.next,i.next=null):i=this.i(),i}}(()=>new RE,i=>i.reset());class RE{constructor(){this.next=this.g=this.h=null}set(r,n){this.h=r,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function zS(i){gt.setTimeout(()=>{throw i},0)}function Fs(i,r){Pp||function(){var i=gt.Promise.resolve(void 0);Pp=function(){i.then(xE)}}(),ob||(Pp(),ob=!0),ZS.add(i,r)}var ob=!1,ZS=new class{constructor(){this.h=this.g=null}add(r,n){const s=sb.get();s.set(r,n),this.h?this.h.next=s:this.g=s,this.h=s}};function xE(){for(var i;i=WS();){try{i.h.call(i.g)}catch(n){zS(n)}var r=sb;r.j(i),100>r.h&&(r.h++,i.next=r.g,r.g=i)}ob=!1}function z_(i,r){Dr.call(this),this.h=i||1,this.g=r||gt,this.j=Lr(this.kb,this),this.l=Date.now()}function ab(i){i.da=!1,i.S&&(i.g.clearTimeout(i.S),i.S=null)}function lb(i,r,n){if("function"==typeof i)n&&(i=Lr(i,n));else{if(!i||"function"!=typeof i.handleEvent)throw Error("Invalid listener argument");i=Lr(i.handleEvent,i)}return 2147483647<Number(r)?-1:gt.setTimeout(i,r||0)}function Y_(i){i.g=lb(()=>{i.g=null,i.i&&(i.i=!1,Y_(i))},i.j);const r=i.h;i.h=null,i.m.apply(null,r)}ti(z_,Dr),(Ue=z_.prototype).da=!1,Ue.S=null,Ue.kb=function(){if(this.da){var i=Date.now()-this.l;0<i&&i<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-i):(this.S&&(this.g.clearTimeout(this.S),this.S=null),Ir(this,"tick"),this.da&&(ab(this),this.start()))}},Ue.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Ue.M=function(){z_.Z.M.call(this),ab(this),delete this.g};class KS extends ac{constructor(r,n){super(),this.m=r,this.j=n,this.h=null,this.i=!1,this.g=null}l(r){this.h=arguments,this.g?this.i=!0:Y_(this)}M(){super.M(),this.g&&(gt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Fp(i){ac.call(this),this.h=i,this.g={}}ti(Fp,ac);var Lp=[];function Z_(i,r,n,s){Array.isArray(n)||(n&&(Lp[0]=n.toString()),n=Lp);for(var l=0;l<n.length;l++){var c=NE(r,n[l],s||i.handleEvent,!1,i.h||i);if(!c)break;i.g[c.key]=c}}function kE(i){L_(i.g,function(r,n){this.g.hasOwnProperty(n)&&AE(r)},i),i.g={}}function uh(){this.g=!0}function ch(i,r,n,s){i.info(function(){return"XMLHTTP TEXT ("+r+"): "+function(i,r){if(!i.g)return r;if(!r)return null;try{var n=JSON.parse(r);if(n)for(i=0;i<n.length;i++)if(Array.isArray(n[i])){var s=n[i];if(!(2>s.length)){var l=s[1];if(Array.isArray(l)&&!(1>l.length)){var c=l[0];if("noop"!=c&&"stop"!=c&&"close"!=c)for(var g=1;g<l.length;g++)l[g]=""}}}return q_(n)}catch(_){return r}}(i,n)+(s?" "+s:"")})}Fp.prototype.M=function(){Fp.Z.M.call(this),kE(this)},Fp.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},uh.prototype.Aa=function(){this.g=!1},uh.prototype.info=function(){};var dh={},PE=null;function Vp(){return PE=PE||new Dr}function db(i){Vr.call(this,dh.Ma,i)}function hh(i){const r=Vp();Ir(r,new db(r,i))}function hb(i,r){Vr.call(this,dh.STAT_EVENT,i),this.stat=r}function ni(i){const r=Vp();Ir(r,new hb(r,i))}function Wo(i,r){Vr.call(this,dh.Na,i),this.size=r}function jl(i,r){if("function"!=typeof i)throw Error("Fn must not be null and must be a function");return gt.setTimeout(function(){i()},r)}dh.Ma="serverreachability",ti(db,Vr),dh.STAT_EVENT="statevent",ti(hb,Vr),dh.Na="timingevent",ti(Wo,Vr);var K_={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},FE={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function LE(){}function fb(){}LE.prototype.h=null;var Bp,Fa={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function cc(){Vr.call(this,"d")}function pb(){Vr.call(this,"c")}function Up(){}function Hp(i,r,n,s){this.l=i,this.j=r,this.m=n,this.X=s||1,this.V=new Fp(this),this.P=JS,this.W=new z_(i=U_?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new gb}function gb(){this.i=null,this.g="",this.h=!1}ti(cc,Vr),ti(pb,Vr),ti(Up,LE),Up.prototype.g=function(){return new XMLHttpRequest},Up.prototype.i=function(){return{}},Bp=new Up;var JS=45e3,jp={},Q_={};function mb(i,r,n){i.K=1,i.v=Wp(uo(r)),i.s=n,i.U=!0,_b(i,null)}function _b(i,r){i.F=Date.now(),$p(i),i.A=uo(i.v);var n=i.A,s=i.X;Array.isArray(s)||(s=[String(s)]),rA(n.h,"t",s),i.C=0,n=i.l.H,i.h=new gb,i.g=Ob(i.l,n?r:null,!i.s),0<i.O&&(i.L=new KS(Lr(i.Ia,i,i.g),i.O)),Z_(i.V,i.g,"readystatechange",i.gb),r=i.H?V_(i.H):{},i.s?(i.u||(i.u="POST"),r["Content-Type"]="application/x-www-form-urlencoded",i.g.ea(i.A,i.u,i.s,r)):(i.u="GET",i.g.ea(i.A,i.u,null,r)),hh(1),function(i,r,n,s,l,c){i.info(function(){if(i.g)if(c)for(var g="",_=c.split("&"),w=0;w<_.length;w++){var T=_[w].split("=");if(1<T.length){var S=T[0];T=T[1];var A=S.split("_");g=2<=A.length&&"type"==A[1]?g+(S+"=")+T+"&":g+(S+"=redacted&")}}else g=null;else g=c;return"XMLHTTP REQ ("+s+") [attempt "+l+"]: "+r+"\n"+n+"\n"+g})}(i.j,i.u,i.A,i.m,i.X,i.s)}function dc(i){return!!i.g&&"GET"==i.u&&2!=i.K&&i.l.Ba}function yb(i,r,n){let l,s=!0;for(;!i.I&&i.C<n.length;){if(l=XS(i,n),l==Q_){4==r&&(i.o=4,ni(14),s=!1),ch(i.j,i.m,null,"[Incomplete Response]");break}if(l==jp){i.o=4,ni(15),ch(i.j,i.m,n,"[Invalid Chunk]"),s=!1;break}ch(i.j,i.m,l,null),vb(i,l)}dc(i)&&l!=Q_&&l!=jp&&(i.h.g="",i.C=0),4!=r||0!=n.length||i.h.h||(i.o=1,ni(16),s=!1),i.i=i.i&&s,s?0<n.length&&!i.aa&&(i.aa=!0,(r=i.l).g==i&&r.$&&!r.L&&(r.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),Wl(r),r.L=!0,ni(11))):(ch(i.j,i.m,n,"[Invalid Chunked Response]"),fc(i),Gp(i))}function XS(i,r){var n=i.C,s=r.indexOf("\n",n);return-1==s?Q_:(n=Number(r.substring(n,s)),isNaN(n)?jp:(s+=1)+n>r.length?Q_:(r=r.substr(s,n),i.C=s+n,r))}function $p(i){i.Y=Date.now()+i.P,hc(i,i.P)}function hc(i,r){if(null!=i.B)throw Error("WatchDog timer not null");i.B=jl(Lr(i.eb,i),r)}function J_(i){i.B&&(gt.clearTimeout(i.B),i.B=null)}function Gp(i){0==i.l.G||i.I||Mb(i.l,i)}function fc(i){J_(i);var r=i.L;r&&"function"==typeof r.na&&r.na(),i.L=null,ab(i.W),kE(i.V),i.g&&(r=i.g,i.g=null,r.abort(),r.na())}function vb(i,r){try{var n=i.l;if(0!=n.G&&(n.g==i||ny(n.i,i)))if(n.I=i.N,!i.J&&ny(n.i,i)&&3==n.G){try{var s=n.Ca.g.parse(r)}catch(T){s=null}if(Array.isArray(s)&&3==s.length){var l=s;if(0==l[0])e:if(n.u)n.ta=l[1],0<n.ta-n.U&&37500>l[2]&&n.N&&0==n.A&&!n.v&&(n.v=jl(Lr(n.ab,n),6e3));else{if(n.g){if(!(n.g.F+3e3<i.F))break e;Jp(n),yc(n)}Gl(n),ni(18)}if(1>=$E(n.i)&&n.ka){try{n.ka()}catch(T){}n.ka=void 0}}else ql(n,11)}else if((i.J||n.g==i)&&Jp(n),!Y0(r))for(l=n.Ca.g.parse(r),r=0;r<l.length;r++){let T=l[r];if(n.U=T[0],T=T[1],2==n.G)if("c"==T[0]){n.J=T[1],n.la=T[2];const S=T[3];null!=S&&(n.ma=S,n.h.info("VER="+n.ma));const A=T[4];null!=A&&(n.za=A,n.h.info("SVER="+n.za));const x=T[5];null!=x&&"number"==typeof x&&0<x&&(n.K=s=1.5*x,n.h.info("backChannelRequestTimeoutMs_="+s)),s=n;const V=i.g;if(V){const z=V.g?V.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(z){var c=s.i;!c.g&&(Un(z,"spdy")||Un(z,"quic")||Un(z,"h2"))&&(c.j=c.l,c.g=new Set,c.h&&(ry(c,c.h),c.h=null))}if(s.D){const ue=V.g?V.g.getResponseHeader("X-HTTP-Session-Id"):null;ue&&(s.sa=ue,gn(s.F,s.D,ue))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-i.F,n.h.info("Handshake RTT: "+n.O+"ms"));var g=i;if((s=n).oa=kb(s,s.H?s.la:null,s.W),g.J){aA(s.i,g);var _=g,w=s.K;w&&_.setTimeout(w),_.B&&(J_(_),$p(_)),s.g=g}else wc(s);0<n.l.length&&Ga(n)}else"stop"!=T[0]&&"close"!=T[0]||ql(n,7);else 3==n.G&&("stop"==T[0]||"close"==T[0]?"stop"==T[0]?ql(n,7):$a(n):"noop"!=T[0]&&n.j&&n.j.wa(T),n.A=0)}hh(4)}catch(T){}}function bb(i,r){if(i.forEach&&"function"==typeof i.forEach)i.forEach(r,void 0);else if(q0(i)||"string"==typeof i)LS(i,r,void 0);else{if(i.T&&"function"==typeof i.T)var n=i.T();else if(i.R&&"function"==typeof i.R)n=void 0;else if(q0(i)||"string"==typeof i){n=[];for(var s=i.length,l=0;l<s;l++)n.push(l)}else for(l in n=[],s=0,i)n[s++]=l;l=(s=function(i){if(i.R&&"function"==typeof i.R)return i.R();if("string"==typeof i)return i.split("");if(q0(i)){for(var r=[],n=i.length,s=0;s<n;s++)r.push(i[s]);return r}for(s in r=[],n=0,i)r[n++]=i[s];return r}(i)).length;for(var c=0;c<l;c++)r.call(void 0,s[c],n&&n[c],i)}}function pc(i,r){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var s=0;s<n;s+=2)this.set(arguments[s],arguments[s+1])}else if(i)if(i instanceof pc)for(n=i.T(),s=0;s<n.length;s++)this.set(n[s],i.get(n[s]));else for(s in i)this.set(s,i[s])}function cn(i){if(i.i!=i.g.length){for(var r=0,n=0;r<i.g.length;){var s=i.g[r];La(i.h,s)&&(i.g[n++]=s),r++}i.g.length=n}if(i.i!=i.g.length){var l={};for(n=r=0;r<i.g.length;)La(l,s=i.g[r])||(i.g[n++]=s,l[s]=1),r++;i.g.length=n}}function La(i,r){return Object.prototype.hasOwnProperty.call(i,r)}(Ue=Hp.prototype).setTimeout=function(i){this.P=i},Ue.gb=function(i){i=i.target;const r=this.L;r&&3==Ha(i)?r.l():this.Ia(i)},Ue.Ia=function(i){try{if(i==this.g)e:{const S=Ha(this.g);var r=this.g.Da();const A=this.g.ba();if(!(3>S)&&(3!=S||U_||this.g&&(this.h.h||this.g.ga()||YE(this.g)))){this.I||4!=S||7==r||hh(8==r||0>=A?3:2),J_(this);var n=this.g.ba();this.N=n;t:if(dc(this)){var s=YE(this.g);i="";var l=s.length,c=4==Ha(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){fc(this),Gp(this);var g="";break t}this.h.i=new gt.TextDecoder}for(r=0;r<l;r++)this.h.h=!0,i+=this.h.i.decode(s[r],{stream:c&&r==l-1});s.splice(0,l),this.h.g+=i,this.C=0,g=this.h.g}else g=this.g.ga();if(this.i=200==n,function(i,r,n,s,l,c,g){i.info(function(){return"XMLHTTP RESP ("+s+") [ attempt "+l+"]: "+r+"\n"+n+"\n"+c+" "+g})}(this.j,this.u,this.A,this.m,this.X,S,n),this.i){if(this.$&&!this.J){t:{if(this.g){var _,w=this.g;if((_=w.g?w.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Y0(_)){var T=_;break t}}T=null}if(!(n=T)){this.i=!1,this.o=3,ni(12),fc(this),Gp(this);break e}ch(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,vb(this,n)}this.U?(yb(this,S,g),U_&&this.i&&3==S&&(Z_(this.V,this.W,"tick",this.fb),this.W.start())):(ch(this.j,this.m,g,null),vb(this,g)),4==S&&fc(this),this.i&&!this.I&&(4==S?Mb(this.l,this):(this.i=!1,$p(this)))}else 400==n&&0<g.indexOf("Unknown SID")?(this.o=3,ni(12)):(this.o=0,ni(13)),fc(this),Gp(this)}}}catch(S){}},Ue.fb=function(){if(this.g){var i=Ha(this.g),r=this.g.ga();this.C<r.length&&(J_(this),yb(this,i,r),this.i&&4!=i&&$p(this))}},Ue.cancel=function(){this.I=!0,fc(this)},Ue.eb=function(){this.B=null;const i=Date.now();0<=i-this.Y?(function(i,r){i.info(function(){return"TIMEOUT: "+r})}(this.j,this.A),2!=this.K&&(hh(3),ni(17)),fc(this),this.o=2,Gp(this)):hc(this,this.Y-i)},(Ue=pc.prototype).R=function(){cn(this);for(var i=[],r=0;r<this.g.length;r++)i.push(this.h[this.g[r]]);return i},Ue.T=function(){return cn(this),this.g.concat()},Ue.get=function(i,r){return La(this.h,i)?this.h[i]:r},Ue.set=function(i,r){La(this.h,i)||(this.i++,this.g.push(i)),this.h[i]=r},Ue.forEach=function(i,r){for(var n=this.T(),s=0;s<n.length;s++){var l=n[s],c=this.get(l);i.call(r,c,l,this)}};var eA=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Ba(i,r){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,i instanceof Ba){this.g=void 0!==r?r:i.g,wb(this,i.j),this.s=i.s,X_(this,i.i),ey(this,i.m),this.l=i.l,r=i.h;var n=new zp;n.i=r.i,r.g&&(n.g=new pc(r.g),n.h=r.h),Cb(this,n),this.o=i.o}else i&&(n=String(i).match(eA))?(this.g=!!r,wb(this,n[1]||"",!0),this.s=qp(n[2]||""),X_(this,n[3]||"",!0),ey(this,n[4]),this.l=qp(n[5]||"",!0),Cb(this,n[6]||"",!0),this.o=qp(n[7]||"")):(this.g=!!r,this.h=new zp(null,this.g))}function uo(i){return new Ba(i)}function wb(i,r,n){i.j=n?qp(r,!0):r,i.j&&(i.j=i.j.replace(/:$/,""))}function X_(i,r,n){i.i=n?qp(r,!0):r}function ey(i,r){if(r){if(r=Number(r),isNaN(r)||0>r)throw Error("Bad port number "+r);i.m=r}else i.m=null}function Cb(i,r,n){r instanceof zp?(i.h=r,function(i,r){r&&!i.j&&($l(i),i.i=null,i.g.forEach(function(n,s){var l=s.toLowerCase();s!=l&&(jE(this,s),rA(this,l,n))},i)),i.j=r}(i.h,i.g)):(n||(r=Ua(r,HE)),i.h=new zp(r,i.g))}function gn(i,r,n){i.h.set(r,n)}function Wp(i){return gn(i,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),i}function qp(i,r){return i?r?decodeURI(i.replace(/%25/g,"%2525")):decodeURIComponent(i):""}function Ua(i,r,n){return"string"==typeof i?(i=encodeURI(i).replace(r,Eb),n&&(i=i.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),i):null}function Eb(i){return"%"+((i=i.charCodeAt(0))>>4&15).toString(16)+(15&i).toString(16)}Ba.prototype.toString=function(){var i=[],r=this.j;r&&i.push(Ua(r,Db,!0),":");var n=this.i;return(n||"file"==r)&&(i.push("//"),(r=this.s)&&i.push(Ua(r,Db,!0),"@"),i.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&i.push(":",String(n))),(n=this.l)&&(this.i&&"/"!=n.charAt(0)&&i.push("/"),i.push(Ua(n,"/"==n.charAt(0)?UE:BE,!0))),(n=this.h.toString())&&i.push("?",n),(n=this.o)&&i.push("#",Ua(n,nA)),i.join("")};var Db=/[#\/\?@]/g,BE=/[#\?:]/g,UE=/[#\?]/g,HE=/[#\?@]/g,nA=/#/g;function zp(i,r){this.h=this.g=null,this.i=i||null,this.j=!!r}function $l(i){i.g||(i.g=new pc,i.h=0,i.i&&function(i,r){if(i){i=i.split("&");for(var n=0;n<i.length;n++){var s=i[n].indexOf("="),l=null;if(0<=s){var c=i[n].substring(0,s);l=i[n].substring(s+1)}else c=i[n];r(c,l?decodeURIComponent(l.replace(/\+/g," ")):"")}}}(i.i,function(r,n){i.add(decodeURIComponent(r.replace(/\+/g," ")),n)}))}function jE(i,r){$l(i),r=gc(i,r),La(i.g.h,r)&&(i.i=null,i.h-=i.g.get(r).length,La((i=i.g).h,r)&&(delete i.h[r],i.i--,i.g.length>2*i.i&&cn(i)))}function Ib(i,r){return $l(i),r=gc(i,r),La(i.g.h,r)}function rA(i,r,n){jE(i,r),0<n.length&&(i.i=null,i.g.set(gc(i,r),CE(n)),i.h+=n.length)}function gc(i,r){return r=String(r),i.j&&(r=r.toLowerCase()),r}function oA(i){this.l=i||Uk,i=gt.PerformanceNavigationTiming?0<(i=gt.performance.getEntriesByType("navigation")).length&&("hq"==i[0].nextHopProtocol||"h2"==i[0].nextHopProtocol):!!(gt.g&&gt.g.Ea&&gt.g.Ea()&&gt.g.Ea().Zb),this.j=i?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(Ue=zp.prototype).add=function(i,r){$l(this),this.i=null,i=gc(this,i);var n=this.g.get(i);return n||this.g.set(i,n=[]),n.push(r),this.h+=1,this},Ue.forEach=function(i,r){$l(this),this.g.forEach(function(n,s){LS(n,function(l){i.call(r,l,s,this)},this)},this)},Ue.T=function(){$l(this);for(var i=this.g.R(),r=this.g.T(),n=[],s=0;s<r.length;s++)for(var l=i[s],c=0;c<l.length;c++)n.push(r[s]);return n},Ue.R=function(i){$l(this);var r=[];if("string"==typeof i)Ib(this,i)&&(r=VS(r,this.g.get(gc(this,i))));else{i=this.g.R();for(var n=0;n<i.length;n++)r=VS(r,i[n])}return r},Ue.set=function(i,r){return $l(this),this.i=null,Ib(this,i=gc(this,i))&&(this.h-=this.g.get(i).length),this.g.set(i,[r]),this.h+=1,this},Ue.get=function(i,r){return i&&0<(i=this.R(i)).length?String(i[0]):r},Ue.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var i=[],r=this.g.T(),n=0;n<r.length;n++){var s=r[n],l=encodeURIComponent(String(s));s=this.R(s);for(var c=0;c<s.length;c++){var g=l;""!==s[c]&&(g+="="+encodeURIComponent(String(s[c]))),i.push(g)}}return this.i=i.join("&")};var Uk=10;function ty(i){return!!i.h||!!i.g&&i.g.size>=i.j}function $E(i){return i.h?1:i.g?i.g.size:0}function ny(i,r){return i.h?i.h==r:!!i.g&&i.g.has(r)}function ry(i,r){i.g?i.g.add(r):i.h=r}function aA(i,r){i.h&&i.h==r?i.h=null:i.g&&i.g.has(r)&&i.g.delete(r)}function Ls(i){if(null!=i.h)return i.i.concat(i.h.D);if(null!=i.g&&0!==i.g.size){let r=i.i;for(const n of i.g.values())r=r.concat(n.D);return r}return CE(i.i)}function GE(){}function Hk(){this.g=new GE}function jk(i,r,n){const s=n||"";try{bb(i,function(l,c){let g=l;ih(l)&&(g=q_(l)),r.push(s+c+"="+encodeURIComponent(g))})}catch(l){throw r.push(s+"type="+encodeURIComponent("_badmap")),l}}function Yp(i,r,n,s,l){try{r.onload=null,r.onerror=null,r.onabort=null,r.ontimeout=null,l(s)}catch(c){}}function fh(i){this.l=i.$b||null,this.j=i.ib||!1}function iy(i,r){Dr.call(this),this.D=i,this.u=r,this.m=void 0,this.readyState=qE,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}oA.prototype.cancel=function(){if(this.i=Ls(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const i of this.g.values())i.cancel();this.g.clear()}},GE.prototype.stringify=function(i){return gt.JSON.stringify(i,void 0)},GE.prototype.parse=function(i){return gt.JSON.parse(i,void 0)},ti(fh,LE),fh.prototype.g=function(){return new iy(this.l,this.j)},fh.prototype.i=function(i){return function(){return i}}({}),ti(iy,Dr);var qE=0;function Tb(i){i.j.read().then(i.Sa.bind(i)).catch(i.ha.bind(i))}function mc(i){i.readyState=4,i.l=null,i.j=null,i.A=null,Zp(i)}function Zp(i){i.onreadystatechange&&i.onreadystatechange.call(i)}(Ue=iy.prototype).open=function(i,r){if(this.readyState!=qE)throw this.abort(),Error("Error reopening a connection");this.C=i,this.B=r,this.readyState=1,Zp(this)},Ue.send=function(i){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const r={headers:this.v,method:this.C,credentials:this.m,cache:void 0};i&&(r.body=i),(this.D||gt).fetch(new Request(this.B,r)).then(this.Va.bind(this),this.ha.bind(this))},Ue.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,mc(this)),this.readyState=qE},Ue.Va=function(i){if(this.g&&(this.l=i,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=i.headers,this.readyState=2,Zp(this)),this.g&&(this.readyState=3,Zp(this),this.g)))if("arraybuffer"===this.responseType)i.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==gt.ReadableStream&&"body"in i){if(this.j=i.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Tb(this)}else i.text().then(this.Ua.bind(this),this.ha.bind(this))},Ue.Sa=function(i){if(this.g){if(this.u&&i.value)this.response.push(i.value);else if(!this.u){var r=i.value?i.value:new Uint8Array(0);(r=this.A.decode(r,{stream:!i.done}))&&(this.response=this.responseText+=r)}i.done?mc(this):Zp(this),3==this.readyState&&Tb(this)}},Ue.Ua=function(i){this.g&&(this.response=this.responseText=i,mc(this))},Ue.Ta=function(i){this.g&&(this.response=i,mc(this))},Ue.ha=function(){this.g&&mc(this)},Ue.setRequestHeader=function(i,r){this.v.append(i,r)},Ue.getResponseHeader=function(i){return this.h&&this.h.get(i.toLowerCase())||""},Ue.getAllResponseHeaders=function(){if(!this.h)return"";const i=[],r=this.h.entries();for(var n=r.next();!n.done;)i.push((n=n.value)[0]+": "+n[1]),n=r.next();return i.join("\r\n")},Object.defineProperty(iy.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(i){this.m=i?"include":"same-origin"}});var Nb=gt.JSON.parse;function rr(i){Dr.call(this),this.headers=new pc,this.u=i||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=zE,this.K=this.L=!1}ti(rr,Dr);var zE="",lA=/^https?$/i,uA=["POST","PUT"];function dA(i){return"content-type"==i.toLowerCase()}function Kp(i,r){i.h=!1,i.g&&(i.l=!0,i.g.abort(),i.l=!1),i.j=r,i.m=5,_c(i),Wi(i)}function _c(i){i.D||(i.D=!0,Ir(i,"complete"),Ir(i,"error"))}function Sb(i){if(i.h&&void 0!==rh&&(!i.C[1]||4!=Ha(i)||2!=i.ba()))if(i.v&&4==Ha(i))lb(i.Fa,0,i);else if(Ir(i,"readystatechange"),4==Ha(i)){i.h=!1;try{const _=i.ba();e:switch(_){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}var n;if(!(n=r)){var s;if(s=0===_){var l=String(i.H).match(eA)[1]||null;if(!l&&gt.self&&gt.self.location){var c=gt.self.location.protocol;l=c.substr(0,c.length-1)}s=!lA.test(l?l.toLowerCase():"")}n=s}if(n)Ir(i,"complete"),Ir(i,"success");else{i.m=6;try{var g=2<Ha(i)?i.g.statusText:""}catch(w){g=""}i.j=g+" ["+i.ba()+"]",_c(i)}}finally{Wi(i)}}}function Wi(i,r){if(i.g){ph(i);const n=i.g,s=i.C[0]?W0:null;i.g=null,i.C=null,r||Ir(i,"ready");try{n.onreadystatechange=s}catch(l){}}}function ph(i){i.g&&i.K&&(i.g.ontimeout=null),i.A&&(gt.clearTimeout(i.A),i.A=null)}function Ha(i){return i.g?i.g.readyState:0}function YE(i){try{if(!i.g)return null;if("response"in i.g)return i.g.response;switch(i.J){case zE:case"text":return i.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in i.g)return i.g.mozResponseArrayBuffer}return null}catch(r){return null}}function Vs(i,r,n){e:{for(s in n){var s=!1;break e}s=!0}s||(n=function(i){let r="";return L_(i,function(n,s){r+=s,r+=":",r+=n,r+="\r\n"}),r}(n),"string"==typeof i?null!=n&&encodeURIComponent(String(n)):gn(i,r,n))}function ja(i,r,n){return n&&n.internalChannelParams&&n.internalChannelParams[i]||r}function Br(i){this.za=0,this.l=[],this.h=new uh,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=ja("failFast",!1,i),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=ja("baseRetryDelayMs",5e3,i),this.$a=ja("retryDelaySeedMs",1e4,i),this.Ya=ja("forwardChannelMaxRetries",2,i),this.ra=ja("forwardChannelRequestTimeoutMs",2e4,i),this.qa=i&&i.xmlHttpFactory||void 0,this.Ba=i&&i.Yb||!1,this.K=void 0,this.H=i&&i.supportsCrossDomainXhr||!1,this.J="",this.i=new oA(i&&i.concurrentRequestLimit),this.Ca=new Hk,this.ja=i&&i.fastHandshake||!1,this.Ra=i&&i.Wb||!1,i&&i.Aa&&this.h.Aa(),i&&i.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&i&&i.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!i||!1!==i.Xb}function $a(i){if(ds(i),3==i.G){var r=i.V++,n=uo(i.F);gn(n,"SID",i.J),gn(n,"RID",r),gn(n,"TYPE","terminate"),qo(i,n),(r=new Hp(i,i.h,r,void 0)).K=2,r.v=Wp(uo(n)),n=!1,gt.navigator&&gt.navigator.sendBeacon&&(n=gt.navigator.sendBeacon(r.v.toString(),"")),!n&&gt.Image&&((new Image).src=r.v,n=!0),n||(r.g=Ob(r.l,null),r.g.ea(r.v)),r.F=Date.now(),$p(r)}xb(i)}function yc(i){i.g&&(Wl(i),i.g.cancel(),i.g=null)}function ds(i){yc(i),i.u&&(gt.clearTimeout(i.u),i.u=null),Jp(i),i.i.cancel(),i.m&&("number"==typeof i.m&&gt.clearTimeout(i.m),i.m=null)}function Qp(i,r){i.l.push(new class{constructor(i,r){this.h=i,this.g=r}}(i.Za++,r)),3==i.G&&Ga(i)}function Ga(i){ty(i.i)||i.m||(i.m=!0,Fs(i.Ha,i),i.C=0)}function vc(i,r){var n;n=r?r.m:i.V++;const s=uo(i.F);gn(s,"SID",i.J),gn(s,"RID",n),gn(s,"AID",i.U),qo(i,s),i.o&&i.s&&Vs(s,i.o,i.s),n=new Hp(i,i.h,n,i.C+1),null===i.o&&(n.H=i.s),r&&(i.l=r.D.concat(i.l)),r=bc(i,n,1e3),n.setTimeout(Math.round(.5*i.ra)+Math.round(.5*i.ra*Math.random())),ry(i.i,n),mb(n,s,r)}function qo(i,r){i.j&&bb({},function(n,s){gn(r,s,n)})}function bc(i,r,n){n=Math.min(i.l.length,n);var s=i.j?Lr(i.j.Oa,i.j,i):null;e:{var l=i.l;let c=-1;for(;;){const g=["count="+n];-1==c?0<n?(c=l[0].h,g.push("ofs="+c)):c=0:g.push("ofs="+c);let _=!0;for(let w=0;w<n;w++){let T=l[w].h;const S=l[w].g;if(T-=c,0>T)c=Math.max(0,l[w].h-100),_=!1;else try{jk(S,g,"req"+T+"_")}catch(A){s&&s(S)}}if(_){s=g.join("&");break e}}}return i=i.l.splice(0,n),r.D=i,s}function wc(i){i.g||i.u||(i.Y=1,Fs(i.Ga,i),i.A=0)}function Gl(i){return!(i.g||i.u||3<=i.A||(i.Y++,i.u=jl(Lr(i.Ga,i),Rb(i,i.A)),i.A++,0))}function Wl(i){null!=i.B&&(gt.clearTimeout(i.B),i.B=null)}function Cc(i){i.g=new Hp(i,i.h,"rpc",i.Y),null===i.o&&(i.g.H=i.s),i.g.O=0;var r=uo(i.oa);gn(r,"RID","rpc"),gn(r,"SID",i.J),gn(r,"CI",i.N?"0":"1"),gn(r,"AID",i.U),qo(i,r),gn(r,"TYPE","xmlhttp"),i.o&&i.s&&Vs(r,i.o,i.s),i.K&&i.g.setTimeout(i.K);var n=i.g;i=i.la,n.K=1,n.v=Wp(uo(r)),n.s=null,n.U=!0,_b(n,i)}function Jp(i){null!=i.v&&(gt.clearTimeout(i.v),i.v=null)}function Mb(i,r){var n=null;if(i.g==r){Jp(i),Wl(i),i.g=null;var s=2}else{if(!ny(i.i,r))return;n=r.D,aA(i.i,r),s=1}if(i.I=r.N,0!=i.G)if(r.i)if(1==s){n=r.s?r.s.length:0,r=Date.now()-r.F;var l=i.C;Ir(s=Vp(),new Wo(s,n,r,l)),Ga(i)}else wc(i);else if(3==(l=r.o)||0==l&&0<i.I||!(1==s&&function(i,r){return!($E(i.i)>=i.i.j-(i.m?1:0)||(i.m?(i.l=r.D.concat(i.l),0):1==i.G||2==i.G||i.C>=(i.Xa?0:i.Ya)||(i.m=jl(Lr(i.Ha,i,r),Rb(i,i.C)),i.C++,0)))}(i,r)||2==s&&Gl(i)))switch(n&&0<n.length&&(r=i.i,r.i=r.i.concat(n)),l){case 1:ql(i,5);break;case 4:ql(i,10);break;case 3:ql(i,6);break;default:ql(i,2)}}function Rb(i,r){let n=i.Pa+Math.floor(Math.random()*i.$a);return i.j||(n*=2),n*r}function ql(i,r){if(i.h.info("Error code "+r),2==r){var n=null;i.j&&(n=null);var s=Lr(i.jb,i);n||(n=new Ba("//www.google.com/images/cleardot.gif"),gt.location&&"http"==gt.location.protocol||wb(n,"https"),Wp(n)),function(i,r){const n=new uh;if(gt.Image){const s=new Image;s.onload=sh(Yp,n,s,"TestLoadImage: loaded",!0,r),s.onerror=sh(Yp,n,s,"TestLoadImage: error",!1,r),s.onabort=sh(Yp,n,s,"TestLoadImage: abort",!1,r),s.ontimeout=sh(Yp,n,s,"TestLoadImage: timeout",!1,r),gt.setTimeout(function(){s.ontimeout&&s.ontimeout()},1e4),s.src=i}else r(!1)}(n.toString(),s)}else ni(2);i.G=0,i.j&&i.j.va(r),xb(i),ds(i)}function xb(i){i.G=0,i.I=-1,i.j&&((0!=Ls(i.i).length||0!=i.l.length)&&(i.i.i.length=0,CE(i.l),i.l.length=0),i.j.ua())}function kb(i,r,n){let s=function(i){return i instanceof Ba?uo(i):new Ba(i,void 0)}(n);if(""!=s.i)r&&X_(s,r+"."+s.i),ey(s,s.m);else{const l=gt.location;s=function(i,r,n,s){var l=new Ba(null,void 0);return i&&wb(l,i),r&&X_(l,r),n&&ey(l,n),s&&(l.l=s),l}(l.protocol,r?r+"."+l.hostname:l.hostname,+l.port,n)}return i.aa&&L_(i.aa,function(l,c){gn(s,c,l)}),n=i.sa,(r=i.D)&&n&&gn(s,r,n),gn(s,"VER",i.ma),qo(i,s),s}function Ob(i,r,n){if(r&&!i.H)throw Error("Can't create secondary domain capable XhrIo object.");return(r=new rr(n&&i.Ba&&!i.qa?new fh({ib:!0}):i.qa)).L=i.H,r}function Pb(){}function Xp(){if(Bl&&!(10<=Number(Q0)))throw Error("Environmental error: no available transport.")}function hs(i,r){Dr.call(this),this.g=new Br(r),this.l=i,this.h=r&&r.messageUrlParams||null,i=r&&r.messageHeaders||null,r&&r.clientProtocolHeaderRequired&&(i?i["X-Client-Protocol"]="webchannel":i={"X-Client-Protocol":"webchannel"}),this.g.s=i,i=r&&r.initMessageHeaders||null,r&&r.messageContentType&&(i?i["X-WebChannel-Content-Type"]=r.messageContentType:i={"X-WebChannel-Content-Type":r.messageContentType}),r&&r.ya&&(i?i["X-WebChannel-Client-Profile"]=r.ya:i={"X-WebChannel-Client-Profile":r.ya}),this.g.P=i,(i=r&&r.httpHeadersOverwriteParam)&&!Y0(i)&&(this.g.o=i),this.A=r&&r.supportsCrossDomainXhr||!1,this.v=r&&r.sendRawJson||!1,(r=r&&r.httpSessionIdParam)&&!Y0(r)&&(this.g.D=r,null!==(i=this.h)&&r in i&&r in(i=this.h)&&delete i[r]),this.j=new Ec(this)}function Fb(i){cc.call(this);var r=i.__sm__;if(r){e:{for(const n in r){i=n;break e}i=void 0}(this.i=i)&&(i=this.i,r=null!==r&&i in r?r[i]:void 0),this.data=r}else this.data=i}function ZE(){pb.call(this),this.status=1}function Ec(i){this.g=i}(Ue=rr.prototype).ea=function(i,r,n,s){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+i);r=r?r.toUpperCase():"GET",this.H=i,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Bp.g(),this.C=function(i){return i.h||(i.h=i.i())}(this.u?this.u:Bp),this.g.onreadystatechange=Lr(this.Fa,this);try{this.F=!0,this.g.open(r,String(i),!0),this.F=!1}catch(c){return void Kp(this,c)}i=n||"";const l=new pc(this.headers);s&&bb(s,function(c,g){l.set(g,c)}),s=function(i){e:{var r=dA;const n=i.length,s="string"==typeof i?i.split(""):i;for(let l=0;l<n;l++)if(l in s&&r.call(void 0,s[l],l,i)){r=l;break e}r=-1}return 0>r?null:"string"==typeof i?i.charAt(r):i[r]}(l.T()),n=gt.FormData&&i instanceof gt.FormData,!(0<=FS(uA,r))||s||n||l.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),l.forEach(function(c,g){this.g.setRequestHeader(g,c)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{ph(this),0<this.B&&((this.K=function(i){return Bl&&jS()&&"number"==typeof i.timeout&&void 0!==i.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Lr(this.pa,this)):this.A=lb(this.pa,this.B,this)),this.v=!0,this.g.send(i),this.v=!1}catch(c){Kp(this,c)}},Ue.pa=function(){void 0!==rh&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Ir(this,"timeout"),this.abort(8))},Ue.abort=function(i){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=i||7,Ir(this,"complete"),Ir(this,"abort"),Wi(this))},Ue.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Wi(this,!0)),rr.Z.M.call(this)},Ue.Fa=function(){this.s||(this.F||this.v||this.l?Sb(this):this.cb())},Ue.cb=function(){Sb(this)},Ue.ba=function(){try{return 2<Ha(this)?this.g.status:-1}catch(i){return-1}},Ue.ga=function(){try{return this.g?this.g.responseText:""}catch(i){return""}},Ue.Qa=function(i){if(this.g){var r=this.g.responseText;return i&&0==r.indexOf(i)&&(r=r.substring(i.length)),Nb(r)}},Ue.Da=function(){return this.m},Ue.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(Ue=Br.prototype).ma=8,Ue.G=1,Ue.hb=function(i){try{this.h.info("Origin Trials invoked: "+i)}catch(r){}},Ue.Ha=function(i){if(this.m)if(this.m=null,1==this.G){if(!i){this.V=Math.floor(1e5*Math.random()),i=this.V++;const l=new Hp(this,this.h,i,void 0);let c=this.s;if(this.P&&(c?(c=V_(c),Oa(c,this.P)):c=this.P),null===this.o&&(l.H=c),this.ja)e:{for(var r=0,n=0;n<this.l.length;n++){var s=this.l[n];if(void 0===(s="__data__"in s.g&&"string"==typeof(s=s.g.__data__)?s.length:void 0))break;if(4096<(r+=s)){r=n;break e}if(4096===r||n===this.l.length-1){r=n+1;break e}}r=1e3}else r=1e3;r=bc(this,l,r),gn(n=uo(this.F),"RID",i),gn(n,"CVER",22),this.D&&gn(n,"X-HTTP-Session-Id",this.D),qo(this,n),this.o&&c&&Vs(n,this.o,c),ry(this.i,l),this.Ra&&gn(n,"TYPE","init"),this.ja?(gn(n,"$req",r),gn(n,"SID","null"),l.$=!0,mb(l,n,null)):mb(l,n,r),this.G=2}}else 3==this.G&&(i?vc(this,i):0==this.l.length||ty(this.i)||vc(this))},Ue.Ga=function(){if(this.u=null,Cc(this),this.$&&!(this.L||null==this.g||0>=this.O)){var i=2*this.O;this.h.info("BP detection timer enabled: "+i),this.B=jl(Lr(this.bb,this),i)}},Ue.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,ni(10),yc(this),Cc(this))},Ue.ab=function(){null!=this.v&&(this.v=null,yc(this),Gl(this),ni(19))},Ue.jb=function(i){i?(this.h.info("Successfully pinged google.com"),ni(2)):(this.h.info("Failed to ping google.com"),ni(1))},(Ue=Pb.prototype).xa=function(){},Ue.wa=function(){},Ue.va=function(){},Ue.ua=function(){},Ue.Oa=function(){},Xp.prototype.g=function(i,r){return new hs(i,r)},ti(hs,Dr),hs.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var i=this.g,r=this.l,n=this.h||void 0;i.Wa&&(i.h.info("Origin Trials enabled."),Fs(Lr(i.hb,i,r))),ni(0),i.W=r,i.aa=n||{},i.N=i.X,i.F=kb(i,null,i.W),Ga(i)},hs.prototype.close=function(){$a(this.g)},hs.prototype.u=function(i){if("string"==typeof i){var r={};r.__data__=i,Qp(this.g,r)}else this.v?((r={}).__data__=q_(i),Qp(this.g,r)):Qp(this.g,i)},hs.prototype.M=function(){this.g.j=null,delete this.j,$a(this.g),delete this.g,hs.Z.M.call(this)},ti(Fb,cc),ti(ZE,pb),ti(Ec,Pb),Ec.prototype.xa=function(){Ir(this.g,"a")},Ec.prototype.wa=function(i){Ir(this.g,new Fb(i))},Ec.prototype.va=function(i){Ir(this.g,new ZE(i))},Ec.prototype.ua=function(){Ir(this.g,"b")},Xp.prototype.createWebChannel=Xp.prototype.g,hs.prototype.send=hs.prototype.u,hs.prototype.open=hs.prototype.m,hs.prototype.close=hs.prototype.close,K_.NO_ERROR=0,K_.TIMEOUT=8,K_.HTTP_ERROR=6,FE.COMPLETE="complete",fb.EventType=Fa,Fa.OPEN="a",Fa.CLOSE="b",Fa.ERROR="c",Fa.MESSAGE="d",Dr.prototype.listen=Dr.prototype.N,rr.prototype.listenOnce=rr.prototype.O,rr.prototype.getLastError=rr.prototype.La,rr.prototype.getLastErrorCode=rr.prototype.Da,rr.prototype.getStatus=rr.prototype.ba,rr.prototype.getResponseJson=rr.prototype.Qa,rr.prototype.getResponseText=rr.prototype.ga,rr.prototype.send=rr.prototype.ea;var KE=Fr.createWebChannelTransport=function(){return new Xp},hA=Fr.getStatEventTarget=function(){return Vp()},QE=Fr.ErrorCode=K_,fA=Fr.EventType=FE,JE=Fr.Event=dh,XE=Fr.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},eD=Fr.FetchXmlHttpFactory=fh,sy=Fr.WebChannel=fb,pA=Fr.XhrIo=rr;class ri{constructor(r){this.uid=r}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(r){return r.uid===this.uid}}ri.UNAUTHENTICATED=new ri(null),ri.GOOGLE_CREDENTIALS=new ri("google-credentials-uid"),ri.FIRST_PARTY=new ri("first-party-uid"),ri.MOCK_USER=new ri("mock-user");let mh="9.1.0";const Wa=new ka.Yd("@firebase/firestore");function tD(){return Wa.logLevel}function Oe(i,...r){if(Wa.logLevel<=ka.in.DEBUG){const n=r.map(Lb);Wa.debug(`Firestore (${mh}): ${i}`,...n)}}function ir(i,...r){if(Wa.logLevel<=ka.in.ERROR){const n=r.map(Lb);Wa.error(`Firestore (${mh}): ${i}`,...n)}}function oy(i,...r){if(Wa.logLevel<=ka.in.WARN){const n=r.map(Lb);Wa.warn(`Firestore (${mh}): ${i}`,...n)}}function Lb(i){if("string"==typeof i)return i;try{return JSON.stringify(i)}catch(n){return i}}function Ze(i="Unexpected state"){const r=`FIRESTORE (${mh}) INTERNAL ASSERTION FAILED: `+i;throw ir(r),new Error(r)}function ct(i,r){i||Ze()}function Ve(i,r){return i}const de={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Me extends Error{constructor(r,n){super(n),this.code=r,this.message=n,this.name="FirebaseError",this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Ur{constructor(){this.promise=new Promise((r,n)=>{this.resolve=r,this.reject=n})}}class nD{constructor(r,n){this.user=n,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization=`Bearer ${r}`}}class rD{getToken(){return Promise.resolve(null)}invalidateToken(){}start(r,n){r.enqueueRetryable(()=>n(ri.UNAUTHENTICATED))}shutdown(){}}class Gk{constructor(r){this.token=r,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(r,n){this.changeListener=n,r.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class gA{constructor(r){this.t=r,this.currentUser=ri.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(r,n){var s=this;let l=this.i;const c=T=>this.i!==l?(l=this.i,n(T)):Promise.resolve();let g=new Ur;this.o=()=>{this.i++,this.currentUser=this.u(),g.resolve(),g=new Ur,r.enqueueRetryable(()=>c(this.currentUser))};const _=()=>{const T=g;r.enqueueRetryable((0,we.Z)(function*(){yield T.promise,yield c(s.currentUser)}))},w=T=>{Oe("FirebaseCredentialsProvider","Auth detected"),this.auth=T,this.auth.addAuthTokenListener(this.o),_()};this.t.onInit(T=>w(T)),setTimeout(()=>{if(!this.auth){const T=this.t.getImmediate({optional:!0});T?w(T):(Oe("FirebaseCredentialsProvider","Auth not yet detected"),g.resolve(),g=new Ur)}},0),_()}getToken(){const r=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(s=>this.i!==r?(Oe("FirebaseCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(ct("string"==typeof s.accessToken),new nD(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const r=this.auth&&this.auth.getUid();return ct(null===r||"string"==typeof r),new ri(r)}}class _h{constructor(r,n,s){this.h=r,this.l=n,this.m=s,this.type="FirstParty",this.user=ri.FIRST_PARTY}get authHeaders(){const r={"X-Goog-AuthUser":this.l},n=this.h.auth.getAuthHeaderValueForFirstParty([]);return n&&(r.Authorization=n),this.m&&(r["X-Goog-Iam-Authorization-Token"]=this.m),r}}class mA{constructor(r,n,s){this.h=r,this.l=n,this.m=s}getToken(){return Promise.resolve(new _h(this.h,this.l,this.m))}start(r,n){r.enqueueRetryable(()=>n(ri.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class qi{constructor(r,n){this.previousValue=r,n&&(n.sequenceNumberHandler=s=>this.g(s),this.p=s=>n.writeSequenceNumber(s))}g(r){return this.previousValue=Math.max(r,this.previousValue),this.previousValue}next(){const r=++this.previousValue;return this.p&&this.p(r),r}}function _A(i){const r="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(i);if(r&&"function"==typeof r.getRandomValues)r.getRandomValues(n);else for(let s=0;s<i;s++)n[s]=Math.floor(256*Math.random());return n}qi.T=-1;class Bb{static I(){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/r.length)*r.length;let s="";for(;s.length<20;){const l=_A(40);for(let c=0;c<l.length;++c)s.length<20&&l[c]<n&&(s+=r.charAt(l[c]%r.length))}return s}}function At(i,r){return i<r?-1:i>r?1:0}function yh(i,r,n){return i.length===r.length&&i.every((s,l)=>n(s,r[l]))}function Ub(i){return i+"\0"}class Tr{constructor(r,n){if(this.seconds=r,this.nanoseconds=n,n<0)throw new Me(de.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Me(de.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(r<-62135596800)throw new Me(de.INVALID_ARGUMENT,"Timestamp seconds out of range: "+r);if(r>=253402300800)throw new Me(de.INVALID_ARGUMENT,"Timestamp seconds out of range: "+r)}static now(){return Tr.fromMillis(Date.now())}static fromDate(r){return Tr.fromMillis(r.getTime())}static fromMillis(r){const n=Math.floor(r/1e3),s=Math.floor(1e6*(r-1e3*n));return new Tr(n,s)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(r){return this.seconds===r.seconds?At(this.nanoseconds,r.nanoseconds):At(this.seconds,r.seconds)}isEqual(r){return r.seconds===this.seconds&&r.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Ct{constructor(r){this.timestamp=r}static fromTimestamp(r){return new Ct(r)}static min(){return new Ct(new Tr(0,0))}compareTo(r){return this.timestamp._compareTo(r.timestamp)}isEqual(r){return this.timestamp.isEqual(r.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function iD(i){let r=0;for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&r++;return r}function Dc(i,r){for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&r(n,i[n])}function sD(i){for(const r in i)if(Object.prototype.hasOwnProperty.call(i,r))return!1;return!0}class vh{constructor(r,n,s){void 0===n?n=0:n>r.length&&Ze(),void 0===s?s=r.length-n:s>r.length-n&&Ze(),this.segments=r,this.offset=n,this.len=s}get length(){return this.len}isEqual(r){return 0===vh.comparator(this,r)}child(r){const n=this.segments.slice(this.offset,this.limit());return r instanceof vh?r.forEach(s=>{n.push(s)}):n.push(r),this.construct(n)}limit(){return this.offset+this.length}popFirst(r){return this.construct(this.segments,this.offset+(r=void 0===r?1:r),this.length-r)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(r){return this.segments[this.offset+r]}isEmpty(){return 0===this.length}isPrefixOf(r){if(r.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==r.get(n))return!1;return!0}isImmediateParentOf(r){if(this.length+1!==r.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==r.get(n))return!1;return!0}forEach(r){for(let n=this.offset,s=this.limit();n<s;n++)r(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(r,n){const s=Math.min(r.length,n.length);for(let l=0;l<s;l++){const c=r.get(l),g=n.get(l);if(c<g)return-1;if(c>g)return 1}return r.length<n.length?-1:r.length>n.length?1:0}}class zt extends vh{construct(r,n,s){return new zt(r,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...r){const n=[];for(const s of r){if(s.indexOf("//")>=0)throw new Me(de.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter(l=>l.length>0))}return new zt(n)}static emptyPath(){return new zt([])}}const oD=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Nr extends vh{construct(r,n,s){return new Nr(r,n,s)}static isValidIdentifier(r){return oD.test(r)}canonicalString(){return this.toArray().map(r=>(r=r.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Nr.isValidIdentifier(r)||(r="`"+r+"`"),r)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Nr(["__name__"])}static fromServerFormat(r){const n=[];let s="",l=0;const c=()=>{if(0===s.length)throw new Me(de.INVALID_ARGUMENT,`Invalid field path (${r}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let g=!1;for(;l<r.length;){const _=r[l];if("\\"===_){if(l+1===r.length)throw new Me(de.INVALID_ARGUMENT,"Path has trailing escape character: "+r);const w=r[l+1];if("\\"!==w&&"."!==w&&"`"!==w)throw new Me(de.INVALID_ARGUMENT,"Path has invalid escape sequence: "+r);s+=w,l+=2}else"`"===_?(g=!g,l++):"."!==_||g?(s+=_,l++):(c(),l++)}if(c(),g)throw new Me(de.INVALID_ARGUMENT,"Unterminated ` in path: "+r);return new Nr(n)}static emptyPath(){return new Nr([])}}class zl{constructor(r){this.fields=r,r.sort(Nr.comparator)}covers(r){for(const n of this.fields)if(n.isPrefixOf(r))return!0;return!1}isEqual(r){return yh(this.fields,r.fields,(n,s)=>n.isEqual(s))}}class sr{constructor(r){this.binaryString=r}static fromBase64String(r){const n=atob(r);return new sr(n)}static fromUint8Array(r){const n=function(s){let l="";for(let c=0;c<s.length;++c)l+=String.fromCharCode(s[c]);return l}(r);return new sr(n)}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(r){const n=new Uint8Array(r.length);for(let s=0;s<r.length;s++)n[s]=r.charCodeAt(s);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(r){return At(this.binaryString,r.binaryString)}isEqual(r){return this.binaryString===r.binaryString}}sr.EMPTY_BYTE_STRING=new sr("");const yA=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ic(i){if(ct(!!i),"string"==typeof i){let r=0;const n=yA.exec(i);if(ct(!!n),n[1]){let l=n[1];l=(l+"000000000").substr(0,9),r=Number(l)}const s=new Date(i);return{seconds:Math.floor(s.getTime()/1e3),nanos:r}}return{seconds:Dn(i.seconds),nanos:Dn(i.nanos)}}function Dn(i){return"number"==typeof i?i:"string"==typeof i?Number(i):0}function bh(i){return"string"==typeof i?sr.fromBase64String(i):sr.fromUint8Array(i)}function eg(i){var r,n;return"server_timestamp"===(null===(n=((null===(r=null==i?void 0:i.mapValue)||void 0===r?void 0:r.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function ay(i){const r=i.mapValue.fields.__previous_value__;return eg(r)?ay(r):r}function tg(i){const r=Ic(i.mapValue.fields.__local_write_time__.timestampValue);return new Tr(r.seconds,r.nanos)}function qa(i){return null==i}function wh(i){return 0===i&&1/i==-1/0}function Hb(i){return"number"==typeof i&&Number.isInteger(i)&&!wh(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}class Ke{constructor(r){this.path=r}static fromPath(r){return new Ke(zt.fromString(r))}static fromName(r){return new Ke(zt.fromString(r).popFirst(5))}hasCollectionId(r){return this.path.length>=2&&this.path.get(this.path.length-2)===r}isEqual(r){return null!==r&&0===zt.comparator(this.path,r.path)}toString(){return this.path.toString()}static comparator(r,n){return zt.comparator(r.path,n.path)}static isDocumentKey(r){return r.length%2==0}static fromSegments(r){return new Ke(new zt(r.slice()))}}function Tc(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?eg(i)?4:10:Ze()}function Bs(i,r){const n=Tc(i);if(n!==Tc(r))return!1;switch(n){case 0:return!0;case 1:return i.booleanValue===r.booleanValue;case 4:return tg(i).isEqual(tg(r));case 3:return function(s,l){if("string"==typeof s.timestampValue&&"string"==typeof l.timestampValue&&s.timestampValue.length===l.timestampValue.length)return s.timestampValue===l.timestampValue;const c=Ic(s.timestampValue),g=Ic(l.timestampValue);return c.seconds===g.seconds&&c.nanos===g.nanos}(i,r);case 5:return i.stringValue===r.stringValue;case 6:return l=r,bh(i.bytesValue).isEqual(bh(l.bytesValue));case 7:return i.referenceValue===r.referenceValue;case 8:return function(s,l){return Dn(s.geoPointValue.latitude)===Dn(l.geoPointValue.latitude)&&Dn(s.geoPointValue.longitude)===Dn(l.geoPointValue.longitude)}(i,r);case 2:return function(s,l){if("integerValue"in s&&"integerValue"in l)return Dn(s.integerValue)===Dn(l.integerValue);if("doubleValue"in s&&"doubleValue"in l){const c=Dn(s.doubleValue),g=Dn(l.doubleValue);return c===g?wh(c)===wh(g):isNaN(c)&&isNaN(g)}return!1}(i,r);case 9:return yh(i.arrayValue.values||[],r.arrayValue.values||[],Bs);case 10:return function(s,l){const c=s.mapValue.fields||{},g=l.mapValue.fields||{};if(iD(c)!==iD(g))return!1;for(const _ in c)if(c.hasOwnProperty(_)&&(void 0===g[_]||!Bs(c[_],g[_])))return!1;return!0}(i,r);default:return Ze()}var l}function Nc(i,r){return void 0!==(i.values||[]).find(n=>Bs(n,r))}function Ch(i,r){const n=Tc(i),s=Tc(r);if(n!==s)return At(n,s);switch(n){case 0:return 0;case 1:return At(i.booleanValue,r.booleanValue);case 2:return function(l,c){const g=Dn(l.integerValue||l.doubleValue),_=Dn(c.integerValue||c.doubleValue);return g<_?-1:g>_?1:g===_?0:isNaN(g)?isNaN(_)?0:-1:1}(i,r);case 3:return jb(i.timestampValue,r.timestampValue);case 4:return jb(tg(i),tg(r));case 5:return At(i.stringValue,r.stringValue);case 6:return function(l,c){const g=bh(l),_=bh(c);return g.compareTo(_)}(i.bytesValue,r.bytesValue);case 7:return function(l,c){const g=l.split("/"),_=c.split("/");for(let w=0;w<g.length&&w<_.length;w++){const T=At(g[w],_[w]);if(0!==T)return T}return At(g.length,_.length)}(i.referenceValue,r.referenceValue);case 8:return function(l,c){const g=At(Dn(l.latitude),Dn(c.latitude));return 0!==g?g:At(Dn(l.longitude),Dn(c.longitude))}(i.geoPointValue,r.geoPointValue);case 9:return function(l,c){const g=l.values||[],_=c.values||[];for(let w=0;w<g.length&&w<_.length;++w){const T=Ch(g[w],_[w]);if(T)return T}return At(g.length,_.length)}(i.arrayValue,r.arrayValue);case 10:return function(l,c){const g=l.fields||{},_=Object.keys(g),w=c.fields||{},T=Object.keys(w);_.sort(),T.sort();for(let S=0;S<_.length&&S<T.length;++S){const A=At(_[S],T[S]);if(0!==A)return A;const x=Ch(g[_[S]],w[T[S]]);if(0!==x)return x}return At(_.length,T.length)}(i.mapValue,r.mapValue);default:throw Ze()}}function jb(i,r){if("string"==typeof i&&"string"==typeof r&&i.length===r.length)return At(i,r);const n=Ic(i),s=Ic(r),l=At(n.seconds,s.seconds);return 0!==l?l:At(n.nanos,s.nanos)}function ng(i){return ly(i)}function ly(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?function(s){const l=Ic(s);return`time(${l.seconds},${l.nanos})`}(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?bh(i.bytesValue).toBase64():"referenceValue"in i?Ke.fromName(i.referenceValue).toString():"geoPointValue"in i?`geo(${(r=i.geoPointValue).latitude},${r.longitude})`:"arrayValue"in i?function(s){let l="[",c=!0;for(const g of s.values||[])c?c=!1:l+=",",l+=ly(g);return l+"]"}(i.arrayValue):"mapValue"in i?function(s){const l=Object.keys(s.fields||{}).sort();let c="{",g=!0;for(const _ of l)g?g=!1:c+=",",c+=`${_}:${ly(s.fields[_])}`;return c+"}"}(i.mapValue):Ze();var r}function Eh(i,r){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${r.path.canonicalString()}`}}function rg(i){return!!i&&"integerValue"in i}function uy(i){return!!i&&"arrayValue"in i}function aD(i){return!!i&&"nullValue"in i}function $b(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function ig(i){return!!i&&"mapValue"in i}function Sc(i){if(i.geoPointValue)return{geoPointValue:Object.assign({},i.geoPointValue)};if(i.timestampValue&&"object"==typeof i.timestampValue)return{timestampValue:Object.assign({},i.timestampValue)};if(i.mapValue){const r={mapValue:{fields:{}}};return Dc(i.mapValue.fields,(n,s)=>r.mapValue.fields[n]=Sc(s)),r}if(i.arrayValue){const r={arrayValue:{values:[]}};for(let n=0;n<(i.arrayValue.values||[]).length;++n)r.arrayValue.values[n]=Sc(i.arrayValue.values[n]);return r}return Object.assign({},i)}class Hr{constructor(r){this.value=r}static empty(){return new Hr({mapValue:{}})}field(r){if(r.isEmpty())return this.value;{let n=this.value;for(let s=0;s<r.length-1;++s)if(n=(n.mapValue.fields||{})[r.get(s)],!ig(n))return null;return n=(n.mapValue.fields||{})[r.lastSegment()],n||null}}set(r,n){this.getFieldsMap(r.popLast())[r.lastSegment()]=Sc(n)}setAll(r){let n=Nr.emptyPath(),s={},l=[];r.forEach((g,_)=>{if(!n.isImmediateParentOf(_)){const w=this.getFieldsMap(n);this.applyChanges(w,s,l),s={},l=[],n=_.popLast()}g?s[_.lastSegment()]=Sc(g):l.push(_.lastSegment())});const c=this.getFieldsMap(n);this.applyChanges(c,s,l)}delete(r){const n=this.field(r.popLast());ig(n)&&n.mapValue.fields&&delete n.mapValue.fields[r.lastSegment()]}isEqual(r){return Bs(this.value,r.value)}getFieldsMap(r){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<r.length;++s){let l=n.mapValue.fields[r.get(s)];ig(l)&&l.mapValue.fields||(l={mapValue:{fields:{}}},n.mapValue.fields[r.get(s)]=l),n=l}return n.mapValue.fields}applyChanges(r,n,s){Dc(n,(l,c)=>r[l]=c);for(const l of s)delete r[l]}clone(){return new Hr(Sc(this.value))}}function lD(i){const r=[];return Dc(i.fields,(n,s)=>{const l=new Nr([n]);if(ig(s)){const c=lD(s.mapValue).fields;if(0===c.length)r.push(l);else for(const g of c)r.push(l.child(g))}else r.push(l)}),new zl(r)}class mn{constructor(r,n,s,l,c){this.key=r,this.documentType=n,this.version=s,this.data=l,this.documentState=c}static newInvalidDocument(r){return new mn(r,0,Ct.min(),Hr.empty(),0)}static newFoundDocument(r,n,s){return new mn(r,1,n,s,0)}static newNoDocument(r,n){return new mn(r,2,n,Hr.empty(),0)}static newUnknownDocument(r,n){return new mn(r,3,n,Hr.empty(),2)}convertToFoundDocument(r,n){return this.version=r,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(r){return this.version=r,this.documentType=2,this.data=Hr.empty(),this.documentState=0,this}convertToUnknownDocument(r){return this.version=r,this.documentType=3,this.data=Hr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(r){return r instanceof mn&&this.key.isEqual(r.key)&&this.version.isEqual(r.version)&&this.documentType===r.documentType&&this.documentState===r.documentState&&this.data.isEqual(r.data)}clone(){return new mn(this.key,this.documentType,this.version,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class uD{constructor(r,n=null,s=[],l=[],c=null,g=null,_=null){this.path=r,this.collectionGroup=n,this.orderBy=s,this.filters=l,this.limit=c,this.startAt=g,this.endAt=_,this.A=null}}function cy(i,r=null,n=[],s=[],l=null,c=null,g=null){return new uD(i,r,n,s,l,c,g)}function Yl(i){const r=Ve(i);if(null===r.A){let n=r.path.canonicalString();null!==r.collectionGroup&&(n+="|cg:"+r.collectionGroup),n+="|f:",n+=r.filters.map(s=>function(i){return i.field.canonicalString()+i.op.toString()+ng(i.value)}(s)).join(","),n+="|ob:",n+=r.orderBy.map(s=>{return(l=s).field.canonicalString()+l.dir;var l}).join(","),qa(r.limit)||(n+="|l:",n+=r.limit),r.startAt&&(n+="|lb:",n+=ag(r.startAt)),r.endAt&&(n+="|ub:",n+=ag(r.endAt)),r.A=n}return r.A}function sg(i,r){if(i.limit!==r.limit||i.orderBy.length!==r.orderBy.length)return!1;for(let l=0;l<i.orderBy.length;l++)if(!EA(i.orderBy[l],r.orderBy[l]))return!1;if(i.filters.length!==r.filters.length)return!1;for(let l=0;l<i.filters.length;l++)if((n=i.filters[l]).op!==(s=r.filters[l]).op||!n.field.isEqual(s.field)||!Bs(n.value,s.value))return!1;var n,s;return i.collectionGroup===r.collectionGroup&&!!i.path.isEqual(r.path)&&!!mD(i.startAt,r.startAt)&&mD(i.endAt,r.endAt)}function og(i){return Ke.isDocumentKey(i.path)&&null===i.collectionGroup&&0===i.filters.length}class ii extends class{}{constructor(r,n,s){super(),this.field=r,this.op=n,this.value=s}static create(r,n,s){return r.isKeyField()?"in"===n||"not-in"===n?this.R(r,n,s):new hD(r,n,s):"array-contains"===n?new bA(r,s):"in"===n?new wA(r,s):"not-in"===n?new gD(r,s):"array-contains-any"===n?new CA(r,s):new ii(r,n,s)}static R(r,n,s){return"in"===n?new fD(r,s):new pD(r,s)}matches(r){const n=r.data.field(this.field);return"!="===this.op?null!==n&&this.P(Ch(n,this.value)):null!==n&&Tc(this.value)===Tc(n)&&this.P(Ch(n,this.value))}P(r){switch(this.op){case"<":return r<0;case"<=":return r<=0;case"==":return 0===r;case"!=":return 0!==r;case">":return r>0;case">=":return r>=0;default:return Ze()}}v(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class hD extends ii{constructor(r,n,s){super(r,n,s),this.key=Ke.fromName(s.referenceValue)}matches(r){const n=Ke.comparator(r.key,this.key);return this.P(n)}}class fD extends ii{constructor(r,n){super(r,"in",n),this.keys=vA(0,n)}matches(r){return this.keys.some(n=>n.isEqual(r.key))}}class pD extends ii{constructor(r,n){super(r,"not-in",n),this.keys=vA(0,n)}matches(r){return!this.keys.some(n=>n.isEqual(r.key))}}function vA(i,r){var n;return((null===(n=r.arrayValue)||void 0===n?void 0:n.values)||[]).map(s=>Ke.fromName(s.referenceValue))}class bA extends ii{constructor(r,n){super(r,"array-contains",n)}matches(r){const n=r.data.field(this.field);return uy(n)&&Nc(n.arrayValue,this.value)}}class wA extends ii{constructor(r,n){super(r,"in",n)}matches(r){const n=r.data.field(this.field);return null!==n&&Nc(this.value.arrayValue,n)}}class gD extends ii{constructor(r,n){super(r,"not-in",n)}matches(r){if(Nc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=r.data.field(this.field);return null!==n&&!Nc(this.value.arrayValue,n)}}class CA extends ii{constructor(r,n){super(r,"array-contains-any",n)}matches(r){const n=r.data.field(this.field);return!(!uy(n)||!n.arrayValue.values)&&n.arrayValue.values.some(s=>Nc(this.value.arrayValue,s))}}class xn{constructor(r,n){this.position=r,this.before=n}}function ag(i){return`${i.before?"b":"a"}:${i.position.map(r=>ng(r)).join(",")}`}class Dh{constructor(r,n="asc"){this.field=r,this.dir=n}}function EA(i,r){return i.dir===r.dir&&i.field.isEqual(r.field)}function Gb(i,r,n){let s=0;for(let l=0;l<i.position.length;l++){const c=r[l],g=i.position[l];if(s=c.field.isKeyField()?Ke.comparator(Ke.fromName(g.referenceValue),n.key):Ch(g,n.data.field(c.field)),"desc"===c.dir&&(s*=-1),0!==s)break}return i.before?s<=0:s<0}function mD(i,r){if(null===i)return null===r;if(null===r||i.before!==r.before||i.position.length!==r.position.length)return!1;for(let n=0;n<i.position.length;n++)if(!Bs(i.position[n],r.position[n]))return!1;return!0}class zo{constructor(r,n=null,s=[],l=[],c=null,g="F",_=null,w=null){this.path=r,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=l,this.limit=c,this.limitType=g,this.startAt=_,this.endAt=w,this.V=null,this.S=null}}function Wb(i,r,n,s,l,c,g,_){return new zo(i,r,n,s,l,c,g,_)}function co(i){return new zo(i)}function dy(i){return!qa(i.limit)&&"F"===i.limitType}function hy(i){return!qa(i.limit)&&"L"===i.limitType}function fy(i){return i.explicitOrderBy.length>0?i.explicitOrderBy[0].field:null}function qb(i){for(const r of i.filters)if(r.v())return r.field;return null}function py(i){return null!==i.collectionGroup}function lg(i){const r=Ve(i);if(null===r.V){r.V=[];const n=qb(r),s=fy(r);if(null!==n&&null===s)n.isKeyField()||r.V.push(new Dh(n)),r.V.push(new Dh(Nr.keyField(),"asc"));else{let l=!1;for(const c of r.explicitOrderBy)r.V.push(c),c.field.isKeyField()&&(l=!0);if(!l){const c=r.explicitOrderBy.length>0?r.explicitOrderBy[r.explicitOrderBy.length-1].dir:"asc";r.V.push(new Dh(Nr.keyField(),c))}}}return r.V}function zi(i){const r=Ve(i);if(!r.S)if("F"===r.limitType)r.S=cy(r.path,r.collectionGroup,lg(r),r.filters,r.limit,r.startAt,r.endAt);else{const n=[];for(const c of lg(r))n.push(new Dh(c.field,"desc"===c.dir?"asc":"desc"));const s=r.endAt?new xn(r.endAt.position,!r.endAt.before):null,l=r.startAt?new xn(r.startAt.position,!r.startAt.before):null;r.S=cy(r.path,r.collectionGroup,n,r.filters,r.limit,s,l)}return r.S}function gy(i,r,n){return new zo(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),r,n,i.startAt,i.endAt)}function Yi(i,r){return sg(zi(i),zi(r))&&i.limitType===r.limitType}function _D(i){return`${Yl(zi(i))}|lt:${i.limitType}`}function my(i){return`Query(target=${function(i){let r=i.path.canonicalString();return null!==i.collectionGroup&&(r+=" collectionGroup="+i.collectionGroup),i.filters.length>0&&(r+=`, filters: [${i.filters.map(n=>{return`${(s=n).field.canonicalString()} ${s.op} ${ng(s.value)}`;var s}).join(", ")}]`),qa(i.limit)||(r+=", limit: "+i.limit),i.orderBy.length>0&&(r+=`, orderBy: [${i.orderBy.map(n=>{return`${(s=n).field.canonicalString()} (${s.dir})`;var s}).join(", ")}]`),i.startAt&&(r+=", startAt: "+ag(i.startAt)),i.endAt&&(r+=", endAt: "+ag(i.endAt)),`Target(${r})`}(zi(i))}; limitType=${i.limitType})`}function Zi(i,r){return r.isFoundDocument()&&function(n,s){const l=s.key.path;return null!==n.collectionGroup?s.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(l):Ke.isDocumentKey(n.path)?n.path.isEqual(l):n.path.isImmediateParentOf(l)}(i,r)&&function(n,s){for(const l of n.explicitOrderBy)if(!l.field.isKeyField()&&null===s.data.field(l.field))return!1;return!0}(i,r)&&function(n,s){for(const l of n.filters)if(!l.matches(s))return!1;return!0}(i,r)&&(s=r,!((n=i).startAt&&!Gb(n.startAt,lg(n),s)||n.endAt&&Gb(n.endAt,lg(n),s)));var n,s}function Us(i){return(r,n)=>{let s=!1;for(const l of lg(i)){const c=ho(l,r,n);if(0!==c)return c;s=s||l.field.isKeyField()}return 0}}function ho(i,r,n){const s=i.field.isKeyField()?Ke.comparator(r.key,n.key):function(l,c,g){const _=c.data.field(l),w=g.data.field(l);return null!==_&&null!==w?Ch(_,w):Ze()}(i.field,r,n);switch(i.dir){case"asc":return s;case"desc":return-1*s;default:return Ze()}}function zb(i,r){if(i.D){if(isNaN(r))return{doubleValue:"NaN"};if(r===1/0)return{doubleValue:"Infinity"};if(r===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:wh(r)?"-0":r}}function Yb(i){return{integerValue:""+i}}function yD(i,r){return Hb(r)?Yb(r):zb(i,r)}class _y{constructor(){this._=void 0}}function DA(i,r,n){return i instanceof Yo?function(s,l){const c={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return l&&(c.fields.__previous_value__=l),{mapValue:c}}(n,r):i instanceof Ac?Zb(i,r):i instanceof Mc?Kb(i,r):function(s,l){const c=yy(s,l),g=ug(c)+ug(s.C);return rg(c)&&rg(s.C)?Yb(g):zb(s.N,g)}(i,r)}function IA(i,r,n){return i instanceof Ac?Zb(i,r):i instanceof Mc?Kb(i,r):n}function yy(i,r){return i instanceof Rc?rg(n=r)||(s=n)&&"doubleValue"in s?r:{integerValue:0}:null;var s,n}class Yo extends _y{}class Ac extends _y{constructor(r){super(),this.elements=r}}function Zb(i,r){const n=vD(r);for(const s of i.elements)n.some(l=>Bs(l,s))||n.push(s);return{arrayValue:{values:n}}}class Mc extends _y{constructor(r){super(),this.elements=r}}function Kb(i,r){let n=vD(r);for(const s of i.elements)n=n.filter(l=>!Bs(l,s));return{arrayValue:{values:n}}}class Rc extends _y{constructor(r,n){super(),this.N=r,this.C=n}}function ug(i){return Dn(i.integerValue||i.doubleValue)}function vD(i){return uy(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}class Ih{constructor(r,n){this.field=r,this.transform=n}}class Qb{constructor(r,n){this.version=r,this.transformResults=n}}class kn{constructor(r,n){this.updateTime=r,this.exists=n}static none(){return new kn}static exists(r){return new kn(void 0,r)}static updateTime(r){return new kn(r)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(r){return this.exists===r.exists&&(this.updateTime?!!r.updateTime&&this.updateTime.isEqual(r.updateTime):!r.updateTime)}}function cg(i,r){return void 0!==i.updateTime?r.isFoundDocument()&&r.version.isEqual(i.updateTime):void 0===i.exists||i.exists===r.isFoundDocument()}class dg{}function wD(i,r,n){i instanceof Th?function(s,l,c){const g=s.value.clone(),_=DD(s.fieldTransforms,l,c.transformResults);g.setAll(_),l.convertToFoundDocument(c.version,g).setHasCommittedMutations()}(i,r,n):i instanceof Zl?function(s,l,c){if(!cg(s.precondition,l))return void l.convertToUnknownDocument(c.version);const g=DD(s.fieldTransforms,l,c.transformResults),_=l.data;_.setAll(ED(s)),_.setAll(g),l.convertToFoundDocument(c.version,_).setHasCommittedMutations()}(i,r,n):r.convertToNoDocument(n.version).setHasCommittedMutations()}function vy(i,r,n){var l;i instanceof Th?function(s,l,c){if(!cg(s.precondition,l))return;const g=s.value.clone(),_=ew(s.fieldTransforms,c,l);g.setAll(_),l.convertToFoundDocument(Xb(l),g).setHasLocalMutations()}(i,r,n):i instanceof Zl?function(s,l,c){if(!cg(s.precondition,l))return;const g=ew(s.fieldTransforms,c,l),_=l.data;_.setAll(ED(s)),_.setAll(g),l.convertToFoundDocument(Xb(l),_).setHasLocalMutations()}(i,r,n):cg(i.precondition,l=r)&&l.convertToNoDocument(Ct.min())}function CD(i,r){let n=null;for(const s of i.fieldTransforms){const l=r.data.field(s.field),c=yy(s.transform,l||null);null!=c&&(null==n&&(n=Hr.empty()),n.set(s.field,c))}return n||null}function Jb(i,r){return i.type===r.type&&!!i.key.isEqual(r.key)&&!!i.precondition.isEqual(r.precondition)&&(s=r.fieldTransforms,!!(void 0===(n=i.fieldTransforms)&&void 0===s||n&&s&&yh(n,s,(l,c)=>function(i,r){return i.field.isEqual(r.field)&&(s=r.transform,(n=i.transform)instanceof Ac&&s instanceof Ac||n instanceof Mc&&s instanceof Mc?yh(n.elements,s.elements,Bs):n instanceof Rc&&s instanceof Rc?Bs(n.C,s.C):n instanceof Yo&&s instanceof Yo);var n,s}(l,c))))&&(0===i.type?i.value.isEqual(r.value):1!==i.type||i.data.isEqual(r.data)&&i.fieldMask.isEqual(r.fieldMask));var n,s}function Xb(i){return i.isFoundDocument()?i.version:Ct.min()}class Th extends dg{constructor(r,n,s,l=[]){super(),this.key=r,this.value=n,this.precondition=s,this.fieldTransforms=l,this.type=0}}class Zl extends dg{constructor(r,n,s,l,c=[]){super(),this.key=r,this.data=n,this.fieldMask=s,this.precondition=l,this.fieldTransforms=c,this.type=1}}function ED(i){const r=new Map;return i.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const s=i.data.field(n);r.set(n,s)}}),r}function DD(i,r,n){const s=new Map;ct(i.length===n.length);for(let l=0;l<n.length;l++){const c=i[l],g=c.transform,_=r.data.field(c.field);s.set(c.field,IA(g,_,n[l]))}return s}function ew(i,r,n){const s=new Map;for(const l of i){const c=l.transform,g=n.data.field(l.field);s.set(l.field,DA(c,g,r))}return s}class hg extends dg{constructor(r,n){super(),this.key=r,this.precondition=n,this.type=2,this.fieldTransforms=[]}}class tw extends dg{constructor(r,n){super(),this.key=r,this.precondition=n,this.type=3,this.fieldTransforms=[]}}class TA{constructor(r){this.count=r}}var or,jt;function ID(i){switch(i){case de.OK:return Ze();case de.CANCELLED:case de.UNKNOWN:case de.DEADLINE_EXCEEDED:case de.RESOURCE_EXHAUSTED:case de.INTERNAL:case de.UNAVAILABLE:case de.UNAUTHENTICATED:return!1;case de.INVALID_ARGUMENT:case de.NOT_FOUND:case de.ALREADY_EXISTS:case de.PERMISSION_DENIED:case de.FAILED_PRECONDITION:case de.ABORTED:case de.OUT_OF_RANGE:case de.UNIMPLEMENTED:case de.DATA_LOSS:return!0;default:return Ze()}}function TD(i){if(void 0===i)return ir("GRPC error has no .code"),de.UNKNOWN;switch(i){case or.OK:return de.OK;case or.CANCELLED:return de.CANCELLED;case or.UNKNOWN:return de.UNKNOWN;case or.DEADLINE_EXCEEDED:return de.DEADLINE_EXCEEDED;case or.RESOURCE_EXHAUSTED:return de.RESOURCE_EXHAUSTED;case or.INTERNAL:return de.INTERNAL;case or.UNAVAILABLE:return de.UNAVAILABLE;case or.UNAUTHENTICATED:return de.UNAUTHENTICATED;case or.INVALID_ARGUMENT:return de.INVALID_ARGUMENT;case or.NOT_FOUND:return de.NOT_FOUND;case or.ALREADY_EXISTS:return de.ALREADY_EXISTS;case or.PERMISSION_DENIED:return de.PERMISSION_DENIED;case or.FAILED_PRECONDITION:return de.FAILED_PRECONDITION;case or.ABORTED:return de.ABORTED;case or.OUT_OF_RANGE:return de.OUT_OF_RANGE;case or.UNIMPLEMENTED:return de.UNIMPLEMENTED;case or.DATA_LOSS:return de.DATA_LOSS;default:return Ze()}}(jt=or||(or={}))[jt.OK=0]="OK",jt[jt.CANCELLED=1]="CANCELLED",jt[jt.UNKNOWN=2]="UNKNOWN",jt[jt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",jt[jt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",jt[jt.NOT_FOUND=5]="NOT_FOUND",jt[jt.ALREADY_EXISTS=6]="ALREADY_EXISTS",jt[jt.PERMISSION_DENIED=7]="PERMISSION_DENIED",jt[jt.UNAUTHENTICATED=16]="UNAUTHENTICATED",jt[jt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",jt[jt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",jt[jt.ABORTED=10]="ABORTED",jt[jt.OUT_OF_RANGE=11]="OUT_OF_RANGE",jt[jt.UNIMPLEMENTED=12]="UNIMPLEMENTED",jt[jt.INTERNAL=13]="INTERNAL",jt[jt.UNAVAILABLE=14]="UNAVAILABLE",jt[jt.DATA_LOSS=15]="DATA_LOSS";class pr{constructor(r,n){this.comparator=r,this.root=n||jr.EMPTY}insert(r,n){return new pr(this.comparator,this.root.insert(r,n,this.comparator).copy(null,null,jr.BLACK,null,null))}remove(r){return new pr(this.comparator,this.root.remove(r,this.comparator).copy(null,null,jr.BLACK,null,null))}get(r){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(r,n.key);if(0===s)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(r){let n=0,s=this.root;for(;!s.isEmpty();){const l=this.comparator(r,s.key);if(0===l)return n+s.left.size;l<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(r){return this.root.inorderTraversal(r)}forEach(r){this.inorderTraversal((n,s)=>(r(n,s),!1))}toString(){const r=[];return this.inorderTraversal((n,s)=>(r.push(`${n}:${s}`),!1)),`{${r.join(", ")}}`}reverseTraversal(r){return this.root.reverseTraversal(r)}getIterator(){return new by(this.root,null,this.comparator,!1)}getIteratorFrom(r){return new by(this.root,r,this.comparator,!1)}getReverseIterator(){return new by(this.root,null,this.comparator,!0)}getReverseIteratorFrom(r){return new by(this.root,r,this.comparator,!0)}}class by{constructor(r,n,s,l){this.isReverse=l,this.nodeStack=[];let c=1;for(;!r.isEmpty();)if(c=n?s(r.key,n):1,l&&(c*=-1),c<0)r=this.isReverse?r.left:r.right;else{if(0===c){this.nodeStack.push(r);break}this.nodeStack.push(r),r=this.isReverse?r.right:r.left}}getNext(){let r=this.nodeStack.pop();const n={key:r.key,value:r.value};if(this.isReverse)for(r=r.left;!r.isEmpty();)this.nodeStack.push(r),r=r.right;else for(r=r.right;!r.isEmpty();)this.nodeStack.push(r),r=r.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const r=this.nodeStack[this.nodeStack.length-1];return{key:r.key,value:r.value}}}class jr{constructor(r,n,s,l,c){this.key=r,this.value=n,this.color=null!=s?s:jr.RED,this.left=null!=l?l:jr.EMPTY,this.right=null!=c?c:jr.EMPTY,this.size=this.left.size+1+this.right.size}copy(r,n,s,l,c){return new jr(null!=r?r:this.key,null!=n?n:this.value,null!=s?s:this.color,null!=l?l:this.left,null!=c?c:this.right)}isEmpty(){return!1}inorderTraversal(r){return this.left.inorderTraversal(r)||r(this.key,this.value)||this.right.inorderTraversal(r)}reverseTraversal(r){return this.right.reverseTraversal(r)||r(this.key,this.value)||this.left.reverseTraversal(r)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(r,n,s){let l=this;const c=s(r,l.key);return l=c<0?l.copy(null,null,null,l.left.insert(r,n,s),null):0===c?l.copy(null,n,null,null,null):l.copy(null,null,null,null,l.right.insert(r,n,s)),l.fixUp()}removeMin(){if(this.left.isEmpty())return jr.EMPTY;let r=this;return r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.removeMin(),null),r.fixUp()}remove(r,n){let s,l=this;if(n(r,l.key)<0)l.left.isEmpty()||l.left.isRed()||l.left.left.isRed()||(l=l.moveRedLeft()),l=l.copy(null,null,null,l.left.remove(r,n),null);else{if(l.left.isRed()&&(l=l.rotateRight()),l.right.isEmpty()||l.right.isRed()||l.right.left.isRed()||(l=l.moveRedRight()),0===n(r,l.key)){if(l.right.isEmpty())return jr.EMPTY;s=l.right.min(),l=l.copy(s.key,s.value,null,null,l.right.removeMin())}l=l.copy(null,null,null,null,l.right.remove(r,n))}return l.fixUp()}isRed(){return this.color}fixUp(){let r=this;return r.right.isRed()&&!r.left.isRed()&&(r=r.rotateLeft()),r.left.isRed()&&r.left.left.isRed()&&(r=r.rotateRight()),r.left.isRed()&&r.right.isRed()&&(r=r.colorFlip()),r}moveRedLeft(){let r=this.colorFlip();return r.right.left.isRed()&&(r=r.copy(null,null,null,null,r.right.rotateRight()),r=r.rotateLeft(),r=r.colorFlip()),r}moveRedRight(){let r=this.colorFlip();return r.left.left.isRed()&&(r=r.rotateRight(),r=r.colorFlip()),r}rotateLeft(){const r=this.copy(null,null,jr.RED,null,this.right.left);return this.right.copy(null,null,this.color,r,null)}rotateRight(){const r=this.copy(null,null,jr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,r)}colorFlip(){const r=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,r,n)}checkMaxDepth(){const r=this.check();return Math.pow(2,r)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Ze();const r=this.left.check();if(r!==this.right.check())throw Ze();return r+(this.isRed()?0:1)}}jr.EMPTY=null,jr.RED=!0,jr.BLACK=!1,jr.EMPTY=new class{constructor(){this.size=0}get key(){throw Ze()}get value(){throw Ze()}get color(){throw Ze()}get left(){throw Ze()}get right(){throw Ze()}copy(i,r,n,s,l){return this}insert(i,r,n){return new jr(i,r)}remove(i,r){return this}isEmpty(){return!0}inorderTraversal(i){return!1}reverseTraversal(i){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Hn{constructor(r){this.comparator=r,this.data=new pr(this.comparator)}has(r){return null!==this.data.get(r)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(r){return this.data.indexOf(r)}forEach(r){this.data.inorderTraversal((n,s)=>(r(n),!1))}forEachInRange(r,n){const s=this.data.getIteratorFrom(r[0]);for(;s.hasNext();){const l=s.getNext();if(this.comparator(l.key,r[1])>=0)return;n(l.key)}}forEachWhile(r,n){let s;for(s=void 0!==n?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!r(s.getNext().key))return}firstAfterOrEqual(r){const n=this.data.getIteratorFrom(r);return n.hasNext()?n.getNext().key:null}getIterator(){return new ND(this.data.getIterator())}getIteratorFrom(r){return new ND(this.data.getIteratorFrom(r))}add(r){return this.copy(this.data.remove(r).insert(r,!0))}delete(r){return this.has(r)?this.copy(this.data.remove(r)):this}isEmpty(){return this.data.isEmpty()}unionWith(r){let n=this;return n.size<r.size&&(n=r,r=this),r.forEach(s=>{n=n.add(s)}),n}isEqual(r){if(!(r instanceof Hn)||this.size!==r.size)return!1;const n=this.data.getIterator(),s=r.data.getIterator();for(;n.hasNext();){const l=n.getNext().key,c=s.getNext().key;if(0!==this.comparator(l,c))return!1}return!0}toArray(){const r=[];return this.forEach(n=>{r.push(n)}),r}toString(){const r=[];return this.forEach(n=>r.push(n)),"SortedSet("+r.toString()+")"}copy(r){const n=new Hn(this.comparator);return n.data=r,n}}class ND{constructor(r){this.iter=r}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}const NA=new pr(Ke.comparator);function Hs(){return NA}const SD=new pr(Ke.comparator);function wy(){return SD}const AD=new pr(Ke.comparator);function nw(){return AD}const MD=new Hn(Ke.comparator);function Yt(...i){let r=MD;for(const n of i)r=r.add(n);return r}const RD=new Hn(At);function fg(){return RD}class Nh{constructor(r,n,s,l,c){this.snapshotVersion=r,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=l,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(r,n){const s=new Map;return s.set(r,xc.createSynthesizedTargetChangeForCurrentChange(r,n)),new Nh(Ct.min(),s,fg(),Hs(),Yt())}}class xc{constructor(r,n,s,l,c){this.resumeToken=r,this.current=n,this.addedDocuments=s,this.modifiedDocuments=l,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(r,n){return new xc(sr.EMPTY_BYTE_STRING,n,Yt(),Yt(),Yt())}}class pg{constructor(r,n,s,l){this.k=r,this.removedTargetIds=n,this.key=s,this.$=l}}class Kl{constructor(r,n){this.targetId=r,this.O=n}}class xD{constructor(r,n,s=sr.EMPTY_BYTE_STRING,l=null){this.state=r,this.targetIds=n,this.resumeToken=s,this.cause=l}}class kD{constructor(){this.F=0,this.M=Cy(),this.L=sr.EMPTY_BYTE_STRING,this.B=!1,this.U=!0}get current(){return this.B}get resumeToken(){return this.L}get q(){return 0!==this.F}get K(){return this.U}j(r){r.approximateByteSize()>0&&(this.U=!0,this.L=r)}W(){let r=Yt(),n=Yt(),s=Yt();return this.M.forEach((l,c)=>{switch(c){case 0:r=r.add(l);break;case 2:n=n.add(l);break;case 1:s=s.add(l);break;default:Ze()}}),new xc(this.L,this.B,r,n,s)}G(){this.U=!1,this.M=Cy()}H(r,n){this.U=!0,this.M=this.M.insert(r,n)}J(r){this.U=!0,this.M=this.M.remove(r)}Y(){this.F+=1}X(){this.F-=1}Z(){this.U=!0,this.B=!0}}class Sh{constructor(r){this.tt=r,this.et=new Map,this.nt=Hs(),this.st=SA(),this.it=new Hn(At)}rt(r){for(const n of r.k)r.$&&r.$.isFoundDocument()?this.ot(n,r.$):this.at(n,r.key,r.$);for(const n of r.removedTargetIds)this.at(n,r.key,r.$)}ct(r){this.forEachTarget(r,n=>{const s=this.ut(n);switch(r.state){case 0:this.ht(n)&&s.j(r.resumeToken);break;case 1:s.X(),s.q||s.G(),s.j(r.resumeToken);break;case 2:s.X(),s.q||this.removeTarget(n);break;case 3:this.ht(n)&&(s.Z(),s.j(r.resumeToken));break;case 4:this.ht(n)&&(this.lt(n),s.j(r.resumeToken));break;default:Ze()}})}forEachTarget(r,n){r.targetIds.length>0?r.targetIds.forEach(n):this.et.forEach((s,l)=>{this.ht(l)&&n(l)})}ft(r){const n=r.targetId,s=r.O.count,l=this.dt(n);if(l){const c=l.target;if(og(c))if(0===s){const g=new Ke(c.path);this.at(n,g,mn.newNoDocument(g,Ct.min()))}else ct(1===s);else this.wt(n)!==s&&(this.lt(n),this.it=this.it.add(n))}}_t(r){const n=new Map;this.et.forEach((c,g)=>{const _=this.dt(g);if(_){if(c.current&&og(_.target)){const w=new Ke(_.target.path);null!==this.nt.get(w)||this.gt(g,w)||this.at(g,w,mn.newNoDocument(w,r))}c.K&&(n.set(g,c.W()),c.G())}});let s=Yt();this.st.forEach((c,g)=>{let _=!0;g.forEachWhile(w=>{const T=this.dt(w);return!T||2===T.purpose||(_=!1,!1)}),_&&(s=s.add(c))});const l=new Nh(r,n,this.it,this.nt,s);return this.nt=Hs(),this.st=SA(),this.it=new Hn(At),l}ot(r,n){if(!this.ht(r))return;const s=this.gt(r,n.key)?2:0;this.ut(r).H(n.key,s),this.nt=this.nt.insert(n.key,n),this.st=this.st.insert(n.key,this.yt(n.key).add(r))}at(r,n,s){if(!this.ht(r))return;const l=this.ut(r);this.gt(r,n)?l.H(n,1):l.J(n),this.st=this.st.insert(n,this.yt(n).delete(r)),s&&(this.nt=this.nt.insert(n,s))}removeTarget(r){this.et.delete(r)}wt(r){const n=this.ut(r).W();return this.tt.getRemoteKeysForTarget(r).size+n.addedDocuments.size-n.removedDocuments.size}Y(r){this.ut(r).Y()}ut(r){let n=this.et.get(r);return n||(n=new kD,this.et.set(r,n)),n}yt(r){let n=this.st.get(r);return n||(n=new Hn(At),this.st=this.st.insert(r,n)),n}ht(r){const n=null!==this.dt(r);return n||Oe("WatchChangeAggregator","Detected inactive target",r),n}dt(r){const n=this.et.get(r);return n&&n.q?null:this.tt.Et(r)}lt(r){this.et.set(r,new kD),this.tt.getRemoteKeysForTarget(r).forEach(n=>{this.at(r,n,null)})}gt(r,n){return this.tt.getRemoteKeysForTarget(r).has(n)}}function SA(){return new pr(Ke.comparator)}function Cy(){return new pr(Ke.comparator)}const qk={asc:"ASCENDING",desc:"DESCENDING"},OD={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class PD{constructor(r,n){this.databaseId=r,this.D=n}}function Ey(i,r){return i.D?`${new Date(1e3*r.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+r.nanoseconds).slice(-9)}Z`:{seconds:""+r.seconds,nanos:r.nanoseconds}}function it(i,r){return i.D?r.toBase64():r.toUint8Array()}function AA(i,r){return Ey(i,r.toTimestamp())}function Sr(i){return ct(!!i),Ct.fromTimestamp(function(r){const n=Ic(r);return new Tr(n.seconds,n.nanos)}(i))}function rw(i,r){return(n=i,new zt(["projects",n.projectId,"databases",n.database])).child("documents").child(r).canonicalString();var n}function gg(i){const r=zt.fromString(i);return ct(WD(r)),r}function mg(i,r){return rw(i.databaseId,r.path)}function fs(i,r){const n=gg(r);if(n.get(1)!==i.databaseId.projectId)throw new Me(de.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+i.databaseId.projectId);if(n.get(3)!==i.databaseId.database)throw new Me(de.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+i.databaseId.database);return new Ke(iw(n))}function Ah(i,r){return rw(i.databaseId,r)}function On(i){const r=gg(i);return 4===r.length?zt.emptyPath():iw(r)}function Dy(i){return new zt(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function iw(i){return ct(i.length>4&&"documents"===i.get(4)),i.popFirst(5)}function Iy(i,r,n){return{name:mg(i,r),fields:n.value.mapValue.fields}}function FD(i,r,n){const s=fs(i,r.name),l=Sr(r.updateTime),c=new Hr({mapValue:{fields:r.fields}}),g=mn.newFoundDocument(s,l,c);return n&&g.setHasCommittedMutations(),n?g.setHasCommittedMutations():g}function _g(i,r){let n;if(r instanceof Th)n={update:Iy(i,r.key,r.value)};else if(r instanceof hg)n={delete:mg(i,r.key)};else if(r instanceof Zl)n={update:Iy(i,r.key,r.data),updateMask:xA(r.fieldMask)};else{if(!(r instanceof tw))return Ze();n={verify:mg(i,r.key)}}return r.fieldTransforms.length>0&&(n.updateTransforms=r.fieldTransforms.map(s=>function(l,c){const g=c.transform;if(g instanceof Yo)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(g instanceof Ac)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:g.elements}};if(g instanceof Mc)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:g.elements}};if(g instanceof Rc)return{fieldPath:c.field.canonicalString(),increment:g.C};throw Ze()}(0,s))),r.precondition.isNone||(n.currentDocument=void 0!==(l=r.precondition).updateTime?{updateTime:AA(i,l.updateTime)}:void 0!==l.exists?{exists:l.exists}:Ze()),n;var l}function sw(i,r){const n=r.currentDocument?void 0!==(l=r.currentDocument).updateTime?kn.updateTime(Sr(l.updateTime)):void 0!==l.exists?kn.exists(l.exists):kn.none():kn.none(),s=r.updateTransforms?r.updateTransforms.map(l=>function(c,g){let _=null;"setToServerValue"in g?(ct("REQUEST_TIME"===g.setToServerValue),_=new Yo):"appendMissingElements"in g?_=new Ac(g.appendMissingElements.values||[]):"removeAllFromArray"in g?_=new Mc(g.removeAllFromArray.values||[]):"increment"in g?_=new Rc(c,g.increment):Ze();const w=Nr.fromServerFormat(g.fieldPath);return new Ih(w,_)}(i,l)):[];var l;if(r.update){const l=fs(i,r.update.name),c=new Hr({mapValue:{fields:r.update.fields}});if(r.updateMask){const g=new zl((r.updateMask.fieldPaths||[]).map(T=>Nr.fromServerFormat(T)));return new Zl(l,c,g,n,s)}return new Th(l,c,n,s)}if(r.delete){const l=fs(i,r.delete);return new hg(l,n)}if(r.verify){const l=fs(i,r.verify);return new tw(l,n)}return Ze()}function BD(i,r){return{documents:[Ah(i,r.path)]}}function UD(i,r){const n={structuredQuery:{}},s=r.path;null!==r.collectionGroup?(n.parent=Ah(i,s),n.structuredQuery.from=[{collectionId:r.collectionGroup,allDescendants:!0}]):(n.parent=Ah(i,s.popLast()),n.structuredQuery.from=[{collectionId:s.lastSegment()}]);const l=function(_){if(0===_.length)return;const w=_.map(T=>function(S){if("=="===S.op){if($b(S.value))return{unaryFilter:{field:kc(S.field),op:"IS_NAN"}};if(aD(S.value))return{unaryFilter:{field:kc(S.field),op:"IS_NULL"}}}else if("!="===S.op){if($b(S.value))return{unaryFilter:{field:kc(S.field),op:"IS_NOT_NAN"}};if(aD(S.value))return{unaryFilter:{field:kc(S.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:kc(S.field),op:GD(S.op),value:S.value}}}(T));return 1===w.length?w[0]:{compositeFilter:{op:"AND",filters:w}}}(r.filters);l&&(n.structuredQuery.where=l);const c=function(_){if(0!==_.length)return _.map(w=>{return{field:kc((T=w).field),direction:$D(T.dir)};var T})}(r.orderBy);c&&(n.structuredQuery.orderBy=c);const g=(w=r.limit,i.D||qa(w)?w:{value:w});var w;return null!==g&&(n.structuredQuery.limit=g),r.startAt&&(n.structuredQuery.startAt=jD(r.startAt)),r.endAt&&(n.structuredQuery.endAt=jD(r.endAt)),n}function Mh(i){let r=On(i.parent);const n=i.structuredQuery,s=n.from?n.from.length:0;let l=null;if(s>0){ct(1===s);const S=n.from[0];S.allDescendants?l=S.collectionId:r=r.child(S.collectionId)}let c=[];n.where&&(c=HD(n.where));let g=[];n.orderBy&&(g=n.orderBy.map(S=>{return new Dh(Rh((A=S).field),function(x){switch(x){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(A.direction));var A}));let _=null;n.limit&&(_=function(S){let A;return A="object"==typeof S?S.value:S,qa(A)?null:A}(n.limit));let w=null;n.startAt&&(w=yg(n.startAt));let T=null;return n.endAt&&(T=yg(n.endAt)),Wb(r,l,g,c,_,"F",w,T)}function HD(i){return i?void 0!==i.unaryFilter?[bg(i)]:void 0!==i.fieldFilter?[vg(i)]:void 0!==i.compositeFilter?i.compositeFilter.filters.map(r=>HD(r)).reduce((r,n)=>r.concat(n)):Ze():[]}function jD(i){return{before:i.before,values:i.position}}function yg(i){return new xn(i.values||[],!!i.before)}function $D(i){return qk[i]}function GD(i){return OD[i]}function kc(i){return{fieldPath:i.canonicalString()}}function Rh(i){return Nr.fromServerFormat(i.fieldPath)}function vg(i){return ii.create(Rh(i.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return Ze()}}(i.fieldFilter.op),i.fieldFilter.value)}function bg(i){switch(i.unaryFilter.op){case"IS_NAN":const r=Rh(i.unaryFilter.field);return ii.create(r,"==",{doubleValue:NaN});case"IS_NULL":const n=Rh(i.unaryFilter.field);return ii.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Rh(i.unaryFilter.field);return ii.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const l=Rh(i.unaryFilter.field);return ii.create(l,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return Ze()}}function xA(i){const r=[];return i.fields.forEach(n=>r.push(n.canonicalString())),{fieldPaths:r}}function WD(i){return i.length>=4&&"projects"===i.get(0)&&"databases"===i.get(2)}function fo(i){let r="";for(let n=0;n<i.length;n++)r.length>0&&(r=ow(r)),r=qD(i.get(n),r);return ow(r)}function qD(i,r){let n=r;const s=i.length;for(let l=0;l<s;l++){const c=i.charAt(l);switch(c){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=c}}return n}function ow(i){return i+"\x01\x01"}function Zo(i){const r=i.length;if(ct(r>=2),2===r)return ct("\x01"===i.charAt(0)&&"\x01"===i.charAt(1)),zt.emptyPath();const n=r-2,s=[];let l="";for(let c=0;c<r;){const g=i.indexOf("\x01",c);switch((g<0||g>n)&&Ze(),i.charAt(g+1)){case"\x01":const _=i.substring(c,g);let w;0===l.length?w=_:(l+=_,w=l,l=""),s.push(w);break;case"\x10":l+=i.substring(c,g),l+="\0";break;case"\x11":l+=i.substring(c,g+1);break;default:Ze()}c=g+2}return new zt(s)}class kA{constructor(r,n){this.seconds=r,this.nanoseconds=n}}class Ki{constructor(r,n,s){this.ownerId=r,this.allowTabSynchronization=n,this.leaseTimestampMs=s}}Ki.store="owner",Ki.key="owner";class Ql{constructor(r,n,s){this.userId=r,this.lastAcknowledgedBatchId=n,this.lastStreamToken=s}}Ql.store="mutationQueues",Ql.keyPath="userId";class _n{constructor(r,n,s,l,c){this.userId=r,this.batchId=n,this.localWriteTimeMs=s,this.baseMutations=l,this.mutations=c}}_n.store="mutations",_n.keyPath="batchId",_n.userMutationsIndex="userMutationsIndex",_n.userMutationsKeyPath=["userId","batchId"];class Ti{constructor(){}static prefixForUser(r){return[r]}static prefixForPath(r,n){return[r,fo(n)]}static key(r,n,s){return[r,fo(n),s]}}Ti.store="documentMutations",Ti.PLACEHOLDER=new Ti;class zk{constructor(r,n){this.path=r,this.readTime=n}}class Yk{constructor(r,n){this.path=r,this.version=n}}class Zn{constructor(r,n,s,l,c,g){this.unknownDocument=r,this.noDocument=n,this.document=s,this.hasCommittedMutations=l,this.readTime=c,this.parentPath=g}}Zn.store="remoteDocuments",Zn.readTimeIndex="readTimeIndex",Zn.readTimeIndexPath="readTime",Zn.collectionReadTimeIndex="collectionReadTimeIndex",Zn.collectionReadTimeIndexPath=["parentPath","readTime"];class po{constructor(r){this.byteSize=r}}po.store="remoteDocumentGlobal",po.key="remoteDocumentGlobalKey";class $r{constructor(r,n,s,l,c,g,_){this.targetId=r,this.canonicalId=n,this.readTime=s,this.resumeToken=l,this.lastListenSequenceNumber=c,this.lastLimboFreeSnapshotVersion=g,this.query=_}}$r.store="targets",$r.keyPath="targetId",$r.queryTargetsIndexName="queryTargetsIndex",$r.queryTargetsKeyPath=["canonicalId","targetId"];class Gr{constructor(r,n,s){this.targetId=r,this.path=n,this.sequenceNumber=s}}Gr.store="targetDocuments",Gr.keyPath=["targetId","path"],Gr.documentTargetsIndex="documentTargetsIndex",Gr.documentTargetsKeyPath=["path","targetId"];class ps{constructor(r,n,s,l){this.highestTargetId=r,this.highestListenSequenceNumber=n,this.lastRemoteSnapshotVersion=s,this.targetCount=l}}ps.key="targetGlobalKey",ps.store="targetGlobal";class Jl{constructor(r,n){this.collectionId=r,this.parent=n}}Jl.store="collectionParents",Jl.keyPath=["collectionId","parent"];class gs{constructor(r,n,s,l){this.clientId=r,this.updateTimeMs=n,this.networkEnabled=s,this.inForeground=l}}gs.store="clientMetadata",gs.keyPath="clientId";class xh{constructor(r,n,s){this.bundleId=r,this.createTime=n,this.version=s}}xh.store="bundles",xh.keyPath="bundleId";class kh{constructor(r,n,s){this.name=r,this.readTime=n,this.bundledQuery=s}}kh.store="namedQueries",kh.keyPath="name";const OA=[Ql.store,_n.store,Ti.store,Zn.store,$r.store,Ki.store,ps.store,Gr.store,gs.store,po.store,Jl.store,xh.store,kh.store],zD="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class YD{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(r){this.onCommittedListeners.push(r)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(r=>r())}}class Se{constructor(r){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,r(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(r){return this.next(void 0,r)}next(r,n){return this.callbackAttached&&Ze(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(r,this.result):new Se((s,l)=>{this.nextCallback=c=>{this.wrapSuccess(r,c).next(s,l)},this.catchCallback=c=>{this.wrapFailure(n,c).next(s,l)}})}toPromise(){return new Promise((r,n)=>{this.next(r,n)})}wrapUserFunction(r){try{const n=r();return n instanceof Se?n:Se.resolve(n)}catch(n){return Se.reject(n)}}wrapSuccess(r,n){return r?this.wrapUserFunction(()=>r(n)):Se.resolve(n)}wrapFailure(r,n){return r?this.wrapUserFunction(()=>r(n)):Se.reject(n)}static resolve(r){return new Se((n,s)=>{n(r)})}static reject(r){return new Se((n,s)=>{s(r)})}static waitFor(r){return new Se((n,s)=>{let l=0,c=0,g=!1;r.forEach(_=>{++l,_.next(()=>{++c,g&&c===l&&n()},w=>s(w))}),g=!0,c===l&&n()})}static or(r){let n=Se.resolve(!1);for(const s of r)n=n.next(l=>l?Se.resolve(l):s());return n}static forEach(r,n){const s=[];return r.forEach((l,c)=>{s.push(n.call(this,l,c))}),this.waitFor(s)}}class Ty{constructor(r,n){this.action=r,this.transaction=n,this.aborted=!1,this.Tt=new Ur,this.transaction.oncomplete=()=>{this.Tt.resolve()},this.transaction.onabort=()=>{n.error?this.Tt.reject(new wg(r,n.error)):this.Tt.resolve()},this.transaction.onerror=s=>{const l=Ny(s.target.error);this.Tt.reject(new wg(r,l))}}static open(r,n,s,l){try{return new Ty(n,r.transaction(l,s))}catch(c){throw new wg(n,c)}}get It(){return this.Tt.promise}abort(r){r&&this.Tt.reject(r),this.aborted||(Oe("SimpleDb","Aborting transaction:",r?r.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}store(r){const n=this.transaction.objectStore(r);return new PA(n)}}class go{constructor(r,n,s){this.name=r,this.version=n,this.At=s,12.2===go.Rt((0,F.z$)())&&ir("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(r){return Oe("SimpleDb","Removing database:",r),eu(window.indexedDB.deleteDatabase(r)).toPromise()}static bt(){if(!(0,F.hl)())return!1;if(go.Pt())return!0;const r=(0,F.z$)(),n=go.Rt(r),s=0<n&&n<10,l=go.vt(r),c=0<l&&l<4.5;return!(r.indexOf("MSIE ")>0||r.indexOf("Trident/")>0||r.indexOf("Edge/")>0||s||c)}static Pt(){var r;return"undefined"!=typeof process&&"YES"===(null===(r=process.env)||void 0===r?void 0:r.Vt)}static St(r,n){return r.store(n)}static Rt(r){const n=r.match(/i(?:phone|pad|pod) os ([\d_]+)/i),s=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(s)}static vt(r){const n=r.match(/Android ([\d.]+)/i),s=n?n[1].split(".").slice(0,2).join("."):"-1";return Number(s)}Dt(r){var n=this;return(0,we.Z)(function*(){return n.db||(Oe("SimpleDb","Opening database:",n.name),n.db=yield new Promise((s,l)=>{const c=indexedDB.open(n.name,n.version);c.onsuccess=g=>{s(g.target.result)},c.onblocked=()=>{l(new wg(r,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},c.onerror=g=>{const _=g.target.error;l("VersionError"===_.name?new Me(de.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===_.name?new Me(de.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+_):new wg(r,_))},c.onupgradeneeded=g=>{Oe("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',g.oldVersion),n.At.Ct(g.target.result,c.transaction,g.oldVersion,n.version).next(()=>{Oe("SimpleDb","Database upgrade to version "+n.version+" complete")})}})),n.Nt&&(n.db.onversionchange=s=>n.Nt(s)),n.db})()}xt(r){this.Nt=r,this.db&&(this.db.onversionchange=n=>r(n))}runTransaction(r,n,s,l){var c=this;return(0,we.Z)(function*(){const g="readonly"===n;let _=0;for(;;){++_;try{c.db=yield c.Dt(r);const w=Ty.open(c.db,r,g?"readonly":"readwrite",s),T=l(w).catch(S=>(w.abort(S),Se.reject(S))).toPromise();return T.catch(()=>{}),yield w.It,T}catch(w){const T="FirebaseError"!==w.name&&_<3;if(Oe("SimpleDb","Transaction failed with error:",w.message,"Retrying:",T),c.close(),!T)return Promise.reject(w)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class Oh{constructor(r){this.kt=r,this.$t=!1,this.Ot=null}get isDone(){return this.$t}get Ft(){return this.Ot}set cursor(r){this.kt=r}done(){this.$t=!0}Mt(r){this.Ot=r}delete(){return eu(this.kt.delete())}}class wg extends Me{constructor(r,n){super(de.UNAVAILABLE,`IndexedDB transaction '${r}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function Xl(i){return"IndexedDbTransactionError"===i.name}class PA{constructor(r){this.store=r}put(r,n){let s;return void 0!==n?(Oe("SimpleDb","PUT",this.store.name,r,n),s=this.store.put(n,r)):(Oe("SimpleDb","PUT",this.store.name,"<auto-key>",r),s=this.store.put(r)),eu(s)}add(r){return Oe("SimpleDb","ADD",this.store.name,r,r),eu(this.store.add(r))}get(r){return eu(this.store.get(r)).next(n=>(void 0===n&&(n=null),Oe("SimpleDb","GET",this.store.name,r,n),n))}delete(r){return Oe("SimpleDb","DELETE",this.store.name,r),eu(this.store.delete(r))}count(){return Oe("SimpleDb","COUNT",this.store.name),eu(this.store.count())}Lt(r,n){const s=this.cursor(this.options(r,n)),l=[];return this.Bt(s,(c,g)=>{l.push(g)}).next(()=>l)}Ut(r,n){Oe("SimpleDb","DELETE ALL",this.store.name);const s=this.options(r,n);s.qt=!1;const l=this.cursor(s);return this.Bt(l,(c,g,_)=>_.delete())}Kt(r,n){let s;n?s=r:(s={},n=r);const l=this.cursor(s);return this.Bt(l,n)}jt(r){const n=this.cursor({});return new Se((s,l)=>{n.onerror=c=>{const g=Ny(c.target.error);l(g)},n.onsuccess=c=>{const g=c.target.result;g?r(g.primaryKey,g.value).next(_=>{_?g.continue():s()}):s()}})}Bt(r,n){const s=[];return new Se((l,c)=>{r.onerror=g=>{c(g.target.error)},r.onsuccess=g=>{const _=g.target.result;if(!_)return void l();const w=new Oh(_),T=n(_.primaryKey,_.value,w);if(T instanceof Se){const S=T.catch(A=>(w.done(),Se.reject(A)));s.push(S)}w.isDone?l():null===w.Ft?_.continue():_.continue(w.Ft)}}).next(()=>Se.waitFor(s))}options(r,n){let s;return void 0!==r&&("string"==typeof r?s=r:n=r),{index:s,range:n}}cursor(r){let n="next";if(r.reverse&&(n="prev"),r.index){const s=this.store.index(r.index);return r.qt?s.openKeyCursor(r.range,n):s.openCursor(r.range,n)}return this.store.openCursor(r.range,n)}}function eu(i){return new Se((r,n)=>{i.onsuccess=s=>{r(s.target.result)},i.onerror=s=>{const l=Ny(s.target.error);n(l)}})}let ZD=!1;function Ny(i){const r=go.Rt((0,F.z$)());if(r>=12.2&&r<13){const n="An internal error was encountered in the Indexed Database server";if(i.message.indexOf(n)>=0){const s=new Me("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return ZD||(ZD=!0,setTimeout(()=>{throw s},0)),s}}return i}class KD extends YD{constructor(r,n){super(),this.Qt=r,this.currentSequenceNumber=n}}function si(i,r){const n=Ve(i);return go.St(n.Qt,r)}class aw{constructor(r,n,s,l){this.batchId=r,this.localWriteTime=n,this.baseMutations=s,this.mutations=l}applyToRemoteDocument(r,n){const s=n.mutationResults;for(let l=0;l<this.mutations.length;l++){const c=this.mutations[l];c.key.isEqual(r.key)&&wD(c,r,s[l])}}applyToLocalView(r){for(const n of this.baseMutations)n.key.isEqual(r.key)&&vy(n,r,this.localWriteTime);for(const n of this.mutations)n.key.isEqual(r.key)&&vy(n,r,this.localWriteTime)}applyToLocalDocumentSet(r){this.mutations.forEach(n=>{const s=r.get(n.key),l=s;this.applyToLocalView(l),s.isValidDocument()||l.convertToNoDocument(Ct.min())})}keys(){return this.mutations.reduce((r,n)=>r.add(n.key),Yt())}isEqual(r){return this.batchId===r.batchId&&yh(this.mutations,r.mutations,(n,s)=>Jb(n,s))&&yh(this.baseMutations,r.baseMutations,(n,s)=>Jb(n,s))}}class Sy{constructor(r,n,s,l){this.batch=r,this.commitVersion=n,this.mutationResults=s,this.docVersions=l}static from(r,n,s){ct(r.mutations.length===s.length);let l=nw();const c=r.mutations;for(let g=0;g<c.length;g++)l=l.insert(c[g].key,s[g].version);return new Sy(r,n,s,l)}}class za{constructor(r,n,s,l,c=Ct.min(),g=Ct.min(),_=sr.EMPTY_BYTE_STRING){this.target=r,this.targetId=n,this.purpose=s,this.sequenceNumber=l,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=g,this.resumeToken=_}withSequenceNumber(r){return new za(this.target,this.targetId,this.purpose,r,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(r,n){return new za(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,r)}withLastLimboFreeSnapshotVersion(r){return new za(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,r,this.resumeToken)}}class QD{constructor(r){this.Wt=r}}function lw(i,r){if(r.document)return FD(i.Wt,r.document,!!r.hasCommittedMutations);if(r.noDocument){const n=Ke.fromSegments(r.noDocument.path),s=Ph(r.noDocument.readTime),l=mn.newNoDocument(n,s);return r.hasCommittedMutations?l.setHasCommittedMutations():l}if(r.unknownDocument){const n=Ke.fromSegments(r.unknownDocument.path),s=Ph(r.unknownDocument.version);return mn.newUnknownDocument(n,s)}return Ze()}function JD(i,r,n){const s=Cg(n),l=r.key.path.popLast().toArray();if(r.isFoundDocument()){const c={name:mg(_=i.Wt,(w=r).key),fields:w.data.value.mapValue.fields,updateTime:Ey(_,w.version.toTimestamp())};return new Zn(null,null,c,r.hasCommittedMutations,s,l)}var _,w;if(r.isNoDocument()){const c=r.key.path.toArray(),g=Oc(r.version),_=r.hasCommittedMutations;return new Zn(null,new zk(c,g),null,_,s,l)}if(r.isUnknownDocument()){const c=r.key.path.toArray(),g=Oc(r.version);return new Zn(new Yk(c,g),null,null,!0,s,l)}return Ze()}function Cg(i){const r=i.toTimestamp();return[r.seconds,r.nanoseconds]}function XD(i){const r=new Tr(i[0],i[1]);return Ct.fromTimestamp(r)}function Oc(i){const r=i.toTimestamp();return new kA(r.seconds,r.nanoseconds)}function Ph(i){const r=new Tr(i.seconds,i.nanoseconds);return Ct.fromTimestamp(r)}function Fh(i,r){const n=(r.baseMutations||[]).map(c=>sw(i.Wt,c));for(let c=0;c<r.mutations.length-1;++c){const g=r.mutations[c];c+1<r.mutations.length&&void 0!==r.mutations[c+1].transform&&(g.updateTransforms=r.mutations[c+1].transform.fieldTransforms,r.mutations.splice(c+1,1),++c)}const s=r.mutations.map(c=>sw(i.Wt,c)),l=Tr.fromMillis(r.localWriteTimeMs);return new aw(r.batchId,l,n,s)}function Eg(i){const r=Ph(i.readTime),n=void 0!==i.lastLimboFreeSnapshotVersion?Ph(i.lastLimboFreeSnapshotVersion):Ct.min();let s;var l;return void 0!==i.query.documents?(ct(1===(l=i.query).documents.length),s=zi(co(On(l.documents[0])))):s=zi(Mh(i.query)),new za(s,i.targetId,0,i.lastListenSequenceNumber,r,n,sr.fromBase64String(i.resumeToken))}function eI(i,r){const n=Oc(r.snapshotVersion),s=Oc(r.lastLimboFreeSnapshotVersion);let l;l=og(r.target)?BD(i.Wt,r.target):UD(i.Wt,r.target);const c=r.resumeToken.toBase64();return new $r(r.targetId,Yl(r.target),n,c,r.sequenceNumber,s,l)}function uw(i){const r=Mh({parent:i.parent,structuredQuery:i.structuredQuery});return"LAST"===i.limitType?gy(r,r.limit,"L"):r}class FA{getBundleMetadata(r,n){return tI(r).get(n).next(s=>{if(s)return{id:(l=s).bundleId,createTime:Ph(l.createTime),version:l.version};var l})}saveBundleMetadata(r,n){return tI(r).put({bundleId:(s=n).id,createTime:Oc(Sr(s.createTime)),version:s.version});var s}getNamedQuery(r,n){return nI(r).get(n).next(s=>{if(s)return{name:(l=s).name,query:uw(l.bundledQuery),readTime:Ph(l.readTime)};var l})}saveNamedQuery(r,n){return nI(r).put({name:(s=n).name,readTime:Oc(Sr(s.readTime)),bundledQuery:s.bundledQuery});var s}}function tI(i){return si(i,xh.store)}function nI(i){return si(i,kh.store)}class rI{constructor(){this.Gt=new Ay}addToCollectionParentIndex(r,n){return this.Gt.add(n),Se.resolve()}getCollectionParents(r,n){return Se.resolve(this.Gt.getEntries(n))}}class Ay{constructor(){this.index={}}add(r){const n=r.lastSegment(),s=r.popLast(),l=this.index[n]||new Hn(zt.comparator),c=!l.has(s);return this.index[n]=l.add(s),c}has(r){const n=r.lastSegment(),s=r.popLast(),l=this.index[n];return l&&l.has(s)}getEntries(r){return(this.index[r]||new Hn(zt.comparator)).toArray()}}class iI{constructor(){this.zt=new Ay}addToCollectionParentIndex(r,n){if(!this.zt.has(n)){const s=n.lastSegment(),l=n.popLast();r.addOnCommittedListener(()=>{this.zt.add(n)});const c={collectionId:s,parent:fo(l)};return sI(r).put(c)}return Se.resolve()}getCollectionParents(r,n){const s=[],l=IDBKeyRange.bound([n,""],[Ub(n),""],!1,!0);return sI(r).Lt(l).next(c=>{for(const g of c){if(g.collectionId!==n)break;s.push(Zo(g.parent))}return s})}}function sI(i){return si(i,Jl.store)}const My={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Ni{constructor(r,n,s){this.cacheSizeCollectionThreshold=r,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=s}static withCacheSize(r){return new Ni(r,Ni.DEFAULT_COLLECTION_PERCENTILE,Ni.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function oI(i,r,n){const s=i.store(_n.store),l=i.store(Ti.store),c=[],g=IDBKeyRange.only(n.batchId);let _=0;const w=s.Kt({range:g},(S,A,x)=>(_++,x.delete()));c.push(w.next(()=>{ct(1===_)}));const T=[];for(const S of n.mutations){const A=Ti.key(r,S.key.path,n.batchId);c.push(l.delete(A)),T.push(S.key)}return Se.waitFor(c).next(()=>T)}function Ry(i){if(!i)return 0;let r;if(i.document)r=i.document;else if(i.unknownDocument)r=i.unknownDocument;else{if(!i.noDocument)throw Ze();r=i.noDocument}return JSON.stringify(r).length}Ni.DEFAULT_COLLECTION_PERCENTILE=10,Ni.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ni.DEFAULT=new Ni(41943040,Ni.DEFAULT_COLLECTION_PERCENTILE,Ni.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ni.DISABLED=new Ni(-1,0,0);class Dg{constructor(r,n,s,l){this.userId=r,this.N=n,this.Ht=s,this.referenceDelegate=l,this.Jt={}}static Yt(r,n,s,l){ct(""!==r.uid);const c=r.isAuthenticated()?r.uid:"";return new Dg(c,n,s,l)}checkEmpty(r){let n=!0;const s=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Ya(r).Kt({index:_n.userMutationsIndex,range:s},(l,c,g)=>{n=!1,g.done()}).next(()=>n)}addMutationBatch(r,n,s,l){const c=tu(r),g=Ya(r);return g.add({}).next(_=>{ct("number"==typeof _);const w=new aw(_,n,s,l),T=function(x,V,z){const ue=z.baseMutations.map(Qe=>_g(x.Wt,Qe)),Ae=z.mutations.map(Qe=>_g(x.Wt,Qe));return new _n(V,z.batchId,z.localWriteTime.toMillis(),ue,Ae)}(this.N,this.userId,w),S=[];let A=new Hn((x,V)=>At(x.canonicalString(),V.canonicalString()));for(const x of l){const V=Ti.key(this.userId,x.key.path,_);A=A.add(x.key.path.popLast()),S.push(g.put(T)),S.push(c.put(V,Ti.PLACEHOLDER))}return A.forEach(x=>{S.push(this.Ht.addToCollectionParentIndex(r,x))}),r.addOnCommittedListener(()=>{this.Jt[_]=w.keys()}),Se.waitFor(S).next(()=>w)})}lookupMutationBatch(r,n){return Ya(r).get(n).next(s=>s?(ct(s.userId===this.userId),Fh(this.N,s)):null)}Xt(r,n){return this.Jt[n]?Se.resolve(this.Jt[n]):this.lookupMutationBatch(r,n).next(s=>{if(s){const l=s.keys();return this.Jt[n]=l,l}return null})}getNextMutationBatchAfterBatchId(r,n){const s=n+1,l=IDBKeyRange.lowerBound([this.userId,s]);let c=null;return Ya(r).Kt({index:_n.userMutationsIndex,range:l},(g,_,w)=>{_.userId===this.userId&&(ct(_.batchId>=s),c=Fh(this.N,_)),w.done()}).next(()=>c)}getHighestUnacknowledgedBatchId(r){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let s=-1;return Ya(r).Kt({index:_n.userMutationsIndex,range:n,reverse:!0},(l,c,g)=>{s=c.batchId,g.done()}).next(()=>s)}getAllMutationBatches(r){const n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Ya(r).Lt(_n.userMutationsIndex,n).next(s=>s.map(l=>Fh(this.N,l)))}getAllMutationBatchesAffectingDocumentKey(r,n){const s=Ti.prefixForPath(this.userId,n.path),l=IDBKeyRange.lowerBound(s),c=[];return tu(r).Kt({range:l},(g,_,w)=>{const[T,S,A]=g,x=Zo(S);if(T===this.userId&&n.path.isEqual(x))return Ya(r).get(A).next(V=>{if(!V)throw Ze();ct(V.userId===this.userId),c.push(Fh(this.N,V))});w.done()}).next(()=>c)}getAllMutationBatchesAffectingDocumentKeys(r,n){let s=new Hn(At);const l=[];return n.forEach(c=>{const g=Ti.prefixForPath(this.userId,c.path),_=IDBKeyRange.lowerBound(g),w=tu(r).Kt({range:_},(T,S,A)=>{const[x,V,z]=T,ue=Zo(V);x===this.userId&&c.path.isEqual(ue)?s=s.add(z):A.done()});l.push(w)}),Se.waitFor(l).next(()=>this.Zt(r,s))}getAllMutationBatchesAffectingQuery(r,n){const s=n.path,l=s.length+1,c=Ti.prefixForPath(this.userId,s),g=IDBKeyRange.lowerBound(c);let _=new Hn(At);return tu(r).Kt({range:g},(w,T,S)=>{const[A,x,V]=w,z=Zo(x);A===this.userId&&s.isPrefixOf(z)?z.length===l&&(_=_.add(V)):S.done()}).next(()=>this.Zt(r,_))}Zt(r,n){const s=[],l=[];return n.forEach(c=>{l.push(Ya(r).get(c).next(g=>{if(null===g)throw Ze();ct(g.userId===this.userId),s.push(Fh(this.N,g))}))}),Se.waitFor(l).next(()=>s)}removeMutationBatch(r,n){return oI(r.Qt,this.userId,n).next(s=>(r.addOnCommittedListener(()=>{this.te(n.batchId)}),Se.forEach(s,l=>this.referenceDelegate.markPotentiallyOrphaned(r,l))))}te(r){delete this.Jt[r]}performConsistencyCheck(r){return this.checkEmpty(r).next(n=>{if(!n)return Se.resolve();const s=IDBKeyRange.lowerBound(Ti.prefixForUser(this.userId)),l=[];return tu(r).Kt({range:s},(c,g,_)=>{if(c[0]===this.userId){const w=Zo(c[1]);l.push(w)}else _.done()}).next(()=>{ct(0===l.length)})})}containsKey(r,n){return xy(r,this.userId,n)}ee(r){return aI(r).get(this.userId).next(n=>n||new Ql(this.userId,-1,""))}}function xy(i,r,n){const s=Ti.prefixForPath(r,n.path),l=s[1],c=IDBKeyRange.lowerBound(s);let g=!1;return tu(i).Kt({range:c,qt:!0},(_,w,T)=>{const[S,A,x]=_;S===r&&A===l&&(g=!0),T.done()}).next(()=>g)}function Ya(i){return si(i,_n.store)}function tu(i){return si(i,Ti.store)}function aI(i){return si(i,Ql.store)}class Pc{constructor(r){this.ne=r}next(){return this.ne+=2,this.ne}static se(){return new Pc(0)}static ie(){return new Pc(-1)}}class cw{constructor(r,n){this.referenceDelegate=r,this.N=n}allocateTargetId(r){return this.re(r).next(n=>{const s=new Pc(n.highestTargetId);return n.highestTargetId=s.next(),this.oe(r,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(r){return this.re(r).next(n=>Ct.fromTimestamp(new Tr(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(r){return this.re(r).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(r,n,s){return this.re(r).next(l=>(l.highestListenSequenceNumber=n,s&&(l.lastRemoteSnapshotVersion=s.toTimestamp()),n>l.highestListenSequenceNumber&&(l.highestListenSequenceNumber=n),this.oe(r,l)))}addTargetData(r,n){return this.ae(r,n).next(()=>this.re(r).next(s=>(s.targetCount+=1,this.ce(n,s),this.oe(r,s))))}updateTargetData(r,n){return this.ae(r,n)}removeTargetData(r,n){return this.removeMatchingKeysForTargetId(r,n.targetId).next(()=>Lh(r).delete(n.targetId)).next(()=>this.re(r)).next(s=>(ct(s.targetCount>0),s.targetCount-=1,this.oe(r,s)))}removeTargets(r,n,s){let l=0;const c=[];return Lh(r).Kt((g,_)=>{const w=Eg(_);w.sequenceNumber<=n&&null===s.get(w.targetId)&&(l++,c.push(this.removeTargetData(r,w)))}).next(()=>Se.waitFor(c)).next(()=>l)}forEachTarget(r,n){return Lh(r).Kt((s,l)=>{const c=Eg(l);n(c)})}re(r){return dw(r).get(ps.key).next(n=>(ct(null!==n),n))}oe(r,n){return dw(r).put(ps.key,n)}ae(r,n){return Lh(r).put(eI(this.N,n))}ce(r,n){let s=!1;return r.targetId>n.highestTargetId&&(n.highestTargetId=r.targetId,s=!0),r.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=r.sequenceNumber,s=!0),s}getTargetCount(r){return this.re(r).next(n=>n.targetCount)}getTargetData(r,n){const s=Yl(n),l=IDBKeyRange.bound([s,Number.NEGATIVE_INFINITY],[s,Number.POSITIVE_INFINITY]);let c=null;return Lh(r).Kt({range:l,index:$r.queryTargetsIndexName},(g,_,w)=>{const T=Eg(_);sg(n,T.target)&&(c=T,w.done())}).next(()=>c)}addMatchingKeys(r,n,s){const l=[],c=nu(r);return n.forEach(g=>{const _=fo(g.path);l.push(c.put(new Gr(s,_))),l.push(this.referenceDelegate.addReference(r,s,g))}),Se.waitFor(l)}removeMatchingKeys(r,n,s){const l=nu(r);return Se.forEach(n,c=>{const g=fo(c.path);return Se.waitFor([l.delete([s,g]),this.referenceDelegate.removeReference(r,s,c)])})}removeMatchingKeysForTargetId(r,n){const s=nu(r),l=IDBKeyRange.bound([n],[n+1],!1,!0);return s.delete(l)}getMatchingKeysForTargetId(r,n){const s=IDBKeyRange.bound([n],[n+1],!1,!0),l=nu(r);let c=Yt();return l.Kt({range:s,qt:!0},(g,_,w)=>{const T=Zo(g[1]),S=new Ke(T);c=c.add(S)}).next(()=>c)}containsKey(r,n){const s=fo(n.path),l=IDBKeyRange.bound([s],[Ub(s)],!1,!0);let c=0;return nu(r).Kt({index:Gr.documentTargetsIndex,qt:!0,range:l},([g,_],w,T)=>{0!==g&&(c++,T.done())}).next(()=>c>0)}Et(r,n){return Lh(r).get(n).next(s=>s?Eg(s):null)}}function Lh(i){return si(i,$r.store)}function dw(i){return si(i,ps.store)}function nu(i){return si(i,Gr.store)}function ru(i){return ky.apply(this,arguments)}function ky(){return(ky=(0,we.Z)(function*(i){if(i.code!==de.FAILED_PRECONDITION||i.message!==zD)throw i;Oe("LocalStore","Unexpectedly lost primary lease")})).apply(this,arguments)}function hw([i,r],[n,s]){const l=At(i,n);return 0===l?At(r,s):l}class Zk{constructor(r){this.ue=r,this.buffer=new Hn(hw),this.he=0}le(){return++this.he}fe(r){const n=[r,this.le()];if(this.buffer.size<this.ue)this.buffer=this.buffer.add(n);else{const s=this.buffer.last();hw(n,s)<0&&(this.buffer=this.buffer.delete(s).add(n))}}get maxValue(){return this.buffer.last()[0]}}class LA{constructor(r,n){this.garbageCollector=r,this.asyncQueue=n,this.de=!1,this.we=null}start(r){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this._e(r)}stop(){this.we&&(this.we.cancel(),this.we=null)}get started(){return null!==this.we}_e(r){var n=this;const s=this.de?3e5:6e4;Oe("LruGarbageCollector",`Garbage collection scheduled in ${s}ms`),this.we=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",s,(0,we.Z)(function*(){n.we=null,n.de=!0;try{yield r.collectGarbage(n.garbageCollector)}catch(l){Xl(l)?Oe("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",l):yield ru(l)}yield n._e(r)}))}}class Vh{constructor(r,n){this.me=r,this.params=n}calculateTargetCount(r,n){return this.me.ge(r).next(s=>Math.floor(n/100*s))}nthSequenceNumber(r,n){if(0===n)return Se.resolve(qi.T);const s=new Zk(n);return this.me.forEachTarget(r,l=>s.fe(l.sequenceNumber)).next(()=>this.me.ye(r,l=>s.fe(l))).next(()=>s.maxValue)}removeTargets(r,n,s){return this.me.removeTargets(r,n,s)}removeOrphanedDocuments(r,n){return this.me.removeOrphanedDocuments(r,n)}collect(r,n){return-1===this.params.cacheSizeCollectionThreshold?(Oe("LruGarbageCollector","Garbage collection skipped; disabled"),Se.resolve(My)):this.getCacheSize(r).next(s=>s<this.params.cacheSizeCollectionThreshold?(Oe("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),My):this.pe(r,n))}getCacheSize(r){return this.me.getCacheSize(r)}pe(r,n){let s,l,c,g,_,w,T;const S=Date.now();return this.calculateTargetCount(r,this.params.percentileToCollect).next(A=>(A>this.params.maximumSequenceNumbersToCollect?(Oe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${A}`),l=this.params.maximumSequenceNumbersToCollect):l=A,g=Date.now(),this.nthSequenceNumber(r,l))).next(A=>(s=A,_=Date.now(),this.removeTargets(r,s,n))).next(A=>(c=A,w=Date.now(),this.removeOrphanedDocuments(r,s))).next(A=>(T=Date.now(),tD()<=ka.in.DEBUG&&Oe("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${g-S}ms\n\tDetermined least recently used ${l} in `+(_-g)+`ms\n\tRemoved ${c} targets in `+(w-_)+`ms\n\tRemoved ${A} documents in `+(T-w)+`ms\nTotal Duration: ${T-S}ms`),Se.resolve({didRun:!0,sequenceNumbersCollected:l,targetsRemoved:c,documentsRemoved:A})))}}class Kk{constructor(r,n){this.db=r,this.garbageCollector=new Vh(this,n)}ge(r){const n=this.Ee(r);return this.db.getTargetCache().getTargetCount(r).next(s=>n.next(l=>s+l))}Ee(r){let n=0;return this.ye(r,s=>{n++}).next(()=>n)}forEachTarget(r,n){return this.db.getTargetCache().forEachTarget(r,n)}ye(r,n){return this.Te(r,(s,l)=>n(l))}addReference(r,n,s){return Bh(r,s)}removeReference(r,n,s){return Bh(r,s)}removeTargets(r,n,s){return this.db.getTargetCache().removeTargets(r,n,s)}markPotentiallyOrphaned(r,n){return Bh(r,n)}Ie(r,n){return function(s,l){let c=!1;return aI(s).jt(g=>xy(s,g,l).next(_=>(_&&(c=!0),Se.resolve(!_)))).next(()=>c)}(r,n)}removeOrphanedDocuments(r,n){const s=this.db.getRemoteDocumentCache().newChangeBuffer(),l=[];let c=0;return this.Te(r,(g,_)=>{if(_<=n){const w=this.Ie(r,g).next(T=>{if(!T)return c++,s.getEntry(r,g).next(()=>(s.removeEntry(g),nu(r).delete([0,fo(g.path)])))});l.push(w)}}).next(()=>Se.waitFor(l)).next(()=>s.apply(r)).next(()=>c)}removeTarget(r,n){const s=n.withSequenceNumber(r.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(r,s)}updateLimboDocument(r,n){return Bh(r,n)}Te(r,n){const s=nu(r);let l,c=qi.T;return s.Kt({index:Gr.documentTargetsIndex},([g,_],{path:w,sequenceNumber:T})=>{0===g?(c!==qi.T&&n(new Ke(Zo(l)),c),c=T,l=w):c=qi.T}).next(()=>{c!==qi.T&&n(new Ke(Zo(l)),c)})}getCacheSize(r){return this.db.getRemoteDocumentCache().getSize(r)}}function Bh(i,r){return nu(i).put((s=i.currentSequenceNumber,new Gr(0,fo(r.path),s)));var s}class Za{constructor(r,n){this.mapKeyFn=r,this.equalsFn=n,this.inner={}}get(r){const n=this.mapKeyFn(r),s=this.inner[n];if(void 0!==s)for(const[l,c]of s)if(this.equalsFn(l,r))return c}has(r){return void 0!==this.get(r)}set(r,n){const s=this.mapKeyFn(r),l=this.inner[s];if(void 0!==l){for(let c=0;c<l.length;c++)if(this.equalsFn(l[c][0],r))return void(l[c]=[r,n]);l.push([r,n])}else this.inner[s]=[[r,n]]}delete(r){const n=this.mapKeyFn(r),s=this.inner[n];if(void 0===s)return!1;for(let l=0;l<s.length;l++)if(this.equalsFn(s[l][0],r))return 1===s.length?delete this.inner[n]:s.splice(l,1),!0;return!1}forEach(r){Dc(this.inner,(n,s)=>{for(const[l,c]of s)r(l,c)})}isEmpty(){return sD(this.inner)}}class lI{constructor(){this.changes=new Za(r=>r.toString(),(r,n)=>r.isEqual(n)),this.changesApplied=!1}getReadTime(r){const n=this.changes.get(r);return n?n.readTime:Ct.min()}addEntry(r,n){this.assertNotApplied(),this.changes.set(r.key,{document:r,readTime:n})}removeEntry(r,n=null){this.assertNotApplied(),this.changes.set(r,{document:mn.newInvalidDocument(r),readTime:n})}getEntry(r,n){this.assertNotApplied();const s=this.changes.get(n);return void 0!==s?Se.resolve(s.document):this.getFromCache(r,n)}getEntries(r,n){return this.getAllFromCache(r,n)}apply(r){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(r)}assertNotApplied(){}}class Uh{constructor(r,n){this.N=r,this.Ht=n}addEntry(r,n,s){return iu(r).put(ms(n),s)}removeEntry(r,n){const s=iu(r),l=ms(n);return s.delete(l)}updateMetadata(r,n){return this.getMetadata(r).next(s=>(s.byteSize+=n,this.Ae(r,s)))}getEntry(r,n){return iu(r).get(ms(n)).next(s=>this.Re(n,s))}be(r,n){return iu(r).get(ms(n)).next(s=>({document:this.Re(n,s),size:Ry(s)}))}getEntries(r,n){let s=Hs();return this.Pe(r,n,(l,c)=>{const g=this.Re(l,c);s=s.insert(l,g)}).next(()=>s)}ve(r,n){let s=Hs(),l=new pr(Ke.comparator);return this.Pe(r,n,(c,g)=>{const _=this.Re(c,g);s=s.insert(c,_),l=l.insert(c,Ry(g))}).next(()=>({documents:s,Ve:l}))}Pe(r,n,s){if(n.isEmpty())return Se.resolve();const l=IDBKeyRange.bound(n.first().path.toArray(),n.last().path.toArray()),c=n.getIterator();let g=c.getNext();return iu(r).Kt({range:l},(_,w,T)=>{const S=Ke.fromSegments(_);for(;g&&Ke.comparator(g,S)<0;)s(g,null),g=c.getNext();g&&g.isEqual(S)&&(s(g,w),g=c.hasNext()?c.getNext():null),g?T.Mt(g.path.toArray()):T.done()}).next(()=>{for(;g;)s(g,null),g=c.hasNext()?c.getNext():null})}getDocumentsMatchingQuery(r,n,s){let l=Hs();const c=n.path.length+1,g={};if(s.isEqual(Ct.min())){const _=n.path.toArray();g.range=IDBKeyRange.lowerBound(_)}else{const _=n.path.toArray(),w=Cg(s);g.range=IDBKeyRange.lowerBound([_,w],!0),g.index=Zn.collectionReadTimeIndex}return iu(r).Kt(g,(_,w,T)=>{if(_.length!==c)return;const S=lw(this.N,w);n.path.isPrefixOf(S.key.path)?Zi(n,S)&&(l=l.insert(S.key,S)):T.done()}).next(()=>l)}newChangeBuffer(r){return new VA(this,!!r&&r.trackRemovals)}getSize(r){return this.getMetadata(r).next(n=>n.byteSize)}getMetadata(r){return BA(r).get(po.key).next(n=>(ct(!!n),n))}Ae(r,n){return BA(r).put(po.key,n)}Re(r,n){if(n){const s=lw(this.N,n);if(!s.isNoDocument()||!s.version.isEqual(Ct.min()))return s}return mn.newInvalidDocument(r)}}class VA extends lI{constructor(r,n){super(),this.Se=r,this.trackRemovals=n,this.De=new Za(s=>s.toString(),(s,l)=>s.isEqual(l))}applyChanges(r){const n=[];let s=0,l=new Hn((c,g)=>At(c.canonicalString(),g.canonicalString()));return this.changes.forEach((c,g)=>{const _=this.De.get(c);if(g.document.isValidDocument()){const w=JD(this.Se.N,g.document,this.getReadTime(c));l=l.add(c.path.popLast()),s+=Ry(w)-_,n.push(this.Se.addEntry(r,c,w))}else if(s-=_,this.trackRemovals){const w=JD(this.Se.N,mn.newNoDocument(c,Ct.min()),this.getReadTime(c));n.push(this.Se.addEntry(r,c,w))}else n.push(this.Se.removeEntry(r,c))}),l.forEach(c=>{n.push(this.Se.Ht.addToCollectionParentIndex(r,c))}),n.push(this.Se.updateMetadata(r,s)),Se.waitFor(n)}getFromCache(r,n){return this.Se.be(r,n).next(s=>(this.De.set(n,s.size),s.document))}getAllFromCache(r,n){return this.Se.ve(r,n).next(({documents:s,Ve:l})=>(l.forEach((c,g)=>{this.De.set(c,g)}),s))}}function BA(i){return si(i,po.store)}function iu(i){return si(i,Zn.store)}function ms(i){return i.path.toArray()}class uI{constructor(r){this.N=r}Ct(r,n,s,l){ct(s<l&&s>=0&&l<=11);const c=new Ty("createOrUpgrade",n);var _;s<1&&l>=1&&(r.createObjectStore(Ki.store),(_=r).createObjectStore(Ql.store,{keyPath:Ql.keyPath}),_.createObjectStore(_n.store,{keyPath:_n.keyPath,autoIncrement:!0}).createIndex(_n.userMutationsIndex,_n.userMutationsKeyPath,{unique:!0}),_.createObjectStore(Ti.store),UA(r),function(_){_.createObjectStore(Zn.store)}(r));let g=Se.resolve();return s<3&&l>=3&&(0!==s&&(function(_){_.deleteObjectStore(Gr.store),_.deleteObjectStore($r.store),_.deleteObjectStore(ps.store)}(r),UA(r)),g=g.next(()=>function(_){const w=_.store(ps.store),T=new ps(0,0,Ct.min().toTimestamp(),0);return w.put(ps.key,T)}(c))),s<4&&l>=4&&(0!==s&&(g=g.next(()=>function(_,w){return w.store(_n.store).Lt().next(T=>{_.deleteObjectStore(_n.store),_.createObjectStore(_n.store,{keyPath:_n.keyPath,autoIncrement:!0}).createIndex(_n.userMutationsIndex,_n.userMutationsKeyPath,{unique:!0});const S=w.store(_n.store),A=T.map(x=>S.put(x));return Se.waitFor(A)})}(r,c))),g=g.next(()=>{!function(_){_.createObjectStore(gs.store,{keyPath:gs.keyPath})}(r)})),s<5&&l>=5&&(g=g.next(()=>this.Ce(c))),s<6&&l>=6&&(g=g.next(()=>(function(_){_.createObjectStore(po.store)}(r),this.Ne(c)))),s<7&&l>=7&&(g=g.next(()=>this.xe(c))),s<8&&l>=8&&(g=g.next(()=>this.ke(r,c))),s<9&&l>=9&&(g=g.next(()=>{(function(_){_.objectStoreNames.contains("remoteDocumentChanges")&&_.deleteObjectStore("remoteDocumentChanges")})(r),function(_){const w=_.objectStore(Zn.store);w.createIndex(Zn.readTimeIndex,Zn.readTimeIndexPath,{unique:!1}),w.createIndex(Zn.collectionReadTimeIndex,Zn.collectionReadTimeIndexPath,{unique:!1})}(n)})),s<10&&l>=10&&(g=g.next(()=>this.$e(c))),s<11&&l>=11&&(g=g.next(()=>{(function(_){_.createObjectStore(xh.store,{keyPath:xh.keyPath})})(r),function(_){_.createObjectStore(kh.store,{keyPath:kh.keyPath})}(r)})),g}Ne(r){let n=0;return r.store(Zn.store).Kt((s,l)=>{n+=Ry(l)}).next(()=>{const s=new po(n);return r.store(po.store).put(po.key,s)})}Ce(r){const n=r.store(Ql.store),s=r.store(_n.store);return n.Lt().next(l=>Se.forEach(l,c=>{const g=IDBKeyRange.bound([c.userId,-1],[c.userId,c.lastAcknowledgedBatchId]);return s.Lt(_n.userMutationsIndex,g).next(_=>Se.forEach(_,w=>{ct(w.userId===c.userId);const T=Fh(this.N,w);return oI(r,c.userId,T).next(()=>{})}))}))}xe(r){const n=r.store(Gr.store),s=r.store(Zn.store);return r.store(ps.store).get(ps.key).next(l=>{const c=[];return s.Kt((g,_)=>{const w=new zt(g),T=[0,fo(w)];c.push(n.get(T).next(S=>S?Se.resolve():n.put(new Gr(0,fo(w),l.highestListenSequenceNumber))))}).next(()=>Se.waitFor(c))})}ke(r,n){r.createObjectStore(Jl.store,{keyPath:Jl.keyPath});const s=n.store(Jl.store),l=new Ay,c=g=>{if(l.add(g)){const _=g.lastSegment(),w=g.popLast();return s.put({collectionId:_,parent:fo(w)})}};return n.store(Zn.store).Kt({qt:!0},(g,_)=>{const w=new zt(g);return c(w.popLast())}).next(()=>n.store(Ti.store).Kt({qt:!0},([g,_,w],T)=>{const S=Zo(_);return c(S.popLast())}))}$e(r){const n=r.store($r.store);return n.Kt((s,l)=>{const c=Eg(l),g=eI(this.N,c);return n.put(g)})}}function UA(i){i.createObjectStore(Gr.store,{keyPath:Gr.keyPath}).createIndex(Gr.documentTargetsIndex,Gr.documentTargetsKeyPath,{unique:!0}),i.createObjectStore($r.store,{keyPath:$r.keyPath}).createIndex($r.queryTargetsIndexName,$r.queryTargetsKeyPath,{unique:!0}),i.createObjectStore(ps.store)}const Hh="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class fw{constructor(r,n,s,l,c,g,_,w,T,S){if(this.allowTabSynchronization=r,this.persistenceKey=n,this.clientId=s,this.Oe=c,this.window=g,this.document=_,this.Fe=T,this.Me=S,this.Le=null,this.Be=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Ue=null,this.inForeground=!1,this.qe=null,this.Ke=null,this.je=Number.NEGATIVE_INFINITY,this.Qe=A=>Promise.resolve(),!fw.bt())throw new Me(de.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Kk(this,l),this.We=n+"main",this.N=new QD(w),this.Ge=new go(this.We,11,new uI(this.N)),this.ze=new cw(this.referenceDelegate,this.N),this.Ht=new iI,this.He=new Uh(this.N,this.Ht),this.Je=new FA,this.window&&this.window.localStorage?this.Ye=this.window.localStorage:(this.Ye=null,!1===S&&ir("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Xe().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Me(de.FAILED_PRECONDITION,Hh);return this.Ze(),this.tn(),this.en(),this.runTransaction("getHighestListenSequenceNumber","readonly",r=>this.ze.getHighestSequenceNumber(r))}).then(r=>{this.Le=new qi(r,this.Fe)}).then(()=>{this.Be=!0}).catch(r=>(this.Ge&&this.Ge.close(),Promise.reject(r)))}nn(r){var n=this;return this.Qe=function(){var s=(0,we.Z)(function*(l){if(n.started)return r(l)});return function(l){return s.apply(this,arguments)}}(),r(this.isPrimary)}setDatabaseDeletedListener(r){this.Ge.xt(function(){var n=(0,we.Z)(function*(s){null===s.newVersion&&(yield r())});return function(s){return n.apply(this,arguments)}}())}setNetworkEnabled(r){var n=this;this.networkEnabled!==r&&(this.networkEnabled=r,this.Oe.enqueueAndForget((0,we.Z)(function*(){n.started&&(yield n.Xe())})))}Xe(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",r=>pw(r).put(new gs(this.clientId,Date.now(),this.networkEnabled,this.inForeground)).next(()=>{if(this.isPrimary)return this.sn(r).next(n=>{n||(this.isPrimary=!1,this.Oe.enqueueRetryable(()=>this.Qe(!1)))})}).next(()=>this.rn(r)).next(n=>this.isPrimary&&!n?this.on(r).next(()=>!1):!!n&&this.an(r).next(()=>!0))).catch(r=>{if(Xl(r))return Oe("IndexedDbPersistence","Failed to extend owner lease: ",r),this.isPrimary;if(!this.allowTabSynchronization)throw r;return Oe("IndexedDbPersistence","Releasing owner lease after error during lease refresh",r),!1}).then(r=>{this.isPrimary!==r&&this.Oe.enqueueRetryable(()=>this.Qe(r)),this.isPrimary=r})}sn(r){return Ig(r).get(Ki.key).next(n=>Se.resolve(this.cn(n)))}un(r){return pw(r).delete(this.clientId)}hn(){var r=this;return(0,we.Z)(function*(){if(r.isPrimary&&!r.ln(r.je,18e5)){r.je=Date.now();const n=yield r.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",s=>{const l=si(s,gs.store);return l.Lt().next(c=>{const g=r.fn(c,18e5),_=c.filter(w=>-1===g.indexOf(w));return Se.forEach(_,w=>l.delete(w.clientId)).next(()=>_)})}).catch(()=>[]);if(r.Ye)for(const s of n)r.Ye.removeItem(r.dn(s.clientId))}})()}en(){this.Ke=this.Oe.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Xe().then(()=>this.hn()).then(()=>this.en()))}cn(r){return!!r&&r.ownerId===this.clientId}rn(r){return this.Me?Se.resolve(!0):Ig(r).get(Ki.key).next(n=>{if(null!==n&&this.ln(n.leaseTimestampMs,5e3)&&!this.wn(n.ownerId)){if(this.cn(n)&&this.networkEnabled)return!0;if(!this.cn(n)){if(!n.allowTabSynchronization)throw new Me(de.FAILED_PRECONDITION,Hh);return!1}}return!(!this.networkEnabled||!this.inForeground)||pw(r).Lt().next(s=>void 0===this.fn(s,5e3).find(l=>{if(this.clientId!==l.clientId){const g=!this.inForeground&&l.inForeground,_=this.networkEnabled===l.networkEnabled;if(!this.networkEnabled&&l.networkEnabled||g&&_)return!0}return!1}))}).next(n=>(this.isPrimary!==n&&Oe("IndexedDbPersistence",`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}shutdown(){var r=this;return(0,we.Z)(function*(){r.Be=!1,r._n(),r.Ke&&(r.Ke.cancel(),r.Ke=null),r.mn(),r.gn(),yield r.Ge.runTransaction("shutdown","readwrite",[Ki.store,gs.store],n=>{const s=new KD(n,qi.T);return r.on(s).next(()=>r.un(s))}),r.Ge.close(),r.yn()})()}fn(r,n){return r.filter(s=>this.ln(s.updateTimeMs,n)&&!this.wn(s.clientId))}pn(){return this.runTransaction("getActiveClients","readonly",r=>pw(r).Lt().next(n=>this.fn(n,18e5).map(s=>s.clientId)))}get started(){return this.Be}getMutationQueue(r){return Dg.Yt(r,this.N,this.Ht,this.referenceDelegate)}getTargetCache(){return this.ze}getRemoteDocumentCache(){return this.He}getIndexManager(){return this.Ht}getBundleCache(){return this.Je}runTransaction(r,n,s){let c;return Oe("IndexedDbPersistence","Starting transaction:",r),this.Ge.runTransaction(r,"readonly"===n?"readonly":"readwrite",OA,g=>(c=new KD(g,this.Le?this.Le.next():qi.T),"readwrite-primary"===n?this.sn(c).next(_=>!!_||this.rn(c)).next(_=>{if(!_)throw ir(`Failed to obtain primary lease for action '${r}'.`),this.isPrimary=!1,this.Oe.enqueueRetryable(()=>this.Qe(!1)),new Me(de.FAILED_PRECONDITION,zD);return s(c)}).next(_=>this.an(c).next(()=>_)):this.En(c).next(()=>s(c)))).then(g=>(c.raiseOnCommittedEvent(),g))}En(r){return Ig(r).get(Ki.key).next(n=>{if(null!==n&&this.ln(n.leaseTimestampMs,5e3)&&!this.wn(n.ownerId)&&!this.cn(n)&&!(this.Me||this.allowTabSynchronization&&n.allowTabSynchronization))throw new Me(de.FAILED_PRECONDITION,Hh)})}an(r){const n=new Ki(this.clientId,this.allowTabSynchronization,Date.now());return Ig(r).put(Ki.key,n)}static bt(){return go.bt()}on(r){const n=Ig(r);return n.get(Ki.key).next(s=>this.cn(s)?(Oe("IndexedDbPersistence","Releasing primary lease."),n.delete(Ki.key)):Se.resolve())}ln(r,n){const s=Date.now();return!(r<s-n||r>s&&(ir(`Detected an update time that is in the future: ${r} > ${s}`),1))}Ze(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.qe=()=>{this.Oe.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.Xe()))},this.document.addEventListener("visibilitychange",this.qe),this.inForeground="visible"===this.document.visibilityState)}mn(){this.qe&&(this.document.removeEventListener("visibilitychange",this.qe),this.qe=null)}tn(){var r;"function"==typeof(null===(r=this.window)||void 0===r?void 0:r.addEventListener)&&(this.Ue=()=>{this._n(),(0,F.G6)()&&navigator.appVersion.match("Version/14")&&this.Oe.enterRestrictedMode(!0),this.Oe.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Ue))}gn(){this.Ue&&(this.window.removeEventListener("pagehide",this.Ue),this.Ue=null)}wn(r){var n;try{const s=null!==(null===(n=this.Ye)||void 0===n?void 0:n.getItem(this.dn(r)));return Oe("IndexedDbPersistence",`Client '${r}' ${s?"is":"is not"} zombied in LocalStorage`),s}catch(s){return ir("IndexedDbPersistence","Failed to get zombied client id.",s),!1}}_n(){if(this.Ye)try{this.Ye.setItem(this.dn(this.clientId),String(Date.now()))}catch(r){ir("Failed to set zombie client id.",r)}}yn(){if(this.Ye)try{this.Ye.removeItem(this.dn(this.clientId))}catch(r){}}dn(r){return`firestore_zombie_${this.persistenceKey}_${r}`}}function Ig(i){return si(i,Ki.store)}function pw(i){return si(i,gs.store)}function gw(i,r){let n=i.projectId;return i.isDefaultDatabase||(n+="."+i.database),"firestore/"+r+"/"+n+"/"}class HA{constructor(r,n){this.progress=r,this.Tn=n}}class cI{constructor(r,n,s){this.He=r,this.In=n,this.Ht=s}An(r,n){return this.In.getAllMutationBatchesAffectingDocumentKey(r,n).next(s=>this.Rn(r,n,s))}Rn(r,n,s){return this.He.getEntry(r,n).next(l=>{for(const c of s)c.applyToLocalView(l);return l})}bn(r,n){r.forEach((s,l)=>{for(const c of n)c.applyToLocalView(l)})}Pn(r,n){return this.He.getEntries(r,n).next(s=>this.vn(r,s).next(()=>s))}vn(r,n){return this.In.getAllMutationBatchesAffectingDocumentKeys(r,n).next(s=>this.bn(n,s))}getDocumentsMatchingQuery(r,n,s){return Ke.isDocumentKey((l=n).path)&&null===l.collectionGroup&&0===l.filters.length?this.Vn(r,n.path):py(n)?this.Sn(r,n,s):this.Dn(r,n,s);var l}Vn(r,n){return this.An(r,new Ke(n)).next(s=>{let l=wy();return s.isFoundDocument()&&(l=l.insert(s.key,s)),l})}Sn(r,n,s){const l=n.collectionGroup;let c=wy();return this.Ht.getCollectionParents(r,l).next(g=>Se.forEach(g,_=>{const w=(T=n,S=_.child(l),new zo(S,null,T.explicitOrderBy.slice(),T.filters.slice(),T.limit,T.limitType,T.startAt,T.endAt));var T,S;return this.Dn(r,w,s).next(T=>{T.forEach((S,A)=>{c=c.insert(S,A)})})}).next(()=>c))}Dn(r,n,s){let l,c;return this.He.getDocumentsMatchingQuery(r,n,s).next(g=>(l=g,this.In.getAllMutationBatchesAffectingQuery(r,n))).next(g=>(c=g,this.Cn(r,c,l).next(_=>{l=_;for(const w of c)for(const T of w.mutations){const S=T.key;let A=l.get(S);null==A&&(A=mn.newInvalidDocument(S),l=l.insert(S,A)),vy(T,A,w.localWriteTime),A.isFoundDocument()||(l=l.remove(S))}}))).next(()=>(l.forEach((g,_)=>{Zi(n,_)||(l=l.remove(g))}),l))}Cn(r,n,s){let l=Yt();for(const g of n)for(const _ of g.mutations)_ instanceof Zl&&null===s.get(_.key)&&(l=l.add(_.key));let c=s;return this.He.getEntries(r,l).next(g=>(g.forEach((_,w)=>{w.isFoundDocument()&&(c=c.insert(_,w))}),c))}}class Tg{constructor(r,n,s,l){this.targetId=r,this.fromCache=n,this.Nn=s,this.xn=l}static kn(r,n){let s=Yt(),l=Yt();for(const c of n.docChanges)switch(c.type){case 0:s=s.add(c.doc.key);break;case 1:l=l.add(c.doc.key)}return new Tg(r,n.fromCache,s,l)}}class mw{$n(r){this.On=r}getDocumentsMatchingQuery(r,n,s,l){return 0===(c=n).filters.length&&null===c.limit&&null==c.startAt&&null==c.endAt&&(0===c.explicitOrderBy.length||1===c.explicitOrderBy.length&&c.explicitOrderBy[0].field.isKeyField())||s.isEqual(Ct.min())?this.Fn(r,n):this.On.Pn(r,l).next(c=>{const g=this.Mn(n,c);return(dy(n)||hy(n))&&this.Ln(n.limitType,g,l,s)?this.Fn(r,n):(tD()<=ka.in.DEBUG&&Oe("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),my(n)),this.On.getDocumentsMatchingQuery(r,n,s).next(_=>(g.forEach(w=>{_=_.insert(w.key,w)}),_)))});var c}Mn(r,n){let s=new Hn(Us(r));return n.forEach((l,c)=>{Zi(r,c)&&(s=s.add(c))}),s}Ln(r,n,s,l){if(s.size!==n.size)return!0;const c="F"===r?n.last():n.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(l)>0)}Fn(r,n){return tD()<=ka.in.DEBUG&&Oe("QueryEngine","Using full collection scan to execute query:",my(n)),this.On.getDocumentsMatchingQuery(r,n,Ct.min())}}class _w{constructor(r,n,s,l){this.persistence=r,this.Bn=n,this.N=l,this.Un=new pr(At),this.qn=new Za(c=>Yl(c),sg),this.Kn=Ct.min(),this.In=r.getMutationQueue(s),this.jn=r.getRemoteDocumentCache(),this.ze=r.getTargetCache(),this.Qn=new cI(this.jn,this.In,this.persistence.getIndexManager()),this.Je=r.getBundleCache(),this.Bn.$n(this.Qn)}collectGarbage(r){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>r.collect(n,this.Un))}}function yw(i,r,n,s){return new _w(i,r,n,s)}function dI(i,r){return hI.apply(this,arguments)}function hI(){return(hI=(0,we.Z)(function*(i,r){const n=Ve(i);let s=n.In,l=n.Qn;const c=yield n.persistence.runTransaction("Handle user change","readonly",g=>{let _;return n.In.getAllMutationBatches(g).next(w=>(_=w,s=n.persistence.getMutationQueue(r),l=new cI(n.jn,s,n.persistence.getIndexManager()),s.getAllMutationBatches(g))).next(w=>{const T=[],S=[];let A=Yt();for(const x of _){T.push(x.batchId);for(const V of x.mutations)A=A.add(V.key)}for(const x of w){S.push(x.batchId);for(const V of x.mutations)A=A.add(V.key)}return l.Pn(g,A).next(x=>({Wn:x,removedBatchIds:T,addedBatchIds:S}))})});return n.In=s,n.Qn=l,n.Bn.$n(n.Qn),c})).apply(this,arguments)}function jA(i,r){const n=Ve(i);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const l=r.batch.keys(),c=n.jn.newChangeBuffer({trackRemovals:!0});return function(g,_,w,T){const S=w.batch,A=S.keys();let x=Se.resolve();return A.forEach(V=>{x=x.next(()=>T.getEntry(_,V)).next(z=>{const ue=w.docVersions.get(V);ct(null!==ue),z.version.compareTo(ue)<0&&(S.applyToRemoteDocument(z,w),z.isValidDocument()&&T.addEntry(z,w.commitVersion))})}),x.next(()=>g.In.removeMutationBatch(_,S))}(n,s,r,c).next(()=>c.apply(s)).next(()=>n.In.performConsistencyCheck(s)).next(()=>n.Qn.Pn(s,l))})}function fI(i){const r=Ve(i);return r.persistence.runTransaction("Get last remote snapshot version","readonly",n=>r.ze.getLastRemoteSnapshotVersion(n))}function $A(i,r){const n=Ve(i),s=r.snapshotVersion;let l=n.Un;return n.persistence.runTransaction("Apply remote event","readwrite-primary",c=>{const g=n.jn.newChangeBuffer({trackRemovals:!0});l=n.Un;const _=[];r.targetChanges.forEach((T,S)=>{const A=l.get(S);if(!A)return;_.push(n.ze.removeMatchingKeys(c,T.removedDocuments,S).next(()=>n.ze.addMatchingKeys(c,T.addedDocuments,S)));const x=T.resumeToken;if(x.approximateByteSize()>0){const V=A.withResumeToken(x,s).withSequenceNumber(c.currentSequenceNumber);l=l.insert(S,V),z=A,Ae=T,ct((ue=V).resumeToken.approximateByteSize()>0),(0===z.resumeToken.approximateByteSize()||ue.snapshotVersion.toMicroseconds()-z.snapshotVersion.toMicroseconds()>=3e8||Ae.addedDocuments.size+Ae.modifiedDocuments.size+Ae.removedDocuments.size>0)&&_.push(n.ze.updateTargetData(c,V))}var z,ue,Ae});let w=Hs();if(r.documentUpdates.forEach((T,S)=>{r.resolvedLimboDocuments.has(T)&&_.push(n.persistence.referenceDelegate.updateLimboDocument(c,T))}),_.push(vw(c,g,r.documentUpdates,s,void 0).next(T=>{w=T})),!s.isEqual(Ct.min())){const T=n.ze.getLastRemoteSnapshotVersion(c).next(S=>n.ze.setTargetsMetadata(c,c.currentSequenceNumber,s));_.push(T)}return Se.waitFor(_).next(()=>g.apply(c)).next(()=>n.Qn.vn(c,w)).next(()=>w)}).then(c=>(n.Un=l,c))}function vw(i,r,n,s,l){let c=Yt();return n.forEach(g=>c=c.add(g)),r.getEntries(i,c).next(g=>{let _=Hs();return n.forEach((w,T)=>{const S=g.get(w),A=(null==l?void 0:l.get(w))||s;T.isNoDocument()&&T.version.isEqual(Ct.min())?(r.removeEntry(w,A),_=_.insert(w,T)):!S.isValidDocument()||T.version.compareTo(S.version)>0||0===T.version.compareTo(S.version)&&S.hasPendingWrites?(r.addEntry(T,A),_=_.insert(w,T)):Oe("LocalStore","Ignoring outdated watch update for ",w,". Current version:",S.version," Watch version:",T.version)}),_})}function pI(i,r){const n=Ve(i);return n.persistence.runTransaction("Get next mutation batch","readonly",s=>(void 0===r&&(r=-1),n.In.getNextMutationBatchAfterBatchId(s,r)))}function Fc(i,r){const n=Ve(i);return n.persistence.runTransaction("Allocate target","readwrite",s=>{let l;return n.ze.getTargetData(s,r).next(c=>c?(l=c,Se.resolve(l)):n.ze.allocateTargetId(s).next(g=>(l=new za(r,g,0,s.currentSequenceNumber),n.ze.addTargetData(s,l).next(()=>l))))}).then(s=>{const l=n.Un.get(s.targetId);return(null===l||s.snapshotVersion.compareTo(l.snapshotVersion)>0)&&(n.Un=n.Un.insert(s.targetId,s),n.qn.set(r,s.targetId)),s})}function jh(i,r,n){return bw.apply(this,arguments)}function bw(){return(bw=(0,we.Z)(function*(i,r,n){const s=Ve(i),l=s.Un.get(r),c=n?"readwrite":"readwrite-primary";try{n||(yield s.persistence.runTransaction("Release target",c,g=>s.persistence.referenceDelegate.removeTarget(g,l)))}catch(g){if(!Xl(g))throw g;Oe("LocalStore",`Failed to update sequence numbers for target ${r}: ${g}`)}s.Un=s.Un.remove(r),s.qn.delete(l.target)})).apply(this,arguments)}function Ng(i,r,n){const s=Ve(i);let l=Ct.min(),c=Yt();return s.persistence.runTransaction("Execute query","readonly",g=>function(_,w,T){const S=Ve(_),A=S.qn.get(T);return void 0!==A?Se.resolve(S.Un.get(A)):S.ze.getTargetData(w,T)}(s,g,zi(r)).next(_=>{if(_)return l=_.lastLimboFreeSnapshotVersion,s.ze.getMatchingKeysForTargetId(g,_.targetId).next(w=>{c=w})}).next(()=>s.Bn.getDocumentsMatchingQuery(g,r,n?l:Ct.min(),n?c:Yt())).next(_=>({documents:_,Gn:c})))}function Sg(i,r){const n=Ve(i),s=Ve(n.ze),l=n.Un.get(r);return l?Promise.resolve(l.target):n.persistence.runTransaction("Get target data","readonly",c=>s.Et(c,r).next(g=>g?g.target:null))}function gI(i){const r=Ve(i);return r.persistence.runTransaction("Get new document changes","readonly",n=>function(s,l,c){const g=Ve(s);let _=Hs(),w=Cg(c);const T=iu(l),S=IDBKeyRange.lowerBound(w,!0);return T.Kt({index:Zn.readTimeIndex,range:S},(A,x)=>{const V=lw(g.N,x);_=_.insert(V.key,V),w=x.readTime}).next(()=>({Tn:_,readTime:XD(w)}))}(r.jn,n,r.Kn)).then(({Tn:n,readTime:s})=>(r.Kn=s,n))}function $h(){return($h=(0,we.Z)(function*(i){const r=Ve(i);return r.persistence.runTransaction("Synchronize last document change read time","readonly",n=>function(s){const l=iu(s);let c=Ct.min();return l.Kt({index:Zn.readTimeIndex,reverse:!0},(g,_,w)=>{_.readTime&&(c=XD(_.readTime)),w.done()}).next(()=>c)}(n)).then(n=>{r.Kn=n})})).apply(this,arguments)}function Lc(){return(Lc=(0,we.Z)(function*(i,r,n,s){const l=Ve(i);let c=Yt(),g=Hs(),_=nw();for(const S of n){const A=r.zn(S.metadata.name);S.document&&(c=c.add(A)),g=g.insert(A,r.Hn(S)),_=_.insert(A,r.Jn(S.metadata.readTime))}const w=l.jn.newChangeBuffer({trackRemovals:!0}),T=yield Fc(l,(S=s,zi(co(zt.fromString(`__bundle__/docs/${S}`)))));var S;return l.persistence.runTransaction("Apply bundle documents","readwrite",S=>vw(S,w,g,Ct.min(),_).next(A=>(w.apply(S),A)).next(A=>l.ze.removeMatchingKeysForTargetId(S,T.targetId).next(()=>l.ze.addMatchingKeys(S,c,T.targetId)).next(()=>l.Qn.vn(S,A)).next(()=>A)))})).apply(this,arguments)}function GA(i,r){return ww.apply(this,arguments)}function ww(){return(ww=(0,we.Z)(function*(i,r,n=Yt()){const s=yield Fc(i,zi(uw(r.bundledQuery))),l=Ve(i);return l.persistence.runTransaction("Save named query","readwrite",c=>{const g=Sr(r.readTime);if(s.snapshotVersion.compareTo(g)>=0)return l.Je.saveNamedQuery(c,r);const _=s.withResumeToken(sr.EMPTY_BYTE_STRING,g);return l.Un=l.Un.insert(_.targetId,_),l.ze.updateTargetData(c,_).next(()=>l.ze.removeMatchingKeysForTargetId(c,s.targetId)).next(()=>l.ze.addMatchingKeys(c,n,s.targetId)).next(()=>l.Je.saveNamedQuery(c,r))})})).apply(this,arguments)}class Qk{constructor(r){this.N=r,this.Yn=new Map,this.Xn=new Map}getBundleMetadata(r,n){return Se.resolve(this.Yn.get(n))}saveBundleMetadata(r,n){var s;return this.Yn.set(n.id,{id:(s=n).id,version:s.version,createTime:Sr(s.createTime)}),Se.resolve()}getNamedQuery(r,n){return Se.resolve(this.Xn.get(n))}saveNamedQuery(r,n){return this.Xn.set(n.name,{name:(s=n).name,query:uw(s.bundledQuery),readTime:Sr(s.readTime)}),Se.resolve();var s}}class Cw{constructor(){this.Zn=new Hn(Ar.ts),this.es=new Hn(Ar.ns)}isEmpty(){return this.Zn.isEmpty()}addReference(r,n){const s=new Ar(r,n);this.Zn=this.Zn.add(s),this.es=this.es.add(s)}ss(r,n){r.forEach(s=>this.addReference(s,n))}removeReference(r,n){this.rs(new Ar(r,n))}os(r,n){r.forEach(s=>this.removeReference(s,n))}cs(r){const n=new Ke(new zt([])),s=new Ar(n,r),l=new Ar(n,r+1),c=[];return this.es.forEachInRange([s,l],g=>{this.rs(g),c.push(g.key)}),c}us(){this.Zn.forEach(r=>this.rs(r))}rs(r){this.Zn=this.Zn.delete(r),this.es=this.es.delete(r)}hs(r){const n=new Ke(new zt([])),s=new Ar(n,r),l=new Ar(n,r+1);let c=Yt();return this.es.forEachInRange([s,l],g=>{c=c.add(g.key)}),c}containsKey(r){const n=new Ar(r,0),s=this.Zn.firstAfterOrEqual(n);return null!==s&&r.isEqual(s.key)}}class Ar{constructor(r,n){this.key=r,this.ls=n}static ts(r,n){return Ke.comparator(r.key,n.key)||At(r.ls,n.ls)}static ns(r,n){return At(r.ls,n.ls)||Ke.comparator(r.key,n.key)}}class WA{constructor(r,n){this.Ht=r,this.referenceDelegate=n,this.In=[],this.fs=1,this.ds=new Hn(Ar.ts)}checkEmpty(r){return Se.resolve(0===this.In.length)}addMutationBatch(r,n,s,l){const c=this.fs;this.fs++;const g=new aw(c,n,s,l);this.In.push(g);for(const _ of l)this.ds=this.ds.add(new Ar(_.key,c)),this.Ht.addToCollectionParentIndex(r,_.key.path.popLast());return Se.resolve(g)}lookupMutationBatch(r,n){return Se.resolve(this.ws(n))}getNextMutationBatchAfterBatchId(r,n){const l=this._s(n+1),c=l<0?0:l;return Se.resolve(this.In.length>c?this.In[c]:null)}getHighestUnacknowledgedBatchId(){return Se.resolve(0===this.In.length?-1:this.fs-1)}getAllMutationBatches(r){return Se.resolve(this.In.slice())}getAllMutationBatchesAffectingDocumentKey(r,n){const s=new Ar(n,0),l=new Ar(n,Number.POSITIVE_INFINITY),c=[];return this.ds.forEachInRange([s,l],g=>{const _=this.ws(g.ls);c.push(_)}),Se.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(r,n){let s=new Hn(At);return n.forEach(l=>{const c=new Ar(l,0),g=new Ar(l,Number.POSITIVE_INFINITY);this.ds.forEachInRange([c,g],_=>{s=s.add(_.ls)})}),Se.resolve(this.gs(s))}getAllMutationBatchesAffectingQuery(r,n){const s=n.path,l=s.length+1;let c=s;Ke.isDocumentKey(c)||(c=c.child(""));const g=new Ar(new Ke(c),0);let _=new Hn(At);return this.ds.forEachWhile(w=>{const T=w.key.path;return!!s.isPrefixOf(T)&&(T.length===l&&(_=_.add(w.ls)),!0)},g),Se.resolve(this.gs(_))}gs(r){const n=[];return r.forEach(s=>{const l=this.ws(s);null!==l&&n.push(l)}),n}removeMutationBatch(r,n){ct(0===this.ys(n.batchId,"removed")),this.In.shift();let s=this.ds;return Se.forEach(n.mutations,l=>{const c=new Ar(l.key,n.batchId);return s=s.delete(c),this.referenceDelegate.markPotentiallyOrphaned(r,l.key)}).next(()=>{this.ds=s})}te(r){}containsKey(r,n){const s=new Ar(n,0),l=this.ds.firstAfterOrEqual(s);return Se.resolve(n.isEqual(l&&l.key))}performConsistencyCheck(r){return Se.resolve()}ys(r,n){return this._s(r)}_s(r){return 0===this.In.length?0:r-this.In[0].batchId}ws(r){const n=this._s(r);return n<0||n>=this.In.length?null:this.In[n]}}class qA{constructor(r,n){this.Ht=r,this.ps=n,this.docs=new pr(Ke.comparator),this.size=0}addEntry(r,n,s){const l=n.key,c=this.docs.get(l),g=c?c.size:0,_=this.ps(n);return this.docs=this.docs.insert(l,{document:n.clone(),size:_,readTime:s}),this.size+=_-g,this.Ht.addToCollectionParentIndex(r,l.path.popLast())}removeEntry(r){const n=this.docs.get(r);n&&(this.docs=this.docs.remove(r),this.size-=n.size)}getEntry(r,n){const s=this.docs.get(n);return Se.resolve(s?s.document.clone():mn.newInvalidDocument(n))}getEntries(r,n){let s=Hs();return n.forEach(l=>{const c=this.docs.get(l);s=s.insert(l,c?c.document.clone():mn.newInvalidDocument(l))}),Se.resolve(s)}getDocumentsMatchingQuery(r,n,s){let l=Hs();const c=new Ke(n.path.child("")),g=this.docs.getIteratorFrom(c);for(;g.hasNext();){const{key:_,value:{document:w,readTime:T}}=g.getNext();if(!n.path.isPrefixOf(_.path))break;T.compareTo(s)<=0||Zi(n,w)&&(l=l.insert(w.key,w.clone()))}return Se.resolve(l)}Es(r,n){return Se.forEach(this.docs,s=>n(s))}newChangeBuffer(r){return new zA(this)}getSize(r){return Se.resolve(this.size)}}class zA extends lI{constructor(r){super(),this.Se=r}applyChanges(r){const n=[];return this.changes.forEach((s,l)=>{l.document.isValidDocument()?n.push(this.Se.addEntry(r,l.document,this.getReadTime(s))):this.Se.removeEntry(s)}),Se.waitFor(n)}getFromCache(r,n){return this.Se.getEntry(r,n)}getAllFromCache(r,n){return this.Se.getEntries(r,n)}}class YA{constructor(r){this.persistence=r,this.Ts=new Za(n=>Yl(n),sg),this.lastRemoteSnapshotVersion=Ct.min(),this.highestTargetId=0,this.Is=0,this.As=new Cw,this.targetCount=0,this.Rs=Pc.se()}forEachTarget(r,n){return this.Ts.forEach((s,l)=>n(l)),Se.resolve()}getLastRemoteSnapshotVersion(r){return Se.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(r){return Se.resolve(this.Is)}allocateTargetId(r){return this.highestTargetId=this.Rs.next(),Se.resolve(this.highestTargetId)}setTargetsMetadata(r,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this.Is&&(this.Is=n),Se.resolve()}ae(r){this.Ts.set(r.target,r);const n=r.targetId;n>this.highestTargetId&&(this.Rs=new Pc(n),this.highestTargetId=n),r.sequenceNumber>this.Is&&(this.Is=r.sequenceNumber)}addTargetData(r,n){return this.ae(n),this.targetCount+=1,Se.resolve()}updateTargetData(r,n){return this.ae(n),Se.resolve()}removeTargetData(r,n){return this.Ts.delete(n.target),this.As.cs(n.targetId),this.targetCount-=1,Se.resolve()}removeTargets(r,n,s){let l=0;const c=[];return this.Ts.forEach((g,_)=>{_.sequenceNumber<=n&&null===s.get(_.targetId)&&(this.Ts.delete(g),c.push(this.removeMatchingKeysForTargetId(r,_.targetId)),l++)}),Se.waitFor(c).next(()=>l)}getTargetCount(r){return Se.resolve(this.targetCount)}getTargetData(r,n){const s=this.Ts.get(n)||null;return Se.resolve(s)}addMatchingKeys(r,n,s){return this.As.ss(n,s),Se.resolve()}removeMatchingKeys(r,n,s){this.As.os(n,s);const l=this.persistence.referenceDelegate,c=[];return l&&n.forEach(g=>{c.push(l.markPotentiallyOrphaned(r,g))}),Se.waitFor(c)}removeMatchingKeysForTargetId(r,n){return this.As.cs(n),Se.resolve()}getMatchingKeysForTargetId(r,n){const s=this.As.hs(n);return Se.resolve(s)}containsKey(r,n){return Se.resolve(this.As.containsKey(n))}}class ZA{constructor(r,n){this.bs={},this.Le=new qi(0),this.Be=!1,this.Be=!0,this.referenceDelegate=r(this),this.ze=new YA(this),this.Ht=new rI,this.He=new qA(this.Ht,s=>this.referenceDelegate.Ps(s)),this.N=new QD(n),this.Je=new Qk(this.N)}start(){return Promise.resolve()}shutdown(){return this.Be=!1,Promise.resolve()}get started(){return this.Be}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(){return this.Ht}getMutationQueue(r){let n=this.bs[r.toKey()];return n||(n=new WA(this.Ht,this.referenceDelegate),this.bs[r.toKey()]=n),n}getTargetCache(){return this.ze}getRemoteDocumentCache(){return this.He}getBundleCache(){return this.Je}runTransaction(r,n,s){Oe("MemoryPersistence","Starting transaction:",r);const l=new KA(this.Le.next());return this.referenceDelegate.vs(),s(l).next(c=>this.referenceDelegate.Vs(l).next(()=>c)).toPromise().then(c=>(l.raiseOnCommittedEvent(),c))}Ss(r,n){return Se.or(Object.values(this.bs).map(s=>()=>s.containsKey(r,n)))}}class KA extends YD{constructor(r){super(),this.currentSequenceNumber=r}}class Ew{constructor(r){this.persistence=r,this.Ds=new Cw,this.Cs=null}static Ns(r){return new Ew(r)}get xs(){if(this.Cs)return this.Cs;throw Ze()}addReference(r,n,s){return this.Ds.addReference(s,n),this.xs.delete(s.toString()),Se.resolve()}removeReference(r,n,s){return this.Ds.removeReference(s,n),this.xs.add(s.toString()),Se.resolve()}markPotentiallyOrphaned(r,n){return this.xs.add(n.toString()),Se.resolve()}removeTarget(r,n){this.Ds.cs(n.targetId).forEach(l=>this.xs.add(l.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(r,n.targetId).next(l=>{l.forEach(c=>this.xs.add(c.toString()))}).next(()=>s.removeTargetData(r,n))}vs(){this.Cs=new Set}Vs(r){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Se.forEach(this.xs,s=>{const l=Ke.fromPath(s);return this.ks(r,l).next(c=>{c||n.removeEntry(l)})}).next(()=>(this.Cs=null,n.apply(r)))}updateLimboDocument(r,n){return this.ks(r,n).next(s=>{s?this.xs.delete(n.toString()):this.xs.add(n.toString())})}Ps(r){return 0}ks(r,n){return Se.or([()=>Se.resolve(this.Ds.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(r,n),()=>this.persistence.Ss(r,n)])}}function QA(i,r){return`firestore_clients_${i}_${r}`}function _I(i,r,n){let s=`firestore_mutations_${i}_${n}`;return r.isAuthenticated()&&(s+=`_${r.uid}`),s}function Vc(i,r){return`firestore_targets_${i}_${r}`}class Py{constructor(r,n,s,l){this.user=r,this.batchId=n,this.state=s,this.error=l}static $s(r,n,s){const l=JSON.parse(s);let c,g="object"==typeof l&&-1!==["pending","acknowledged","rejected"].indexOf(l.state)&&(void 0===l.error||"object"==typeof l.error);return g&&l.error&&(g="string"==typeof l.error.message&&"string"==typeof l.error.code,g&&(c=new Me(l.error.code,l.error.message))),g?new Py(r,n,l.state,c):(ir("SharedClientState",`Failed to parse mutation state for ID '${n}': ${s}`),null)}Os(){const r={state:this.state,updateTimeMs:Date.now()};return this.error&&(r.error={code:this.error.code,message:this.error.message}),JSON.stringify(r)}}class Ag{constructor(r,n,s){this.targetId=r,this.state=n,this.error=s}static $s(r,n){const s=JSON.parse(n);let l,c="object"==typeof s&&-1!==["not-current","current","rejected"].indexOf(s.state)&&(void 0===s.error||"object"==typeof s.error);return c&&s.error&&(c="string"==typeof s.error.message&&"string"==typeof s.error.code,c&&(l=new Me(s.error.code,s.error.message))),c?new Ag(r,s.state,l):(ir("SharedClientState",`Failed to parse target state for ID '${r}': ${n}`),null)}Os(){const r={state:this.state,updateTimeMs:Date.now()};return this.error&&(r.error={code:this.error.code,message:this.error.message}),JSON.stringify(r)}}class Fy{constructor(r,n){this.clientId=r,this.activeTargetIds=n}static $s(r,n){const s=JSON.parse(n);let l="object"==typeof s&&s.activeTargetIds instanceof Array,c=fg();for(let g=0;l&&g<s.activeTargetIds.length;++g)l=Hb(s.activeTargetIds[g]),c=c.add(s.activeTargetIds[g]);return l?new Fy(r,c):(ir("SharedClientState",`Failed to parse client data for instance '${r}': ${n}`),null)}}class Gh{constructor(r,n){this.clientId=r,this.onlineState=n}static $s(r){const n=JSON.parse(r);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new Gh(n.clientId,n.onlineState):(ir("SharedClientState",`Failed to parse online state: ${r}`),null)}}class Ka{constructor(){this.activeTargetIds=fg()}Fs(r){this.activeTargetIds=this.activeTargetIds.add(r)}Ms(r){this.activeTargetIds=this.activeTargetIds.delete(r)}Os(){const r={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(r)}}class Ly{constructor(r,n,s,l,c){this.window=r,this.Oe=n,this.persistenceKey=s,this.Ls=l,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Bs=this.Us.bind(this),this.qs=new pr(At),this.started=!1,this.Ks=[];const g=s.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=c,this.js=QA(this.persistenceKey,this.Ls),this.Qs=`firestore_sequence_number_${this.persistenceKey}`,this.qs=this.qs.insert(this.Ls,new Ka),this.Ws=new RegExp(`^firestore_clients_${g}_([^_]*)$`),this.Gs=new RegExp(`^firestore_mutations_${g}_(\\d+)(?:_(.*))?$`),this.zs=new RegExp(`^firestore_targets_${g}_(\\d+)$`),this.Hs=`firestore_online_state_${this.persistenceKey}`,this.Js=function(_){return`firestore_bundle_loaded_${_}`}(this.persistenceKey),this.window.addEventListener("storage",this.Bs)}static bt(r){return!(!r||!r.localStorage)}start(){var r=this;return(0,we.Z)(function*(){const n=yield r.syncEngine.pn();for(const l of n){if(l===r.Ls)continue;const c=r.getItem(QA(r.persistenceKey,l));if(c){const g=Fy.$s(l,c);g&&(r.qs=r.qs.insert(g.clientId,g))}}r.Ys();const s=r.storage.getItem(r.Hs);if(s){const l=r.Xs(s);l&&r.Zs(l)}for(const l of r.Ks)r.Us(l);r.Ks=[],r.window.addEventListener("pagehide",()=>r.shutdown()),r.started=!0})()}writeSequenceNumber(r){this.setItem(this.Qs,JSON.stringify(r))}getAllActiveQueryTargets(){return this.ti(this.qs)}isActiveQueryTarget(r){let n=!1;return this.qs.forEach((s,l)=>{l.activeTargetIds.has(r)&&(n=!0)}),n}addPendingMutation(r){this.ei(r,"pending")}updateMutationState(r,n,s){this.ei(r,n,s),this.ni(r)}addLocalQueryTarget(r){let n="not-current";if(this.isActiveQueryTarget(r)){const s=this.storage.getItem(Vc(this.persistenceKey,r));if(s){const l=Ag.$s(r,s);l&&(n=l.state)}}return this.si.Fs(r),this.Ys(),n}removeLocalQueryTarget(r){this.si.Ms(r),this.Ys()}isLocalQueryTarget(r){return this.si.activeTargetIds.has(r)}clearQueryState(r){this.removeItem(Vc(this.persistenceKey,r))}updateQueryState(r,n,s){this.ii(r,n,s)}handleUserChange(r,n,s){n.forEach(l=>{this.ni(l)}),this.currentUser=r,s.forEach(l=>{this.addPendingMutation(l)})}setOnlineState(r){this.ri(r)}notifyBundleLoaded(){this.oi()}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Bs),this.removeItem(this.js),this.started=!1)}getItem(r){const n=this.storage.getItem(r);return Oe("SharedClientState","READ",r,n),n}setItem(r,n){Oe("SharedClientState","SET",r,n),this.storage.setItem(r,n)}removeItem(r){Oe("SharedClientState","REMOVE",r),this.storage.removeItem(r)}Us(r){var n=this;const s=r;if(s.storageArea===this.storage){if(Oe("SharedClientState","EVENT",s.key,s.newValue),s.key===this.js)return void ir("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Oe.enqueueRetryable((0,we.Z)(function*(){if(n.started){if(null!==s.key)if(n.Ws.test(s.key)){if(null==s.newValue){const l=n.ai(s.key);return n.ci(l,null)}{const l=n.ui(s.key,s.newValue);if(l)return n.ci(l.clientId,l)}}else if(n.Gs.test(s.key)){if(null!==s.newValue){const l=n.hi(s.key,s.newValue);if(l)return n.li(l)}}else if(n.zs.test(s.key)){if(null!==s.newValue){const l=n.fi(s.key,s.newValue);if(l)return n.di(l)}}else if(s.key===n.Hs){if(null!==s.newValue){const l=n.Xs(s.newValue);if(l)return n.Zs(l)}}else if(s.key===n.Qs){const l=function(c){let g=qi.T;if(null!=c)try{const _=JSON.parse(c);ct("number"==typeof _),g=_}catch(_){ir("SharedClientState","Failed to read sequence number from WebStorage",_)}return g}(s.newValue);l!==qi.T&&n.sequenceNumberHandler(l)}else if(s.key===n.Js)return n.syncEngine.wi()}else n.Ks.push(s)}))}}get si(){return this.qs.get(this.Ls)}Ys(){this.setItem(this.js,this.si.Os())}ei(r,n,s){const l=new Py(this.currentUser,r,n,s),c=_I(this.persistenceKey,this.currentUser,r);this.setItem(c,l.Os())}ni(r){const n=_I(this.persistenceKey,this.currentUser,r);this.removeItem(n)}ri(r){this.storage.setItem(this.Hs,JSON.stringify({clientId:this.Ls,onlineState:r}))}ii(r,n,s){const l=Vc(this.persistenceKey,r),c=new Ag(r,n,s);this.setItem(l,c.Os())}oi(){this.setItem(this.Js,"value-not-used")}ai(r){const n=this.Ws.exec(r);return n?n[1]:null}ui(r,n){const s=this.ai(r);return Fy.$s(s,n)}hi(r,n){const s=this.Gs.exec(r),l=Number(s[1]);return Py.$s(new ri(void 0!==s[2]?s[2]:null),l,n)}fi(r,n){const s=this.zs.exec(r),l=Number(s[1]);return Ag.$s(l,n)}Xs(r){return Gh.$s(r)}li(r){var n=this;return(0,we.Z)(function*(){if(r.user.uid===n.currentUser.uid)return n.syncEngine._i(r.batchId,r.state,r.error);Oe("SharedClientState",`Ignoring mutation for non-active user ${r.user.uid}`)})()}di(r){return this.syncEngine.mi(r.targetId,r.state,r.error)}ci(r,n){const s=n?this.qs.insert(r,n):this.qs.remove(r),l=this.ti(this.qs),c=this.ti(s),g=[],_=[];return c.forEach(w=>{l.has(w)||g.push(w)}),l.forEach(w=>{c.has(w)||_.push(w)}),this.syncEngine.gi(g,_).then(()=>{this.qs=s})}Zs(r){this.qs.get(r.clientId)&&this.onlineStateHandler(r.onlineState)}ti(r){let n=fg();return r.forEach((s,l)=>{n=n.unionWith(l.activeTargetIds)}),n}}class yI{constructor(){this.yi=new Ka,this.pi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(r){}updateMutationState(r,n,s){}addLocalQueryTarget(r){return this.yi.Fs(r),this.pi[r]||"not-current"}updateQueryState(r,n,s){this.pi[r]=n}removeLocalQueryTarget(r){this.yi.Ms(r)}isLocalQueryTarget(r){return this.yi.activeTargetIds.has(r)}clearQueryState(r){delete this.pi[r]}getAllActiveQueryTargets(){return this.yi.activeTargetIds}isActiveQueryTarget(r){return this.yi.activeTargetIds.has(r)}start(){return this.yi=new Ka,Promise.resolve()}handleUserChange(r,n,s){}setOnlineState(r){}shutdown(){}writeSequenceNumber(r){}notifyBundleLoaded(){}}class Jk{Ei(r){}shutdown(){}}class vI{constructor(){this.Ti=()=>this.Ii(),this.Ai=()=>this.Ri(),this.bi=[],this.Pi()}Ei(r){this.bi.push(r)}shutdown(){window.removeEventListener("online",this.Ti),window.removeEventListener("offline",this.Ai)}Pi(){window.addEventListener("online",this.Ti),window.addEventListener("offline",this.Ai)}Ii(){Oe("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const r of this.bi)r(0)}Ri(){Oe("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const r of this.bi)r(1)}static bt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const Vy={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class JA{constructor(r){this.vi=r.vi,this.Vi=r.Vi}Si(r){this.Di=r}Ci(r){this.Ni=r}onMessage(r){this.xi=r}close(){this.Vi()}send(r){this.vi(r)}ki(){this.Di()}$i(r){this.Ni(r)}Oi(r){this.xi(r)}}class XA extends class{constructor(r){this.databaseInfo=r,this.databaseId=r.databaseId,this.Fi=(r.ssl?"https":"http")+"://"+r.host,this.Mi="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}Li(r,n,s,l){const c=this.Bi(r,n);Oe("RestConnection","Sending: ",c,s);const g={};return this.Ui(g,l),this.qi(r,c,g,s).then(_=>(Oe("RestConnection","Received: ",_),_),_=>{throw oy("RestConnection",`${r} failed with error: `,_,"url: ",c,"request:",s),_})}Ki(r,n,s,l){return this.Li(r,n,s,l)}Ui(r,n){if(r["X-Goog-Api-Client"]="gl-js/ fire/"+mh,r["Content-Type"]="text/plain",this.databaseInfo.appId&&(r["X-Firebase-GMPID"]=this.databaseInfo.appId),n)for(const s in n.authHeaders)n.authHeaders.hasOwnProperty(s)&&(r[s]=n.authHeaders[s])}Bi(r,n){return`${this.Fi}/v1/${n}:${Vy[r]}`}}{constructor(r){super(r),this.forceLongPolling=r.forceLongPolling,this.autoDetectLongPolling=r.autoDetectLongPolling,this.useFetchStreams=r.useFetchStreams}qi(r,n,s,l){return new Promise((c,g)=>{const _=new pA;_.listenOnce(fA.COMPLETE,()=>{try{switch(_.getLastErrorCode()){case QE.NO_ERROR:const T=_.getResponseJson();Oe("Connection","XHR received:",JSON.stringify(T)),c(T);break;case QE.TIMEOUT:Oe("Connection",'RPC "'+r+'" timed out'),g(new Me(de.DEADLINE_EXCEEDED,"Request time out"));break;case QE.HTTP_ERROR:const S=_.getStatus();if(Oe("Connection",'RPC "'+r+'" failed with status:',S,"response text:",_.getResponseText()),S>0){const A=_.getResponseJson().error;if(A&&A.status&&A.message){const x=function(V){const z=V.toLowerCase().replace(/_/g,"-");return Object.values(de).indexOf(z)>=0?z:de.UNKNOWN}(A.status);g(new Me(x,A.message))}else g(new Me(de.UNKNOWN,"Server responded with status "+_.getStatus()))}else g(new Me(de.UNAVAILABLE,"Connection failed."));break;default:Ze()}}finally{Oe("Connection",'RPC "'+r+'" completed.')}});const w=JSON.stringify(l);_.send(n,"POST",w,s,15)})}ji(r,n){const s=[this.Fi,"/","google.firestore.v1.Firestore","/",r,"/channel"],l=KE(),c=hA(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(g.xmlHttpFactory=new eD({})),this.Ui(g.initMessageHeaders,n),(0,F.uI)()||(0,F.b$)()||(0,F.d)()||(0,F.w1)()||(0,F.Mn)()||(0,F.ru)()||(g.httpHeadersOverwriteParam="$httpHeaders");const _=s.join("");Oe("Connection","Creating WebChannel: "+_,g);const w=l.createWebChannel(_,g);let T=!1,S=!1;const A=new JA({vi:V=>{S?Oe("Connection","Not sending because WebChannel is closed:",V):(T||(Oe("Connection","Opening WebChannel transport."),w.open(),T=!0),Oe("Connection","WebChannel sending:",V),w.send(V))},Vi:()=>w.close()}),x=(V,z,ue)=>{V.listen(z,Ae=>{try{ue(Ae)}catch(Qe){setTimeout(()=>{throw Qe},0)}})};return x(w,sy.EventType.OPEN,()=>{S||Oe("Connection","WebChannel transport opened.")}),x(w,sy.EventType.CLOSE,()=>{S||(S=!0,Oe("Connection","WebChannel transport closed"),A.$i())}),x(w,sy.EventType.ERROR,V=>{S||(S=!0,oy("Connection","WebChannel transport errored:",V),A.$i(new Me(de.UNAVAILABLE,"The operation could not be completed")))}),x(w,sy.EventType.MESSAGE,V=>{var z;if(!S){const ue=V.data[0];ct(!!ue);const Ae=ue,Qe=Ae.error||(null===(z=Ae[0])||void 0===z?void 0:z.error);if(Qe){Oe("Connection","WebChannel received error:",Qe);const Je=Qe.status;let yt=function(_r){const Nm=or[_r];if(void 0!==Nm)return TD(Nm)}(Je),Gt=Qe.message;void 0===yt&&(yt=de.INTERNAL,Gt="Unknown error status: "+Je+" with message "+Qe.message),S=!0,A.$i(new Me(yt,Gt)),w.close()}else Oe("Connection","WebChannel received:",ue),A.Oi(ue)}}),x(c,JE.STAT_EVENT,V=>{V.stat===XE.PROXY?Oe("Connection","Detected buffering proxy"):V.stat===XE.NOPROXY&&Oe("Connection","Detected no buffering proxy")}),setTimeout(()=>{A.ki()},0),A}}function Dw(){return"undefined"!=typeof window?window:null}function Mg(){return"undefined"!=typeof document?document:null}function Bc(i){return new PD(i,!0)}class By{constructor(r,n,s=1e3,l=1.5,c=6e4){this.Oe=r,this.timerId=n,this.Qi=s,this.Wi=l,this.Gi=c,this.zi=0,this.Hi=null,this.Ji=Date.now(),this.reset()}reset(){this.zi=0}Yi(){this.zi=this.Gi}Xi(r){this.cancel();const n=Math.floor(this.zi+this.Zi()),s=Math.max(0,Date.now()-this.Ji),l=Math.max(0,n-s);l>0&&Oe("ExponentialBackoff",`Backing off for ${l} ms (base delay: ${this.zi} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.Hi=this.Oe.enqueueAfterDelay(this.timerId,l,()=>(this.Ji=Date.now(),r())),this.zi*=this.Wi,this.zi<this.Qi&&(this.zi=this.Qi),this.zi>this.Gi&&(this.zi=this.Gi)}tr(){null!==this.Hi&&(this.Hi.skipDelay(),this.Hi=null)}cancel(){null!==this.Hi&&(this.Hi.cancel(),this.Hi=null)}Zi(){return(Math.random()-.5)*this.zi}}class Iw{constructor(r,n,s,l,c,g){this.Oe=r,this.er=s,this.nr=l,this.credentialsProvider=c,this.listener=g,this.state=0,this.sr=0,this.ir=null,this.stream=null,this.rr=new By(r,n)}ar(){return 1===this.state||2===this.state||4===this.state}cr(){return 2===this.state}start(){3!==this.state?this.auth():this.ur()}stop(){var r=this;return(0,we.Z)(function*(){r.ar()&&(yield r.close(0))})()}hr(){this.state=0,this.rr.reset()}lr(){this.cr()&&null===this.ir&&(this.ir=this.Oe.enqueueAfterDelay(this.er,6e4,()=>this.dr()))}wr(r){this._r(),this.stream.send(r)}dr(){var r=this;return(0,we.Z)(function*(){if(r.cr())return r.close(0)})()}_r(){this.ir&&(this.ir.cancel(),this.ir=null)}close(r,n){var s=this;return(0,we.Z)(function*(){s._r(),s.rr.cancel(),s.sr++,3!==r?s.rr.reset():n&&n.code===de.RESOURCE_EXHAUSTED?(ir(n.toString()),ir("Using maximum backoff delay to prevent overloading the backend."),s.rr.Yi()):n&&n.code===de.UNAUTHENTICATED&&s.credentialsProvider.invalidateToken(),null!==s.stream&&(s.mr(),s.stream.close(),s.stream=null),s.state=r,yield s.listener.Ci(n)})()}mr(){}auth(){this.state=1;const r=this.gr(this.sr),n=this.sr;this.credentialsProvider.getToken().then(s=>{this.sr===n&&this.yr(s)},s=>{r(()=>{const l=new Me(de.UNKNOWN,"Fetching auth token failed: "+s.message);return this.pr(l)})})}yr(r){const n=this.gr(this.sr);this.stream=this.Er(r),this.stream.Si(()=>{n(()=>(this.state=2,this.listener.Si()))}),this.stream.Ci(s=>{n(()=>this.pr(s))}),this.stream.onMessage(s=>{n(()=>this.onMessage(s))})}ur(){var r=this;this.state=4,this.rr.Xi((0,we.Z)(function*(){r.state=0,r.start()}))}pr(r){return Oe("PersistentStream",`close with error: ${r}`),this.stream=null,this.close(3,r)}gr(r){return n=>{this.Oe.enqueueAndForget(()=>this.sr===r?n():(Oe("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class eM extends Iw{constructor(r,n,s,l,c){super(r,"listen_stream_connection_backoff","listen_stream_idle",n,s,c),this.N=l}Er(r){return this.nr.ji("Listen",r)}onMessage(r){this.rr.reset();const n=function(i,r){let n;if("targetChange"in r){const s="NO_CHANGE"===(w=r.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===w?1:"REMOVE"===w?2:"CURRENT"===w?3:"RESET"===w?4:Ze(),l=r.targetChange.targetIds||[],c=function(w,T){return w.D?(ct(void 0===T||"string"==typeof T),sr.fromBase64String(T||"")):(ct(void 0===T||T instanceof Uint8Array),sr.fromUint8Array(T||new Uint8Array))}(i,r.targetChange.resumeToken),g=r.targetChange.cause,_=g&&function(w){const T=void 0===w.code?de.UNKNOWN:TD(w.code);return new Me(T,w.message||"")}(g);n=new xD(s,l,c,_||null)}else if("documentChange"in r){const s=r.documentChange,l=fs(i,s.document.name),c=Sr(s.document.updateTime),g=new Hr({mapValue:{fields:s.document.fields}}),_=mn.newFoundDocument(l,c,g);n=new pg(s.targetIds||[],s.removedTargetIds||[],_.key,_)}else if("documentDelete"in r){const s=r.documentDelete,l=fs(i,s.document),c=s.readTime?Sr(s.readTime):Ct.min(),g=mn.newNoDocument(l,c);n=new pg([],s.removedTargetIds||[],g.key,g)}else if("documentRemove"in r){const s=r.documentRemove,l=fs(i,s.document);n=new pg([],s.removedTargetIds||[],l,null)}else{if(!("filter"in r))return Ze();{const s=r.filter,c=new TA(s.count||0);n=new Kl(s.targetId,c)}}var w;return n}(this.N,r),s=function(l){if(!("targetChange"in l))return Ct.min();const c=l.targetChange;return c.targetIds&&c.targetIds.length?Ct.min():c.readTime?Sr(c.readTime):Ct.min()}(r);return this.listener.Tr(n,s)}Ir(r){const n={};n.database=Dy(this.N),n.addTarget=function(l,c){let g;const _=c.target;return g=og(_)?{documents:BD(l,_)}:{query:UD(l,_)},g.targetId=c.targetId,c.resumeToken.approximateByteSize()>0?g.resumeToken=it(l,c.resumeToken):c.snapshotVersion.compareTo(Ct.min())>0&&(g.readTime=Ey(l,c.snapshotVersion.toTimestamp())),g}(this.N,r);const s=function(i,r){const n=function(s,l){switch(l){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Ze()}}(0,r.purpose);return null==n?null:{"goog-listen-tags":n}}(0,r);s&&(n.labels=s),this.wr(n)}Ar(r){const n={};n.database=Dy(this.N),n.removeTarget=r,this.wr(n)}}class tM extends Iw{constructor(r,n,s,l,c){super(r,"write_stream_connection_backoff","write_stream_idle",n,s,c),this.N=l,this.Rr=!1}get br(){return this.Rr}start(){this.Rr=!1,this.lastStreamToken=void 0,super.start()}mr(){this.Rr&&this.Pr([])}Er(r){return this.nr.ji("Write",r)}onMessage(r){if(ct(!!r.streamToken),this.lastStreamToken=r.streamToken,this.Rr){this.rr.reset();const n=function(i,r){return i&&i.length>0?(ct(void 0!==r),i.map(n=>function(s,l){let c=Sr(s.updateTime?s.updateTime:l);return c.isEqual(Ct.min())&&(c=Sr(l)),new Qb(c,s.transformResults||[])}(n,r))):[]}(r.writeResults,r.commitTime),s=Sr(r.commitTime);return this.listener.vr(s,n)}return ct(!r.writeResults||0===r.writeResults.length),this.Rr=!0,this.listener.Vr()}Sr(){const r={};r.database=Dy(this.N),this.wr(r)}Pr(r){const n={streamToken:this.lastStreamToken,writes:r.map(s=>_g(this.N,s))};this.wr(n)}}class bI extends class{}{constructor(r,n,s){super(),this.credentials=r,this.nr=n,this.N=s,this.Dr=!1}Cr(){if(this.Dr)throw new Me(de.FAILED_PRECONDITION,"The client has already been terminated.")}Li(r,n,s){return this.Cr(),this.credentials.getToken().then(l=>this.nr.Li(r,n,s,l)).catch(l=>{throw"FirebaseError"===l.name?(l.code===de.UNAUTHENTICATED&&this.credentials.invalidateToken(),l):new Me(de.UNKNOWN,l.toString())})}Ki(r,n,s){return this.Cr(),this.credentials.getToken().then(l=>this.nr.Ki(r,n,s,l)).catch(l=>{throw"FirebaseError"===l.name?(l.code===de.UNAUTHENTICATED&&this.credentials.invalidateToken(),l):new Me(de.UNKNOWN,l.toString())})}terminate(){this.Dr=!0}}class nM{constructor(r,n){this.asyncQueue=r,this.onlineStateHandler=n,this.state="Unknown",this.Nr=0,this.kr=null,this.$r=!0}Or(){0===this.Nr&&(this.Fr("Unknown"),this.kr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.kr=null,this.Mr("Backend didn't respond within 10 seconds."),this.Fr("Offline"),Promise.resolve())))}Lr(r){"Online"===this.state?this.Fr("Unknown"):(this.Nr++,this.Nr>=1&&(this.Br(),this.Mr(`Connection failed 1 times. Most recent error: ${r.toString()}`),this.Fr("Offline")))}set(r){this.Br(),this.Nr=0,"Online"===r&&(this.$r=!1),this.Fr(r)}Fr(r){r!==this.state&&(this.state=r,this.onlineStateHandler(r))}Mr(r){const n=`Could not reach Cloud Firestore backend. ${r}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.$r?(ir(n),this.$r=!1):Oe("OnlineStateTracker",n)}Br(){null!==this.kr&&(this.kr.cancel(),this.kr=null)}}class wI{constructor(r,n,s,l,c){var g=this;this.localStore=r,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.Ur=[],this.qr=new Map,this.Kr=new Set,this.jr=[],this.Qr=c,this.Qr.Ei(_=>{s.enqueueAndForget((0,we.Z)(function*(){var w;gr(g)&&(Oe("RemoteStore","Restarting streams for network reachability change."),yield(w=(0,we.Z)(function*(T){const S=Ve(T);S.Kr.add(4),yield Rg(S),S.Wr.set("Unknown"),S.Kr.delete(4),yield su(S)}),function(T){return w.apply(this,arguments)})(g))}))}),this.Wr=new nM(s,l)}}function su(i){return Wh.apply(this,arguments)}function Wh(){return(Wh=(0,we.Z)(function*(i){if(gr(i))for(const r of i.jr)yield r(!0)})).apply(this,arguments)}function Rg(i){return Uc.apply(this,arguments)}function Uc(){return(Uc=(0,we.Z)(function*(i){for(const r of i.jr)yield r(!1)})).apply(this,arguments)}function $t(i,r){const n=Ve(i);n.qr.has(r.targetId)||(n.qr.set(r.targetId,r),mt(n)?CI(n):zh(n).cr()&&ou(n,r))}function js(i,r){const n=Ve(i),s=zh(n);n.qr.delete(r),s.cr()&&qh(n,r),0===n.qr.size&&(s.cr()?s.lr():gr(n)&&n.Wr.set("Unknown"))}function ou(i,r){i.Gr.Y(r.targetId),zh(i).Ir(r)}function qh(i,r){i.Gr.Y(r),zh(i).Ar(r)}function CI(i){i.Gr=new Sh({getRemoteKeysForTarget:r=>i.remoteSyncer.getRemoteKeysForTarget(r),Et:r=>i.qr.get(r)||null}),zh(i).start(),i.Wr.Or()}function mt(i){return gr(i)&&!zh(i).ar()&&i.qr.size>0}function gr(i){return 0===Ve(i).Kr.size}function Uy(i){i.Gr=void 0}function Hc(i){return EI.apply(this,arguments)}function EI(){return(EI=(0,we.Z)(function*(i){i.qr.forEach((r,n)=>{ou(i,r)})})).apply(this,arguments)}function DI(i,r){return Hy.apply(this,arguments)}function Hy(){return(Hy=(0,we.Z)(function*(i,r){Uy(i),mt(i)?(i.Wr.Lr(r),CI(i)):i.Wr.set("Unknown")})).apply(this,arguments)}function Xk(i,r,n){return Tw.apply(this,arguments)}function Tw(){return(Tw=(0,we.Z)(function*(i,r,n){if(i.Wr.set("Online"),r instanceof xD&&2===r.state&&r.cause)try{yield(s=(0,we.Z)(function*(l,c){const g=c.cause;for(const _ of c.targetIds)l.qr.has(_)&&(yield l.remoteSyncer.rejectListen(_,g),l.qr.delete(_),l.Gr.removeTarget(_))}),function(l,c){return s.apply(this,arguments)})(i,r)}catch(s){Oe("RemoteStore","Failed to remove targets %s: %s ",r.targetIds.join(","),s),yield jy(i,s)}else if(r instanceof pg?i.Gr.rt(r):r instanceof Kl?i.Gr.ft(r):i.Gr.ct(r),!n.isEqual(Ct.min()))try{const s=yield fI(i.localStore);n.compareTo(s)>=0&&(yield function(l,c){const g=l.Gr._t(c);return g.targetChanges.forEach((_,w)=>{if(_.resumeToken.approximateByteSize()>0){const T=l.qr.get(w);T&&l.qr.set(w,T.withResumeToken(_.resumeToken,c))}}),g.targetMismatches.forEach(_=>{const w=l.qr.get(_);if(!w)return;l.qr.set(_,w.withResumeToken(sr.EMPTY_BYTE_STRING,w.snapshotVersion)),qh(l,_);const T=new za(w.target,_,1,w.sequenceNumber);ou(l,T)}),l.remoteSyncer.applyRemoteEvent(g)}(i,n))}catch(s){Oe("RemoteStore","Failed to raise snapshot:",s),yield jy(i,s)}var s})).apply(this,arguments)}function jy(i,r,n){return Qi.apply(this,arguments)}function Qi(){return(Qi=(0,we.Z)(function*(i,r,n){if(!Xl(r))throw r;i.Kr.add(1),yield Rg(i),i.Wr.set("Offline"),n||(n=()=>fI(i.localStore)),i.asyncQueue.enqueueRetryable((0,we.Z)(function*(){Oe("RemoteStore","Retrying IndexedDB access"),yield n(),i.Kr.delete(1),yield su(i)}))})).apply(this,arguments)}function In(i,r){return r().catch(n=>jy(i,n,r))}function oi(i){return $y.apply(this,arguments)}function $y(){return($y=(0,we.Z)(function*(i){const r=Ve(i),n=mo(r);let s=r.Ur.length>0?r.Ur[r.Ur.length-1].batchId:-1;for(;rM(r);)try{const l=yield pI(r.localStore,s);if(null===l){0===r.Ur.length&&n.lr();break}s=l.batchId,II(r,l)}catch(l){yield jy(r,l)}Gy(r)&&jc(r)})).apply(this,arguments)}function rM(i){return gr(i)&&i.Ur.length<10}function II(i,r){i.Ur.push(r);const n=mo(i);n.cr()&&n.br&&n.Pr(r.mutations)}function Gy(i){return gr(i)&&!mo(i).ar()&&i.Ur.length>0}function jc(i){mo(i).start()}function xg(i){return Nw.apply(this,arguments)}function Nw(){return(Nw=(0,we.Z)(function*(i){mo(i).Sr()})).apply(this,arguments)}function $c(i){return Sw.apply(this,arguments)}function Sw(){return(Sw=(0,we.Z)(function*(i){const r=mo(i);for(const n of i.Ur)r.Pr(n.mutations)})).apply(this,arguments)}function TI(i,r,n){return kg.apply(this,arguments)}function kg(){return(kg=(0,we.Z)(function*(i,r,n){const s=i.Ur.shift(),l=Sy.from(s,r,n);yield In(i,()=>i.remoteSyncer.applySuccessfulWrite(l)),yield oi(i)})).apply(this,arguments)}function Og(i,r){return Pg.apply(this,arguments)}function Pg(){return(Pg=(0,we.Z)(function*(i,r){var n;r&&mo(i).br&&(yield(n=(0,we.Z)(function*(s,l){if(ID(c=l.code)&&c!==de.ABORTED){const g=s.Ur.shift();mo(s).hr(),yield In(s,()=>s.remoteSyncer.rejectFailedWrite(g.batchId,l)),yield oi(s)}var c}),function(s,l){return n.apply(this,arguments)})(i,r)),Gy(i)&&jc(i)})).apply(this,arguments)}function Wy(i,r){return au.apply(this,arguments)}function au(){return(au=(0,we.Z)(function*(i,r){const n=Ve(i);r?(n.Kr.delete(2),yield su(n)):r||(n.Kr.add(2),yield Rg(n),n.Wr.set("Unknown"))})).apply(this,arguments)}function zh(i){return i.zr||(i.zr=function(r,n,s){const l=Ve(r);return l.Cr(),new eM(n,l.nr,l.credentials,l.N,s)}(i.datastore,i.asyncQueue,{Si:Hc.bind(null,i),Ci:DI.bind(null,i),Tr:Xk.bind(null,i)}),i.jr.push(function(){var r=(0,we.Z)(function*(n){n?(i.zr.hr(),mt(i)?CI(i):i.Wr.set("Unknown")):(yield i.zr.stop(),Uy(i))});return function(n){return r.apply(this,arguments)}}())),i.zr}function mo(i){return i.Hr||(i.Hr=function(r,n,s){const l=Ve(r);return l.Cr(),new tM(n,l.nr,l.credentials,l.N,s)}(i.datastore,i.asyncQueue,{Si:xg.bind(null,i),Ci:Og.bind(null,i),Vr:$c.bind(null,i),vr:TI.bind(null,i)}),i.jr.push(function(){var r=(0,we.Z)(function*(n){n?(i.Hr.hr(),yield oi(i)):(yield i.Hr.stop(),i.Ur.length>0&&(Oe("RemoteStore",`Stopping write stream with ${i.Ur.length} pending writes`),i.Ur=[]))});return function(n){return r.apply(this,arguments)}}())),i.Hr}class qy{constructor(r,n,s,l,c){this.asyncQueue=r,this.timerId=n,this.targetTimeMs=s,this.op=l,this.removalCallback=c,this.deferred=new Ur,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(g=>{})}static createAndSchedule(r,n,s,l,c){const g=Date.now()+s,_=new qy(r,n,g,l,c);return _.start(s),_}start(r){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),r)}skipDelay(){return this.handleDelayElapsed()}cancel(r){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Me(de.CANCELLED,"Operation cancelled"+(r?": "+r:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(r=>this.deferred.resolve(r))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Gc(i,r){if(ir("AsyncQueue",`${r}: ${i}`),Xl(i))return new Me(de.UNAVAILABLE,`${r}: ${i}`);throw i}class Wc{constructor(r){this.comparator=r?(n,s)=>r(n,s)||Ke.comparator(n.key,s.key):(n,s)=>Ke.comparator(n.key,s.key),this.keyedMap=wy(),this.sortedSet=new pr(this.comparator)}static emptySet(r){return new Wc(r.comparator)}has(r){return null!=this.keyedMap.get(r)}get(r){return this.keyedMap.get(r)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(r){const n=this.keyedMap.get(r);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(r){this.sortedSet.inorderTraversal((n,s)=>(r(n),!1))}add(r){const n=this.delete(r.key);return n.copy(n.keyedMap.insert(r.key,r),n.sortedSet.insert(r,null))}delete(r){const n=this.get(r);return n?this.copy(this.keyedMap.remove(r),this.sortedSet.remove(n)):this}isEqual(r){if(!(r instanceof Wc)||this.size!==r.size)return!1;const n=this.sortedSet.getIterator(),s=r.sortedSet.getIterator();for(;n.hasNext();){const l=n.getNext().key,c=s.getNext().key;if(!l.isEqual(c))return!1}return!0}toString(){const r=[];return this.forEach(n=>{r.push(n.toString())}),0===r.length?"DocumentSet ()":"DocumentSet (\n  "+r.join("  \n")+"\n)"}copy(r,n){const s=new Wc;return s.comparator=this.comparator,s.keyedMap=r,s.sortedSet=n,s}}class Fg{constructor(){this.Jr=new pr(Ke.comparator)}track(r){const n=r.doc.key,s=this.Jr.get(n);s?0!==r.type&&3===s.type?this.Jr=this.Jr.insert(n,r):3===r.type&&1!==s.type?this.Jr=this.Jr.insert(n,{type:s.type,doc:r.doc}):2===r.type&&2===s.type?this.Jr=this.Jr.insert(n,{type:2,doc:r.doc}):2===r.type&&0===s.type?this.Jr=this.Jr.insert(n,{type:0,doc:r.doc}):1===r.type&&0===s.type?this.Jr=this.Jr.remove(n):1===r.type&&2===s.type?this.Jr=this.Jr.insert(n,{type:1,doc:s.doc}):0===r.type&&1===s.type?this.Jr=this.Jr.insert(n,{type:2,doc:r.doc}):Ze():this.Jr=this.Jr.insert(n,r)}Yr(){const r=[];return this.Jr.inorderTraversal((n,s)=>{r.push(s)}),r}}class Yh{constructor(r,n,s,l,c,g,_,w){this.query=r,this.docs=n,this.oldDocs=s,this.docChanges=l,this.mutatedKeys=c,this.fromCache=g,this.syncStateChanged=_,this.excludesMetadataChanges=w}static fromInitialDocuments(r,n,s,l){const c=[];return n.forEach(g=>{c.push({type:0,doc:g})}),new Yh(r,n,Wc.emptySet(n),c,s,l,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(r){if(!(this.fromCache===r.fromCache&&this.syncStateChanged===r.syncStateChanged&&this.mutatedKeys.isEqual(r.mutatedKeys)&&Yi(this.query,r.query)&&this.docs.isEqual(r.docs)&&this.oldDocs.isEqual(r.oldDocs)))return!1;const n=this.docChanges,s=r.docChanges;if(n.length!==s.length)return!1;for(let l=0;l<n.length;l++)if(n[l].type!==s[l].type||!n[l].doc.isEqual(s[l].doc))return!1;return!0}}class Aw{constructor(){this.Xr=void 0,this.listeners=[]}}class Mw{constructor(){this.queries=new Za(r=>_D(r),Yi),this.onlineState="Unknown",this.Zr=new Set}}function NI(i,r){return SI.apply(this,arguments)}function SI(){return(SI=(0,we.Z)(function*(i,r){const n=Ve(i),s=r.query;let l=!1,c=n.queries.get(s);if(c||(l=!0,c=new Aw),l)try{c.Xr=yield n.onListen(s)}catch(g){const _=Gc(g,`Initialization of query '${my(r.query)}' failed`);return void r.onError(_)}n.queries.set(s,c),c.listeners.push(r),r.eo(n.onlineState),c.Xr&&r.no(c.Xr)&&Rw(n)})).apply(this,arguments)}function ht(i,r){return AI.apply(this,arguments)}function AI(){return(AI=(0,we.Z)(function*(i,r){const n=Ve(i),s=r.query;let l=!1;const c=n.queries.get(s);if(c){const g=c.listeners.indexOf(r);g>=0&&(c.listeners.splice(g,1),l=0===c.listeners.length)}if(l)return n.queries.delete(s),n.onUnlisten(s)})).apply(this,arguments)}function Lg(i,r){const n=Ve(i);let s=!1;for(const l of r){const g=n.queries.get(l.query);if(g){for(const _ of g.listeners)_.no(l)&&(s=!0);g.Xr=l}}s&&Rw(n)}function iM(i,r,n){const s=Ve(i),l=s.queries.get(r);if(l)for(const c of l.listeners)c.onError(n);s.queries.delete(r)}function Rw(i){i.Zr.forEach(r=>{r.next()})}class xw{constructor(r,n,s){this.query=r,this.so=n,this.io=!1,this.ro=null,this.onlineState="Unknown",this.options=s||{}}no(r){if(!this.options.includeMetadataChanges){const s=[];for(const l of r.docChanges)3!==l.type&&s.push(l);r=new Yh(r.query,r.docs,r.oldDocs,s,r.mutatedKeys,r.fromCache,r.syncStateChanged,!0)}let n=!1;return this.io?this.oo(r)&&(this.so.next(r),n=!0):this.ao(r,this.onlineState)&&(this.co(r),n=!0),this.ro=r,n}onError(r){this.so.error(r)}eo(r){this.onlineState=r;let n=!1;return this.ro&&!this.io&&this.ao(this.ro,r)&&(this.co(this.ro),n=!0),n}ao(r,n){return!r.fromCache||!(this.options.uo&&"Offline"!==n||r.docs.isEmpty()&&"Offline"!==n)}oo(r){return r.docChanges.length>0||!!(r.syncStateChanged||this.ro&&this.ro.hasPendingWrites!==r.hasPendingWrites)&&!0===this.options.includeMetadataChanges}co(r){r=Yh.fromInitialDocuments(r.query,r.docs,r.mutatedKeys,r.fromCache),this.io=!0,this.so.next(r)}}class eO{constructor(r,n){this.payload=r,this.byteLength=n}ho(){return"metadata"in this.payload}}class sM{constructor(r){this.N=r}zn(r){return fs(this.N,r)}Hn(r){return r.metadata.exists?FD(this.N,r.document,!1):mn.newNoDocument(this.zn(r.metadata.name),this.Jn(r.metadata.readTime))}Jn(r){return Sr(r)}}class oM{constructor(r,n,s){this.lo=r,this.localStore=n,this.N=s,this.queries=[],this.documents=[],this.progress=Wr(r)}fo(r){this.progress.bytesLoaded+=r.byteLength;let n=this.progress.documentsLoaded;return r.payload.namedQuery?this.queries.push(r.payload.namedQuery):r.payload.documentMetadata?(this.documents.push({metadata:r.payload.documentMetadata}),r.payload.documentMetadata.exists||++n):r.payload.document&&(this.documents[this.documents.length-1].document=r.payload.document,++n),n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,Object.assign({},this.progress)):null}wo(r){const n=new Map,s=new sM(this.N);for(const l of r)if(l.metadata.queries){const c=s.zn(l.metadata.name);for(const g of l.metadata.queries){const _=(n.get(g)||Yt()).add(c);n.set(g,_)}}return n}complete(){var r=this;return(0,we.Z)(function*(){const n=yield function(i,r,n,s){return Lc.apply(this,arguments)}(r.localStore,new sM(r.N),r.documents,r.lo.id),s=r.wo(r.documents);for(const l of r.queries)yield GA(r.localStore,l,s.get(l.name));return r.progress.taskState="Success",new HA(Object.assign({},r.progress),n)})()}}function Wr(i){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:i.totalDocuments,totalBytes:i.totalBytes}}class MI{constructor(r){this.key=r}}class RI{constructor(r){this.key=r}}class zy{constructor(r,n){this.query=r,this._o=n,this.mo=null,this.current=!1,this.yo=Yt(),this.mutatedKeys=Yt(),this.po=Us(r),this.Eo=new Wc(this.po)}get To(){return this._o}Io(r,n){const s=n?n.Ao:new Fg,l=n?n.Eo:this.Eo;let c=n?n.mutatedKeys:this.mutatedKeys,g=l,_=!1;const w=dy(this.query)&&l.size===this.query.limit?l.last():null,T=hy(this.query)&&l.size===this.query.limit?l.first():null;if(r.inorderTraversal((S,A)=>{const x=l.get(S),V=Zi(this.query,A)?A:null,z=!!x&&this.mutatedKeys.has(x.key),ue=!!V&&(V.hasLocalMutations||this.mutatedKeys.has(V.key)&&V.hasCommittedMutations);let Ae=!1;x&&V?x.data.isEqual(V.data)?z!==ue&&(s.track({type:3,doc:V}),Ae=!0):this.Ro(x,V)||(s.track({type:2,doc:V}),Ae=!0,(w&&this.po(V,w)>0||T&&this.po(V,T)<0)&&(_=!0)):!x&&V?(s.track({type:0,doc:V}),Ae=!0):x&&!V&&(s.track({type:1,doc:x}),Ae=!0,(w||T)&&(_=!0)),Ae&&(V?(g=g.add(V),c=ue?c.add(S):c.delete(S)):(g=g.delete(S),c=c.delete(S)))}),dy(this.query)||hy(this.query))for(;g.size>this.query.limit;){const S=dy(this.query)?g.last():g.first();g=g.delete(S.key),c=c.delete(S.key),s.track({type:1,doc:S})}return{Eo:g,Ao:s,Ln:_,mutatedKeys:c}}Ro(r,n){return r.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(r,n,s){const l=this.Eo;this.Eo=r.Eo,this.mutatedKeys=r.mutatedKeys;const c=r.Ao.Yr();c.sort((T,S)=>function(A,x){const V=z=>{switch(z){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ze()}};return V(A)-V(x)}(T.type,S.type)||this.po(T.doc,S.doc)),this.bo(s);const g=n?this.Po():[],_=0===this.yo.size&&this.current?1:0,w=_!==this.mo;return this.mo=_,0!==c.length||w?{snapshot:new Yh(this.query,r.Eo,l,c,r.mutatedKeys,0===_,w,!1),vo:g}:{vo:g}}eo(r){return this.current&&"Offline"===r?(this.current=!1,this.applyChanges({Eo:this.Eo,Ao:new Fg,mutatedKeys:this.mutatedKeys,Ln:!1},!1)):{vo:[]}}Vo(r){return!this._o.has(r)&&!!this.Eo.has(r)&&!this.Eo.get(r).hasLocalMutations}bo(r){r&&(r.addedDocuments.forEach(n=>this._o=this._o.add(n)),r.modifiedDocuments.forEach(n=>{}),r.removedDocuments.forEach(n=>this._o=this._o.delete(n)),this.current=r.current)}Po(){if(!this.current)return[];const r=this.yo;this.yo=Yt(),this.Eo.forEach(s=>{this.Vo(s.key)&&(this.yo=this.yo.add(s.key))});const n=[];return r.forEach(s=>{this.yo.has(s)||n.push(new RI(s))}),this.yo.forEach(s=>{r.has(s)||n.push(new MI(s))}),n}So(r){this._o=r.Gn,this.yo=Yt();const n=this.Io(r.documents);return this.applyChanges(n,!0)}Do(){return Yh.fromInitialDocuments(this.query,this.Eo,this.mutatedKeys,0===this.mo)}}class aM{constructor(r,n,s){this.query=r,this.targetId=n,this.view=s}}class lM{constructor(r){this.key=r,this.Co=!1}}class uM{constructor(r,n,s,l,c,g){this.localStore=r,this.remoteStore=n,this.eventManager=s,this.sharedClientState=l,this.currentUser=c,this.maxConcurrentLimboResolutions=g,this.No={},this.xo=new Za(_=>_D(_),Yi),this.ko=new Map,this.$o=new Set,this.Oo=new pr(Ke.comparator),this.Fo=new Map,this.Mo=new Cw,this.Lo={},this.Bo=new Map,this.Uo=Pc.ie(),this.onlineState="Unknown",this.qo=void 0}get isPrimaryClient(){return!0===this.qo}}function cM(i,r){return kw.apply(this,arguments)}function kw(){return(kw=(0,we.Z)(function*(i,r){const n=_s(i);let s,l;const c=n.xo.get(r);if(c)s=c.targetId,n.sharedClientState.addLocalQueryTarget(s),l=c.view.Do();else{const g=yield Fc(n.localStore,zi(r)),_=n.sharedClientState.addLocalQueryTarget(g.targetId);s=g.targetId,l=yield Ow(n,r,s,"current"===_),n.isPrimaryClient&&$t(n.remoteStore,g)}return l})).apply(this,arguments)}function Ow(i,r,n,s){return Vg.apply(this,arguments)}function Vg(){return(Vg=(0,we.Z)(function*(i,r,n,s){i.Ko=(S,A,x)=>{return(V=(0,we.Z)(function*(z,ue,Ae,Qe){let Je=ue.view.Io(Ae);Je.Ln&&(Je=yield Ng(z.localStore,ue.query,!1).then(({documents:_r})=>ue.view.Io(_r,Je)));const yt=Qe&&Qe.targetChanges.get(ue.targetId),Gt=ue.view.applyChanges(Je,z.isPrimaryClient,yt);return Uw(z,ue.targetId,Gt.vo),Gt.snapshot}),function(z,ue,Ae,Qe){return V.apply(this,arguments)})(i,S,A,x);var V};const l=yield Ng(i.localStore,r,!0),c=new zy(r,l.Gn),g=c.Io(l.documents),_=xc.createSynthesizedTargetChangeForCurrentChange(n,s&&"Offline"!==i.onlineState),w=c.applyChanges(g,i.isPrimaryClient,_);Uw(i,n,w.vo);const T=new aM(r,n,c);return i.xo.set(r,T),i.ko.has(n)?i.ko.get(n).push(r):i.ko.set(n,[r]),w.snapshot})).apply(this,arguments)}function dM(i,r){return Pw.apply(this,arguments)}function Pw(){return(Pw=(0,we.Z)(function*(i,r){const n=Ve(i),s=n.xo.get(r),l=n.ko.get(s.targetId);if(l.length>1)return n.ko.set(s.targetId,l.filter(c=>!Yi(c,r))),void n.xo.delete(r);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(s.targetId),n.sharedClientState.isActiveQueryTarget(s.targetId)||(yield jh(n.localStore,s.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(s.targetId),js(n.remoteStore,s.targetId),Ug(n,s.targetId)}).catch(ru))):(Ug(n,s.targetId),yield jh(n.localStore,s.targetId,!0))})).apply(this,arguments)}function Bg(){return(Bg=(0,we.Z)(function*(i,r,n){const s=jg(i);try{const l=yield function(c,g){const _=Ve(c),w=Tr.now(),T=g.reduce((A,x)=>A.add(x.key),Yt());let S;return _.persistence.runTransaction("Locally write mutations","readwrite",A=>_.Qn.Pn(A,T).next(x=>{S=x;const V=[];for(const z of g){const ue=CD(z,S.get(z.key));null!=ue&&V.push(new Zl(z.key,ue,lD(ue.value.mapValue),kn.exists(!0)))}return _.In.addMutationBatch(A,w,V,g)})).then(A=>(A.applyToLocalDocumentSet(S),{batchId:A.batchId,changes:S}))}(s.localStore,r);s.sharedClientState.addPendingMutation(l.batchId),function(c,g,_){let w=c.Lo[c.currentUser.toKey()];w||(w=new pr(At)),w=w.insert(g,_),c.Lo[c.currentUser.toKey()]=w}(s,l.batchId,n),yield Qa(s,l.changes),yield oi(s.remoteStore)}catch(l){const c=Gc(l,"Failed to persist write");n.reject(c)}})).apply(this,arguments)}function kI(i,r){return OI.apply(this,arguments)}function OI(){return(OI=(0,we.Z)(function*(i,r){const n=Ve(i);try{const s=yield $A(n.localStore,r);r.targetChanges.forEach((l,c)=>{const g=n.Fo.get(c);g&&(ct(l.addedDocuments.size+l.modifiedDocuments.size+l.removedDocuments.size<=1),l.addedDocuments.size>0?g.Co=!0:l.modifiedDocuments.size>0?ct(g.Co):l.removedDocuments.size>0&&(ct(g.Co),g.Co=!1))}),yield Qa(n,s,r)}catch(s){yield ru(s)}})).apply(this,arguments)}function PI(i,r,n){const s=Ve(i);if(s.isPrimaryClient&&0===n||!s.isPrimaryClient&&1===n){const l=[];s.xo.forEach((c,g)=>{const _=g.view.eo(r);_.snapshot&&l.push(_.snapshot)}),function(c,g){const _=Ve(c);_.onlineState=g;let w=!1;_.queries.forEach((T,S)=>{for(const A of S.listeners)A.eo(g)&&(w=!0)}),w&&Rw(_)}(s.eventManager,r),l.length&&s.No.Tr(l),s.onlineState=r,s.isPrimaryClient&&s.sharedClientState.setOnlineState(r)}}function hM(i,r,n){return Fw.apply(this,arguments)}function Fw(){return(Fw=(0,we.Z)(function*(i,r,n){const s=Ve(i);s.sharedClientState.updateQueryState(r,"rejected",n);const l=s.Fo.get(r),c=l&&l.key;if(c){let g=new pr(Ke.comparator);g=g.insert(c,mn.newNoDocument(c,Ct.min()));const _=Yt().add(c),w=new Nh(Ct.min(),new Map,new Hn(At),g,_);yield kI(s,w),s.Oo=s.Oo.remove(c),s.Fo.delete(r),Hw(s)}else yield jh(s.localStore,r,!1).then(()=>Ug(s,r,n)).catch(ru)})).apply(this,arguments)}function fM(i,r){return Lw.apply(this,arguments)}function Lw(){return(Lw=(0,we.Z)(function*(i,r){const n=Ve(i),s=r.batch.batchId;try{const l=yield jA(n.localStore,r);zc(n,s,null),Yy(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),yield Qa(n,l)}catch(l){yield ru(l)}})).apply(this,arguments)}function pM(i,r,n){return qc.apply(this,arguments)}function qc(){return(qc=(0,we.Z)(function*(i,r,n){const s=Ve(i);try{const l=yield function(c,g){const _=Ve(c);return _.persistence.runTransaction("Reject batch","readwrite-primary",w=>{let T;return _.In.lookupMutationBatch(w,g).next(S=>(ct(null!==S),T=S.keys(),_.In.removeMutationBatch(w,S))).next(()=>_.In.performConsistencyCheck(w)).next(()=>_.Qn.Pn(w,T))})}(s.localStore,r);zc(s,r,n),Yy(s,r),s.sharedClientState.updateMutationState(r,"rejected",n),yield Qa(s,l)}catch(l){yield ru(l)}})).apply(this,arguments)}function Vw(){return(Vw=(0,we.Z)(function*(i,r){const n=Ve(i);gr(n.remoteStore)||Oe("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const s=yield function(c){const g=Ve(c);return g.persistence.runTransaction("Get highest unacknowledged batch id","readonly",_=>g.In.getHighestUnacknowledgedBatchId(_))}(n.localStore);if(-1===s)return void r.resolve();const l=n.Bo.get(s)||[];l.push(r),n.Bo.set(s,l)}catch(s){const l=Gc(s,"Initialization of waitForPendingWrites() operation failed");r.reject(l)}})).apply(this,arguments)}function Yy(i,r){(i.Bo.get(r)||[]).forEach(n=>{n.resolve()}),i.Bo.delete(r)}function zc(i,r,n){const s=Ve(i);let l=s.Lo[s.currentUser.toKey()];if(l){const c=l.get(r);c&&(n?c.reject(n):c.resolve(),l=l.remove(r)),s.Lo[s.currentUser.toKey()]=l}}function Ug(i,r,n=null){i.sharedClientState.removeLocalQueryTarget(r);for(const s of i.ko.get(r))i.xo.delete(s),n&&i.No.jo(s,n);i.ko.delete(r),i.isPrimaryClient&&i.Mo.cs(r).forEach(s=>{i.Mo.containsKey(s)||Bw(i,s)})}function Bw(i,r){i.$o.delete(r.path.canonicalString());const n=i.Oo.get(r);null!==n&&(js(i.remoteStore,n),i.Oo=i.Oo.remove(r),i.Fo.delete(n),Hw(i))}function Uw(i,r,n){for(const s of n)s instanceof MI?(i.Mo.addReference(s.key,r),mM(i,s)):s instanceof RI?(Oe("SyncEngine","Document no longer in limbo: "+s.key),i.Mo.removeReference(s.key,r),i.Mo.containsKey(s.key)||Bw(i,s.key)):Ze()}function mM(i,r){const n=r.key,s=n.path.canonicalString();i.Oo.get(n)||i.$o.has(s)||(Oe("SyncEngine","New document in limbo: "+n),i.$o.add(s),Hw(i))}function Hw(i){for(;i.$o.size>0&&i.Oo.size<i.maxConcurrentLimboResolutions;){const r=i.$o.values().next().value;i.$o.delete(r);const n=new Ke(zt.fromString(r)),s=i.Uo.next();i.Fo.set(s,new lM(n)),i.Oo=i.Oo.insert(n,s),$t(i.remoteStore,new za(zi(co(n.path)),s,2,qi.T))}}function Qa(i,r,n){return jw.apply(this,arguments)}function jw(){return(jw=(0,we.Z)(function*(i,r,n){const s=Ve(i),l=[],c=[],g=[];var _;s.xo.isEmpty()||(s.xo.forEach((_,w)=>{g.push(s.Ko(w,r,n).then(T=>{if(T){s.isPrimaryClient&&s.sharedClientState.updateQueryState(w.targetId,T.fromCache?"not-current":"current"),l.push(T);const S=Tg.kn(w.targetId,T);c.push(S)}}))}),yield Promise.all(g),s.No.Tr(l),yield(_=(0,we.Z)(function*(w,T){const S=Ve(w);try{yield S.persistence.runTransaction("notifyLocalViewChanges","readwrite",A=>Se.forEach(T,x=>Se.forEach(x.Nn,V=>S.persistence.referenceDelegate.addReference(A,x.targetId,V)).next(()=>Se.forEach(x.xn,V=>S.persistence.referenceDelegate.removeReference(A,x.targetId,V)))))}catch(A){if(!Xl(A))throw A;Oe("LocalStore","Failed to update sequence numbers: "+A)}for(const A of T){const x=A.targetId;if(!A.fromCache){const V=S.Un.get(x),ue=V.withLastLimboFreeSnapshotVersion(V.snapshotVersion);S.Un=S.Un.insert(x,ue)}}}),function(w,T){return _.apply(this,arguments)})(s.localStore,c))})).apply(this,arguments)}function FI(i,r){return $w.apply(this,arguments)}function $w(){return($w=(0,we.Z)(function*(i,r){const n=Ve(i);if(!n.currentUser.isEqual(r)){Oe("SyncEngine","User change. New user:",r.toKey());const s=yield dI(n.localStore,r);n.currentUser=r,(l=n).Bo.forEach(g=>{g.forEach(_=>{_.reject(new Me(de.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),l.Bo.clear(),n.sharedClientState.handleUserChange(r,s.removedBatchIds,s.addedBatchIds),yield Qa(n,s.Wn)}var l})).apply(this,arguments)}function _M(i,r){const n=Ve(i),s=n.Fo.get(r);if(s&&s.Co)return Yt().add(s.key);{let l=Yt();const c=n.ko.get(r);if(!c)return l;for(const g of c){const _=n.xo.get(g);l=l.unionWith(_.view.To)}return l}}function tO(i,r){return LI.apply(this,arguments)}function LI(){return(LI=(0,we.Z)(function*(i,r){const n=Ve(i),s=yield Ng(n.localStore,r.query,!0),l=r.view.So(s);return n.isPrimaryClient&&Uw(n,r.targetId,l.vo),l})).apply(this,arguments)}function nO(i){return Hg.apply(this,arguments)}function Hg(){return(Hg=(0,we.Z)(function*(i){const r=Ve(i);return gI(r.localStore).then(n=>Qa(r,n))})).apply(this,arguments)}function yM(i,r,n,s){return Gw.apply(this,arguments)}function Gw(){return(Gw=(0,we.Z)(function*(i,r,n,s){const l=Ve(i),c=yield function(g,_){const w=Ve(g),T=Ve(w.In);return w.persistence.runTransaction("Lookup mutation documents","readonly",S=>T.Xt(S,_).next(A=>A?w.Qn.Pn(S,A):Se.resolve(null)))}(l.localStore,r);var _;null!==c?("pending"===n?yield oi(l.remoteStore):"acknowledged"===n||"rejected"===n?(zc(l,r,s||null),Yy(l,r),_=r,Ve(Ve(l.localStore).In).te(_)):Ze(),yield Qa(l,c)):Oe("SyncEngine","Cannot apply mutation batch with id: "+r)})).apply(this,arguments)}function Ww(){return(Ww=(0,we.Z)(function*(i,r){const n=Ve(i);if(_s(n),jg(n),!0===r&&!0!==n.qo){const s=n.sharedClientState.getAllActiveQueryTargets(),l=yield VI(n,s.toArray());n.qo=!0,yield Wy(n.remoteStore,!0);for(const c of l)$t(n.remoteStore,c)}else if(!1===r&&!1!==n.qo){const s=[];let l=Promise.resolve();n.ko.forEach((c,g)=>{n.sharedClientState.isLocalQueryTarget(g)?s.push(g):l=l.then(()=>(Ug(n,g),jh(n.localStore,g,!0))),js(n.remoteStore,g)}),yield l,yield VI(n,s),function(c){const g=Ve(c);g.Fo.forEach((_,w)=>{js(g.remoteStore,w)}),g.Mo.us(),g.Fo=new Map,g.Oo=new pr(Ke.comparator)}(n),n.qo=!1,yield Wy(n.remoteStore,!1)}})).apply(this,arguments)}function VI(i,r,n){return qw.apply(this,arguments)}function qw(){return(qw=(0,we.Z)(function*(i,r,n){const s=Ve(i),l=[],c=[];for(const g of r){let _;const w=s.ko.get(g);if(w&&0!==w.length){_=yield Fc(s.localStore,zi(w[0]));for(const T of w){const S=s.xo.get(T),A=yield tO(s,S);A.snapshot&&c.push(A.snapshot)}}else{const T=yield Sg(s.localStore,g);_=yield Fc(s.localStore,T),yield Ow(s,zw(T),g,!1)}l.push(_)}return s.No.Tr(c),l})).apply(this,arguments)}function zw(i){return Wb(i.path,i.collectionGroup,i.orderBy,i.filters,i.limit,"F",i.startAt,i.endAt)}function Yw(i){const r=Ve(i);return Ve(Ve(r.localStore).persistence).pn()}function bM(i,r,n,s){return lu.apply(this,arguments)}function lu(){return(lu=(0,we.Z)(function*(i,r,n,s){const l=Ve(i);if(l.qo)Oe("SyncEngine","Ignoring unexpected query state notification.");else if(l.ko.has(r))switch(n){case"current":case"not-current":{const c=yield gI(l.localStore),g=Nh.createSynthesizedRemoteEventForCurrentChange(r,"current"===n);yield Qa(l,c,g);break}case"rejected":yield jh(l.localStore,r,!0),Ug(l,r,s);break;default:Ze()}})).apply(this,arguments)}function ai(i,r,n){return Zy.apply(this,arguments)}function Zy(){return(Zy=(0,we.Z)(function*(i,r,n){const s=_s(i);if(s.qo){for(const l of r){if(s.ko.has(l)){Oe("SyncEngine","Adding an already active target "+l);continue}const c=yield Sg(s.localStore,l),g=yield Fc(s.localStore,c);yield Ow(s,zw(c),g.targetId,!1),$t(s.remoteStore,g)}for(const l of n)s.ko.has(l)&&(yield jh(s.localStore,l,!1).then(()=>{js(s.remoteStore,l),Ug(s,l)}).catch(ru))}})).apply(this,arguments)}function _s(i){const r=Ve(i);return r.remoteStore.remoteSyncer.applyRemoteEvent=kI.bind(null,r),r.remoteStore.remoteSyncer.getRemoteKeysForTarget=_M.bind(null,r),r.remoteStore.remoteSyncer.rejectListen=hM.bind(null,r),r.No.Tr=Lg.bind(null,r.eventManager),r.No.jo=iM.bind(null,r.eventManager),r}function jg(i){const r=Ve(i);return r.remoteStore.remoteSyncer.applySuccessfulWrite=fM.bind(null,r),r.remoteStore.remoteSyncer.rejectFailedWrite=pM.bind(null,r),r}class Zw{constructor(){this.synchronizeTabs=!1}initialize(r){var n=this;return(0,we.Z)(function*(){n.N=Bc(r.databaseInfo.databaseId),n.sharedClientState=n.Wo(r),n.persistence=n.Go(r),yield n.persistence.start(),n.gcScheduler=n.zo(r),n.localStore=n.Ho(r)})()}zo(r){return null}Ho(r){return yw(this.persistence,new mw,r.initialUser,this.N)}Go(r){return new ZA(Ew.Ns,this.N)}Wo(r){return new yI}terminate(){var r=this;return(0,we.Z)(function*(){r.gcScheduler&&r.gcScheduler.stop(),yield r.sharedClientState.shutdown(),yield r.persistence.shutdown()})()}}class Kw extends Zw{constructor(r,n,s){super(),this.Jo=r,this.cacheSizeBytes=n,this.forceOwnership=s,this.synchronizeTabs=!1}initialize(r){var n=()=>super.initialize,s=this;return(0,we.Z)(function*(){yield n().call(s,r),yield function(i){return $h.apply(this,arguments)}(s.localStore),yield s.Jo.initialize(s,r),yield jg(s.Jo.syncEngine),yield oi(s.Jo.remoteStore),yield s.persistence.nn(()=>(s.gcScheduler&&!s.gcScheduler.started&&s.gcScheduler.start(s.localStore),Promise.resolve()))})()}Ho(r){return yw(this.persistence,new mw,r.initialUser,this.N)}zo(r){return new LA(this.persistence.referenceDelegate.garbageCollector,r.asyncQueue)}Go(r){const n=gw(r.databaseInfo.databaseId,r.databaseInfo.persistenceKey),s=void 0!==this.cacheSizeBytes?Ni.withCacheSize(this.cacheSizeBytes):Ni.DEFAULT;return new fw(this.synchronizeTabs,n,r.clientId,s,r.asyncQueue,Dw(),Mg(),this.N,this.sharedClientState,!!this.forceOwnership)}Wo(r){return new yI}}class BI extends Kw{constructor(r,n){super(r,n,!1),this.Jo=r,this.cacheSizeBytes=n,this.synchronizeTabs=!0}initialize(r){var n=()=>super.initialize,s=this;return(0,we.Z)(function*(){yield n().call(s,r);const l=s.Jo.syncEngine;s.sharedClientState instanceof Ly&&(s.sharedClientState.syncEngine={_i:yM.bind(null,l),mi:bM.bind(null,l),gi:ai.bind(null,l),pn:Yw.bind(null,l),wi:nO.bind(null,l)},yield s.sharedClientState.start()),yield s.persistence.nn(function(){var c=(0,we.Z)(function*(g){yield function(i,r){return Ww.apply(this,arguments)}(s.Jo.syncEngine,g),s.gcScheduler&&(g&&!s.gcScheduler.started?s.gcScheduler.start(s.localStore):g||s.gcScheduler.stop())});return function(g){return c.apply(this,arguments)}}())})()}Wo(r){const n=Dw();if(!Ly.bt(n))throw new Me(de.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const s=gw(r.databaseInfo.databaseId,r.databaseInfo.persistenceKey);return new Ly(n,r.asyncQueue,s,r.clientId,r.initialUser)}}class Qw{initialize(r,n){var s=this;return(0,we.Z)(function*(){s.localStore||(s.localStore=r.localStore,s.sharedClientState=r.sharedClientState,s.datastore=s.createDatastore(n),s.remoteStore=s.createRemoteStore(n),s.eventManager=s.createEventManager(n),s.syncEngine=s.createSyncEngine(n,!r.synchronizeTabs),s.sharedClientState.onlineStateHandler=l=>PI(s.syncEngine,l,1),s.remoteStore.remoteSyncer.handleCredentialChange=FI.bind(null,s.syncEngine),yield Wy(s.remoteStore,s.syncEngine.isPrimaryClient))})()}createEventManager(r){return new Mw}createDatastore(r){const n=Bc(r.databaseInfo.databaseId),s=new XA(r.databaseInfo);return new bI(r.credentials,s,n)}createRemoteStore(r){return n=this.localStore,s=this.datastore,l=r.asyncQueue,c=_=>PI(this.syncEngine,_,0),g=vI.bt()?new vI:new Jk,new wI(n,s,l,c,g);var n,s,l,c,g}createSyncEngine(r,n){return function(s,l,c,g,_,w,T){const S=new uM(s,l,c,g,_,w);return T&&(S.qo=!0),S}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,r.initialUser,r.maxConcurrentLimboResolutions,n)}terminate(){return(r=(0,we.Z)(function*(n){const s=Ve(n);Oe("RemoteStore","RemoteStore shutting down."),s.Kr.add(5),yield Rg(s),s.Qr.shutdown(),s.Wr.set("Unknown")}),function(n){return r.apply(this,arguments)})(this.remoteStore);var r}}function UI(i,r=10240){let n=0;return{read:()=>(0,we.Z)(function*(){if(n<i.byteLength){const s={value:i.slice(n,n+r),done:!1};return n+=r,s}return{done:!0}})(),cancel:()=>(0,we.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class Ky{constructor(r){this.observer=r,this.muted=!1}next(r){this.observer.next&&this.Yo(this.observer.next,r)}error(r){this.observer.error?this.Yo(this.observer.error,r):console.error("Uncaught Error in snapshot listener:",r)}Xo(){this.muted=!0}Yo(r,n){this.muted||setTimeout(()=>{this.muted||r(n)},0)}}class HI{constructor(r,n){this.Zo=r,this.N=n,this.metadata=new Ur,this.buffer=new Uint8Array,this.ta=new TextDecoder("utf-8"),this.ea().then(s=>{s&&s.ho()?this.metadata.resolve(s.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==s?void 0:s.payload)}`))},s=>this.metadata.reject(s))}close(){return this.Zo.cancel()}getMetadata(){var r=this;return(0,we.Z)(function*(){return r.metadata.promise})()}Qo(){var r=this;return(0,we.Z)(function*(){return yield r.getMetadata(),r.ea()})()}ea(){var r=this;return(0,we.Z)(function*(){const n=yield r.na();if(null===n)return null;const s=r.ta.decode(n),l=Number(s);isNaN(l)&&r.sa(`length string (${s}) is not valid number`);const c=yield r.ia(l);return new eO(JSON.parse(c),n.length+l)})()}ra(){return this.buffer.findIndex(r=>r==="{".charCodeAt(0))}na(){var r=this;return(0,we.Z)(function*(){for(;r.ra()<0&&!(yield r.oa()););if(0===r.buffer.length)return null;const n=r.ra();n<0&&r.sa("Reached the end of bundle when a length string is expected.");const s=r.buffer.slice(0,n);return r.buffer=r.buffer.slice(n),s})()}ia(r){var n=this;return(0,we.Z)(function*(){for(;n.buffer.length<r;)(yield n.oa())&&n.sa("Reached the end of bundle when more is expected.");const s=n.ta.decode(n.buffer.slice(0,r));return n.buffer=n.buffer.slice(r),s})()}sa(r){throw this.Zo.cancel(),new Error(`Invalid bundle format: ${r}`)}oa(){var r=this;return(0,we.Z)(function*(){const n=yield r.Zo.read();if(!n.done){const s=new Uint8Array(r.buffer.length+n.value.length);s.set(r.buffer),s.set(n.value,r.buffer.length),r.buffer=s}return n.done})()}}class CM{constructor(r){this.datastore=r,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(r){var n=this;return(0,we.Z)(function*(){if(n.ensureCommitNotCalled(),n.mutations.length>0)throw new Me(de.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const s=yield(l=(0,we.Z)(function*(c,g){const _=Ve(c),w=Dy(_.N)+"/documents",T={documents:g.map(V=>mg(_.N,V))},S=yield _.Ki("BatchGetDocuments",w,T),A=new Map;S.forEach(V=>{const z=function(i,r){return"found"in r?function(n,s){ct(!!s.found);const l=fs(n,s.found.name),c=Sr(s.found.updateTime),g=new Hr({mapValue:{fields:s.found.fields}});return mn.newFoundDocument(l,c,g)}(i,r):"missing"in r?function(n,s){ct(!!s.missing),ct(!!s.readTime);const l=fs(n,s.missing),c=Sr(s.readTime);return mn.newNoDocument(l,c)}(i,r):Ze()}(_.N,V);A.set(z.key.toString(),z)});const x=[];return g.forEach(V=>{const z=A.get(V.toString());ct(!!z),x.push(z)}),x}),function(c,g){return l.apply(this,arguments)})(n.datastore,r);var l;return s.forEach(l=>n.recordVersion(l)),s})()}set(r,n){this.write(n.toMutation(r,this.precondition(r))),this.writtenDocs.add(r.toString())}update(r,n){try{this.write(n.toMutation(r,this.preconditionForUpdate(r)))}catch(s){this.lastWriteError=s}this.writtenDocs.add(r.toString())}delete(r){this.write(new hg(r,this.precondition(r))),this.writtenDocs.add(r.toString())}commit(){var r=this;return(0,we.Z)(function*(){if(r.ensureCommitNotCalled(),r.lastWriteError)throw r.lastWriteError;const n=r.readVersions;var s;r.mutations.forEach(s=>{n.delete(s.key.toString())}),n.forEach((s,l)=>{const c=Ke.fromPath(l);r.mutations.push(new tw(c,r.precondition(c)))}),yield(s=(0,we.Z)(function*(l,c){const g=Ve(l),_=Dy(g.N)+"/documents",w={writes:c.map(T=>_g(g.N,T))};yield g.Li("Commit",_,w)}),function(l,c){return s.apply(this,arguments)})(r.datastore,r.mutations),r.committed=!0})()}recordVersion(r){let n;if(r.isFoundDocument())n=r.version;else{if(!r.isNoDocument())throw Ze();n=Ct.min()}const s=this.readVersions.get(r.key.toString());if(s){if(!n.isEqual(s))throw new Me(de.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(r.key.toString(),n)}precondition(r){const n=this.readVersions.get(r.toString());return!this.writtenDocs.has(r.toString())&&n?kn.updateTime(n):kn.none()}preconditionForUpdate(r){const n=this.readVersions.get(r.toString());if(!this.writtenDocs.has(r.toString())&&n){if(n.isEqual(Ct.min()))throw new Me(de.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return kn.updateTime(n)}return kn.exists(!0)}write(r){this.ensureCommitNotCalled(),this.mutations.push(r)}ensureCommitNotCalled(){}}class rO{constructor(r,n,s,l){this.asyncQueue=r,this.datastore=n,this.updateFunction=s,this.deferred=l,this.aa=5,this.rr=new By(this.asyncQueue,"transaction_retry")}run(){this.aa-=1,this.ca()}ca(){var r=this;this.rr.Xi((0,we.Z)(function*(){const n=new CM(r.datastore),s=r.ua(n);s&&s.then(l=>{r.asyncQueue.enqueueAndForget(()=>n.commit().then(()=>{r.deferred.resolve(l)}).catch(c=>{r.ha(c)}))}).catch(l=>{r.ha(l)})}))}ua(r){try{const n=this.updateFunction(r);return!qa(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}ha(r){this.aa>0&&this.la(r)?(this.aa-=1,this.asyncQueue.enqueueAndForget(()=>(this.ca(),Promise.resolve()))):this.deferred.reject(r)}la(r){if("FirebaseError"===r.name){const n=r.code;return"aborted"===n||"failed-precondition"===n||!ID(n)}return!1}}class EM{constructor(r,n,s){var l=this;this.credentials=r,this.asyncQueue=n,this.databaseInfo=s,this.user=ri.UNAUTHENTICATED,this.clientId=Bb.I(),this.credentialListener=()=>Promise.resolve(),this.credentials.start(n,function(){var c=(0,we.Z)(function*(g){Oe("FirestoreClient","Received user=",g.uid),yield l.credentialListener(g),l.user=g});return function(g){return c.apply(this,arguments)}}())}getConfiguration(){var r=this;return(0,we.Z)(function*(){return{asyncQueue:r.asyncQueue,databaseInfo:r.databaseInfo,clientId:r.clientId,credentials:r.credentials,initialUser:r.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(r){this.credentialListener=r}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Me(de.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var r=this;this.asyncQueue.enterRestrictedMode();const n=new Ur;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,we.Z)(function*(){try{r.onlineComponents&&(yield r.onlineComponents.terminate()),r.offlineComponents&&(yield r.offlineComponents.terminate()),r.credentials.shutdown(),n.resolve()}catch(s){const l=Gc(s,"Failed to shutdown persistence");n.reject(l)}})),n.promise}}function jI(i,r){return uu.apply(this,arguments)}function uu(){return(uu=(0,we.Z)(function*(i,r){i.asyncQueue.verifyOperationInProgress(),Oe("FirestoreClient","Initializing OfflineComponentProvider");const n=yield i.getConfiguration();yield r.initialize(n);let s=n.initialUser;i.setCredentialChangeListener(function(){var l=(0,we.Z)(function*(c){s.isEqual(c)||(yield dI(r.localStore,c),s=c)});return function(c){return l.apply(this,arguments)}}()),r.persistence.setDatabaseDeletedListener(()=>i.terminate()),i.offlineComponents=r})).apply(this,arguments)}function DM(i,r){return Qy.apply(this,arguments)}function Qy(){return(Qy=(0,we.Z)(function*(i,r){i.asyncQueue.verifyOperationInProgress();const n=yield Jw(i);Oe("FirestoreClient","Initializing OnlineComponentProvider");const s=yield i.getConfiguration();yield r.initialize(n,s),i.setCredentialChangeListener(l=>{return(c=(0,we.Z)(function*(g,_){const w=Ve(g);w.asyncQueue.verifyOperationInProgress(),Oe("RemoteStore","RemoteStore received new credentials");const T=gr(w);w.Kr.add(3),yield Rg(w),T&&w.Wr.set("Unknown"),yield w.remoteSyncer.handleCredentialChange(_),w.Kr.delete(3),yield su(w)}),function(g,_){return c.apply(this,arguments)})(r.remoteStore,l);var c}),i.onlineComponents=r})).apply(this,arguments)}function Jw(i){return $I.apply(this,arguments)}function $I(){return($I=(0,we.Z)(function*(i){return i.offlineComponents||(Oe("FirestoreClient","Using default OfflineComponentProvider"),yield jI(i,new Zw)),i.offlineComponents})).apply(this,arguments)}function $g(i){return Xw.apply(this,arguments)}function Xw(){return(Xw=(0,we.Z)(function*(i){return i.onlineComponents||(Oe("FirestoreClient","Using default OnlineComponentProvider"),yield DM(i,new Qw)),i.onlineComponents})).apply(this,arguments)}function Jy(i){return Jw(i).then(r=>r.persistence)}function e1(i){return Jw(i).then(r=>r.localStore)}function t1(i){return $g(i).then(r=>r.remoteStore)}function Xy(i){return $g(i).then(r=>r.syncEngine)}function Yc(i){return n1.apply(this,arguments)}function n1(){return(n1=(0,we.Z)(function*(i){const r=yield $g(i),n=r.eventManager;return n.onListen=cM.bind(null,r.syncEngine),n.onUnlisten=dM.bind(null,r.syncEngine),n})).apply(this,arguments)}function GI(i,r,n={}){const s=new Ur;return i.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return function(l,c,g,_,w){const T=new Ky({next:A=>{c.enqueueAndForget(()=>ht(l,S));const x=A.docs.has(g);!x&&A.fromCache?w.reject(new Me(de.UNAVAILABLE,"Failed to get document because the client is offline.")):x&&A.fromCache&&_&&"server"===_.source?w.reject(new Me(de.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):w.resolve(A)},error:A=>w.reject(A)}),S=new xw(co(g.path),T,{includeMetadataChanges:!0,uo:!0});return NI(l,S)}(yield Yc(i),i.asyncQueue,r,n,s)})),s.promise}function Zh(i,r,n={}){const s=new Ur;return i.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return function(l,c,g,_,w){const T=new Ky({next:A=>{c.enqueueAndForget(()=>ht(l,S)),A.fromCache&&"server"===_.source?w.reject(new Me(de.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):w.resolve(A)},error:A=>w.reject(A)}),S=new xw(g,T,{includeMetadataChanges:!0,uo:!0});return NI(l,S)}(yield Yc(i),i.asyncQueue,r,n,s)})),s.promise}class ZI{constructor(r,n,s,l,c,g,_,w){this.databaseId=r,this.appId=n,this.persistenceKey=s,this.host=l,this.ssl=c,this.forceLongPolling=g,this.autoDetectLongPolling=_,this.useFetchStreams=w}}class Zc{constructor(r,n){this.projectId=r,this.database=n||"(default)"}get isDefaultDatabase(){return"(default)"===this.database}isEqual(r){return r instanceof Zc&&r.projectId===this.projectId&&r.database===this.database}}const KI=new Map;function ev(i,r,n){if(!n)throw new Me(de.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${r}.`)}function QI(i,r,n,s){if(!0===r&&!0===s)throw new Me(de.INVALID_ARGUMENT,`${i} and ${n} cannot be used together.`)}function JI(i){if(!Ke.isDocumentKey(i))throw new Me(de.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function XI(i){if(Ke.isDocumentKey(i))throw new Me(de.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function tv(i){if(void 0===i)return"undefined";if(null===i)return"null";if("string"==typeof i)return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if("number"==typeof i||"boolean"==typeof i)return""+i;if("object"==typeof i){if(i instanceof Array)return"an array";{const r=(n=i).constructor?n.constructor.name:null;return r?`a custom ${r} object`:"an object"}}var n;return"function"==typeof i?"a function":Ze()}function Ot(i,r){if("_delegate"in i&&(i=i._delegate),!(i instanceof r)){if(r.name===i.constructor.name)throw new Me(de.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=tv(i);throw new Me(de.INVALID_ARGUMENT,`Expected type '${r.name}', but it was: ${n}`)}}return i}function Kh(i,r){if(r<=0)throw new Me(de.INVALID_ARGUMENT,`Function ${i}() requires a positive number, but it was: ${r}.`)}class eT{constructor(r){var n;if(void 0===r.host){if(void 0!==r.ssl)throw new Me(de.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=r.host,this.ssl=null===(n=r.ssl)||void 0===n||n;if(this.credentials=r.credentials,this.ignoreUndefinedProperties=!!r.ignoreUndefinedProperties,void 0===r.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==r.cacheSizeBytes&&r.cacheSizeBytes<1048576)throw new Me(de.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=r.cacheSizeBytes}this.experimentalForceLongPolling=!!r.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!r.experimentalAutoDetectLongPolling,this.useFetchStreams=!!r.useFetchStreams,QI("experimentalForceLongPolling",r.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",r.experimentalAutoDetectLongPolling)}isEqual(r){return this.host===r.host&&this.ssl===r.ssl&&this.credentials===r.credentials&&this.cacheSizeBytes===r.cacheSizeBytes&&this.experimentalForceLongPolling===r.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===r.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===r.ignoreUndefinedProperties&&this.useFetchStreams===r.useFetchStreams}}class Kc{constructor(r,n){this._credentials=n,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new eT({}),this._settingsFrozen=!1,r instanceof Zc?this._databaseId=r:(this._app=r,this._databaseId=function(s){if(!Object.prototype.hasOwnProperty.apply(s.options,["projectId"]))throw new Me(de.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Zc(s.options.projectId)}(r))}get app(){if(!this._app)throw new Me(de.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(r){if(this._settingsFrozen)throw new Me(de.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new eT(r),void 0!==r.credentials&&(this._credentials=function(n){if(!n)return new rD;switch(n.type){case"gapi":const s=n.client;return ct(!("object"!=typeof s||null===s||!s.auth||!s.auth.getAuthHeaderValueForFirstParty)),new mA(s,n.sessionIndex||"0",n.iamToken||null);case"provider":return n.client;default:throw new Me(de.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(r.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(r){const n=KI.get(r);n&&(Oe("ComponentProvider","Removing Datastore"),KI.delete(r),n.terminate())}(this),Promise.resolve()}}class yn{constructor(r,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=r}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Qo(this.firestore,this.converter,this._key.path.popLast())}withConverter(r){return new yn(this.firestore,r,this._key)}}class mr{constructor(r,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=r}withConverter(r){return new mr(this.firestore,r,this._query)}}class Qo extends mr{constructor(r,n,s){super(r,n,co(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const r=this._path.popLast();return r.isEmpty()?null:new yn(this.firestore,null,new Ke(r))}withConverter(r){return new Qo(this.firestore,r,this._path)}}function tT(i,r,...n){if(i=(0,F.m9)(i),ev("collection","path",r),i instanceof Kc){const s=zt.fromString(r,...n);return XI(s),new Qo(i,null,s)}{if(!(i instanceof yn||i instanceof Qo))throw new Me(de.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=i._path.child(zt.fromString(r,...n));return XI(s),new Qo(i.firestore,null,s)}}function Qh(i,r,...n){if(i=(0,F.m9)(i),1===arguments.length&&(r=Bb.I()),ev("doc","path",r),i instanceof Kc){const s=zt.fromString(r,...n);return JI(s),new yn(i,null,new Ke(s))}{if(!(i instanceof yn||i instanceof Qo))throw new Me(de.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=i._path.child(zt.fromString(r,...n));return JI(s),new yn(i.firestore,i instanceof Qo?i.converter:null,new Ke(s))}}function nv(i,r){return i=(0,F.m9)(i),r=(0,F.m9)(r),(i instanceof yn||i instanceof Qo)&&(r instanceof yn||r instanceof Qo)&&i.firestore===r.firestore&&i.path===r.path&&i.converter===r.converter}function r1(i,r){return i=(0,F.m9)(i),r=(0,F.m9)(r),i instanceof mr&&r instanceof mr&&i.firestore===r.firestore&&Yi(i._query,r._query)&&i.converter===r.converter}class i1{constructor(){this.fa=Promise.resolve(),this.da=[],this.wa=!1,this._a=[],this.ma=null,this.ga=!1,this.ya=!1,this.pa=[],this.rr=new By(this,"async_queue_retry"),this.Ea=()=>{const n=Mg();n&&Oe("AsyncQueue","Visibility state changed to "+n.visibilityState),this.rr.tr()};const r=Mg();r&&"function"==typeof r.addEventListener&&r.addEventListener("visibilitychange",this.Ea)}get isShuttingDown(){return this.wa}enqueueAndForget(r){this.enqueue(r)}enqueueAndForgetEvenWhileRestricted(r){this.Ta(),this.Ia(r)}enterRestrictedMode(r){if(!this.wa){this.wa=!0,this.ya=r||!1;const n=Mg();n&&"function"==typeof n.removeEventListener&&n.removeEventListener("visibilitychange",this.Ea)}}enqueue(r){if(this.Ta(),this.wa)return new Promise(()=>{});const n=new Ur;return this.Ia(()=>this.wa&&this.ya?Promise.resolve():(r().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(r){this.enqueueAndForget(()=>(this.da.push(r),this.Aa()))}Aa(){var r=this;return(0,we.Z)(function*(){if(0!==r.da.length){try{yield r.da[0](),r.da.shift(),r.rr.reset()}catch(n){if(!Xl(n))throw n;Oe("AsyncQueue","Operation failed with retryable error: "+n)}r.da.length>0&&r.rr.Xi(()=>r.Aa())}})()}Ia(r){const n=this.fa.then(()=>(this.ga=!0,r().catch(s=>{throw this.ma=s,this.ga=!1,ir("INTERNAL UNHANDLED ERROR: ",function(l){let c=l.message||"";return l.stack&&(c=l.stack.includes(l.message)?l.stack:l.message+"\n"+l.stack),c}(s)),s}).then(s=>(this.ga=!1,s))));return this.fa=n,n}enqueueAfterDelay(r,n,s){this.Ta(),this.pa.indexOf(r)>-1&&(n=0);const l=qy.createAndSchedule(this,r,n,s,c=>this.Ra(c));return this._a.push(l),l}Ta(){this.ma&&Ze()}verifyOperationInProgress(){}ba(){var r=this;return(0,we.Z)(function*(){let n;do{n=r.fa,yield n}while(n!==r.fa)})()}Pa(r){for(const n of this._a)if(n.timerId===r)return!0;return!1}va(r){return this.ba().then(()=>{this._a.sort((n,s)=>n.targetTimeMs-s.targetTimeMs);for(const n of this._a)if(n.skipDelay(),"all"!==r&&n.timerId===r)break;return this.ba()})}Va(r){this.pa.push(r)}Ra(r){const n=this._a.indexOf(r);this._a.splice(n,1)}}function Gg(i){return function(r,n){if("object"!=typeof r||null===r)return!1;const s=r;for(const l of["next","error","complete"])if(l in s&&"function"==typeof s[l])return!0;return!1}(i)}class AM{constructor(){this._progressObserver={},this._taskCompletionResolver=new Ur,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(r,n,s){this._progressObserver={next:r,error:n,complete:s}}catch(r){return this._taskCompletionResolver.promise.catch(r)}then(r,n){return this._taskCompletionResolver.promise.then(r,n)}_completeWith(r){this._updateProgress(r),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(r)}_failWith(r){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(r),this._taskCompletionResolver.reject(r)}_updateProgress(r){this._lastProgress=r,this._progressObserver.next&&this._progressObserver.next(r)}}class jn extends Kc{constructor(r,n){super(r,n),this.type="firestore",this._queue=new i1,this._persistenceKey="name"in r?r.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||s1(this),this._firestoreClient.terminate()}}function Kn(i){return i._firestoreClient||s1(i),i._firestoreClient.verifyNotTerminated(),i._firestoreClient}function s1(i){var r;const n=i._freezeSettings(),s=(c=(null===(r=i._app)||void 0===r?void 0:r.options.appId)||"",new ZI(i._databaseId,c,i._persistenceKey,(_=n).host,_.ssl,_.experimentalForceLongPolling,_.experimentalAutoDetectLongPolling,_.useFetchStreams));var c,_;i._firestoreClient=new EM(i._credentials,i._queue,s)}function o1(i,r,n){const s=new Ur;return i.asyncQueue.enqueue((0,we.Z)(function*(){try{yield jI(i,n),yield DM(i,r),s.resolve()}catch(l){if(!("FirebaseError"===(c=l).name?c.code===de.FAILED_PRECONDITION||c.code===de.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&c instanceof DOMException)||22===c.code||20===c.code||11===c.code))throw l;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+l),s.reject(l)}var c})).then(()=>s.promise)}function li(i){if(i._initialized||i._terminated)throw new Me(de.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Ji{constructor(...r){for(let n=0;n<r.length;++n)if(0===r[n].length)throw new Me(de.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Nr(r)}isEqual(r){return this._internalPath.isEqual(r._internalPath)}}class Jo{constructor(r){this._byteString=r}static fromBase64String(r){try{return new Jo(sr.fromBase64String(r))}catch(n){throw new Me(de.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(r){return new Jo(sr.fromUint8Array(r))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(r){return this._byteString.isEqual(r._byteString)}}class Jh{constructor(r){this._methodName=r}}class cu{constructor(r,n){if(!isFinite(r)||r<-90||r>90)throw new Me(de.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+r);if(!isFinite(n)||n<-180||n>180)throw new Me(de.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=r,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(r){return this._lat===r._lat&&this._long===r._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(r){return At(this._lat,r._lat)||At(this._long,r._long)}}const PM=/^__.*__$/;class a1{constructor(r,n,s){this.data=r,this.fieldMask=n,this.fieldTransforms=s}toMutation(r,n){return null!==this.fieldMask?new Zl(r,this.data,this.fieldMask,n,this.fieldTransforms):new Th(r,this.data,n,this.fieldTransforms)}}class aT{constructor(r,n,s){this.data=r,this.fieldMask=n,this.fieldTransforms=s}toMutation(r,n){return new Zl(r,this.data,this.fieldMask,n,this.fieldTransforms)}}function l1(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ze()}}class rv{constructor(r,n,s,l,c,g){this.settings=r,this.databaseId=n,this.N=s,this.ignoreUndefinedProperties=l,void 0===c&&this.Sa(),this.fieldTransforms=c||[],this.fieldMask=g||[]}get path(){return this.settings.path}get Da(){return this.settings.Da}Ca(r){return new rv(Object.assign(Object.assign({},this.settings),r),this.databaseId,this.N,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Na(r){var n;const s=null===(n=this.path)||void 0===n?void 0:n.child(r),l=this.Ca({path:s,xa:!1});return l.ka(r),l}$a(r){var n;const s=null===(n=this.path)||void 0===n?void 0:n.child(r),l=this.Ca({path:s,xa:!1});return l.Sa(),l}Oa(r){return this.Ca({path:void 0,xa:!0})}Fa(r){return Yg(r,this.settings.methodName,this.settings.Ma||!1,this.path,this.settings.La)}contains(r){return void 0!==this.fieldMask.find(n=>r.isPrefixOf(n))||void 0!==this.fieldTransforms.find(n=>r.isPrefixOf(n.field))}Sa(){if(this.path)for(let r=0;r<this.path.length;r++)this.ka(this.path.get(r))}ka(r){if(0===r.length)throw this.Fa("Document fields must not be empty");if(l1(this.Da)&&PM.test(r))throw this.Fa('Document fields cannot begin and end with "__"')}}class FM{constructor(r,n,s){this.databaseId=r,this.ignoreUndefinedProperties=n,this.N=s||Bc(r)}Ba(r,n,s,l=!1){return new rv({Da:r,methodName:n,La:s,path:Nr.emptyPath(),xa:!1,Ma:l},this.databaseId,this.N,this.ignoreUndefinedProperties)}}function Ja(i){const r=i._freezeSettings(),n=Bc(i._databaseId);return new FM(i._databaseId,!!r.ignoreUndefinedProperties,n)}function Wg(i,r,n,s,l,c={}){const g=i.Ba(c.merge||c.mergeFields?2:0,r,n,l);c1("Data must be an object, but it was:",g,s);const _=sv(s,g);let w,T;if(c.merge)w=new zl(g.fieldMask),T=g.fieldTransforms;else if(c.mergeFields){const S=[];for(const A of c.mergeFields){const x=d1(r,A,n);if(!g.contains(x))throw new Me(de.INVALID_ARGUMENT,`Field '${x}' is specified in your field mask but missing from your input data.`);cT(S,x)||S.push(x)}w=new zl(S),T=g.fieldTransforms.filter(A=>w.covers(A.field))}else w=null,T=g.fieldTransforms;return new a1(new Hr(_),w,T)}class Xh extends Jh{_toFieldTransform(r){if(2!==r.Da)throw r.Fa(1===r.Da?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return r.fieldMask.push(r.path),null}isEqual(r){return r instanceof Xh}}function qg(i,r,n){return new rv({Da:3,La:r.settings.La,methodName:i._methodName,xa:n},r.databaseId,r.N,r.ignoreUndefinedProperties)}class zg extends Jh{_toFieldTransform(r){return new Ih(r.path,new Yo)}isEqual(r){return r instanceof zg}}class lO extends Jh{constructor(r,n){super(r),this.Ua=n}_toFieldTransform(r){const n=qg(this,r,!0),s=this.Ua.map(c=>Qc(c,n)),l=new Ac(s);return new Ih(r.path,l)}isEqual(r){return this===r}}class lT extends Jh{constructor(r,n){super(r),this.Ua=n}_toFieldTransform(r){const n=qg(this,r,!0),s=this.Ua.map(c=>Qc(c,n)),l=new Mc(s);return new Ih(r.path,l)}isEqual(r){return this===r}}class LM extends Jh{constructor(r,n){super(r),this.qa=n}_toFieldTransform(r){const n=new Rc(r.N,yD(r.N,this.qa));return new Ih(r.path,n)}isEqual(r){return this===r}}function iv(i,r,n,s){const l=i.Ba(1,r,n);c1("Data must be an object, but it was:",l,s);const c=[],g=Hr.empty();Dc(s,(w,T)=>{const S=av(r,w,n);T=(0,F.m9)(T);const A=l.$a(S);if(T instanceof Xh)c.push(S);else{const x=Qc(T,A);null!=x&&(c.push(S),g.set(S,x))}});const _=new zl(c);return new aT(g,_,l.fieldTransforms)}function ef(i,r,n,s,l,c){const g=i.Ba(1,r,n),_=[d1(r,s,n)],w=[l];if(c.length%2!=0)throw new Me(de.INVALID_ARGUMENT,`Function ${r}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let x=0;x<c.length;x+=2)_.push(d1(r,c[x])),w.push(c[x+1]);const T=[],S=Hr.empty();for(let x=_.length-1;x>=0;--x)if(!cT(T,_[x])){const V=_[x];let z=w[x];z=(0,F.m9)(z);const ue=g.$a(V);if(z instanceof Xh)T.push(V);else{const Ae=Qc(z,ue);null!=Ae&&(T.push(V),S.set(V,Ae))}}const A=new zl(T);return new aT(S,A,g.fieldTransforms)}function u1(i,r,n,s=!1){return Qc(n,i.Ba(s?4:3,r))}function Qc(i,r){if(ov(i=(0,F.m9)(i)))return c1("Unsupported field value:",r,i),sv(i,r);if(i instanceof Jh)return function(n,s){if(!l1(s.Da))throw s.Fa(`${n._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Fa(`${n._methodName}() is not currently supported inside arrays`);const l=n._toFieldTransform(s);l&&s.fieldTransforms.push(l)}(i,r),null;if(void 0===i&&r.ignoreUndefinedProperties)return null;if(r.path&&r.fieldMask.push(r.path),i instanceof Array){if(r.settings.xa&&4!==r.Da)throw r.Fa("Nested arrays are not supported");return function(n,s){const l=[];let c=0;for(const g of n){let _=Qc(g,s.Oa(c));null==_&&(_={nullValue:"NULL_VALUE"}),l.push(_),c++}return{arrayValue:{values:l}}}(i,r)}return function(n,s){if(null===(n=(0,F.m9)(n)))return{nullValue:"NULL_VALUE"};if("number"==typeof n)return yD(s.N,n);if("boolean"==typeof n)return{booleanValue:n};if("string"==typeof n)return{stringValue:n};if(n instanceof Date){const l=Tr.fromDate(n);return{timestampValue:Ey(s.N,l)}}if(n instanceof Tr){const l=new Tr(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:Ey(s.N,l)}}if(n instanceof cu)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof Jo)return{bytesValue:it(s.N,n._byteString)};if(n instanceof yn){const l=s.databaseId,c=n.firestore._databaseId;if(!c.isEqual(l))throw s.Fa(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:rw(n.firestore._databaseId||s.databaseId,n._key.path)}}throw s.Fa(`Unsupported field value: ${tv(n)}`)}(i,r)}function sv(i,r){const n={};return sD(i)?r.path&&r.path.length>0&&r.fieldMask.push(r.path):Dc(i,(s,l)=>{const c=Qc(l,r.Na(s));null!=c&&(n[s]=c)}),{mapValue:{fields:n}}}function ov(i){return!("object"!=typeof i||null===i||i instanceof Array||i instanceof Date||i instanceof Tr||i instanceof cu||i instanceof Jo||i instanceof yn||i instanceof Jh)}function c1(i,r,n){if(!ov(n)||"object"!=typeof(s=n)||null===s||Object.getPrototypeOf(s)!==Object.prototype&&null!==Object.getPrototypeOf(s)){const s=tv(n);throw r.Fa("an object"===s?i+" a custom object":i+" "+s)}var s}function d1(i,r,n){if((r=(0,F.m9)(r))instanceof Ji)return r._internalPath;if("string"==typeof r)return av(i,r);throw Yg("Field path arguments must be of type string or FieldPath.",i,!1,void 0,n)}const uT=new RegExp("[~\\*/\\[\\]]");function av(i,r,n){if(r.search(uT)>=0)throw Yg(`Invalid field path (${r}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,n);try{return new Ji(...r.split("."))._internalPath}catch(s){throw Yg(`Invalid field path (${r}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,n)}}function Yg(i,r,n,s,l){const c=s&&!s.isEmpty(),g=void 0!==l;let _=`Function ${r}() called with invalid data`;n&&(_+=" (via `toFirestore()`)"),_+=". ";let w="";return(c||g)&&(w+=" (found",c&&(w+=` in field ${s}`),g&&(w+=` in document ${l}`),w+=")"),new Me(de.INVALID_ARGUMENT,_+i+w)}function cT(i,r){return i.some(n=>n.isEqual(r))}class tf{constructor(r,n,s,l,c){this._firestore=r,this._userDataWriter=n,this._key=s,this._document=l,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new yn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const r=new dT(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(r)}return this._userDataWriter.convertValue(this._document.data.value)}}get(r){if(this._document){const n=this._document.data.field(lv("DocumentSnapshot.get",r));if(null!==n)return this._userDataWriter.convertValue(n)}}}class dT extends tf{data(){return super.data()}}function lv(i,r){return"string"==typeof r?av(i,r):r instanceof Ji?r._internalPath:r._delegate._internalPath}class Jc{constructor(r,n){this.hasPendingWrites=r,this.fromCache=n}isEqual(r){return this.hasPendingWrites===r.hasPendingWrites&&this.fromCache===r.fromCache}}class Xo extends tf{constructor(r,n,s,l,c,g){super(r,n,s,l,g),this._firestore=r,this._firestoreImpl=r,this.metadata=c}exists(){return super.exists()}data(r={}){if(this._document){if(this._converter){const n=new Zg(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,r)}return this._userDataWriter.convertValue(this._document.data.value,r.serverTimestamps)}}get(r,n={}){if(this._document){const s=this._document.data.field(lv("DocumentSnapshot.get",r));if(null!==s)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}}class Zg extends Xo{data(r={}){return super.data(r)}}class Xa{constructor(r,n,s,l){this._firestore=r,this._userDataWriter=n,this._snapshot=l,this.metadata=new Jc(l.hasPendingWrites,l.fromCache),this.query=s}get docs(){const r=[];return this.forEach(n=>r.push(n)),r}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(r,n){this._snapshot.docs.forEach(s=>{r.call(n,new Zg(this._firestore,this._userDataWriter,s.key,s,new Jc(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(r={}){const n=!!r.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Me(de.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,l){if(s._snapshot.oldDocs.isEmpty()){let c=0;return s._snapshot.docChanges.map(g=>({type:"added",doc:new Zg(s._firestore,s._userDataWriter,g.doc.key,g.doc,new Jc(s._snapshot.mutatedKeys.has(g.doc.key),s._snapshot.fromCache),s.query.converter),oldIndex:-1,newIndex:c++}))}{let c=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(g=>l||3!==g.type).map(g=>{const _=new Zg(s._firestore,s._userDataWriter,g.doc.key,g.doc,new Jc(s._snapshot.mutatedKeys.has(g.doc.key),s._snapshot.fromCache),s.query.converter);let w=-1,T=-1;return 0!==g.type&&(w=c.indexOf(g.doc.key),c=c.delete(g.doc.key)),1!==g.type&&(c=c.add(g.doc),T=c.indexOf(g.doc.key)),{type:hT(g.type),doc:_,oldIndex:w,newIndex:T}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function hT(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ze()}}function h1(i,r){return i instanceof Xo&&r instanceof Xo?i._firestore===r._firestore&&i._key.isEqual(r._key)&&(null===i._document?null===r._document:i._document.isEqual(r._document))&&i._converter===r._converter:i instanceof Xa&&r instanceof Xa&&i._firestore===r._firestore&&r1(i.query,r.query)&&i.metadata.isEqual(r.metadata)&&i._snapshot.isEqual(r._snapshot)}function f1(i){if(hy(i)&&0===i.explicitOrderBy.length)throw new Me(de.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Kg{}function du(i,...r){for(const n of r)i=n._apply(i);return i}class VM extends Kg{constructor(r,n,s){super(),this.Ka=r,this.ja=n,this.Qa=s,this.type="where"}_apply(r){const n=Ja(r.firestore),s=function(l,c,g,_,w,T,S){let A;if(w.isKeyField()){if("array-contains"===T||"array-contains-any"===T)throw new Me(de.INVALID_ARGUMENT,`Invalid Query. You can't perform '${T}' queries on FieldPath.documentId().`);if("in"===T||"not-in"===T){GM(S,T);const V=[];for(const z of S)V.push($M(_,l,z));A={arrayValue:{values:V}}}else A=$M(_,l,S)}else"in"!==T&&"not-in"!==T&&"array-contains-any"!==T||GM(S,T),A=u1(g,"where",S,"in"===T||"not-in"===T);const x=ii.create(w,T,A);return function(V,z){if(z.v()){const Ae=qb(V);if(null!==Ae&&!Ae.isEqual(z.field))throw new Me(de.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${Ae.toString()}' and '${z.field.toString()}'`);const Qe=fy(V);null!==Qe&&WM(0,z.field,Qe)}const ue=function(Ae,Qe){for(const Je of Ae.filters)if(Qe.indexOf(Je.op)>=0)return Je.op;return null}(V,function(Ae){switch(Ae){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(z.op));if(null!==ue)throw new Me(de.INVALID_ARGUMENT,ue===z.op?`Invalid query. You cannot use more than one '${z.op.toString()}' filter.`:`Invalid query. You cannot use '${z.op.toString()}' filters with '${ue.toString()}' filters.`)}(l,x),x}(r._query,0,n,r.firestore._databaseId,this.Ka,this.ja,this.Qa);return new mr(r.firestore,r.converter,function(l,c){const g=l.filters.concat([c]);return new zo(l.path,l.collectionGroup,l.explicitOrderBy.slice(),g,l.limit,l.limitType,l.startAt,l.endAt)}(r._query,s))}}class uO extends Kg{constructor(r,n){super(),this.Ka=r,this.Wa=n,this.type="orderBy"}_apply(r){const n=function(s,l,c){if(null!==s.startAt)throw new Me(de.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==s.endAt)throw new Me(de.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const g=new Dh(l,c);return function(_,w){if(null===fy(_)){const T=qb(_);null!==T&&WM(0,T,w.field)}}(s,g),g}(r._query,this.Ka,this.Wa);return new mr(r.firestore,r.converter,function(s,l){const c=s.explicitOrderBy.concat([l]);return new zo(s.path,s.collectionGroup,c,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(r._query,n))}}class BM extends Kg{constructor(r,n,s){super(),this.type=r,this.Ga=n,this.za=s}_apply(r){return new mr(r.firestore,r.converter,gy(r._query,this.Ga,this.za))}}class UM extends Kg{constructor(r,n,s){super(),this.type=r,this.Ha=n,this.Ja=s}_apply(r){const n=jM(r,this.type,this.Ha,this.Ja);return new mr(r.firestore,r.converter,(l=n,new zo((s=r._query).path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,l,s.endAt)));var s,l}}class HM extends Kg{constructor(r,n,s){super(),this.type=r,this.Ha=n,this.Ja=s}_apply(r){const n=jM(r,this.type,this.Ha,this.Ja);return new mr(r.firestore,r.converter,(l=n,new zo((s=r._query).path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,s.startAt,l)));var s,l}}function jM(i,r,n,s){if(n[0]=(0,F.m9)(n[0]),n[0]instanceof tf)return function(l,c,g,_,w){if(!_)throw new Me(de.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${g}().`);const T=[];for(const S of lg(l))if(S.field.isKeyField())T.push(Eh(c,_.key));else{const A=_.data.field(S.field);if(eg(A))throw new Me(de.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+S.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===A){const x=S.field.canonicalString();throw new Me(de.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${x}' (used as the orderBy) does not exist.`)}T.push(A)}return new xn(T,w)}(i._query,i.firestore._databaseId,r,n[0]._document,s);{const l=Ja(i.firestore);return function(c,g,_,w,T,S){const A=c.explicitOrderBy;if(T.length>A.length)throw new Me(de.INVALID_ARGUMENT,`Too many arguments provided to ${w}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const x=[];for(let V=0;V<T.length;V++){const z=T[V];if(A[V].field.isKeyField()){if("string"!=typeof z)throw new Me(de.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${w}(), but got a ${typeof z}`);if(!py(c)&&-1!==z.indexOf("/"))throw new Me(de.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to ${w}() must be a plain document ID, but '${z}' contains a slash.`);const ue=c.path.child(zt.fromString(z));if(!Ke.isDocumentKey(ue))throw new Me(de.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to ${w}() must result in a valid document path, but '${ue}' is not because it contains an odd number of segments.`);const Ae=new Ke(ue);x.push(Eh(g,Ae))}else{const ue=u1(_,w,z);x.push(ue)}}return new xn(x,S)}(i._query,i.firestore._databaseId,l,r,n,s)}}function $M(i,r,n){if("string"==typeof(n=(0,F.m9)(n))){if(""===n)throw new Me(de.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!py(r)&&-1!==n.indexOf("/"))throw new Me(de.INVALID_ARGUMENT,`Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const s=r.path.child(zt.fromString(n));if(!Ke.isDocumentKey(s))throw new Me(de.INVALID_ARGUMENT,`Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return Eh(i,new Ke(s))}if(n instanceof yn)return Eh(i,n._key);throw new Me(de.INVALID_ARGUMENT,`Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: ${tv(n)}.`)}function GM(i,r){if(!Array.isArray(i)||0===i.length)throw new Me(de.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${r.toString()}' filters.`);if(i.length>10)throw new Me(de.INVALID_ARGUMENT,`Invalid Query. '${r.toString()}' filters support a maximum of 10 elements in the value array.`)}function WM(i,r,n){if(!n.isEqual(r))throw new Me(de.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${r.toString()}' and so you must also use '${r.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${n.toString()}' instead.`)}class pT{convertValue(r,n="none"){switch(Tc(r)){case 0:return null;case 1:return r.booleanValue;case 2:return Dn(r.integerValue||r.doubleValue);case 3:return this.convertTimestamp(r.timestampValue);case 4:return this.convertServerTimestamp(r,n);case 5:return r.stringValue;case 6:return this.convertBytes(bh(r.bytesValue));case 7:return this.convertReference(r.referenceValue);case 8:return this.convertGeoPoint(r.geoPointValue);case 9:return this.convertArray(r.arrayValue,n);case 10:return this.convertObject(r.mapValue,n);default:throw Ze()}}convertObject(r,n){const s={};return Dc(r.fields,(l,c)=>{s[l]=this.convertValue(c,n)}),s}convertGeoPoint(r){return new cu(Dn(r.latitude),Dn(r.longitude))}convertArray(r,n){return(r.values||[]).map(s=>this.convertValue(s,n))}convertServerTimestamp(r,n){switch(n){case"previous":const s=ay(r);return null==s?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(tg(r));default:return null}}convertTimestamp(r){const n=Ic(r);return new Tr(n.seconds,n.nanos)}convertDocumentKey(r,n){const s=zt.fromString(r);ct(WD(s));const l=new Zc(s.get(1),s.get(3)),c=new Ke(s.popFirst(5));return l.isEqual(n)||ir(`Document ${c} contains a document reference within a different database (${l.projectId}/${l.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),c}}function p1(i,r,n){let s;return s=i?n&&(n.merge||n.mergeFields)?i.toFirestore(r,n):i.toFirestore(r):r,s}class qM extends pT{constructor(r){super(),this.firestore=r}convertBytes(r){return new Jo(r)}convertReference(r){const n=this.convertDocumentKey(r,this.firestore._databaseId);return new yn(this.firestore,null,n)}}class gT{constructor(r,n){this._firestore=r,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Ja(r)}set(r,n,s){this._verifyNotCommitted();const l=hu(r,this._firestore),c=p1(l.converter,n,s),g=Wg(this._dataReader,"WriteBatch.set",l._key,c,null!==l.converter,s);return this._mutations.push(g.toMutation(l._key,kn.none())),this}update(r,n,s,...l){this._verifyNotCommitted();const c=hu(r,this._firestore);let g;return g="string"==typeof(n=(0,F.m9)(n))||n instanceof Ji?ef(this._dataReader,"WriteBatch.update",c._key,n,s,l):iv(this._dataReader,"WriteBatch.update",c._key,n),this._mutations.push(g.toMutation(c._key,kn.exists(!0))),this}delete(r){this._verifyNotCommitted();const n=hu(r,this._firestore);return this._mutations=this._mutations.concat(new hg(n._key,kn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Me(de.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function hu(i,r){if((i=(0,F.m9)(i)).firestore!==r)throw new Me(de.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return i}class nf extends pT{constructor(r){super(),this.firestore=r}convertBytes(r){return new Jo(r)}convertReference(r){const n=this.convertDocumentKey(r,this.firestore._databaseId);return new yn(this.firestore,null,n)}}function KM(i,r,n){i=Ot(i,yn);const s=Ot(i.firestore,jn),l=p1(i.converter,r,n);return fu(s,[Wg(Ja(s),"setDoc",i._key,l,null!==i.converter,n).toMutation(i._key,kn.none())])}function QM(i,r,n,...s){i=Ot(i,yn);const l=Ot(i.firestore,jn),c=Ja(l);let g;return g="string"==typeof(r=(0,F.m9)(r))||r instanceof Ji?ef(c,"updateDoc",i._key,r,n,s):iv(c,"updateDoc",i._key,r),fu(l,[g.toMutation(i._key,kn.exists(!0))])}function XM(i,...r){var n,s,l;i=(0,F.m9)(i);let c={includeMetadataChanges:!1},g=0;"object"!=typeof r[g]||Gg(r[g])||(c=r[g],g++);const _={includeMetadataChanges:c.includeMetadataChanges};if(Gg(r[g])){const A=r[g];r[g]=null===(n=A.next)||void 0===n?void 0:n.bind(A),r[g+1]=null===(s=A.error)||void 0===s?void 0:s.bind(A),r[g+2]=null===(l=A.complete)||void 0===l?void 0:l.bind(A)}let w,T,S;if(i instanceof yn)T=Ot(i.firestore,jn),S=co(i._key.path),w={next:A=>{r[g]&&r[g](pu(T,i,A))},error:r[g+1],complete:r[g+2]};else{const A=Ot(i,mr);T=Ot(A.firestore,jn),S=A._query;const x=new nf(T);w={next:V=>{r[g]&&r[g](new Xa(T,x,A,V))},error:r[g+1],complete:r[g+2]},f1(i._query)}return function(A,x,V,z){const ue=new Ky(z),Ae=new xw(x,ue,V);return A.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return NI(yield Yc(A),Ae)})),()=>{ue.Xo(),A.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return ht(yield Yc(A),Ae)}))}}(Kn(T),S,_,w)}function fu(i,r){return function(n,s){const l=new Ur;return n.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return function(i,r,n){return Bg.apply(this,arguments)}(yield Xy(n),s,l)})),l.promise}(Kn(i),r)}function pu(i,r,n){const s=n.docs.get(r._key),l=new nf(i);return new Xo(i,l,r._key,s,new Jc(n.hasPendingWrites,n.fromCache),r.converter)}class mT extends class{constructor(r,n){this._firestore=r,this._transaction=n,this._dataReader=Ja(r)}get(r){const n=hu(r,this._firestore),s=new qM(this._firestore);return this._transaction.lookup([n._key]).then(l=>{if(!l||1!==l.length)return Ze();const c=l[0];if(c.isFoundDocument())return new tf(this._firestore,s,c.key,c,n.converter);if(c.isNoDocument())return new tf(this._firestore,s,n._key,null,n.converter);throw Ze()})}set(r,n,s){const l=hu(r,this._firestore),c=p1(l.converter,n,s),g=Wg(this._dataReader,"Transaction.set",l._key,c,null!==l.converter,s);return this._transaction.set(l._key,g),this}update(r,n,s,...l){const c=hu(r,this._firestore);let g;return g="string"==typeof(n=(0,F.m9)(n))||n instanceof Ji?ef(this._dataReader,"Transaction.update",c._key,n,s,l):iv(this._dataReader,"Transaction.update",c._key,n),this._transaction.update(c._key,g),this}delete(r){const n=hu(r,this._firestore);return this._transaction.delete(n._key),this}}{constructor(r,n){super(r,n),this._firestore=r}get(r){const n=hu(r,this._firestore),s=new nf(this._firestore);return super.get(r).then(l=>new Xo(this._firestore,s,n._key,l._document,new Jc(!1,!1),n.converter))}}function CT(i,r){if(void 0===r)return{merge:!1};if(void 0!==r.mergeFields&&void 0!==r.merge)throw new Me("invalid-argument",`Invalid options passed to function ${i}(): You cannot specify both "merge" and "mergeFields".`);return r}function rR(){if("undefined"==typeof Uint8Array)throw new Me("unimplemented","Uint8Arrays are not available in this environment.")}function iR(){if("undefined"==typeof atob)throw new Me("unimplemented","Blobs are unavailable in Firestore in this environment.")}(function(i){mh=i})(oc.SDK_VERSION),(0,oc._registerComponent)(new xa.wA("firestore",(i,{options:r})=>{const n=i.getProvider("app").getImmediate(),s=new jn(n,new gA(i.getProvider("auth-internal")));return r=Object.assign({useFetchStreams:!0},r),s._setSettings(r),s},"PUBLIC")),(0,oc.registerVersion)("@firebase/firestore","3.1.0",void 0);class Qg{constructor(r){this._delegate=r}static fromBase64String(r){return iR(),new Qg(Jo.fromBase64String(r))}static fromUint8Array(r){return rR(),new Qg(Jo.fromUint8Array(r))}toBase64(){return iR(),this._delegate.toBase64()}toUint8Array(){return rR(),this._delegate.toUint8Array()}isEqual(r){return this._delegate.isEqual(r._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function ET(i){return function(i,r){if("object"!=typeof i||null===i)return!1;const n=i;for(const s of["next","error","complete"])if(s in n&&"function"==typeof n[s])return!0;return!1}(i)}class sR{enableIndexedDbPersistence(r,n){return function(i,r){li(i=Ot(i,jn));const n=Kn(i),s=i._freezeSettings(),l=new Qw;return o1(n,l,new Kw(l,s.cacheSizeBytes,null==r?void 0:r.forceOwnership))}(r._delegate,{forceOwnership:n})}enableMultiTabIndexedDbPersistence(r){return function(i){li(i=Ot(i,jn));const r=Kn(i),n=i._freezeSettings(),s=new Qw;return o1(r,s,new BI(s,n.cacheSizeBytes))}(r._delegate)}clearIndexedDbPersistence(r){return function(i){if(i._initialized&&!i._terminated)throw new Me(de.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const r=new Ur;return i._queue.enqueueAndForgetEvenWhileRestricted((0,we.Z)(function*(){try{yield(n=(0,we.Z)(function*(s){if(!go.bt())return Promise.resolve();const l=s+"main";yield go.delete(l)}),function(s){return n.apply(this,arguments)})(gw(i._databaseId,i._persistenceKey)),r.resolve()}catch(n){r.reject(n)}var n})),r.promise}(r._delegate)}}class oR{constructor(r,n,s){this._delegate=n,this._persistenceProvider=s,this.INTERNAL={delete:()=>this.terminate()},r instanceof Zc||(this._appCompat=r)}get _databaseId(){return this._delegate._databaseId}settings(r){const n=this._delegate._getSettings();!r.merge&&n.host!==r.host&&oy("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),r.merge&&delete(r=Object.assign(Object.assign({},n),r)).merge,this._delegate._setSettings(r)}useEmulator(r,n,s={}){!function(i,r,n,s={}){var l;const c=(i=Ot(i,Kc))._getSettings();if("firestore.googleapis.com"!==c.host&&c.host!==r&&oy("Host has been set in both settings() and useEmulator(), emulator host will be used"),i._setSettings(Object.assign(Object.assign({},c),{host:`${r}:${n}`,ssl:!1})),s.mockUserToken){let g,_;if("string"==typeof s.mockUserToken)g=s.mockUserToken,_=ri.MOCK_USER;else{g=(0,F.Sg)(s.mockUserToken,null===(l=i._app)||void 0===l?void 0:l.options.projectId);const w=s.mockUserToken.sub||s.mockUserToken.user_id;if(!w)throw new Me(de.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");_=new ri(w)}i._credentials=new Gk(new nD(g,_))}}(this._delegate,r,n,s)}enableNetwork(){return function(i){return function(i){return i.asyncQueue.enqueue((0,we.Z)(function*(){const r=yield Jy(i),n=yield t1(i);return r.setNetworkEnabled(!0),function(s){const l=Ve(s);return l.Kr.delete(0),su(l)}(n)}))}(Kn(i=Ot(i,jn)))}(this._delegate)}disableNetwork(){return function(i){return function(i){return i.asyncQueue.enqueue((0,we.Z)(function*(){const r=yield Jy(i),n=yield t1(i);return r.setNetworkEnabled(!1),(s=(0,we.Z)(function*(l){const c=Ve(l);c.Kr.add(0),yield Rg(c),c.Wr.set("Offline")}),function(l){return s.apply(this,arguments)})(n);var s}))}(Kn(i=Ot(i,jn)))}(this._delegate)}enablePersistence(r){let n=!1,s=!1;return r&&(n=!!r.synchronizeTabs,s=!!r.experimentalForceOwningTab,QI("synchronizeTabs",n,"experimentalForceOwningTab",s)),n?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,s)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function(i){return function(r){const n=new Ur;return r.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return function(i,r){return Vw.apply(this,arguments)}(yield Xy(r),n)})),n.promise}(Kn(i=Ot(i,jn)))}(this._delegate)}onSnapshotsInSync(r){return function(i,r){return function(i,r){const n=new Ky(r);return i.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return s=yield Yc(i),l=n,Ve(s).Zr.add(l),void l.next();var s,l})),()=>{n.Xo(),i.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return s=yield Yc(i),l=n,void Ve(s).Zr.delete(l);var s,l}))}}(Kn(i=Ot(i,jn)),Gg(r)?r:{next:r})}(this._delegate,r)}get app(){if(!this._appCompat)throw new Me("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(r){try{return new sf(this,tT(this._delegate,r))}catch(n){throw Xi(n,"collection()","Firestore.collection()")}}doc(r){try{return new $s(this,Qh(this._delegate,r))}catch(n){throw Xi(n,"doc()","Firestore.doc()")}}collectionGroup(r){try{return new Si(this,function(i,r){if(i=Ot(i,Kc),ev("collectionGroup","collection id",r),r.indexOf("/")>=0)throw new Me(de.INVALID_ARGUMENT,`Invalid collection ID '${r}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new mr(i,null,(n=r,new zo(zt.emptyPath(),n)));var n}(this._delegate,r))}catch(n){throw Xi(n,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(r){return function(i,r){return function(i,r){const n=new Ur;return i.asyncQueue.enqueueAndForget((0,we.Z)(function*(){const s=yield(l=i,$g(l).then(c=>c.datastore));var l;new rO(i.asyncQueue,s,r,n).run()})),n.promise}(Kn(i),n=>r(new mT(i,n)))}(this._delegate,n=>r(new DT(this,n)))}batch(){return Kn(this._delegate),new aR(new gT(this._delegate,r=>fu(this._delegate,r)))}loadBundle(r){return function(i,r){const n=Kn(i=Ot(i,jn)),s=new AM;return function(i,r,n,s){const l=function(c,g){let _;return _="string"==typeof c?(new TextEncoder).encode(c):c,w=function(w,T){if(w instanceof Uint8Array)return UI(w,T);if(w instanceof ArrayBuffer)return UI(new Uint8Array(w),T);if(w instanceof ReadableStream)return w.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(_),new HI(w,g);var w}(n,Bc(r));i.asyncQueue.enqueueAndForget((0,we.Z)(function*(){!function(i,r,n){const s=Ve(i);var l;(l=(0,we.Z)(function*(c,g,_){try{const w=yield g.getMetadata();if(yield function(x,V){const z=Ve(x),ue=Sr(V.createTime);return z.persistence.runTransaction("hasNewerBundle","readonly",Ae=>z.Je.getBundleMetadata(Ae,V.id)).then(Ae=>!!Ae&&Ae.createTime.compareTo(ue)>=0)}(c.localStore,w))return yield g.close(),void _._completeWith((x=w,{taskState:"Success",documentsLoaded:x.totalDocuments,bytesLoaded:x.totalBytes,totalDocuments:x.totalDocuments,totalBytes:x.totalBytes}));_._updateProgress(Wr(w));const T=new oM(w,c.localStore,g.N);let S=yield g.Qo();for(;S;){const x=yield T.fo(S);x&&_._updateProgress(x),S=yield g.Qo()}const A=yield T.complete();yield Qa(c,A.Tn,void 0),yield function(x,V){const z=Ve(x);return z.persistence.runTransaction("Save bundle","readwrite",ue=>z.Je.saveBundleMetadata(ue,V))}(c.localStore,w),_._completeWith(A.progress)}catch(w){oy("SyncEngine",`Loading bundle failed with ${w}`),_._failWith(w)}var x}),function(c,g,_){return l.apply(this,arguments)})(s,r,n).then(()=>{s.sharedClientState.notifyBundleLoaded()})}(yield Xy(i),l,s)}))}(n,i._databaseId,r,s),s}(this._delegate,r)}namedQuery(r){return function(i,r){return function(i,r){return i.asyncQueue.enqueue((0,we.Z)(function*(){return function(n,s){const l=Ve(n);return l.persistence.runTransaction("Get named query","readonly",c=>l.Je.getNamedQuery(c,s))}(yield e1(i),r)}))}(Kn(i=Ot(i,jn)),r).then(n=>n?new mr(i,null,n.query):null)}(this._delegate,r).then(n=>n?new Si(this,n):null)}}class m1 extends pT{constructor(r){super(),this.firestore=r}convertBytes(r){return new Qg(new Jo(r))}convertReference(r){const n=this.convertDocumentKey(r,this.firestore._databaseId);return $s.forKey(n,this.firestore,null)}}class DT{constructor(r,n){this._firestore=r,this._delegate=n,this._userDataWriter=new m1(r)}get(r){const n=Xc(r);return this._delegate.get(n).then(s=>new dv(this._firestore,new Xo(this._firestore._delegate,this._userDataWriter,s._key,s._document,s.metadata,n.converter)))}set(r,n,s){const l=Xc(r);return s?(CT("Transaction.set",s),this._delegate.set(l,n,s)):this._delegate.set(l,n),this}update(r,n,s,...l){const c=Xc(r);return 2===arguments.length?this._delegate.update(c,n):this._delegate.update(c,n,s,...l),this}delete(r){const n=Xc(r);return this._delegate.delete(n),this}}class aR{constructor(r){this._delegate=r}set(r,n,s){const l=Xc(r);return s?(CT("WriteBatch.set",s),this._delegate.set(l,n,s)):this._delegate.set(l,n),this}update(r,n,s,...l){const c=Xc(r);return 2===arguments.length?this._delegate.update(c,n):this._delegate.update(c,n,s,...l),this}delete(r){const n=Xc(r);return this._delegate.delete(n),this}commit(){return this._delegate.commit()}}class rf{constructor(r,n,s){this._firestore=r,this._userDataWriter=n,this._delegate=s}fromFirestore(r,n){const s=new Zg(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,null);return this._delegate.fromFirestore(new hv(this._firestore,s),null!=n?n:{})}toFirestore(r,n){return n?this._delegate.toFirestore(r,n):this._delegate.toFirestore(r)}static getInstance(r,n){const s=rf.INSTANCES;let l=s.get(r);l||(l=new WeakMap,s.set(r,l));let c=l.get(n);return c||(c=new rf(r,new m1(r),n),l.set(n,c)),c}}rf.INSTANCES=new WeakMap;class $s{constructor(r,n){this.firestore=r,this._delegate=n,this._userDataWriter=new m1(r)}static forPath(r,n,s){if(r.length%2!=0)throw new Me("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${r.canonicalString()} has ${r.length}`);return new $s(n,new yn(n._delegate,s,new Ke(r)))}static forKey(r,n,s){return new $s(n,new yn(n._delegate,s,r))}get id(){return this._delegate.id}get parent(){return new sf(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(r){try{return new sf(this.firestore,tT(this._delegate,r))}catch(n){throw Xi(n,"collection()","DocumentReference.collection()")}}isEqual(r){return(r=(0,F.m9)(r))instanceof yn&&nv(this._delegate,r)}set(r,n){n=CT("DocumentReference.set",n);try{return n?KM(this._delegate,r,n):KM(this._delegate,r)}catch(s){throw Xi(s,"setDoc()","DocumentReference.set()")}}update(r,n,...s){try{return 1===arguments.length?QM(this._delegate,r):QM(this._delegate,r,n,...s)}catch(l){throw Xi(l,"updateDoc()","DocumentReference.update()")}}delete(){return function(i){return fu(Ot(i.firestore,jn),[new hg(i._key,kn.none())])}(this._delegate)}onSnapshot(...r){const n=y1(r),s=IT(r,l=>new dv(this.firestore,new Xo(this.firestore._delegate,this._userDataWriter,l._key,l._document,l.metadata,this._delegate.converter)));return XM(this._delegate,n,s)}get(r){let n;return n="cache"===(null==r?void 0:r.source)?function(i){i=Ot(i,yn);const r=Ot(i.firestore,jn),n=Kn(r),s=new nf(r);return function(i,r){const n=new Ur;return i.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return(s=(0,we.Z)(function*(l,c,g){try{const _=yield function(w,T){const S=Ve(w);return S.persistence.runTransaction("read document","readonly",A=>S.Qn.An(A,T))}(l,c);_.isFoundDocument()?g.resolve(_):_.isNoDocument()?g.resolve(null):g.reject(new Me(de.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(_){const w=Gc(_,`Failed to get document '${c} from cache`);g.reject(w)}}),function(l,c,g){return s.apply(this,arguments)})(yield e1(i),r,n);var s})),n.promise}(n,i._key).then(l=>new Xo(r,s,i._key,l,new Jc(null!==l&&l.hasLocalMutations,!0),i.converter))}(this._delegate):"server"===(null==r?void 0:r.source)?function(i){i=Ot(i,yn);const r=Ot(i.firestore,jn);return GI(Kn(r),i._key,{source:"server"}).then(n=>pu(r,i,n))}(this._delegate):function(i){i=Ot(i,yn);const r=Ot(i.firestore,jn);return GI(Kn(r),i._key).then(n=>pu(r,i,n))}(this._delegate),n.then(s=>new dv(this.firestore,new Xo(this.firestore._delegate,this._userDataWriter,s._key,s._document,s.metadata,this._delegate.converter)))}withConverter(r){return new $s(this.firestore,this._delegate.withConverter(r?rf.getInstance(this.firestore,r):null))}}function Xi(i,r,n){return i.message=i.message.replace(r,n),i}function y1(i){for(const r of i)if("object"==typeof r&&!ET(r))return r;return{}}function IT(i,r){var n,s;let l;return l=ET(i[0])?i[0]:ET(i[1])?i[1]:"function"==typeof i[0]?{next:i[0],error:i[1],complete:i[2]}:{next:i[1],error:i[2],complete:i[3]},{next:c=>{l.next&&l.next(r(c))},error:null===(n=l.error)||void 0===n?void 0:n.bind(l),complete:null===(s=l.complete)||void 0===s?void 0:s.bind(l)}}class dv{constructor(r,n){this._firestore=r,this._delegate=n}get ref(){return new $s(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(r){return this._delegate.data(r)}get(r,n){return this._delegate.get(r,n)}isEqual(r){return h1(this._delegate,r._delegate)}}class hv extends dv{data(r){const n=this._delegate.data(r);return function(i,r){i||Ze()}(void 0!==n),n}}class Si{constructor(r,n){this.firestore=r,this._delegate=n,this._userDataWriter=new m1(r)}where(r,n,s){try{return new Si(this.firestore,du(this._delegate,function(i,r,n){const s=r,l=lv("where",i);return new VM(l,s,n)}(r,n,s)))}catch(l){throw Xi(l,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(r,n){try{return new Si(this.firestore,du(this._delegate,function(i,r="asc"){const n=r,s=lv("orderBy",i);return new uO(s,n)}(r,n)))}catch(s){throw Xi(s,/(orderBy|where)\(\)/,"Query.$1()")}}limit(r){try{return new Si(this.firestore,du(this._delegate,function(i){return Kh("limit",i),new BM("limit",i,"F")}(r)))}catch(n){throw Xi(n,"limit()","Query.limit()")}}limitToLast(r){try{return new Si(this.firestore,du(this._delegate,function(i){return Kh("limitToLast",i),new BM("limitToLast",i,"L")}(r)))}catch(n){throw Xi(n,"limitToLast()","Query.limitToLast()")}}startAt(...r){try{return new Si(this.firestore,du(this._delegate,function(...i){return new UM("startAt",i,!0)}(...r)))}catch(n){throw Xi(n,"startAt()","Query.startAt()")}}startAfter(...r){try{return new Si(this.firestore,du(this._delegate,function(...i){return new UM("startAfter",i,!1)}(...r)))}catch(n){throw Xi(n,"startAfter()","Query.startAfter()")}}endBefore(...r){try{return new Si(this.firestore,du(this._delegate,function(...i){return new HM("endBefore",i,!0)}(...r)))}catch(n){throw Xi(n,"endBefore()","Query.endBefore()")}}endAt(...r){try{return new Si(this.firestore,du(this._delegate,function(...i){return new HM("endAt",i,!1)}(...r)))}catch(n){throw Xi(n,"endAt()","Query.endAt()")}}isEqual(r){return r1(this._delegate,r._delegate)}get(r){let n;return n="cache"===(null==r?void 0:r.source)?function(i){i=Ot(i,mr);const r=Ot(i.firestore,jn),n=Kn(r),s=new nf(r);return function(i,r){const n=new Ur;return i.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return(s=(0,we.Z)(function*(l,c,g){try{const _=yield Ng(l,c,!0),w=new zy(c,_.Gn),T=w.Io(_.documents),S=w.applyChanges(T,!1);g.resolve(S.snapshot)}catch(_){const w=Gc(_,`Failed to execute query '${c} against cache`);g.reject(w)}}),function(l,c,g){return s.apply(this,arguments)})(yield e1(i),r,n);var s})),n.promise}(n,i._query).then(l=>new Xa(r,s,i,l))}(this._delegate):"server"===(null==r?void 0:r.source)?function(i){i=Ot(i,mr);const r=Ot(i.firestore,jn),n=Kn(r),s=new nf(r);return Zh(n,i._query,{source:"server"}).then(l=>new Xa(r,s,i,l))}(this._delegate):function(i){i=Ot(i,mr);const r=Ot(i.firestore,jn),n=Kn(r),s=new nf(r);return f1(i._query),Zh(n,i._query).then(l=>new Xa(r,s,i,l))}(this._delegate),n.then(s=>new v1(this.firestore,new Xa(this.firestore._delegate,this._userDataWriter,this._delegate,s._snapshot)))}onSnapshot(...r){const n=y1(r),s=IT(r,l=>new v1(this.firestore,new Xa(this.firestore._delegate,this._userDataWriter,this._delegate,l._snapshot)));return XM(this._delegate,n,s)}withConverter(r){return new Si(this.firestore,this._delegate.withConverter(r?rf.getInstance(this.firestore,r):null))}}class Jg{constructor(r,n){this._firestore=r,this._delegate=n}get type(){return this._delegate.type}get doc(){return new hv(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class v1{constructor(r,n){this._firestore=r,this._delegate=n}get query(){return new Si(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(r=>new hv(this._firestore,r))}docChanges(r){return this._delegate.docChanges(r).map(n=>new Jg(this._firestore,n))}forEach(r,n){this._delegate.forEach(s=>{r.call(n,new hv(this._firestore,s))})}isEqual(r){return h1(this._delegate,r._delegate)}}class sf extends Si{constructor(r,n){super(r,n),this.firestore=r,this._delegate=n}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const r=this._delegate.parent;return r?new $s(this.firestore,r):null}doc(r){try{return new $s(this.firestore,void 0===r?Qh(this._delegate):Qh(this._delegate,r))}catch(n){throw Xi(n,"doc()","CollectionReference.doc()")}}add(r){return function(i,r){const n=Ot(i.firestore,jn),s=Qh(i),l=p1(i.converter,r);return fu(n,[Wg(Ja(i.firestore),"addDoc",s._key,l,null!==i.converter,{}).toMutation(s._key,kn.exists(!1))]).then(()=>s)}(this._delegate,r).then(n=>new $s(this.firestore,n))}isEqual(r){return nv(this._delegate,r._delegate)}withConverter(r){return new sf(this.firestore,this._delegate.withConverter(r?rf.getInstance(this.firestore,r):null))}}function Xc(i){return Ot(i,yn)}class Xg{constructor(...r){this._delegate=new Ji(...r)}static documentId(){return new Xg(Nr.keyField().canonicalString())}isEqual(r){return(r=(0,F.m9)(r))instanceof Ji&&this._delegate._internalPath.isEqual(r._internalPath)}}class ed{constructor(r){this._delegate=r}static serverTimestamp(){const r=new zg("serverTimestamp");return r._methodName="FieldValue.serverTimestamp",new ed(r)}static delete(){const r=new Xh("deleteField");return r._methodName="FieldValue.delete",new ed(r)}static arrayUnion(...r){const n=function(...i){return new lO("arrayUnion",i)}(...r);return n._methodName="FieldValue.arrayUnion",new ed(n)}static arrayRemove(...r){const n=function(...i){return new lT("arrayRemove",i)}(...r);return n._methodName="FieldValue.arrayRemove",new ed(n)}static increment(r){const n=function(i){return new LM("increment",i)}(r);return n._methodName="FieldValue.increment",new ed(n)}isEqual(r){return this._delegate.isEqual(r._delegate)}}const ys={Firestore:oR,GeoPoint:cu,Timestamp:Tr,Blob:Qg,Transaction:DT,WriteBatch:aR,DocumentReference:$s,DocumentSnapshot:dv,Query:Si,QueryDocumentSnapshot:hv,QuerySnapshot:v1,CollectionReference:sf,FieldPath:Xg,FieldValue:ed,setLogLevel:function(i){!function(i){Wa.setLogLevel(i)}(i)},CACHE_SIZE_UNLIMITED:-1};!function(i){(function(i,r){i.INTERNAL.registerComponent(new xa.wA("firestore-compat",n=>((r,n)=>new oR(r,n,new sR))(n.getProvider("app-compat").getImmediate(),n.getProvider("firestore").getImmediate()),"PUBLIC").setServiceProps(Object.assign({},ys)))})(i),i.registerVersion("@firebase/firestore-compat","0.1.3")}(Go.Z);var em=B(6682),tm=B(9746),w1=B(7771),TT=B(8858);class NT extends qt.xQ{constructor(r=Number.POSITIVE_INFINITY,n=Number.POSITIVE_INFINITY,s){super(),this.scheduler=s,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=r<1?1:r,this._windowTime=n<1?1:n,n===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(r){if(!this.isStopped){const n=this._events;n.push(r),n.length>this._bufferSize&&n.shift()}super.next(r)}nextTimeWindow(r){this.isStopped||(this._events.push(new uR(this._getNow(),r)),this._trimBufferThenGetEvents()),super.next(r)}_subscribe(r){const n=this._infiniteTimeWindow,s=n?this._events:this._trimBufferThenGetEvents(),l=this.scheduler,c=s.length;let g;if(this.closed)throw new kd.N;if(this.isStopped||this.hasError?g=m0.w.EMPTY:(this.observers.push(r),g=new TT.W(this,r)),l&&r.add(r=new tm.ht(r,l)),n)for(let _=0;_<c&&!r.closed;_++)r.next(s[_]);else for(let _=0;_<c&&!r.closed;_++)r.next(s[_].value);return this.hasError?r.error(this.thrownError):this.isStopped&&r.complete(),g}_getNow(){return(this.scheduler||w1.c).now()}_trimBufferThenGetEvents(){const r=this._getNow(),n=this._bufferSize,s=this._windowTime,l=this._events,c=l.length;let g=0;for(;g<c&&!(r-l[g].time<s);)g++;return c>n&&(g=Math.max(g,c-n)),g>0&&l.splice(0,g),l}}class uR{constructor(r,n){this.time=r,this.value=n}}function C1(i,r,n){let s;return s=i&&"object"==typeof i?i:{bufferSize:i,windowTime:r,refCount:!1,scheduler:n},l=>l.lift(function({bufferSize:i=Number.POSITIVE_INFINITY,windowTime:r=Number.POSITIVE_INFINITY,refCount:n,scheduler:s}){let l,g,c=0,_=!1,w=!1;return function(S){let A;c++,!l||_?(_=!1,l=new NT(i,r,s),A=l.subscribe(this),g=S.subscribe({next(x){l.next(x)},error(x){_=!0,l.error(x)},complete(){w=!0,g=void 0,l.complete()}}),w&&(g=void 0)):A=l.subscribe(this),this.add(()=>{c--,A.unsubscribe(),A=void 0,g&&!w&&n&&0===c&&(g.unsubscribe(),g=void 0,l=void 0)})}}(s))}function AT(i,r){return r?zn(()=>i,r):zn(()=>i)}var E1=B(2639),D1=B(7841);const fv=new d.OlP("angularfire2.auth.use-emulator"),nm=new d.OlP("angularfire2.auth.settings"),I1=new d.OlP("angularfire2.auth.tenant-id"),vs=new d.OlP("angularfire2.auth.langugage-code"),T1=new d.OlP("angularfire2.auth.use-device-language"),RT=new d.OlP("angularfire.auth.persistence"),N1=(i,r,n,s,l,c,g,_)=>(0,pn.cc)(`${i.name}.auth`,"AngularFireAuth",i.name,()=>{const w=r.runOutsideAngular(()=>i.auth());if(n&&w.useEmulator(...n),s&&(w.tenantId=s),w.languageCode=l,c&&w.useDeviceLanguage(),g)for(const[T,S]of Object.entries(g))w.settings[T]=S;return _&&w.setPersistence(_),w},[n,s,l,c,g,_]);let xT=(()=>{class i{constructor(n,s,l,c,g,_,w,T,S,A,x){const V=new qt.xQ,z=(0,We.of)(void 0).pipe((0,tm.QV)(g.outsideAngular),zn(()=>c.runOutsideAngular(()=>Promise.resolve().then(B.bind(B,5128)))),(0,Xe.U)(()=>(0,Ps.on)(n,c,s)),(0,Xe.U)(ue=>N1(ue,c,_,T,S,A,w,x)),C1({bufferSize:1,refCount:!1}));if(vd(l))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,We.of)(null);else{z.pipe(Rn()).subscribe();const Ae=z.pipe(zn(yt=>yt.getRedirectResult().then(Gt=>Gt,()=>null)),pn.iC,C1({bufferSize:1,refCount:!1})),Qe=z.pipe(zn(yt=>new An.y(Gt=>({unsubscribe:c.runOutsideAngular(()=>yt.onAuthStateChanged(_r=>Gt.next(_r),_r=>Gt.error(_r),()=>Gt.complete()))})))),Je=z.pipe(zn(yt=>new An.y(Gt=>({unsubscribe:c.runOutsideAngular(()=>yt.onIdTokenChanged(_r=>Gt.next(_r),_r=>Gt.error(_r),()=>Gt.complete()))}))));this.authState=Ae.pipe(AT(Qe),(0,E1.R)(g.outsideAngular),(0,tm.QV)(g.insideAngular)),this.user=Ae.pipe(AT(Je),(0,E1.R)(g.outsideAngular),(0,tm.QV)(g.insideAngular)),this.idToken=this.user.pipe(zn(yt=>yt?(0,un.D)(yt.getIdToken()):(0,We.of)(null))),this.idTokenResult=this.user.pipe(zn(yt=>yt?(0,un.D)(yt.getIdTokenResult()):(0,We.of)(null))),this.credential=(0,em.T)(Ae,V,this.authState.pipe(fn(yt=>!yt))).pipe((0,Xe.U)(yt=>(null==yt?void 0:yt.user)?yt:null),(0,E1.R)(g.outsideAngular),(0,tm.QV)(g.insideAngular))}return(0,Ps.pX)(this,z,c,{spy:{apply:(ue,Ae,Qe)=>{(ue.startsWith("signIn")||ue.startsWith("createUser"))&&Qe.then(Je=>V.next(Je))}}})}}return i.\u0275fac=function(n){return new(n||i)(d.LFG(Ps.Dh),d.LFG(Ps.xv,8),d.LFG(d.Lbi),d.LFG(d.R0b),d.LFG(pn.HU),d.LFG(fv,8),d.LFG(nm,8),d.LFG(I1,8),d.LFG(vs,8),d.LFG(T1,8),d.LFG(RT,8))},i.\u0275prov=d.Yz7({token:i,factory:i.\u0275fac,providedIn:"any"}),i})();function kT(i,r){return function(i,r=P_.z){return new An.y(n=>{let s;return null!=r?r.schedule(()=>{s=i.onSnapshot({includeMetadataChanges:!0},n)}):s=i.onSnapshot({includeMetadataChanges:!0},n),()=>{null!=s&&s()}})}(i,r)}function S1(i,r){return kT(i,r).pipe((0,Xe.U)(n=>({payload:n,type:"query"})))}function rm(i,r){return S1(i,r).pipe(Oo(void 0),pt(),(0,Xe.U)(([n,s])=>{const l=s.payload.docChanges(),c=l.map(g=>({type:g.type,payload:g}));return n&&JSON.stringify(n.payload.metadata)!==JSON.stringify(s.payload.metadata)&&s.payload.docs.forEach((g,_)=>{const w=l.find(S=>S.doc.ref.isEqual(g.ref)),T=null==n?void 0:n.payload.docs.find(S=>S.ref.isEqual(g.ref));w&&JSON.stringify(w.doc.metadata)===JSON.stringify(g.metadata)||!w&&T&&JSON.stringify(T.metadata)===JSON.stringify(g.metadata)||c.push({type:"modified",payload:{oldIndex:_,newIndex:_,type:"modified",doc:g}})}),c}))}function OT(i,r,n){return rm(i,n).pipe(Cl((s,l)=>function(i,r,n){return r.forEach(s=>{n.indexOf(s.type)>-1&&(i=function(i,r){switch(r.type){case"added":if(!i[r.newIndex]||!i[r.newIndex].doc.ref.isEqual(r.doc.ref))return pv(i,r.newIndex,0,r);break;case"modified":if(null==i[r.oldIndex]||i[r.oldIndex].doc.ref.isEqual(r.doc.ref)){if(r.oldIndex!==r.newIndex){const n=i.slice();return n.splice(r.oldIndex,1),n.splice(r.newIndex,0,r),n}return pv(i,r.newIndex,1,r)}break;case"removed":if(i[r.oldIndex]&&i[r.oldIndex].doc.ref.isEqual(r.doc.ref))return pv(i,r.oldIndex,1)}return i}(i,s))}),i}(s,l.map(c=>c.payload),r),[]),Vl(),(0,Xe.U)(s=>s.map(l=>({type:l.type,payload:l}))))}function pv(i,r,n,...s){const l=i.slice();return l.splice(r,n,...s),l}function fR(i){return(!i||0===i.length)&&(i=["added","removed","modified"]),i}class A1{constructor(r,n,s){this.ref=r,this.query=n,this.afs=s}stateChanges(r){let n=rm(this.query,this.afs.schedulers.outsideAngular);return r&&r.length>0&&(n=n.pipe((0,Xe.U)(s=>s.filter(l=>r.indexOf(l.type)>-1)))),n.pipe(Oo(void 0),pt(),fn(([s,l])=>l.length>0||!s),(0,Xe.U)(([s,l])=>l),pn.iC)}auditTrail(r){return this.stateChanges(r).pipe(Cl((n,s)=>[...n,...s],[]))}snapshotChanges(r){const n=fR(r);return OT(this.query,n,this.afs.schedulers.outsideAngular).pipe(pn.iC)}valueChanges(r={}){return S1(this.query,this.afs.schedulers.outsideAngular).pipe((0,Xe.U)(n=>n.payload.docs.map(s=>r.idField?Object.assign(Object.assign({},s.data()),{[r.idField]:s.id}):s.data())),pn.iC)}get(r){return(0,un.D)(this.query.get(r)).pipe(pn.iC)}add(r){return this.ref.add(r)}doc(r){return new M1(this.ref.doc(r),this.afs)}}class M1{constructor(r,n){this.ref=r,this.afs=n}set(r,n){return this.ref.set(r,n)}update(r){return this.ref.update(r)}delete(){return this.ref.delete()}collection(r,n){const s=this.ref.collection(r),{ref:l,query:c}=x1(s,n);return new A1(l,c,this.afs)}snapshotChanges(){return function(i,r){return kT(i,r).pipe(Oo(void 0),pt(),(0,Xe.U)(([n,s])=>s.exists?(null==n?void 0:n.exists)?{payload:s,type:"modified"}:{payload:s,type:"added"}:{payload:s,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(pn.iC)}valueChanges(r={}){return this.snapshotChanges().pipe((0,Xe.U)(({payload:n})=>r.idField?Object.assign(Object.assign({},n.data()),{[r.idField]:n.id}):n.data()))}get(r){return(0,un.D)(this.ref.get(r)).pipe(pn.iC)}}class pR{constructor(r,n){this.query=r,this.afs=n}stateChanges(r){return r&&0!==r.length?rm(this.query,this.afs.schedulers.outsideAngular).pipe((0,Xe.U)(n=>n.filter(s=>r.indexOf(s.type)>-1)),fn(n=>n.length>0),pn.iC):rm(this.query,this.afs.schedulers.outsideAngular).pipe(pn.iC)}auditTrail(r){return this.stateChanges(r).pipe(Cl((n,s)=>[...n,...s],[]))}snapshotChanges(r){const n=fR(r);return OT(this.query,n,this.afs.schedulers.outsideAngular).pipe(pn.iC)}valueChanges(r={}){return S1(this.query,this.afs.schedulers.outsideAngular).pipe((0,Xe.U)(s=>s.payload.docs.map(l=>r.idField?Object.assign({[r.idField]:l.id},l.data()):l.data())),pn.iC)}get(r){return(0,un.D)(this.query.get(r)).pipe(pn.iC)}}const gR=new d.OlP("angularfire2.enableFirestorePersistence"),PT=new d.OlP("angularfire2.firestore.persistenceSettings"),im=new d.OlP("angularfire2.firestore.settings"),R1=new d.OlP("angularfire2.firestore.use-emulator");function x1(i,r=(n=>n)){return{query:r(i),ref:i}}let k1=(()=>{class i{constructor(n,s,l,c,g,_,w,T,S,A,x,V,z,ue,Ae,Qe){this.schedulers=w;const Je=(0,Ps.on)(n,_,s),yt=S;A&&N1(Je,_,x,z,ue,Ae,V,Qe),[this.firestore,this.persistenceEnabled$]=(0,pn.cc)(`${Je.name}.firestore`,"AngularFirestore",Je.name,()=>{const Gt=_.runOutsideAngular(()=>Je.firestore());if(c&&Gt.settings(c),yt&&Gt.useEmulator(...yt),l&&!vd(g)){const _r=()=>{try{return(0,un.D)(Gt.enablePersistence(T||void 0).then(()=>!0,()=>!1))}catch(Nm){return"undefined"!=typeof console&&console.warn(Nm),(0,We.of)(!1)}};return[Gt,_.runOutsideAngular(_r)]}return[Gt,(0,We.of)(!1)]},[c,yt,l])}collection(n,s){let l;l="string"==typeof n?this.firestore.collection(n):n;const{ref:c,query:g}=x1(l,s),_=this.schedulers.ngZone.run(()=>c);return new A1(_,g,this)}collectionGroup(n,s){const l=s||(g=>g),c=this.firestore.collectionGroup(n);return new pR(l(c),this)}doc(n){let s;s="string"==typeof n?this.firestore.doc(n):n;const l=this.schedulers.ngZone.run(()=>s);return new M1(l,this)}createId(){return this.firestore.collection("_").doc().id}}return i.\u0275fac=function(n){return new(n||i)(d.LFG(Ps.Dh),d.LFG(Ps.xv,8),d.LFG(gR,8),d.LFG(im,8),d.LFG(d.Lbi),d.LFG(d.R0b),d.LFG(pn.HU),d.LFG(PT,8),d.LFG(R1,8),d.LFG(xT,8),d.LFG(fv,8),d.LFG(nm,8),d.LFG(I1,8),d.LFG(vs,8),d.LFG(T1,8),d.LFG(RT,8))},i.\u0275prov=d.Yz7({token:i,factory:i.\u0275fac,providedIn:"any"}),i})(),DO=(()=>{class i{constructor(n){this.firestore=n,this.moviesTitle=[],this.isSet=!1,this.api_url="https://imdb-api.com/en/API/SearchMovie/k_wcfn6wyr/"}getList(n){fetch(this.api_url+n).then(s=>s.json()).then(s=>{this.mainData=JSON.parse(JSON.stringify(s)),console.log("main",this.mainData.results),console.log("data",s.results),this.makeList(s)})}makeList(n){for(let s=0;s<n.results.length;s++)this.moviesTitle[s]=n.results[s].title;this.isSet=!0}addDocument(n){for(let s=0;s<this.mainData.results.length;s++)if(this.mainData.results[s].title==n){let l={title:this.mainData.results[s].title,image:this.mainData.results[s].image,description:this.mainData.results[s].description};console.log("this is temp obj",l),this.firestore.collection("Movies").add(l);break}}}return i.\u0275fac=function(n){return new(n||i)(d.LFG(k1))},i.\u0275prov=d.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),mR=(()=>{class i{constructor(n){this.firestore=n,this.mList=[{title:"Dummy",image:"https://imdb-api.com/images/original/MV5BMTc5MDE2ODcwNV5BMl5BanBnXkFtZTgwMzI2NzQ2NzM@._V1_Ratio0.7273_AL_.jpg",description:"0000"}],this.mList.pop()}setList(n,s,l){this.mList.push({title:n,image:s,description:l})}}return i.\u0275fac=function(n){return new(n||i)(d.LFG(k1))},i.\u0275prov=d.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var IO=B(9105);function Mr(i,r,n,s){return(0,IO.m)(n)&&(s=n,n=void 0),s?Mr(i,r,n).pipe((0,Xe.U)(l=>(0,Mo.k)(l)?s(...l):s(l))):new An.y(l=>{FT(i,r,function(g){l.next(arguments.length>1?Array.prototype.slice.call(arguments):g)},l,n)})}function FT(i,r,n,s,l){let c;if(function(i){return i&&"function"==typeof i.addEventListener&&"function"==typeof i.removeEventListener}(i)){const g=i;i.addEventListener(r,n,l),c=()=>g.removeEventListener(r,n,l)}else if(function(i){return i&&"function"==typeof i.on&&"function"==typeof i.off}(i)){const g=i;i.on(r,n),c=()=>g.off(r,n)}else if(function(i){return i&&"function"==typeof i.addListener&&"function"==typeof i.removeListener}(i)){const g=i;i.addListener(r,n),c=()=>g.removeListener(r,n)}else{if(!i||!i.length)throw new TypeError("Invalid event target");for(let g=0,_=i.length;g<_;g++)FT(i[g],r,n,s,l)}s.add(c)}var O1=B(6561);function TO(i){const{index:r,period:n,subscriber:s}=i;if(s.next(r),!s.closed){if(-1===n)return s.complete();i.index=r+1,this.schedule(i,n)}}class P1{call(r,n){return n.subscribe(new Rr(r))}}class Rr extends Xf{constructor(r){super(r),this.hasFirst=!1,this.observables=[],this.subscriptions=[]}_next(r){this.observables.push(r)}_complete(){const r=this.observables,n=r.length;if(0===n)this.destination.complete();else{for(let s=0;s<n&&!this.hasFirst;s++){const c=ep(this,r[s],void 0,s);this.subscriptions&&this.subscriptions.push(c),this.add(c)}this.observables=null}}notifyNext(r,n,s){if(!this.hasFirst){this.hasFirst=!0;for(let l=0;l<this.subscriptions.length;l++)if(l!==s){let c=this.subscriptions[l];c.unsubscribe(),this.remove(c)}this.subscriptions=null}this.destination.next(n)}}var NO=B(8640);new An.y(NO.Z);var gv=B(377);function td(...i){const r=i[i.length-1];return"function"==typeof r&&i.pop(),(0,Od.n)(i,void 0).lift(new ER(r))}class ER{constructor(r){this.resultSelector=r}call(r,n){return n.subscribe(new DR(r,this.resultSelector))}}class DR extends Cr.L{constructor(r,n,s=Object.create(null)){super(r),this.resultSelector=n,this.iterators=[],this.active=0,this.resultSelector="function"==typeof n?n:void 0}_next(r){const n=this.iterators;(0,Mo.k)(r)?n.push(new nd(r)):n.push("function"==typeof r[gv.hZ]?new VT(r[gv.hZ]()):new BT(this.destination,this,r))}_complete(){const r=this.iterators,n=r.length;if(this.unsubscribe(),0!==n){this.active=n;for(let s=0;s<n;s++){let l=r[s];l.stillUnsubscribed?this.destination.add(l.subscribe()):this.active--}}else this.destination.complete()}notifyInactive(){this.active--,0===this.active&&this.destination.complete()}checkIterators(){const r=this.iterators,n=r.length,s=this.destination;for(let g=0;g<n;g++){let _=r[g];if("function"==typeof _.hasValue&&!_.hasValue())return}let l=!1;const c=[];for(let g=0;g<n;g++){let _=r[g],w=_.next();if(_.hasCompleted()&&(l=!0),w.done)return void s.complete();c.push(w.value)}this.resultSelector?this._tryresultSelector(c):s.next(c),l&&s.complete()}_tryresultSelector(r){let n;try{n=this.resultSelector.apply(this,r)}catch(s){return void this.destination.error(s)}this.destination.next(n)}}class VT{constructor(r){this.iterator=r,this.nextResult=r.next()}hasValue(){return!0}next(){const r=this.nextResult;return this.nextResult=this.iterator.next(),r}hasCompleted(){const r=this.nextResult;return Boolean(r&&r.done)}}class nd{constructor(r){this.array=r,this.index=0,this.length=0,this.length=r.length}[gv.hZ](){return this}next(r){const n=this.index++;return n<this.length?{value:this.array[n],done:!1}:{value:null,done:!0}}hasValue(){return this.array.length>this.index}hasCompleted(){return this.array.length===this.index}}class BT extends Hi.Ds{constructor(r,n,s){super(r),this.parent=n,this.observable=s,this.stillUnsubscribed=!0,this.buffer=[],this.isComplete=!1}[gv.hZ](){return this}next(){const r=this.buffer;return 0===r.length&&this.isComplete?{value:null,done:!0}:{value:r.shift(),done:!1}}hasValue(){return this.buffer.length>0}hasCompleted(){return 0===this.buffer.length&&this.isComplete}notifyComplete(){this.buffer.length>0?(this.isComplete=!0,this.parent.notifyInactive()):this.destination.complete()}notifyNext(r){this.buffer.push(r),this.parent.checkIterators()}subscribe(){return(0,Hi.ft)(this.observable,new Hi.IY(this))}}function Tn(i){return r=>r.lift(new IR(i))}class IR{constructor(r){this.notifier=r}call(r,n){const s=new mv(r),l=(0,Hi.ft)(this.notifier,new Hi.IY(s));return l&&!s.seenValue?(s.add(l),n.subscribe(s)):s}}class mv extends Hi.Ds{constructor(r){super(r),this.seenValue=!1}notifyNext(){this.seenValue=!0,this.complete()}notifyComplete(){}}function _v(...i){return r=>{let n;return"function"==typeof i[i.length-1]&&(n=i.pop()),r.lift(new V1(i,n))}}class V1{constructor(r,n){this.observables=r,this.project=n}call(r,n){return n.subscribe(new UT(r,this.observables,this.project))}}class UT extends Xf{constructor(r,n,s){super(r),this.observables=n,this.project=s,this.toRespond=[];const l=n.length;this.values=new Array(l);for(let c=0;c<l;c++)this.toRespond.push(c);for(let c=0;c<l;c++)this.add(ep(this,n[c],void 0,c))}notifyNext(r,n,s){this.values[s]=n;const l=this.toRespond;if(l.length>0){const c=l.indexOf(s);-1!==c&&l.splice(c,1)}}notifyComplete(){}_next(r){if(0===this.toRespond.length){const n=[r,...this.values];this.project?this._tryProject(n):this.destination.next(n)}}_tryProject(r){let n;try{n=this.project.apply(this,r)}catch(s){return void this.destination.error(s)}this.destination.next(n)}}B(1593);var AR=B(8819);B(1555);let KR=(()=>{class i{}return i.\u0275fac=function(n){return new(n||i)},i.\u0275mod=d.oAB({type:i}),i.\u0275inj=d.cJS({}),i})(),ZO=(()=>{class i{}return i.\u0275fac=function(n){return new(n||i)},i.\u0275mod=d.oAB({type:i}),i.\u0275inj=d.cJS({imports:[[KR]]}),i})(),A2=(()=>{class i{}return i.\u0275fac=function(n){return new(n||i)},i.\u0275mod=d.oAB({type:i}),i.\u0275inj=d.cJS({imports:[ZO]}),i})();const xv=["*"],_V=["dialog"];function mf(i){return null!=i}function Ov(i){return(i||document.body).getBoundingClientRect()}"undefined"!=typeof Element&&!Element.prototype.closest&&(Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest=function(i){let r=this;if(!document.documentElement.contains(r))return null;do{if(r.matches(i))return r;r=r.parentElement||r.parentNode}while(null!==r&&1===r.nodeType);return null});const JO={animation:!0,transitionTimerDelayMs:5};let di=(()=>{class i{constructor(){this.animation=JO.animation}}return i.\u0275fac=function(n){return new(n||i)},i.\u0275prov=d.Yz7({factory:function(){return new i},token:i,providedIn:"root"}),i})();const AB=()=>{},{transitionTimerDelayMs:MB}=JO,X1=new Map,zr=(i,r,n,s)=>{let l=s.context||{};const c=X1.get(r);if(c)switch(s.runningTransition){case"continue":return ls.E;case"stop":i.run(()=>c.transition$.complete()),l=Object.assign(c.context,l),X1.delete(r)}const g=n(r,s.animation,l)||AB;if(!s.animation||"none"===window.getComputedStyle(r).transitionProperty)return i.run(()=>g()),(0,We.of)(void 0).pipe(function(i){return r=>new An.y(n=>r.subscribe(g=>i.run(()=>n.next(g)),g=>i.run(()=>n.error(g)),()=>i.run(()=>n.complete())))}(i));const _=new qt.xQ,w=new qt.xQ,T=_.pipe(function(...i){return r=>ko(r,(0,We.of)(...i))}(!0));X1.set(r,{transition$:_,complete:()=>{w.next(),w.complete()},context:l});const S=function(i){const{transitionDelay:r,transitionDuration:n}=window.getComputedStyle(i);return 1e3*(parseFloat(r)+parseFloat(n))}(r);return i.runOutsideAngular(()=>{const A=Mr(r,"transitionend").pipe(Tn(T),fn(({target:V})=>V===r));(function(...i){if(1===i.length){if(!(0,Mo.k)(i[0]))return i[0];i=i[0]}return(0,Od.n)(i,void 0).lift(new P1)})(function(i=0,r,n){let s=-1;return(0,O1.k)(r)?s=Number(r)<1?1:Number(r):(0,pa.K)(r)&&(n=r),(0,pa.K)(n)||(n=P_.P),new An.y(l=>{const c=(0,O1.k)(i)?i:+i-n.now();return n.schedule(TO,c,{index:0,period:s,subscriber:l})})}(S+MB).pipe(Tn(T)),A,w).pipe(Tn(T)).subscribe(()=>{X1.delete(r),i.run(()=>{g(),_.next(),_.complete()})})}),_.asObservable()};let rP=(()=>{class i{}return i.\u0275fac=function(n){return new(n||i)},i.\u0275mod=d.oAB({type:i}),i.\u0275inj=d.cJS({imports:[[kr]]}),i})(),iP=(()=>{class i{}return i.\u0275fac=function(n){return new(n||i)},i.\u0275mod=d.oAB({type:i}),i.\u0275inj=d.cJS({imports:[[kr]]}),i})(),oP=(()=>{class i{}return i.\u0275fac=function(n){return new(n||i)},i.\u0275mod=d.oAB({type:i}),i.\u0275inj=d.cJS({}),i})(),uP=(()=>{class i{}return i.\u0275fac=function(n){return new(n||i)},i.\u0275mod=d.oAB({type:i}),i.\u0275inj=d.cJS({imports:[[kr]]}),i})(),cP=(()=>{class i{}return i.\u0275fac=function(n){return new(n||i)},i.\u0275mod=d.oAB({type:i}),i.\u0275inj=d.cJS({}),i})();var Pt=(()=>(function(i){i[i.Tab=9]="Tab",i[i.Enter=13]="Enter",i[i.Escape=27]="Escape",i[i.Space=32]="Space",i[i.PageUp=33]="PageUp",i[i.PageDown=34]="PageDown",i[i.End=35]="End",i[i.Home=36]="Home",i[i.ArrowLeft=37]="ArrowLeft",i[i.ArrowUp=38]="ArrowUp",i[i.ArrowRight=39]="ArrowRight",i[i.ArrowDown=40]="ArrowDown"}(Pt||(Pt={})),Pt))();"undefined"!=typeof navigator&&navigator.userAgent&&(/iPad|iPhone|iPod/.test(navigator.userAgent)||/Macintosh/.test(navigator.userAgent)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2||/Android/.test(navigator.userAgent));const gP=["a[href]","button:not([disabled])",'input:not([disabled]):not([type="hidden"])',"select:not([disabled])","textarea:not([disabled])","[contenteditable]",'[tabindex]:not([tabindex="-1"])'].join(", ");function mP(i){const r=Array.from(i.querySelectorAll(gP)).filter(n=>-1!==n.tabIndex);return[r[0],r[r.length-1]]}new class{getAllStyles(r){return window.getComputedStyle(r)}getStyle(r,n){return this.getAllStyles(r)[n]}isStaticPositioned(r){return"static"===(this.getStyle(r,"position")||"static")}offsetParent(r){let n=r.offsetParent||document.documentElement;for(;n&&n!==document.documentElement&&this.isStaticPositioned(n);)n=n.offsetParent;return n||document.documentElement}position(r,n=!0){let s,l={width:0,height:0,top:0,bottom:0,left:0,right:0};if("fixed"===this.getStyle(r,"position"))s=r.getBoundingClientRect(),s={top:s.top,bottom:s.bottom,left:s.left,right:s.right,height:s.height,width:s.width};else{const c=this.offsetParent(r);s=this.offset(r,!1),c!==document.documentElement&&(l=this.offset(c,!1)),l.top+=c.clientTop,l.left+=c.clientLeft}return s.top-=l.top,s.bottom-=l.top,s.left-=l.left,s.right-=l.left,n&&(s.top=Math.round(s.top),s.bottom=Math.round(s.bottom),s.left=Math.round(s.left),s.right=Math.round(s.right)),s}offset(r,n=!0){const s=r.getBoundingClientRect(),l_top=window.pageYOffset-document.documentElement.clientTop,l_left=window.pageXOffset-document.documentElement.clientLeft;let c={height:s.height||r.offsetHeight,width:s.width||r.offsetWidth,top:s.top+l_top,bottom:s.bottom+l_top,left:s.left+l_left,right:s.right+l_left};return n&&(c.height=Math.round(c.height),c.width=Math.round(c.width),c.top=Math.round(c.top),c.bottom=Math.round(c.bottom),c.left=Math.round(c.left),c.right=Math.round(c.right)),c}positionElements(r,n,s,l){const[c="top",g="center"]=s.split("-"),_=l?this.offset(r,!1):this.position(r,!1),w=this.getAllStyles(n),T=parseFloat(w.marginTop),S=parseFloat(w.marginBottom),A=parseFloat(w.marginLeft),x=parseFloat(w.marginRight);let V=0,z=0;switch(c){case"top":V=_.top-(n.offsetHeight+T+S);break;case"bottom":V=_.top+_.height;break;case"left":z=_.left-(n.offsetWidth+A+x);break;case"right":z=_.left+_.width}switch(g){case"top":V=_.top;break;case"bottom":V=_.top+_.height-n.offsetHeight;break;case"left":z=_.left;break;case"right":z=_.left+_.width-n.offsetWidth;break;case"center":"top"===c||"bottom"===c?z=_.left+_.width/2-n.offsetWidth/2:V=_.top+_.height/2-n.offsetHeight/2}n.style.transform=`translate(${Math.round(z)}px, ${Math.round(V)}px)`;const ue=n.getBoundingClientRect(),Ae=document.documentElement,Qe=window.innerHeight||Ae.clientHeight,Je=window.innerWidth||Ae.clientWidth;return ue.left>=0&&ue.top>=0&&ue.right<=Je&&ue.bottom<=Qe}},new Date(1882,10,12),new Date(2174,10,25);let TP=(()=>{class i{}return i.\u0275fac=function(n){return new(n||i)},i.\u0275mod=d.oAB({type:i}),i.\u0275inj=d.cJS({imports:[[kr,A2]]}),i})(),cx=(()=>{class i{}return i.\u0275fac=function(n){return new(n||i)},i.\u0275dir=d.lG2({type:i,selectors:[["",8,"navbar"]]}),i})(),AP=(()=>{class i{}return i.\u0275fac=function(n){return new(n||i)},i.\u0275mod=d.oAB({type:i}),i.\u0275inj=d.cJS({}),i})(),MP=(()=>{class i{constructor(n){this._ngbConfig=n,this.backdrop=!0,this.keyboard=!0}get animation(){return void 0===this._animation?this._ngbConfig.animation:this._animation}set animation(n){this._animation=n}}return i.\u0275fac=function(n){return new(n||i)(d.LFG(di))},i.\u0275prov=d.Yz7({factory:function(){return new i(d.LFG(di))},token:i,providedIn:"root"}),i})();class gm{constructor(r,n,s){this.nodes=r,this.viewRef=n,this.componentRef=s}}const NU=()=>{};let RP=(()=>{class i{constructor(n){this._document=n}compensate(){const n=this._getWidth();return this._isPresent(n)?this._adjustBody(n):NU}_adjustBody(n){const s=this._document.body,l=s.style.paddingRight,c=parseFloat(window.getComputedStyle(s)["padding-right"]);return s.style["padding-right"]=`${c+n}px`,()=>s.style["padding-right"]=l}_isPresent(n){const s=this._document.body.getBoundingClientRect();return window.innerWidth-(s.left+s.right)>=n-.1*n}_getWidth(){const n=this._document.createElement("div");n.className="modal-scrollbar-measure";const s=this._document.body;s.appendChild(n);const l=n.getBoundingClientRect().width-n.clientWidth;return s.removeChild(n),l}}return i.\u0275fac=function(n){return new(n||i)(d.LFG(re))},i.\u0275prov=d.Yz7({factory:function(){return new i(d.LFG(re))},token:i,providedIn:"root"}),i})(),SU=(()=>{class i{constructor(n,s){this._el=n,this._zone=s}ngOnInit(){this._zone.onStable.asObservable().pipe(Xr(1)).subscribe(()=>{zr(this._zone,this._el.nativeElement,(n,s)=>{s&&Ov(n),n.classList.add("show")},{animation:this.animation,runningTransition:"continue"})})}hide(){return zr(this._zone,this._el.nativeElement,({classList:n})=>n.remove("show"),{animation:this.animation,runningTransition:"stop"})}}return i.\u0275fac=function(n){return new(n||i)(d.Y36(d.SBq),d.Y36(d.R0b))},i.\u0275cmp=d.Xpm({type:i,selectors:[["ngb-modal-backdrop"]],hostAttrs:[2,"z-index","1050"],hostVars:6,hostBindings:function(n,s){2&n&&(d.Tol("modal-backdrop"+(s.backdropClass?" "+s.backdropClass:"")),d.ekj("show",!s.animation)("fade",s.animation))},inputs:{animation:"animation",backdropClass:"backdropClass"},decls:0,vars:0,template:function(n,s){},encapsulation:2}),i})();class xP{close(r){}dismiss(r){}}class AU{constructor(r,n,s,l){this._windowCmptRef=r,this._contentRef=n,this._backdropCmptRef=s,this._beforeDismiss=l,this._closed=new qt.xQ,this._dismissed=new qt.xQ,this._hidden=new qt.xQ,r.instance.dismissEvent.subscribe(c=>{this.dismiss(c)}),this.result=new Promise((c,g)=>{this._resolve=c,this._reject=g}),this.result.then(null,()=>{})}get componentInstance(){if(this._contentRef&&this._contentRef.componentRef)return this._contentRef.componentRef.instance}get closed(){return this._closed.asObservable().pipe(Tn(this._hidden))}get dismissed(){return this._dismissed.asObservable().pipe(Tn(this._hidden))}get hidden(){return this._hidden.asObservable()}get shown(){return this._windowCmptRef.instance.shown.asObservable()}close(r){this._windowCmptRef&&(this._closed.next(r),this._resolve(r),this._removeModalElements())}_dismiss(r){this._dismissed.next(r),this._reject(r),this._removeModalElements()}dismiss(r){if(this._windowCmptRef)if(this._beforeDismiss){const n=this._beforeDismiss();n&&n.then?n.then(s=>{!1!==s&&this._dismiss(r)},()=>{}):!1!==n&&this._dismiss(r)}else this._dismiss(r)}_removeModalElements(){const r=this._windowCmptRef.instance.hide(),n=this._backdropCmptRef?this._backdropCmptRef.instance.hide():(0,We.of)(void 0);r.subscribe(()=>{const{nativeElement:s}=this._windowCmptRef.location;s.parentNode.removeChild(s),this._windowCmptRef.destroy(),this._contentRef&&this._contentRef.viewRef&&this._contentRef.viewRef.destroy(),this._windowCmptRef=null,this._contentRef=null}),n.subscribe(()=>{if(this._backdropCmptRef){const{nativeElement:s}=this._backdropCmptRef.location;s.parentNode.removeChild(s),this._backdropCmptRef.destroy(),this._backdropCmptRef=null}}),td(r,n).subscribe(()=>{this._hidden.next(),this._hidden.complete()})}}var sC=(()=>(function(i){i[i.BACKDROP_CLICK=0]="BACKDROP_CLICK",i[i.ESC=1]="ESC"}(sC||(sC={})),sC))();let MU=(()=>{class i{constructor(n,s,l){this._document=n,this._elRef=s,this._zone=l,this._closed$=new qt.xQ,this._elWithFocus=null,this.backdrop=!0,this.keyboard=!0,this.dismissEvent=new d.vpe,this.shown=new qt.xQ,this.hidden=new qt.xQ}dismiss(n){this.dismissEvent.emit(n)}ngOnInit(){this._elWithFocus=this._document.activeElement,this._zone.onStable.asObservable().pipe(Xr(1)).subscribe(()=>{this._show()})}ngOnDestroy(){this._disableEventHandling()}hide(){const{nativeElement:n}=this._elRef,s={animation:this.animation,runningTransition:"stop"},g=td(zr(this._zone,n,()=>n.classList.remove("show"),s),zr(this._zone,this._dialogEl.nativeElement,()=>{},s));return g.subscribe(()=>{this.hidden.next(),this.hidden.complete()}),this._disableEventHandling(),this._restoreFocus(),g}_show(){const n={animation:this.animation,runningTransition:"continue"};td(zr(this._zone,this._elRef.nativeElement,(c,g)=>{g&&Ov(c),c.classList.add("show")},n),zr(this._zone,this._dialogEl.nativeElement,()=>{},n)).subscribe(()=>{this.shown.next(),this.shown.complete()}),this._enableEventHandling(),this._setFocus()}_enableEventHandling(){const{nativeElement:n}=this._elRef;this._zone.runOutsideAngular(()=>{Mr(n,"keydown").pipe(Tn(this._closed$),fn(l=>l.which===Pt.Escape)).subscribe(l=>{this.keyboard?requestAnimationFrame(()=>{l.defaultPrevented||this._zone.run(()=>this.dismiss(sC.ESC))}):"static"===this.backdrop&&this._bumpBackdrop()});let s=!1;Mr(this._dialogEl.nativeElement,"mousedown").pipe(Tn(this._closed$),(0,Yn.b)(()=>s=!1),zn(()=>Mr(n,"mouseup").pipe(Tn(this._closed$),Xr(1))),fn(({target:l})=>n===l)).subscribe(()=>{s=!0}),Mr(n,"click").pipe(Tn(this._closed$)).subscribe(({target:l})=>{n===l&&("static"===this.backdrop?this._bumpBackdrop():!0===this.backdrop&&!s&&this._zone.run(()=>this.dismiss(sC.BACKDROP_CLICK))),s=!1})})}_disableEventHandling(){this._closed$.next()}_setFocus(){const{nativeElement:n}=this._elRef;if(!n.contains(document.activeElement)){const s=n.querySelector("[ngbAutofocus]"),l=mP(n)[0];(s||l||n).focus()}}_restoreFocus(){const n=this._document.body,s=this._elWithFocus;let l;l=s&&s.focus&&n.contains(s)?s:n,this._zone.runOutsideAngular(()=>{setTimeout(()=>l.focus()),this._elWithFocus=null})}_bumpBackdrop(){"static"===this.backdrop&&zr(this._zone,this._elRef.nativeElement,({classList:n})=>(n.add("modal-static"),()=>n.remove("modal-static")),{animation:this.animation,runningTransition:"continue"})}}return i.\u0275fac=function(n){return new(n||i)(d.Y36(re),d.Y36(d.SBq),d.Y36(d.R0b))},i.\u0275cmp=d.Xpm({type:i,selectors:[["ngb-modal-window"]],viewQuery:function(n,s){if(1&n&&d.Gf(_V,7),2&n){let l;d.iGM(l=d.CRH())&&(s._dialogEl=l.first)}},hostAttrs:["role","dialog","tabindex","-1"],hostVars:7,hostBindings:function(n,s){2&n&&(d.uIk("aria-modal",!0)("aria-labelledby",s.ariaLabelledBy)("aria-describedby",s.ariaDescribedBy),d.Tol("modal d-block"+(s.windowClass?" "+s.windowClass:"")),d.ekj("fade",s.animation))},inputs:{backdrop:"backdrop",keyboard:"keyboard",animation:"animation",ariaLabelledBy:"ariaLabelledBy",ariaDescribedBy:"ariaDescribedBy",centered:"centered",scrollable:"scrollable",size:"size",windowClass:"windowClass",modalDialogClass:"modalDialogClass"},outputs:{dismissEvent:"dismiss"},ngContentSelectors:xv,decls:4,vars:2,consts:[["role","document"],["dialog",""],[1,"modal-content"]],template:function(n,s){1&n&&(d.F$t(),d.TgZ(0,"div",0,1),d.TgZ(2,"div",2),d.Hsn(3),d.qZA(),d.qZA()),2&n&&d.Tol("modal-dialog"+(s.size?" modal-"+s.size:"")+(s.centered?" modal-dialog-centered":"")+(s.scrollable?" modal-dialog-scrollable":"")+(s.modalDialogClass?" "+s.modalDialogClass:""))},styles:["ngb-modal-window .component-host-scrollable{display:flex;flex-direction:column;overflow:hidden}"],encapsulation:2}),i})(),kP=(()=>{class i{constructor(n,s,l,c,g,_){this._applicationRef=n,this._injector=s,this._document=l,this._scrollBar=c,this._rendererFactory=g,this._ngZone=_,this._activeWindowCmptHasChanged=new qt.xQ,this._ariaHiddenValues=new Map,this._backdropAttributes=["animation","backdropClass"],this._modalRefs=[],this._windowAttributes=["animation","ariaLabelledBy","ariaDescribedBy","backdrop","centered","keyboard","scrollable","size","windowClass","modalDialogClass"],this._windowCmpts=[],this._activeInstances=new d.vpe,this._activeWindowCmptHasChanged.subscribe(()=>{if(this._windowCmpts.length){const w=this._windowCmpts[this._windowCmpts.length-1];((i,r,n,s=!1)=>{i.runOutsideAngular(()=>{const l=Mr(r,"focusin").pipe(Tn(n),(0,Xe.U)(c=>c.target));Mr(r,"keydown").pipe(Tn(n),fn(c=>c.which===Pt.Tab),_v(l)).subscribe(([c,g])=>{const[_,w]=mP(r);(g===_||g===r)&&c.shiftKey&&(w.focus(),c.preventDefault()),g===w&&!c.shiftKey&&(_.focus(),c.preventDefault())}),s&&Mr(r,"click").pipe(Tn(n),_v(l),(0,Xe.U)(c=>c[1])).subscribe(c=>c.focus())})})(this._ngZone,w.location.nativeElement,this._activeWindowCmptHasChanged),this._revertAriaHidden(),this._setAriaHidden(w.location.nativeElement)}})}open(n,s,l,c){const g=c.container instanceof HTMLElement?c.container:mf(c.container)?this._document.querySelector(c.container):this._document.body,_=this._rendererFactory.createRenderer(null,null),w=this._scrollBar.compensate(),T=()=>{this._modalRefs.length||(_.removeClass(this._document.body,"modal-open"),this._revertAriaHidden())};if(!g)throw new Error(`The specified modal container "${c.container||"body"}" was not found in the DOM.`);const S=new xP,A=this._getContentRef(n,c.injector||s,l,S,c);let x=!1!==c.backdrop?this._attachBackdrop(n,g):void 0,V=this._attachWindowComponent(n,g,A),z=new AU(V,A,x,c.beforeDismiss);return this._registerModalRef(z),this._registerWindowCmpt(V),z.result.then(w,w),z.result.then(T,T),S.close=ue=>{z.close(ue)},S.dismiss=ue=>{z.dismiss(ue)},this._applyWindowOptions(V.instance,c),1===this._modalRefs.length&&_.addClass(this._document.body,"modal-open"),x&&x.instance&&(this._applyBackdropOptions(x.instance,c),x.changeDetectorRef.detectChanges()),V.changeDetectorRef.detectChanges(),z}get activeInstances(){return this._activeInstances}dismissAll(n){this._modalRefs.forEach(s=>s.dismiss(n))}hasOpenModals(){return this._modalRefs.length>0}_attachBackdrop(n,s){let c=n.resolveComponentFactory(SU).create(this._injector);return this._applicationRef.attachView(c.hostView),s.appendChild(c.location.nativeElement),c}_attachWindowComponent(n,s,l){let g=n.resolveComponentFactory(MU).create(this._injector,l.nodes);return this._applicationRef.attachView(g.hostView),s.appendChild(g.location.nativeElement),g}_applyWindowOptions(n,s){this._windowAttributes.forEach(l=>{mf(s[l])&&(n[l]=s[l])})}_applyBackdropOptions(n,s){this._backdropAttributes.forEach(l=>{mf(s[l])&&(n[l]=s[l])})}_getContentRef(n,s,l,c,g){return l?l instanceof d.Rgc?this._createFromTemplateRef(l,c):function(i){return"string"==typeof i}(l)?this._createFromString(l):this._createFromComponent(n,s,l,c,g):new gm([])}_createFromTemplateRef(n,s){const c=n.createEmbeddedView({$implicit:s,close(g){s.close(g)},dismiss(g){s.dismiss(g)}});return this._applicationRef.attachView(c),new gm([c.rootNodes],c)}_createFromString(n){const s=this._document.createTextNode(`${n}`);return new gm([[s]])}_createFromComponent(n,s,l,c,g){const _=n.resolveComponentFactory(l),w=d.zs3.create({providers:[{provide:xP,useValue:c}],parent:s}),T=_.create(w),S=T.location.nativeElement;return g.scrollable&&S.classList.add("component-host-scrollable"),this._applicationRef.attachView(T.hostView),new gm([[S]],T.hostView,T)}_setAriaHidden(n){const s=n.parentElement;s&&n!==this._document.body&&(Array.from(s.children).forEach(l=>{l!==n&&"SCRIPT"!==l.nodeName&&(this._ariaHiddenValues.set(l,l.getAttribute("aria-hidden")),l.setAttribute("aria-hidden","true"))}),this._setAriaHidden(s))}_revertAriaHidden(){this._ariaHiddenValues.forEach((n,s)=>{n?s.setAttribute("aria-hidden",n):s.removeAttribute("aria-hidden")}),this._ariaHiddenValues.clear()}_registerModalRef(n){const s=()=>{const l=this._modalRefs.indexOf(n);l>-1&&(this._modalRefs.splice(l,1),this._activeInstances.emit(this._modalRefs))};this._modalRefs.push(n),this._activeInstances.emit(this._modalRefs),n.result.then(s,s)}_registerWindowCmpt(n){this._windowCmpts.push(n),this._activeWindowCmptHasChanged.next(),n.onDestroy(()=>{const s=this._windowCmpts.indexOf(n);s>-1&&(this._windowCmpts.splice(s,1),this._activeWindowCmptHasChanged.next())})}}return i.\u0275fac=function(n){return new(n||i)(d.LFG(d.z2F),d.LFG(d.zs3),d.LFG(re),d.LFG(RP),d.LFG(d.FYo),d.LFG(d.R0b))},i.\u0275prov=d.Yz7({factory:function(){return new i(d.LFG(d.z2F),d.LFG(d.gxx),d.LFG(re),d.LFG(RP),d.LFG(d.FYo),d.LFG(d.R0b))},token:i,providedIn:"root"}),i})(),RU=(()=>{class i{constructor(n,s,l,c){this._moduleCFR=n,this._injector=s,this._modalStack=l,this._config=c}open(n,s={}){const l=Object.assign(Object.assign(Object.assign({},this._config),{animation:this._config.animation}),s);return this._modalStack.open(this._moduleCFR,this._injector,n,l)}get activeInstances(){return this._modalStack.activeInstances}dismissAll(n){this._modalStack.dismissAll(n)}hasOpenModals(){return this._modalStack.hasOpenModals()}}return i.\u0275fac=function(n){return new(n||i)(d.LFG(d._Vd),d.LFG(d.zs3),d.LFG(kP),d.LFG(MP))},i.\u0275prov=d.Yz7({factory:function(){return new i(d.LFG(d._Vd),d.LFG(d.gxx),d.LFG(kP),d.LFG(MP))},token:i,providedIn:"root"}),i})(),OP=(()=>{class i{}return i.\u0275fac=function(n){return new(n||i)},i.\u0275mod=d.oAB({type:i}),i.\u0275inj=d.cJS({providers:[RU]}),i})(),VP=(()=>{class i{}return i.\u0275fac=function(n){return new(n||i)},i.\u0275mod=d.oAB({type:i}),i.\u0275inj=d.cJS({imports:[[kr]]}),i})(),qP=(()=>{class i{}return i.\u0275fac=function(n){return new(n||i)},i.\u0275mod=d.oAB({type:i}),i.\u0275inj=d.cJS({imports:[[kr]]}),i})(),ZP=(()=>{class i{}return i.\u0275fac=function(n){return new(n||i)},i.\u0275mod=d.oAB({type:i}),i.\u0275inj=d.cJS({imports:[[kr]]}),i})(),KP=(()=>{class i{}return i.\u0275fac=function(n){return new(n||i)},i.\u0275mod=d.oAB({type:i}),i.\u0275inj=d.cJS({imports:[[kr]]}),i})(),QP=(()=>{class i{}return i.\u0275fac=function(n){return new(n||i)},i.\u0275mod=d.oAB({type:i}),i.\u0275inj=d.cJS({imports:[[kr]]}),i})(),tF=(()=>{class i{}return i.\u0275fac=function(n){return new(n||i)},i.\u0275mod=d.oAB({type:i}),i.\u0275inj=d.cJS({imports:[[kr]]}),i})(),nF=(()=>{class i{}return i.\u0275fac=function(n){return new(n||i)},i.\u0275mod=d.oAB({type:i}),i.\u0275inj=d.cJS({imports:[[kr]]}),i})(),rF=(()=>{class i{}return i.\u0275fac=function(n){return new(n||i)},i.\u0275mod=d.oAB({type:i}),i.\u0275inj=d.cJS({}),i})();new d.OlP("live announcer delay",{providedIn:"root",factory:function(){return 100}});let oF=(()=>{class i{}return i.\u0275fac=function(n){return new(n||i)},i.\u0275mod=d.oAB({type:i}),i.\u0275inj=d.cJS({imports:[[kr]]}),i})();const p3=[rP,iP,oP,uP,cP,TP,AP,OP,VP,qP,ZP,KP,QP,tF,nF,rF,oF];let g3=(()=>{class i{}return i.\u0275fac=function(n){return new(n||i)},i.\u0275mod=d.oAB({type:i}),i.\u0275inj=d.cJS({imports:[p3,rP,iP,oP,uP,cP,TP,AP,OP,VP,qP,ZP,KP,QP,tF,nF,rF,oF]}),i})();function m3(i,r){if(1&i&&(d.ynx(0),d.TgZ(1,"div",2),d.TgZ(2,"div",3),d.TgZ(3,"a",4),d._UZ(4,"img",5),d.TgZ(5,"div",6),d.TgZ(6,"div",7),d._uU(7),d.qZA(),d.qZA(),d.qZA(),d.TgZ(8,"div",8),d.TgZ(9,"h5",9),d._uU(10),d.qZA(),d.TgZ(11,"p",10),d._uU(12),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.BQk()),2&i){const n=r.$implicit;d.xp6(4),d.s9C("src",n.image,d.LSH),d.xp6(3),d.hij("",n.title,": Click to Download"),d.xp6(3),d.Oqu(n.title),d.xp6(2),d.Oqu(n.description)}}let _3=(()=>{class i{constructor(n,s){this.share=n,this.firestore=s}ngOnInit(){this.firestore.collection("Movies").valueChanges().subscribe(n=>{for(;this.share.mList.length;)this.share.mList.pop();for(let s=0;s<n.length;s++)this.print(n[s])})}print(n){let s=n.title,l=n.image,c=n.description;console.log("Display",s,l,c),this.share.setList(s,l,c)}}return i.\u0275fac=function(n){return new(n||i)(d.Y36(mR),d.Y36(k1))},i.\u0275cmp=d.Xpm({type:i,selectors:[["app-display"]],decls:2,vars:1,consts:[[1,"container"],[4,"ngFor","ngForOf"],[1,"row"],[1,"card",2,"width","100%"],["href","https://www.geeksforgeeks.org/html-tutorials/","target","_blank"],["alt","...",1,"card-img-top",3,"src"],[1,"overlay"],[1,"text"],[1,"card-body"],[1,"card-title"],[1,"card-text"]],template:function(n,s){1&n&&(d.TgZ(0,"div",0),d.YNc(1,m3,13,4,"ng-container",1),d.qZA()),2&n&&(d.xp6(1),d.Q6J("ngForOf",s.share.mList))},directives:[wt],styles:[".container[_ngcontent-%COMP%]{width:75%;margin:auto;display:flex;flex-direction:row;flex-wrap:wrap}.altCon[_ngcontent-%COMP%]{width:75%}.row[_ngcontent-%COMP%]{flex:20%;padding:20px;max-width:225px}.card[_ngcontent-%COMP%]:hover{background-color:#00000080;color:#fff8dc;opacity:.9}a[_ngcontent-%COMP%]{text-decoration:none}.overlay[_ngcontent-%COMP%]{position:absolute;top:0;bottom:0;left:0;right:0;height:100%;width:100%;opacity:0;transition:.8s ease;background-color:#000c}.card[_ngcontent-%COMP%]:hover   .overlay[_ngcontent-%COMP%]{opacity:1}.text[_ngcontent-%COMP%]{color:#fff;font-size:20px;position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);text-align:center}"]}),i.\u0275prov=d.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function y3(i,r){if(1&i){const n=d.EpF();d.TgZ(0,"li"),d.TgZ(1,"button",17,18),d.NdJ("click",function(){d.CHM(n);const l=d.MAs(2);return d.oxw(2),d.MAs(21).value=l.value}),d._uU(3),d.qZA(),d.qZA()}if(2&i){const n=r.$implicit;d.xp6(1),d.s9C("value",n),d.xp6(2),d.hij("",n," ")}}function v3(i,r){if(1&i&&(d.TgZ(0,"div",15),d.TgZ(1,"ul"),d.YNc(2,y3,4,2,"li",16),d.qZA(),d.qZA()),2&i){const n=d.oxw();d.xp6(2),d.Q6J("ngForOf",n.api.moviesTitle)}}const b3=function(i,r){return{hide:i,show:r}};let w3=(()=>{class i{constructor(n,s){this.api=n,this.share=s,this.state=!0,this.toggle=1,this.moviesTitle=[]}ngOnInit(){}toggleSidebar(){0==this.toggle?(this.state=!0,this.toggle=1):1==this.toggle&&(this.state=!1,this.toggle=0)}}return i.\u0275fac=function(n){return new(n||i)(d.Y36(DO),d.Y36(mR))},i.\u0275cmp=d.Xpm({type:i,selectors:[["app-titlebar"]],decls:28,vars:5,consts:[[1,"navbar","navbar-dark","bg-dark"],[1,"btn","btn-primary",3,"click"],[1,"sidebar",3,"ngClass"],["id","heading"],["for","exampleInputtype"],[1,"form-check"],["type","radio","name","exampleRadios","id","exampleRadios1","value","option1","checked","",1,"form-check-input"],["for","exampleRadios1",1,"form-check-label"],["type","radio","name","exampleRadios","id","exampleRadios2","value","option2",1,"form-check-input"],["for","exampleRadios2",1,"form-check-label"],[1,"form-group"],["list","movieList","type","text","id","inputName","aria-describedby","emailHelp","placeholder","Enter Movie/Series name",1,"form-control"],["name",""],["type","button",1,"btn","btn-primary","mb-2",3,"click"],[3,"ngIf"],[1,"result"],[4,"ngFor","ngForOf"],["id","selection",3,"value","click"],["list",""]],template:function(n,s){if(1&n){const l=d.EpF();d.TgZ(0,"nav",0),d.TgZ(1,"h1"),d._uU(2,"BingeSuggestions!"),d.qZA(),d.TgZ(3,"button",1),d.NdJ("click",function(){return s.toggleSidebar()}),d._uU(4,"Click me!"),d.qZA(),d.qZA(),d.TgZ(5,"div",2),d.TgZ(6,"div",3),d._uU(7," Add new Series/Movie!"),d.qZA(),d.TgZ(8,"form"),d.TgZ(9,"label",4),d._uU(10,"Select Type"),d.qZA(),d.TgZ(11,"div",5),d._UZ(12,"input",6),d.TgZ(13,"label",7),d._uU(14," Movie "),d.qZA(),d.qZA(),d.TgZ(15,"div",5),d._UZ(16,"input",8),d.TgZ(17,"label",9),d._uU(18," Series "),d.qZA(),d.qZA(),d.TgZ(19,"div",10),d._UZ(20,"input",11,12),d.qZA(),d.TgZ(22,"button",13),d.NdJ("click",function(){d.CHM(l);const g=d.MAs(21);return s.api.getList(g.value)}),d._uU(23,"Search"),d.qZA(),d.TgZ(24,"button",13),d.NdJ("click",function(){d.CHM(l);const g=d.MAs(21);return s.api.addDocument(g.value)}),d._uU(25,"Add!"),d.qZA(),d.qZA(),d.YNc(26,v3,3,1,"ng-template",14),d.qZA(),d._UZ(27,"app-display")}2&n&&(d.xp6(5),d.Q6J("ngClass",d.WLB(2,b3,1==s.state,0==s.state)),d.xp6(21),d.Q6J("ngIf",s.api.isSet))},directives:[cx,cl,tr,_3,wt],styles:[".sidebar[_ngcontent-%COMP%]{width:0;height:100%;background-color:#00000080;margin-right:0;float:right;display:block;transition:width 1s;text-align:center}.hide[_ngcontent-%COMP%]{width:0}.show[_ngcontent-%COMP%]{width:25%}form[_ngcontent-%COMP%]{margin-left:20%;margin-right:20%}#heading[_ngcontent-%COMP%]{font-size:large;background-color:#ffebcd;margin:20px 10%;border-radius:5px}ul[_ngcontent-%COMP%]{list-style-type:none;margin:0;padding:0}.result[_ngcontent-%COMP%]{border:2mm solid rgba(25,25,26,.6);margin:20px;padding:10px}#selection[_ngcontent-%COMP%]{background-color:#0000004d;border-radius:10px}"]}),i})(),C3=(()=>{class i{constructor(){this.title="BingeSuggestionsApp"}}return i.\u0275fac=function(n){return new(n||i)},i.\u0275cmp=d.Xpm({type:i,selectors:[["app-root"]],decls:1,vars:0,template:function(n,s){1&n&&d._UZ(0,"app-titlebar")},directives:[w3],styles:[""]}),i})();class D3{constructor(r){this.predicate=r}call(r,n){return n.subscribe(new I3(r,this.predicate))}}class I3 extends Cr.L{constructor(r,n){super(r),this.predicate=n,this.skipping=!0,this.index=0}_next(r){const n=this.destination;this.skipping&&this.tryCallPredicate(r),this.skipping||n.next(r)}tryCallPredicate(r){try{const n=this.predicate(r,this.index++);this.skipping=Boolean(n)}catch(n){this.destination.error(n)}}}let gx="";function aF(i){gx=i}class S3{constructor(r){this.domStorage_=r,this.prefix_="firebase:"}set(r,n){null==n?this.domStorage_.removeItem(this.prefixedName_(r)):this.domStorage_.setItem(this.prefixedName_(r),(0,F.Pz)(n))}get(r){const n=this.domStorage_.getItem(this.prefixedName_(r));return null==n?null:(0,F.cI)(n)}remove(r){this.domStorage_.removeItem(this.prefixedName_(r))}prefixedName_(r){return this.prefix_+r}toString(){return this.domStorage_.toString()}}class A3{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(r,n){null==n?delete this.cache_[r]:this.cache_[r]=n}get(r){return(0,F.r3)(this.cache_,r)?this.cache_[r]:null}remove(r){delete this.cache_[r]}}const lF=function(i){try{if("undefined"!=typeof window&&void 0!==window[i]){const r=window[i];return r.setItem("firebase:sentinel","cache"),r.removeItem("firebase:sentinel"),new S3(r)}}catch(r){}return new A3},mm=lF("localStorage"),mx=lF("sessionStorage"),Vv=new ka.Yd("@firebase/database"),uF=function(){let i=1;return function(){return i++}}(),cF=function(i){const r=(0,F.dS)(i),n=new F.gQ;n.update(r);const s=n.digest();return F.US.encodeByteArray(s)},oC=function(...i){let r="";for(let n=0;n<i.length;n++){const s=i[n];Array.isArray(s)||s&&"object"==typeof s&&"number"==typeof s.length?r+=oC.apply(null,s):r+="object"==typeof s?(0,F.Pz)(s):s,r+=" "}return r};let _m=null,dF=!0;const hF=function(i,r){(0,F.hu)(!r||!0===i||!1===i,"Can't turn on custom loggers persistently."),!0===i?(Vv.logLevel=ka.in.VERBOSE,_m=Vv.log.bind(Vv),r&&mx.set("logging_enabled",!0)):"function"==typeof i?_m=i:(_m=null,mx.remove("logging_enabled"))},hi=function(...i){if(!0===dF&&(dF=!1,null===_m&&!0===mx.get("logging_enabled")&&hF(!0)),_m){const r=oC.apply(null,i);_m(r)}},aC=function(i){return function(...r){hi(i,...r)}},_x=function(...i){const r="FIREBASE INTERNAL ERROR: "+oC(...i);Vv.error(r)},vu=function(...i){const r=`FIREBASE FATAL ERROR: ${oC(...i)}`;throw Vv.error(r),new Error(r)},ws=function(...i){const r="FIREBASE WARNING: "+oC(...i);Vv.warn(r)},kN=function(i){return"number"==typeof i&&(i!=i||i===Number.POSITIVE_INFINITY||i===Number.NEGATIVE_INFINITY)},dd="[MIN_NAME]",bu="[MAX_NAME]",ym=function(i,r){if(i===r)return 0;if(i===dd||r===bu)return-1;if(r===dd||i===bu)return 1;{const n=ON(i),s=ON(r);return null!==n?null!==s?n-s==0?i.length-r.length:n-s:-1:null!==s?1:i<r?-1:1}},x3=function(i,r){return i===r?0:i<r?-1:1},lC=function(i,r){if(r&&i in r)return r[i];throw new Error("Missing required key ("+i+") in object: "+(0,F.Pz)(r))},yx=function(i){if("object"!=typeof i||null===i)return(0,F.Pz)(i);const r=[];for(const s in i)r.push(s);r.sort();let n="{";for(let s=0;s<r.length;s++)0!==s&&(n+=","),n+=(0,F.Pz)(r[s]),n+=":",n+=yx(i[r[s]]);return n+="}",n},fF=function(i,r){const n=i.length;if(n<=r)return[i];const s=[];for(let l=0;l<n;l+=r)s.push(i.substring(l,l+r>n?n:l+r));return s};function fi(i,r){for(const n in i)i.hasOwnProperty(n)&&r(n,i[n])}const pF=function(i){(0,F.hu)(!kN(i),"Invalid JSON number");const s=1023;let l,c,g,_,w;0===i?(c=0,g=0,l=1/i==-1/0?1:0):(l=i<0,(i=Math.abs(i))>=Math.pow(2,1-s)?(_=Math.min(Math.floor(Math.log(i)/Math.LN2),s),c=_+s,g=Math.round(i*Math.pow(2,52-_)-Math.pow(2,52))):(c=0,g=Math.round(i/Math.pow(2,-1074))));const T=[];for(w=52;w;w-=1)T.push(g%2?1:0),g=Math.floor(g/2);for(w=11;w;w-=1)T.push(c%2?1:0),c=Math.floor(c/2);T.push(l?1:0),T.reverse();const S=T.join("");let A="";for(w=0;w<64;w+=8){let x=parseInt(S.substr(w,8),2).toString(16);1===x.length&&(x="0"+x),A+=x}return A.toLowerCase()},F3=new RegExp("^-?(0*)\\d{1,10}$"),gF=-2147483648,vx=2147483647,ON=function(i){if(F3.test(i)){const r=Number(i);if(r>=gF&&r<=vx)return r}return null},Bv=function(i){try{i()}catch(r){setTimeout(()=>{throw ws("Exception was thrown by user callback.",r.stack||""),r},Math.floor(0))}},uC=function(i,r){const n=setTimeout(i,r);return"object"==typeof n&&n.unref&&n.unref(),n};class V3{constructor(r,n){this.appName_=r,this.appCheckProvider=n,this.appCheck=null==n?void 0:n.getImmediate({optional:!0}),this.appCheck||null==n||n.get().then(s=>this.appCheck=s)}getToken(r){return this.appCheck?this.appCheck.getToken(r):new Promise((n,s)=>{setTimeout(()=>{this.appCheck?this.getToken(r).then(n,s):n(null)},0)})}addTokenChangeListener(r){var n;null===(n=this.appCheckProvider)||void 0===n||n.get().then(s=>s.addTokenListener(r))}notifyForInvalidToken(){ws(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class B3{constructor(r,n,s){this.appName_=r,this.firebaseOptions_=n,this.authProvider_=s,this.auth_=null,this.auth_=s.getImmediate({optional:!0}),this.auth_||s.onInit(l=>this.auth_=l)}getToken(r){return this.auth_?this.auth_.getToken(r).catch(n=>n&&"auth/token-not-initialized"===n.code?(hi("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,s)=>{setTimeout(()=>{this.auth_?this.getToken(r).then(n,s):n(null)},0)})}addTokenChangeListener(r){this.auth_?this.auth_.addAuthTokenListener(r):this.authProvider_.get().then(n=>n.addAuthTokenListener(r))}removeTokenChangeListener(r){this.authProvider_.get().then(n=>n.removeAuthTokenListener(r))}notifyForInvalidToken(){let r='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';r+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',ws(r)}}let cC=(()=>{class i{constructor(n){this.accessToken=n}getToken(n){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(n){n(this.accessToken)}removeTokenChangeListener(n){}notifyForInvalidToken(){}}return i.OWNER="owner",i})();const bF=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,CF="websocket",EF="long_polling";class wx{constructor(r,n,s,l,c=!1,g="",_=!1){this.secure=n,this.namespace=s,this.webSocketOnly=l,this.nodeAdmin=c,this.persistenceKey=g,this.includeNamespaceInQueryParams=_,this._host=r.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=mm.get("host:"+r)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(r){r!==this.internalHost&&(this.internalHost=r,this.isCacheableHost()&&mm.set("host:"+this._host,this.internalHost))}toString(){let r=this.toURLString();return this.persistenceKey&&(r+="<"+this.persistenceKey+">"),r}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function DF(i,r,n){let s;if((0,F.hu)("string"==typeof r,"typeof type must == string"),(0,F.hu)("object"==typeof n,"typeof params must == object"),r===CF)s=(i.secure?"wss://":"ws://")+i.internalHost+"/.ws?";else{if(r!==EF)throw new Error("Unknown connection type: "+r);s=(i.secure?"https://":"http://")+i.internalHost+"/.lp?"}(function(i){return i.host!==i.internalHost||i.isCustomHost()||i.includeNamespaceInQueryParams})(i)&&(n.ns=i.namespace);const l=[];return fi(n,(c,g)=>{l.push(c+"="+g)}),s+l.join("&")}class j3{constructor(){this.counters_={}}incrementCounter(r,n=1){(0,F.r3)(this.counters_,r)||(this.counters_[r]=0),this.counters_[r]+=n}get(){return(0,F.p$)(this.counters_)}}const Cx={},Ex={};function Dx(i){const r=i.toString();return Cx[r]||(Cx[r]=new j3),Cx[r]}class G3{constructor(r){this.onMessage_=r,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(r,n){this.closeAfterResponse=r,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(r,n){for(this.pendingResponses[r]=n;this.pendingResponses[this.currentResponseNum];){const s=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let l=0;l<s.length;++l)s[l]&&Bv(()=>{this.onMessage_(s[l])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class Uv{constructor(r,n,s,l,c,g,_){this.connId=r,this.repoInfo=n,this.applicationId=s,this.appCheckToken=l,this.authToken=c,this.transportSessionId=g,this.lastSessionId=_,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=aC(r),this.stats_=Dx(n),this.urlFn=w=>(this.appCheckToken&&(w.ac=this.appCheckToken),DF(n,EF,w))}open(r,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new G3(r),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(i){if((0,F.Yr)()||"complete"===document.readyState)i();else{let r=!1;const n=function(){document.body?r||(r=!0,i()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&n()}),window.attachEvent("onload",n))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Ix((...c)=>{const[g,_,w,T,S]=c;if(this.incrementIncomingBytes_(c),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===g)this.id=_,this.password=w;else{if("close"!==g)throw new Error("Unrecognized command received: "+g);_?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(_,()=>{this.onClosed_()})):this.onClosed_()}},(...c)=>{const[g,_]=c;this.incrementIncomingBytes_(c),this.myPacketOrderer.handleResponse(g,_)},()=>{this.onClosed_()},this.urlFn);const s={start:"t"};s.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(s.cb=this.scriptTagHolder.uniqueCallbackIdentifier),s.v="5",this.transportSessionId&&(s.s=this.transportSessionId),this.lastSessionId&&(s.ls=this.lastSessionId),this.applicationId&&(s.p=this.applicationId),this.appCheckToken&&(s.ac=this.appCheckToken),"undefined"!=typeof location&&location.hostname&&bF.test(location.hostname)&&(s.r="f");const l=this.urlFn(s);this.log_("Connecting via long-poll to "+l),this.scriptTagHolder.addTag(l,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Uv.forceAllow_=!0}static forceDisallow(){Uv.forceDisallow_=!0}static isAvailable(){return!((0,F.Yr)()||!Uv.forceAllow_&&(Uv.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(r){const n=(0,F.Pz)(r);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const s=(0,F.h$)(n),l=fF(s,1840);for(let c=0;c<l.length;c++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,l.length,l[c]),this.curSegmentNum++}addDisconnectPingFrame(r,n){if((0,F.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const s={dframe:"t"};s.id=r,s.pw=n,this.myDisconnFrame.src=this.urlFn(s),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(r){const n=(0,F.Pz)(r).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class Ix{constructor(r,n,s,l){if(this.onDisconnect=s,this.urlFn=l,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,F.Yr)())this.commandCB=r,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=uF(),window["pLPCommand"+this.uniqueCallbackIdentifier]=r,window["pRTLPCB"+this.uniqueCallbackIdentifier]=n,this.myIFrame=Ix.createIFrame_();let c="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)&&(c='<script>document.domain="'+document.domain+'";<\/script>');const g="<html><body>"+c+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(g),this.myIFrame.doc.close()}catch(_){hi("frame writing exception"),_.stack&&hi(_.stack),hi(_)}}}static createIFrame_(){const r=document.createElement("iframe");if(r.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(r);try{r.contentWindow.document||hi("No IE domain setting required")}catch(n){const s=document.domain;r.src="javascript:void((function(){document.open();document.domain='"+s+"';document.close();})())"}return r.contentDocument?r.doc=r.contentDocument:r.contentWindow?r.doc=r.contentWindow.document:r.document&&(r.doc=r.document),r}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const r=this.onDisconnect;r&&(this.onDisconnect=null,r())}startLongPoll(r,n){for(this.myID=r,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const r={};r.id=this.myID,r.pw=this.myPW,r.ser=this.currentSerial;let n=this.urlFn(r),s="",l=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+s.length<=1870;){const g=this.pendingSegs.shift();s=s+"&seg"+l+"="+g.seg+"&ts"+l+"="+g.ts+"&d"+l+"="+g.d,l++}return n+=s,this.addLongPollTag_(n,this.currentSerial),!0}return!1}enqueueSegment(r,n,s){this.pendingSegs.push({seg:r,ts:n,d:s}),this.alive&&this.newRequest_()}addLongPollTag_(r,n){this.outstandingRequests.add(n);const s=()=>{this.outstandingRequests.delete(n),this.newRequest_()},l=setTimeout(s,Math.floor(25e3));this.addTag(r,()=>{clearTimeout(l),s()})}addTag(r,n){(0,F.Yr)()?this.doNodeLongPoll(r,n):setTimeout(()=>{try{if(!this.sendNewPolls)return;const s=this.myIFrame.doc.createElement("script");s.type="text/javascript",s.async=!0,s.src=r,s.onload=s.onreadystatechange=function(){const l=s.readyState;(!l||"loaded"===l||"complete"===l)&&(s.onload=s.onreadystatechange=null,s.parentNode&&s.parentNode.removeChild(s),n())},s.onerror=()=>{hi("Long-poll script failed to load: "+r),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(s)}catch(s){}},Math.floor(1))}}let dC=null;"undefined"!=typeof MozWebSocket?dC=MozWebSocket:"undefined"!=typeof WebSocket&&(dC=WebSocket);let hC=(()=>{class i{constructor(n,s,l,c,g,_,w){this.connId=n,this.applicationId=l,this.appCheckToken=c,this.authToken=g,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=aC(this.connId),this.stats_=Dx(s),this.connURL=i.connectionURL_(s,_,w,c),this.nodeAdmin=s.nodeAdmin}static connectionURL_(n,s,l,c){const g={v:"5"};return!(0,F.Yr)()&&"undefined"!=typeof location&&location.hostname&&bF.test(location.hostname)&&(g.r="f"),s&&(g.s=s),l&&(g.ls=l),c&&(g.ac=c),DF(n,CF,g)}open(n,s){this.onDisconnect=s,this.onMessage=n,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,mm.set("previous_websocket_failure",!0);try{if((0,F.Yr)()){const c={headers:{"User-Agent":`Firebase/5/${gx}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}};this.authToken&&(c.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(c.headers["X-Firebase-AppCheck"]=this.appCheckToken);const g=process.env,_=0===this.connURL.indexOf("wss://")?g.HTTPS_PROXY||g.https_proxy:g.HTTP_PROXY||g.http_proxy;_&&(c.proxy={origin:_}),this.mySock=new dC(this.connURL,[],c)}else this.mySock=new dC(this.connURL,[],{headers:{"X-Firebase-GMPID":this.applicationId||"","X-Firebase-AppCheck":this.appCheckToken||""}})}catch(l){this.log_("Error instantiating WebSocket.");const c=l.message||l.data;return c&&this.log_(c),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=l=>{this.handleIncomingFrame(l)},this.mySock.onerror=l=>{this.log_("WebSocket error.  Closing connection.");const c=l.message||l.data;c&&this.log_(c),this.onClosed_()}}start(){}static forceDisallow(){i.forceDisallow_=!0}static isAvailable(){let n=!1;if("undefined"!=typeof navigator&&navigator.userAgent){const l=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);l&&l.length>1&&parseFloat(l[1])<4.4&&(n=!0)}return!n&&null!==dC&&!i.forceDisallow_}static previouslyFailed(){return mm.isInMemoryStorage||!0===mm.get("previous_websocket_failure")}markConnectionHealthy(){mm.remove("previous_websocket_failure")}appendFrame_(n){if(this.frames.push(n),this.frames.length===this.totalFrames){const s=this.frames.join("");this.frames=null;const l=(0,F.cI)(s);this.onMessage(l)}}handleNewFrameCount_(n){this.totalFrames=n,this.frames=[]}extractFrameCount_(n){if((0,F.hu)(null===this.frames,"We already have a frame buffer"),n.length<=6){const s=Number(n);if(!isNaN(s))return this.handleNewFrameCount_(s),null}return this.handleNewFrameCount_(1),n}handleIncomingFrame(n){if(null===this.mySock)return;const s=n.data;if(this.bytesReceived+=s.length,this.stats_.incrementCounter("bytes_received",s.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(s);else{const l=this.extractFrameCount_(s);null!==l&&this.appendFrame_(l)}}send(n){this.resetKeepAlive();const s=(0,F.Pz)(n);this.bytesSent+=s.length,this.stats_.incrementCounter("bytes_sent",s.length);const l=fF(s,16384);l.length>1&&this.sendString_(String(l.length));for(let c=0;c<l.length;c++)this.sendString_(l[c])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(n){try{this.mySock.send(n)}catch(s){this.log_("Exception thrown from WebSocket.send():",s.message||s.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return i.responsesRequiredToBeHealthy=2,i.healthyTimeout=3e4,i})();class Tx{constructor(r){this.initTransports_(r)}static get ALL_TRANSPORTS(){return[Uv,hC]}initTransports_(r){const n=hC&&hC.isAvailable();let s=n&&!hC.previouslyFailed();if(r.webSocketOnly&&(n||ws("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),s=!0),s)this.transports_=[hC];else{const l=this.transports_=[];for(const c of Tx.ALL_TRANSPORTS)c&&c.isAvailable()&&l.push(c)}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}class LF{constructor(r,n,s,l,c,g,_,w,T,S){this.id=r,this.repoInfo_=n,this.applicationId_=s,this.appCheckToken_=l,this.authToken_=c,this.onMessage_=g,this.onReady_=_,this.onDisconnect_=w,this.onKill_=T,this.lastSessionId=S,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=aC("c:"+this.id+":"),this.transportManager_=new Tx(n),this.log_("Connection created"),this.start_()}start_(){const r=this.transportManager_.initialTransport();this.conn_=new r(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=r.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),s=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,s)},Math.floor(0));const l=r.healthyTimeout||0;l>0&&(this.healthyTimeout_=uC(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(l)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(r){return n=>{r===this.conn_?this.onConnectionLost_(n):r===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(r){return n=>{2!==this.state_&&(r===this.rx_?this.onPrimaryMessageReceived_(n):r===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(r){this.sendData_({t:"d",d:r})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(r){if("t"in r){const n=r.t;"a"===n?this.upgradeIfSecondaryHealthy_():"r"===n?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===n&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(r){const n=lC("t",r),s=lC("d",r);if("c"===n)this.onSecondaryControl_(s);else{if("d"!==n)throw new Error("Unknown protocol layer: "+n);this.pendingDataMessages.push(s)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(r){const n=lC("t",r),s=lC("d",r);"c"===n?this.onControl_(s):"d"===n&&this.onDataMessage_(s)}onDataMessage_(r){this.onPrimaryResponse_(),this.onMessage_(r)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(r){const n=lC("t",r);if("d"in r){const s=r.d;if("h"===n)this.onHandshake_(s);else if("n"===n){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let l=0;l<this.pendingDataMessages.length;++l)this.onDataMessage_(this.pendingDataMessages[l]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===n?this.onConnectionShutdown_(s):"r"===n?this.onReset_(s):"e"===n?_x("Server Error: "+s):"o"===n?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):_x("Unknown control packet command: "+n)}}onHandshake_(r){const n=r.ts,s=r.v,l=r.h;this.sessionId=r.s,this.repoInfo_.host=l,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),"5"!==s&&ws("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const r=this.transportManager_.upgradeTransport();r&&this.startUpgrade_(r)}startUpgrade_(r){this.secondaryConn_=new r(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=r.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),s=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,s),uC(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(r){this.log_("Reset packet received.  New host: "+r),this.repoInfo_.host=r,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(r,n){this.log_("Realtime connection established."),this.conn_=r,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):uC(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const r=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===r||this.rx_===r)&&this.close()}onConnectionLost_(r){this.conn_=null,r||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(mm.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(r){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(r),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(r){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(r)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class VF{put(r,n,s,l){}merge(r,n,s,l){}refreshAuthToken(r){}refreshAppCheckToken(r){}onDisconnectPut(r,n,s){}onDisconnectMerge(r,n,s){}onDisconnectCancel(r,n){}reportStats(r){}}class BF{constructor(r){this.allowedEvents_=r,this.listeners_={},(0,F.hu)(Array.isArray(r)&&r.length>0,"Requires a non-empty array")}trigger(r,...n){if(Array.isArray(this.listeners_[r])){const s=[...this.listeners_[r]];for(let l=0;l<s.length;l++)s[l].callback.apply(s[l].context,n)}}on(r,n,s){this.validateEventType_(r),this.listeners_[r]=this.listeners_[r]||[],this.listeners_[r].push({callback:n,context:s});const l=this.getInitialEvent(r);l&&n.apply(s,l)}off(r,n,s){this.validateEventType_(r);const l=this.listeners_[r]||[];for(let c=0;c<l.length;c++)if(l[c].callback===n&&(!s||s===l[c].context))return void l.splice(c,1)}validateEventType_(r){(0,F.hu)(this.allowedEvents_.find(n=>n===r),"Unknown event: "+r)}}class FN extends BF{constructor(){super(["online"]),this.online_=!0,"undefined"!=typeof window&&void 0!==window.addEventListener&&!(0,F.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new FN}getInitialEvent(r){return(0,F.hu)("online"===r,"Unknown event type: "+r),[this.online_]}currentlyOnline(){return this.online_}}class Xt{constructor(r,n){if(void 0===n){this.pieces_=r.split("/");let s=0;for(let l=0;l<this.pieces_.length;l++)this.pieces_[l].length>0&&(this.pieces_[s]=this.pieces_[l],s++);this.pieces_.length=s,this.pieceNum_=0}else this.pieces_=r,this.pieceNum_=n}toString(){let r="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)""!==this.pieces_[n]&&(r+="/"+this.pieces_[n]);return r||"/"}}function Zt(){return new Xt("")}function Ft(i){return i.pieceNum_>=i.pieces_.length?null:i.pieces_[i.pieceNum_]}function yf(i){return i.pieces_.length-i.pieceNum_}function vn(i){let r=i.pieceNum_;return r<i.pieces_.length&&r++,new Xt(i.pieces_,r)}function Sx(i){return i.pieceNum_<i.pieces_.length?i.pieces_[i.pieces_.length-1]:null}function fC(i,r=0){return i.pieces_.slice(i.pieceNum_+r)}function jF(i){if(i.pieceNum_>=i.pieces_.length)return null;const r=[];for(let n=i.pieceNum_;n<i.pieces_.length-1;n++)r.push(i.pieces_[n]);return new Xt(r,0)}function Gn(i,r){const n=[];for(let s=i.pieceNum_;s<i.pieces_.length;s++)n.push(i.pieces_[s]);if(r instanceof Xt)for(let s=r.pieceNum_;s<r.pieces_.length;s++)n.push(r.pieces_[s]);else{const s=r.split("/");for(let l=0;l<s.length;l++)s[l].length>0&&n.push(s[l])}return new Xt(n,0)}function Lt(i){return i.pieceNum_>=i.pieces_.length}function Cs(i,r){const n=Ft(i),s=Ft(r);if(null===n)return r;if(n===s)return Cs(vn(i),vn(r));throw new Error("INTERNAL ERROR: innerPath ("+r+") is not within outerPath ("+i+")")}function hH(i,r){const n=fC(i,0),s=fC(r,0);for(let l=0;l<n.length&&l<s.length;l++){const c=ym(n[l],s[l]);if(0!==c)return c}return n.length===s.length?0:n.length<s.length?-1:1}function Ax(i,r){if(yf(i)!==yf(r))return!1;for(let n=i.pieceNum_,s=r.pieceNum_;n<=i.pieces_.length;n++,s++)if(i.pieces_[n]!==r.pieces_[s])return!1;return!0}function ta(i,r){let n=i.pieceNum_,s=r.pieceNum_;if(yf(i)>yf(r))return!1;for(;n<i.pieces_.length;){if(i.pieces_[n]!==r.pieces_[s])return!1;++n,++s}return!0}class fH{constructor(r,n){this.errorPrefix_=n,this.parts_=fC(r,0),this.byteLength_=Math.max(1,this.parts_.length);for(let s=0;s<this.parts_.length;s++)this.byteLength_+=(0,F.ug)(this.parts_[s]);$F(this)}}function $F(i){if(i.byteLength_>768)throw new Error(i.errorPrefix_+"has a key path longer than 768 bytes ("+i.byteLength_+").");if(i.parts_.length>32)throw new Error(i.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+vm(i))}function vm(i){return 0===i.parts_.length?"":"in property '"+i.parts_.join(".")+"'"}class Mx extends BF{constructor(){let r,n;super(["visible"]),"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(n="visibilitychange",r="hidden"):void 0!==document.mozHidden?(n="mozvisibilitychange",r="mozHidden"):void 0!==document.msHidden?(n="msvisibilitychange",r="msHidden"):void 0!==document.webkitHidden&&(n="webkitvisibilitychange",r="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const s=!document[r];s!==this.visible_&&(this.visible_=s,this.trigger("visible",s))},!1)}static getInstance(){return new Mx}getInitialEvent(r){return(0,F.hu)("visible"===r,"Unknown event type: "+r),[this.visible_]}}const pC=1e3;let VN,bm=(()=>{class i extends VF{constructor(n,s,l,c,g,_,w,T){if(super(),this.repoInfo_=n,this.applicationId_=s,this.onDataUpdate_=l,this.onConnectStatus_=c,this.onServerInfoUpdate_=g,this.authTokenProvider_=_,this.appCheckTokenProvider_=w,this.authOverride_=T,this.id=i.nextPersistentConnectionId_++,this.log_=aC("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=pC,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,T&&!(0,F.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Mx.getInstance().on("visible",this.onVisible_,this),-1===n.host.indexOf("fblocal")&&FN.getInstance().on("online",this.onOnline_,this)}sendRequest(n,s,l){const c=++this.requestNumber_,g={r:c,a:n,b:s};this.log_((0,F.Pz)(g)),(0,F.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(g),l&&(this.requestCBHash_[c]=l)}get(n){this.initConnection_();const s=new F.BH,l={p:n._path.toString(),q:n._queryObject},c={action:"g",request:l,onComplete:_=>{const w=_.d;"ok"===_.s?(this.onDataUpdate_(l.p,w,!1,null),s.resolve(w)):s.reject(w)}};this.outstandingGets_.push(c),this.outstandingGetCount_++;const g=this.outstandingGets_.length-1;return this.connected_||setTimeout(()=>{const _=this.outstandingGets_[g];void 0===_||c!==_||(delete this.outstandingGets_[g],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),this.log_("get "+g+" timed out on connection"),s.reject(new Error("Client is offline.")))},3e3),this.connected_&&this.sendGet_(g),s.promise}listen(n,s,l,c){this.initConnection_();const g=n._queryIdentifier,_=n._path.toString();this.log_("Listen called for "+_+" "+g),this.listens.has(_)||this.listens.set(_,new Map),(0,F.hu)(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,F.hu)(!this.listens.get(_).has(g),"listen() called twice for same path/queryId.");const w={onComplete:c,hashFn:s,query:n,tag:l};this.listens.get(_).set(g,w),this.connected_&&this.sendListen_(w)}sendGet_(n){const s=this.outstandingGets_[n];this.sendRequest("g",s.request,l=>{delete this.outstandingGets_[n],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),s.onComplete&&s.onComplete(l)})}sendListen_(n){const s=n.query,l=s._path.toString(),c=s._queryIdentifier;this.log_("Listen on "+l+" for "+c);const g={p:l};n.tag&&(g.q=s._queryObject,g.t=n.tag),g.h=n.hashFn(),this.sendRequest("q",g,w=>{const T=w.d,S=w.s;i.warnOnListenWarnings_(T,s),(this.listens.get(l)&&this.listens.get(l).get(c))===n&&(this.log_("listen response",w),"ok"!==S&&this.removeListen_(l,c),n.onComplete&&n.onComplete(S,T))})}static warnOnListenWarnings_(n,s){if(n&&"object"==typeof n&&(0,F.r3)(n,"w")){const l=(0,F.DV)(n,"w");if(Array.isArray(l)&&~l.indexOf("no_index")){const c='".indexOn": "'+s._queryParams.getIndex().toString()+'"',g=s._path.toString();ws(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${c} at ${g} to your security rules for better performance.`)}}}refreshAuthToken(n){this.authToken_=n,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(n)}reduceReconnectDelayIfAdminCredential_(n){(n&&40===n.length||(0,F.GJ)(n))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(n){this.appCheckToken_=n,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const n=this.authToken_,s=(0,F.w9)(n)?"auth":"gauth",l={cred:n};null===this.authOverride_?l.noauth=!0:"object"==typeof this.authOverride_&&(l.authvar=this.authOverride_),this.sendRequest(s,l,c=>{const g=c.s,_=c.d||"error";this.authToken_===n&&("ok"===g?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(g,_))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},n=>{const s=n.s,l=n.d||"error";"ok"===s?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(s,l)})}unlisten(n,s){const l=n._path.toString(),c=n._queryIdentifier;this.log_("Unlisten called for "+l+" "+c),(0,F.hu)(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(l,c)&&this.connected_&&this.sendUnlisten_(l,c,n._queryObject,s)}sendUnlisten_(n,s,l,c){this.log_("Unlisten on "+n+" for "+s);const g={p:n};c&&(g.q=l,g.t=c),this.sendRequest("n",g)}onDisconnectPut(n,s,l){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",n,s,l):this.onDisconnectRequestQueue_.push({pathString:n,action:"o",data:s,onComplete:l})}onDisconnectMerge(n,s,l){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",n,s,l):this.onDisconnectRequestQueue_.push({pathString:n,action:"om",data:s,onComplete:l})}onDisconnectCancel(n,s){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",n,null,s):this.onDisconnectRequestQueue_.push({pathString:n,action:"oc",data:null,onComplete:s})}sendOnDisconnect_(n,s,l,c){const g={p:s,d:l};this.log_("onDisconnect "+n,g),this.sendRequest(n,g,_=>{c&&setTimeout(()=>{c(_.s,_.d)},Math.floor(0))})}put(n,s,l,c){this.putInternal("p",n,s,l,c)}merge(n,s,l,c){this.putInternal("m",n,s,l,c)}putInternal(n,s,l,c,g){this.initConnection_();const _={p:s,d:l};void 0!==g&&(_.h=g),this.outstandingPuts_.push({action:n,request:_,onComplete:c}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+s)}sendPut_(n){const s=this.outstandingPuts_[n].action,l=this.outstandingPuts_[n].request,c=this.outstandingPuts_[n].onComplete;this.outstandingPuts_[n].queued=this.connected_,this.sendRequest(s,l,g=>{this.log_(s+" response",g),delete this.outstandingPuts_[n],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),c&&c(g.s,g.d)})}reportStats(n){if(this.connected_){const s={c:n};this.log_("reportStats",s),this.sendRequest("s",s,l=>{"ok"!==l.s&&this.log_("reportStats","Error sending stats: "+l.d)})}}onDataMessage_(n){if("r"in n){this.log_("from server: "+(0,F.Pz)(n));const s=n.r,l=this.requestCBHash_[s];l&&(delete this.requestCBHash_[s],l(n.b))}else{if("error"in n)throw"A server-side error has occurred: "+n.error;"a"in n&&this.onDataPush_(n.a,n.b)}}onDataPush_(n,s){this.log_("handleServerMessage",n,s),"d"===n?this.onDataUpdate_(s.p,s.d,!1,s.t):"m"===n?this.onDataUpdate_(s.p,s.d,!0,s.t):"c"===n?this.onListenRevoked_(s.p,s.q):"ac"===n?this.onAuthRevoked_(s.s,s.d):"apc"===n?this.onAppCheckRevoked_(s.s,s.d):"sd"===n?this.onSecurityDebugPacket_(s):_x("Unrecognized action received from server: "+(0,F.Pz)(n)+"\nAre you using the latest client?")}onReady_(n,s){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(n),this.lastSessionId=s,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(n){(0,F.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(n))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(n){n&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=pC,this.realtime_||this.scheduleConnect_(0)),this.visible_=n}onOnline_(n){n?(this.log_("Browser went online."),this.reconnectDelay_=pC,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=pC),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const n=(new Date).getTime()-this.lastConnectionAttemptTime_;let s=Math.max(0,this.reconnectDelay_-n);s=Math.random()*s,this.log_("Trying to reconnect in "+s+"ms"),this.scheduleConnect_(s),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var n=this;return(0,we.Z)(function*(){if(n.shouldReconnect_()){n.log_("Making a connection attempt"),n.lastConnectionAttemptTime_=(new Date).getTime(),n.lastConnectionEstablishedTime_=null;const s=n.onDataMessage_.bind(n),l=n.onReady_.bind(n),c=n.onRealtimeDisconnect_.bind(n),g=n.id+":"+i.nextConnectionId_++,_=n.lastSessionId;let w=!1,T=null;const S=function(){T?T.close():(w=!0,c())};n.realtime_={close:S,sendRequest:function(V){(0,F.hu)(T,"sendRequest call when we're not connected not allowed."),T.sendRequest(V)}};const x=n.forceTokenRefresh_;n.forceTokenRefresh_=!1;try{const[V,z]=yield Promise.all([n.authTokenProvider_.getToken(x),n.appCheckTokenProvider_.getToken(x)]);w?hi("getToken() completed but was canceled"):(hi("getToken() completed. Creating connection."),n.authToken_=V&&V.accessToken,n.appCheckToken_=z&&z.token,T=new LF(g,n.repoInfo_,n.applicationId_,n.appCheckToken_,n.authToken_,s,l,c,ue=>{ws(ue+" ("+n.repoInfo_.toString()+")"),n.interrupt("server_kill")},_))}catch(V){n.log_("Failed to get token: "+V),w||(n.repoInfo_.nodeAdmin&&ws(V),S())}}})()}interrupt(n){hi("Interrupting connection for reason: "+n),this.interruptReasons_[n]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(n){hi("Resuming connection for reason: "+n),delete this.interruptReasons_[n],(0,F.xb)(this.interruptReasons_)&&(this.reconnectDelay_=pC,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(n){const s=n-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:s})}cancelSentTransactions_(){for(let n=0;n<this.outstandingPuts_.length;n++){const s=this.outstandingPuts_[n];s&&"h"in s.request&&s.queued&&(s.onComplete&&s.onComplete("disconnect"),delete this.outstandingPuts_[n],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(n,s){let l;l=s?s.map(g=>yx(g)).join("$"):"default";const c=this.removeListen_(n,l);c&&c.onComplete&&c.onComplete("permission_denied")}removeListen_(n,s){const l=new Xt(n).toString();let c;if(this.listens.has(l)){const g=this.listens.get(l);c=g.get(s),g.delete(s),0===g.size&&this.listens.delete(l)}else c=void 0;return c}onAuthRevoked_(n,s){hi("Auth token revoked: "+n+"/"+s),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===n||"permission_denied"===n)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(n,s){hi("App check token revoked: "+n+"/"+s),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===n||"permission_denied"===n)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(n){this.securityDebugCallback_?this.securityDebugCallback_(n):"msg"in n&&console.log("FIREBASE: "+n.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const n of this.listens.values())for(const s of n.values())this.sendListen_(s);for(let n=0;n<this.outstandingPuts_.length;n++)this.outstandingPuts_[n]&&this.sendPut_(n);for(;this.onDisconnectRequestQueue_.length;){const n=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(n.action,n.pathString,n.data,n.onComplete)}for(let n=0;n<this.outstandingGets_.length;n++)this.outstandingGets_[n]&&this.sendGet_(n)}sendConnectStats_(){const n={};let s="js";(0,F.Yr)()&&(s=this.repoInfo_.nodeAdmin?"admin_node":"node"),n["sdk."+s+"."+gx.replace(/\./g,"-")]=1,(0,F.uI)()?n["framework.cordova"]=1:(0,F.b$)()&&(n["framework.reactnative"]=1),this.reportStats(n)}shouldReconnect_(){const n=FN.getInstance().currentlyOnline();return(0,F.xb)(this.interruptReasons_)&&n}}return i.nextPersistentConnectionId_=0,i.nextConnectionId_=0,i})();class Bt{constructor(r,n){this.name=r,this.node=n}static Wrap(r,n){return new Bt(r,n)}}class LN{getCompare(){return this.compare.bind(this)}indexedValueChanged(r,n){const s=new Bt(dd,r),l=new Bt(dd,n);return 0!==this.compare(s,l)}minPost(){return Bt.MIN}}class qF extends LN{static get __EMPTY_NODE(){return VN}static set __EMPTY_NODE(r){VN=r}compare(r,n){return ym(r.name,n.name)}isDefinedOn(r){throw(0,F.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(r,n){return!1}minPost(){return Bt.MIN}maxPost(){return new Bt(bu,VN)}makePost(r,n){return(0,F.hu)("string"==typeof r,"KeyIndex indexValue must always be a string."),new Bt(r,VN)}toString(){return".key"}}const wu=new qF;class BN{constructor(r,n,s,l,c=null){this.isReverse_=l,this.resultGenerator_=c,this.nodeStack_=[];let g=1;for(;!r.isEmpty();)if(r=r,g=n?s(r.key,n):1,l&&(g*=-1),g<0)r=this.isReverse_?r.left:r.right;else{if(0===g){this.nodeStack_.push(r);break}this.nodeStack_.push(r),r=this.isReverse_?r.right:r.left}}getNext(){if(0===this.nodeStack_.length)return null;let n,r=this.nodeStack_.pop();if(n=this.resultGenerator_?this.resultGenerator_(r.key,r.value):{key:r.key,value:r.value},this.isReverse_)for(r=r.left;!r.isEmpty();)this.nodeStack_.push(r),r=r.right;else for(r=r.right;!r.isEmpty();)this.nodeStack_.push(r),r=r.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const r=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(r.key,r.value):{key:r.key,value:r.value}}}let xx,rl=(()=>{class i{constructor(n,s,l,c,g){this.key=n,this.value=s,this.color=null!=l?l:i.RED,this.left=null!=c?c:Ws.EMPTY_NODE,this.right=null!=g?g:Ws.EMPTY_NODE}copy(n,s,l,c,g){return new i(null!=n?n:this.key,null!=s?s:this.value,null!=l?l:this.color,null!=c?c:this.left,null!=g?g:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(n){return this.left.inorderTraversal(n)||!!n(this.key,this.value)||this.right.inorderTraversal(n)}reverseTraversal(n){return this.right.reverseTraversal(n)||n(this.key,this.value)||this.left.reverseTraversal(n)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(n,s,l){let c=this;const g=l(n,c.key);return c=g<0?c.copy(null,null,null,c.left.insert(n,s,l),null):0===g?c.copy(null,s,null,null,null):c.copy(null,null,null,null,c.right.insert(n,s,l)),c.fixUp_()}removeMin_(){if(this.left.isEmpty())return Ws.EMPTY_NODE;let n=this;return!n.left.isRed_()&&!n.left.left.isRed_()&&(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.removeMin_(),null),n.fixUp_()}remove(n,s){let l,c;if(l=this,s(n,l.key)<0)!l.left.isEmpty()&&!l.left.isRed_()&&!l.left.left.isRed_()&&(l=l.moveRedLeft_()),l=l.copy(null,null,null,l.left.remove(n,s),null);else{if(l.left.isRed_()&&(l=l.rotateRight_()),!l.right.isEmpty()&&!l.right.isRed_()&&!l.right.left.isRed_()&&(l=l.moveRedRight_()),0===s(n,l.key)){if(l.right.isEmpty())return Ws.EMPTY_NODE;c=l.right.min_(),l=l.copy(c.key,c.value,null,null,l.right.removeMin_())}l=l.copy(null,null,null,null,l.right.remove(n,s))}return l.fixUp_()}isRed_(){return this.color}fixUp_(){let n=this;return n.right.isRed_()&&!n.left.isRed_()&&(n=n.rotateLeft_()),n.left.isRed_()&&n.left.left.isRed_()&&(n=n.rotateRight_()),n.left.isRed_()&&n.right.isRed_()&&(n=n.colorFlip_()),n}moveRedLeft_(){let n=this.colorFlip_();return n.right.left.isRed_()&&(n=n.copy(null,null,null,null,n.right.rotateRight_()),n=n.rotateLeft_(),n=n.colorFlip_()),n}moveRedRight_(){let n=this.colorFlip_();return n.left.left.isRed_()&&(n=n.rotateRight_(),n=n.colorFlip_()),n}rotateLeft_(){const n=this.copy(null,null,i.RED,null,this.right.left);return this.right.copy(null,null,this.color,n,null)}rotateRight_(){const n=this.copy(null,null,i.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,n)}colorFlip_(){const n=this.left.copy(null,null,!this.left.color,null,null),s=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,n,s)}checkMaxDepth_(){const n=this.check_();return Math.pow(2,n)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const n=this.left.check_();if(n!==this.right.check_())throw new Error("Black depths differ");return n+(this.isRed_()?0:1)}}return i.RED=!0,i.BLACK=!1,i})();class Ws{constructor(r,n=Ws.EMPTY_NODE){this.comparator_=r,this.root_=n}insert(r,n){return new Ws(this.comparator_,this.root_.insert(r,n,this.comparator_).copy(null,null,rl.BLACK,null,null))}remove(r){return new Ws(this.comparator_,this.root_.remove(r,this.comparator_).copy(null,null,rl.BLACK,null,null))}get(r){let n,s=this.root_;for(;!s.isEmpty();){if(n=this.comparator_(r,s.key),0===n)return s.value;n<0?s=s.left:n>0&&(s=s.right)}return null}getPredecessorKey(r){let n,s=this.root_,l=null;for(;!s.isEmpty();){if(n=this.comparator_(r,s.key),0===n){if(s.left.isEmpty())return l?l.key:null;for(s=s.left;!s.right.isEmpty();)s=s.right;return s.key}n<0?s=s.left:n>0&&(l=s,s=s.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(r){return this.root_.inorderTraversal(r)}reverseTraversal(r){return this.root_.reverseTraversal(r)}getIterator(r){return new BN(this.root_,null,this.comparator_,!1,r)}getIteratorFrom(r,n){return new BN(this.root_,r,this.comparator_,!1,n)}getReverseIteratorFrom(r,n){return new BN(this.root_,r,this.comparator_,!0,n)}getReverseIterator(r){return new BN(this.root_,null,this.comparator_,!0,r)}}function CH(i,r){return ym(i.name,r.name)}function Rx(i,r){return ym(i,r)}Ws.EMPTY_NODE=new class{copy(r,n,s,l,c){return this}insert(r,n,s){return new rl(r,n,null)}remove(r,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(r){return!1}reverseTraversal(r){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const zF=function(i){return"number"==typeof i?"number:"+pF(i):"string:"+i},YF=function(i){if(i.isLeafNode()){const r=i.val();(0,F.hu)("string"==typeof r||"number"==typeof r||"object"==typeof r&&(0,F.r3)(r,".sv"),"Priority must be a string or number.")}else(0,F.hu)(i===xx||i.isEmpty(),"priority of unexpected type.");(0,F.hu)(i===xx||i.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let ZF,KF,QF,Hv=(()=>{class i{constructor(n,s=i.__childrenNodeConstructor.EMPTY_NODE){this.value_=n,this.priorityNode_=s,this.lazyHash_=null,(0,F.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),YF(this.priorityNode_)}static set __childrenNodeConstructor(n){ZF=n}static get __childrenNodeConstructor(){return ZF}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(n){return new i(this.value_,n)}getImmediateChild(n){return".priority"===n?this.priorityNode_:i.__childrenNodeConstructor.EMPTY_NODE}getChild(n){return Lt(n)?this:".priority"===Ft(n)?this.priorityNode_:i.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(n,s){return null}updateImmediateChild(n,s){return".priority"===n?this.updatePriority(s):s.isEmpty()&&".priority"!==n?this:i.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(n,s).updatePriority(this.priorityNode_)}updateChild(n,s){const l=Ft(n);return null===l?s:s.isEmpty()&&".priority"!==l?this:((0,F.hu)(".priority"!==l||1===yf(n),".priority must be the last token in a path"),this.updateImmediateChild(l,i.__childrenNodeConstructor.EMPTY_NODE.updateChild(vn(n),s)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(n,s){return!1}val(n){return n&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let n="";this.priorityNode_.isEmpty()||(n+="priority:"+zF(this.priorityNode_.val())+":");const s=typeof this.value_;n+=s+":",n+="number"===s?pF(this.value_):this.value_,this.lazyHash_=cF(n)}return this.lazyHash_}getValue(){return this.value_}compareTo(n){return n===i.__childrenNodeConstructor.EMPTY_NODE?1:n instanceof i.__childrenNodeConstructor?-1:((0,F.hu)(n.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(n))}compareToLeafNode_(n){const s=typeof n.value_,l=typeof this.value_,c=i.VALUE_TYPE_ORDER.indexOf(s),g=i.VALUE_TYPE_ORDER.indexOf(l);return(0,F.hu)(c>=0,"Unknown leaf type: "+s),(0,F.hu)(g>=0,"Unknown leaf type: "+l),c===g?"object"===l?0:this.value_<n.value_?-1:this.value_===n.value_?0:1:g-c}withIndex(){return this}isIndexed(){return!0}equals(n){if(n===this)return!0;if(n.isLeafNode()){const s=n;return this.value_===s.value_&&this.priorityNode_.equals(s.priorityNode_)}return!1}}return i.VALUE_TYPE_ORDER=["object","boolean","number","string"],i})();const Nn=new class extends LN{compare(r,n){const s=r.node.getPriority(),l=n.node.getPriority(),c=s.compareTo(l);return 0===c?ym(r.name,n.name):c}isDefinedOn(r){return!r.getPriority().isEmpty()}indexedValueChanged(r,n){return!r.getPriority().equals(n.getPriority())}minPost(){return Bt.MIN}maxPost(){return new Bt(bu,new Hv("[PRIORITY-POST]",QF))}makePost(r,n){const s=KF(r);return new Bt(n,new Hv("[PRIORITY-POST]",s))}toString(){return".priority"}},NH=Math.log(2);class SH{constructor(r){this.count=parseInt(Math.log(r+1)/NH,10),this.current_=this.count-1;const l=(c=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=r+1&l}nextBitIsOne(){const r=!(this.bits_&1<<this.current_);return this.current_--,r}}const UN=function(i,r,n,s){i.sort(r);const l=function(w,T){const S=T-w;let A,x;if(0===S)return null;if(1===S)return A=i[w],x=n?n(A):A,new rl(x,A.node,rl.BLACK,null,null);{const V=parseInt(S/2,10)+w,z=l(w,V),ue=l(V+1,T);return A=i[V],x=n?n(A):A,new rl(x,A.node,rl.BLACK,z,ue)}},_=function(w){let T=null,S=null,A=i.length;const x=function(z,ue){const Ae=A-z,Qe=A;A-=z;const Je=l(Ae+1,Qe),yt=i[Ae],Gt=n?n(yt):yt;V(new rl(Gt,yt.node,ue,null,Je))},V=function(z){T?(T.left=z,T=z):(S=z,T=z)};for(let z=0;z<w.count;++z){const ue=w.nextBitIsOne(),Ae=Math.pow(2,w.count-(z+1));ue?x(Ae,rl.BLACK):(x(Ae,rl.BLACK),x(Ae,rl.RED))}return S}(new SH(i.length));return new Ws(s||r,_)};let kx;const jv={};class hd{constructor(r,n){this.indexes_=r,this.indexSet_=n}static get Default(){return(0,F.hu)(jv&&Nn,"ChildrenNode.ts has not been loaded"),kx=kx||new hd({".priority":jv},{".priority":Nn}),kx}get(r){const n=(0,F.DV)(this.indexes_,r);if(!n)throw new Error("No index defined for "+r);return n instanceof Ws?n:null}hasIndex(r){return(0,F.r3)(this.indexSet_,r.toString())}addIndex(r,n){(0,F.hu)(r!==wu,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const s=[];let l=!1;const c=n.getIterator(Bt.Wrap);let _,g=c.getNext();for(;g;)l=l||r.isDefinedOn(g.node),s.push(g),g=c.getNext();_=l?UN(s,r.getCompare()):jv;const w=r.toString(),T=Object.assign({},this.indexSet_);T[w]=r;const S=Object.assign({},this.indexes_);return S[w]=_,new hd(S,T)}addToIndexes(r,n){const s=(0,F.UI)(this.indexes_,(l,c)=>{const g=(0,F.DV)(this.indexSet_,c);if((0,F.hu)(g,"Missing index implementation for "+c),l===jv){if(g.isDefinedOn(r.node)){const _=[],w=n.getIterator(Bt.Wrap);let T=w.getNext();for(;T;)T.name!==r.name&&_.push(T),T=w.getNext();return _.push(r),UN(_,g.getCompare())}return jv}{const _=n.get(r.name);let w=l;return _&&(w=w.remove(new Bt(r.name,_))),w.insert(r,r.node)}});return new hd(s,this.indexSet_)}removeFromIndexes(r,n){const s=(0,F.UI)(this.indexes_,l=>{if(l===jv)return l;{const c=n.get(r.name);return c?l.remove(new Bt(r.name,c)):l}});return new hd(s,this.indexSet_)}}let gC,Dt=(()=>{class i{constructor(n,s,l){this.children_=n,this.priorityNode_=s,this.indexMap_=l,this.lazyHash_=null,this.priorityNode_&&YF(this.priorityNode_),this.children_.isEmpty()&&(0,F.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return gC||(gC=new i(new Ws(Rx),null,hd.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||gC}updatePriority(n){return this.children_.isEmpty()?this:new i(this.children_,n,this.indexMap_)}getImmediateChild(n){if(".priority"===n)return this.getPriority();{const s=this.children_.get(n);return null===s?gC:s}}getChild(n){const s=Ft(n);return null===s?this:this.getImmediateChild(s).getChild(vn(n))}hasChild(n){return null!==this.children_.get(n)}updateImmediateChild(n,s){if((0,F.hu)(s,"We should always be passing snapshot nodes"),".priority"===n)return this.updatePriority(s);{const l=new Bt(n,s);let c,g;s.isEmpty()?(c=this.children_.remove(n),g=this.indexMap_.removeFromIndexes(l,this.children_)):(c=this.children_.insert(n,s),g=this.indexMap_.addToIndexes(l,this.children_));const _=c.isEmpty()?gC:this.priorityNode_;return new i(c,_,g)}}updateChild(n,s){const l=Ft(n);if(null===l)return s;{(0,F.hu)(".priority"!==Ft(n)||1===yf(n),".priority must be the last token in a path");const c=this.getImmediateChild(l).updateChild(vn(n),s);return this.updateImmediateChild(l,c)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(n){if(this.isEmpty())return null;const s={};let l=0,c=0,g=!0;if(this.forEachChild(Nn,(_,w)=>{s[_]=w.val(n),l++,g&&i.INTEGER_REGEXP_.test(_)?c=Math.max(c,Number(_)):g=!1}),!n&&g&&c<2*l){const _=[];for(const w in s)_[w]=s[w];return _}return n&&!this.getPriority().isEmpty()&&(s[".priority"]=this.getPriority().val()),s}hash(){if(null===this.lazyHash_){let n="";this.getPriority().isEmpty()||(n+="priority:"+zF(this.getPriority().val())+":"),this.forEachChild(Nn,(s,l)=>{const c=l.hash();""!==c&&(n+=":"+s+":"+c)}),this.lazyHash_=""===n?"":cF(n)}return this.lazyHash_}getPredecessorChildName(n,s,l){const c=this.resolveIndex_(l);if(c){const g=c.getPredecessorKey(new Bt(n,s));return g?g.name:null}return this.children_.getPredecessorKey(n)}getFirstChildName(n){const s=this.resolveIndex_(n);if(s){const l=s.minKey();return l&&l.name}return this.children_.minKey()}getFirstChild(n){const s=this.getFirstChildName(n);return s?new Bt(s,this.children_.get(s)):null}getLastChildName(n){const s=this.resolveIndex_(n);if(s){const l=s.maxKey();return l&&l.name}return this.children_.maxKey()}getLastChild(n){const s=this.getLastChildName(n);return s?new Bt(s,this.children_.get(s)):null}forEachChild(n,s){const l=this.resolveIndex_(n);return l?l.inorderTraversal(c=>s(c.name,c.node)):this.children_.inorderTraversal(s)}getIterator(n){return this.getIteratorFrom(n.minPost(),n)}getIteratorFrom(n,s){const l=this.resolveIndex_(s);if(l)return l.getIteratorFrom(n,c=>c);{const c=this.children_.getIteratorFrom(n.name,Bt.Wrap);let g=c.peek();for(;null!=g&&s.compare(g,n)<0;)c.getNext(),g=c.peek();return c}}getReverseIterator(n){return this.getReverseIteratorFrom(n.maxPost(),n)}getReverseIteratorFrom(n,s){const l=this.resolveIndex_(s);if(l)return l.getReverseIteratorFrom(n,c=>c);{const c=this.children_.getReverseIteratorFrom(n.name,Bt.Wrap);let g=c.peek();for(;null!=g&&s.compare(g,n)>0;)c.getNext(),g=c.peek();return c}}compareTo(n){return this.isEmpty()?n.isEmpty()?0:-1:n.isLeafNode()||n.isEmpty()?1:n===mC?-1:0}withIndex(n){if(n===wu||this.indexMap_.hasIndex(n))return this;{const s=this.indexMap_.addIndex(n,this.children_);return new i(this.children_,this.priorityNode_,s)}}isIndexed(n){return n===wu||this.indexMap_.hasIndex(n)}equals(n){if(n===this)return!0;if(n.isLeafNode())return!1;{const s=n;if(this.getPriority().equals(s.getPriority())){if(this.children_.count()===s.children_.count()){const l=this.getIterator(Nn),c=s.getIterator(Nn);let g=l.getNext(),_=c.getNext();for(;g&&_;){if(g.name!==_.name||!g.node.equals(_.node))return!1;g=l.getNext(),_=c.getNext()}return null===g&&null===_}return!1}return!1}}resolveIndex_(n){return n===wu?null:this.indexMap_.get(n.toString())}}return i.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,i})();const mC=new class extends Dt{constructor(){super(new Ws(Rx),Dt.EMPTY_NODE,hd.Default)}compareTo(r){return r===this?0:1}equals(r){return r===this}getPriority(){return this}getImmediateChild(r){return Dt.EMPTY_NODE}isEmpty(){return!1}};function Jn(i,r=null){if(null===i)return Dt.EMPTY_NODE;if("object"==typeof i&&".priority"in i&&(r=i[".priority"]),(0,F.hu)(null===r||"string"==typeof r||"number"==typeof r||"object"==typeof r&&".sv"in r,"Invalid priority type found: "+typeof r),"object"==typeof i&&".value"in i&&null!==i[".value"]&&(i=i[".value"]),"object"!=typeof i||".sv"in i)return new Hv(i,Jn(r));if(i instanceof Array){let n=Dt.EMPTY_NODE;return fi(i,(s,l)=>{if((0,F.r3)(i,s)&&"."!==s.substring(0,1)){const c=Jn(l);(c.isLeafNode()||!c.isEmpty())&&(n=n.updateImmediateChild(s,c))}}),n.updatePriority(Jn(r))}{const n=[];let s=!1;if(fi(i,(g,_)=>{if("."!==g.substring(0,1)){const w=Jn(_);w.isEmpty()||(s=s||!w.getPriority().isEmpty(),n.push(new Bt(g,w)))}}),0===n.length)return Dt.EMPTY_NODE;const c=UN(n,CH,g=>g.name,Rx);if(s){const g=UN(n,Nn.getCompare());return new Dt(c,Jn(r),new hd({".priority":g},{".priority":Nn}))}return new Dt(c,Jn(r),hd.Default)}}Object.defineProperties(Bt,{MIN:{value:new Bt(dd,Dt.EMPTY_NODE)},MAX:{value:new Bt(bu,mC)}}),qF.__EMPTY_NODE=Dt.EMPTY_NODE,Hv.__childrenNodeConstructor=Dt,function(i){xx=i}(mC),function(i){QF=i}(mC),function(i){KF=i}(Jn);class Ox extends LN{constructor(r){super(),this.indexPath_=r,(0,F.hu)(!Lt(r)&&".priority"!==Ft(r),"Can't create PathIndex with empty path or .priority key")}extractChild(r){return r.getChild(this.indexPath_)}isDefinedOn(r){return!r.getChild(this.indexPath_).isEmpty()}compare(r,n){const s=this.extractChild(r.node),l=this.extractChild(n.node),c=s.compareTo(l);return 0===c?ym(r.name,n.name):c}makePost(r,n){const s=Jn(r),l=Dt.EMPTY_NODE.updateChild(this.indexPath_,s);return new Bt(n,l)}maxPost(){const r=Dt.EMPTY_NODE.updateChild(this.indexPath_,mC);return new Bt(bu,r)}toString(){return fC(this.indexPath_,0).join("/")}}const Px=new class extends LN{compare(r,n){const s=r.node.compareTo(n.node);return 0===s?ym(r.name,n.name):s}isDefinedOn(r){return!0}indexedValueChanged(r,n){return!r.equals(n)}minPost(){return Bt.MIN}maxPost(){return Bt.MAX}makePost(r,n){const s=Jn(r);return new Bt(n,s)}toString(){return".value"}},$v="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",xH=function(){let i=0;const r=[];return function(n){const s=n===i;let l;i=n;const c=new Array(8);for(l=7;l>=0;l--)c[l]=$v.charAt(n%64),n=Math.floor(n/64);(0,F.hu)(0===n,"Cannot push at time == 0");let g=c.join("");if(s){for(l=11;l>=0&&63===r[l];l--)r[l]=0;r[l]++}else for(l=0;l<12;l++)r[l]=Math.floor(64*Math.random());for(l=0;l<12;l++)g+=$v.charAt(r[l]);return(0,F.hu)(20===g.length,"nextPushId: Length should be 20."),g}}(),eL=function(i){if(i===""+vx)return"-";const r=ON(i);if(null!=r)return""+(r+1);const n=new Array(i.length);for(let g=0;g<n.length;g++)n[g]=i.charAt(g);if(n.length<786)return n.push("-"),n.join("");let s=n.length-1;for(;s>=0&&"z"===n[s];)s--;if(-1===s)return bu;const c=$v.charAt($v.indexOf(n[s])+1);return n[s]=c,n.slice(0,s+1).join("")},tL=function(i){if(i===""+gF)return dd;const r=ON(i);if(null!=r)return""+(r-1);const n=new Array(i.length);for(let s=0;s<n.length;s++)n[s]=i.charAt(s);return"-"===n[n.length-1]?1===n.length?""+vx:(delete n[n.length-1],n.join("")):(n[n.length-1]=$v.charAt($v.indexOf(n[n.length-1])-1),n.join("")+"z".repeat(786-n.length))};function nL(i){return{type:"value",snapshotNode:i}}function Gv(i,r){return{type:"child_added",snapshotNode:r,childName:i}}function _C(i,r){return{type:"child_removed",snapshotNode:r,childName:i}}function yC(i,r,n){return{type:"child_changed",snapshotNode:r,childName:i,oldSnap:n}}class Lx{constructor(r){this.index_=r}updateChild(r,n,s,l,c,g){(0,F.hu)(r.isIndexed(this.index_),"A node must be indexed if only a child is updated");const _=r.getImmediateChild(n);return _.getChild(l).equals(s.getChild(l))&&_.isEmpty()===s.isEmpty()||(null!=g&&(s.isEmpty()?r.hasChild(n)?g.trackChildChange(_C(n,_)):(0,F.hu)(r.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):_.isEmpty()?g.trackChildChange(Gv(n,s)):g.trackChildChange(yC(n,s,_))),r.isLeafNode()&&s.isEmpty())?r:r.updateImmediateChild(n,s).withIndex(this.index_)}updateFullNode(r,n,s){return null!=s&&(r.isLeafNode()||r.forEachChild(Nn,(l,c)=>{n.hasChild(l)||s.trackChildChange(_C(l,c))}),n.isLeafNode()||n.forEachChild(Nn,(l,c)=>{if(r.hasChild(l)){const g=r.getImmediateChild(l);g.equals(c)||s.trackChildChange(yC(l,c,g))}else s.trackChildChange(Gv(l,c))})),n.withIndex(this.index_)}updatePriority(r,n){return r.isEmpty()?Dt.EMPTY_NODE:r.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class vC{constructor(r){this.indexedFilter_=new Lx(r.getIndex()),this.index_=r.getIndex(),this.startPost_=vC.getStartPost_(r),this.endPost_=vC.getEndPost_(r)}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(r){return this.index_.compare(this.getStartPost(),r)<=0&&this.index_.compare(r,this.getEndPost())<=0}updateChild(r,n,s,l,c,g){return this.matches(new Bt(n,s))||(s=Dt.EMPTY_NODE),this.indexedFilter_.updateChild(r,n,s,l,c,g)}updateFullNode(r,n,s){n.isLeafNode()&&(n=Dt.EMPTY_NODE);let l=n.withIndex(this.index_);l=l.updatePriority(Dt.EMPTY_NODE);const c=this;return n.forEachChild(Nn,(g,_)=>{c.matches(new Bt(g,_))||(l=l.updateImmediateChild(g,Dt.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(r,l,s)}updatePriority(r,n){return r}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(r){if(r.hasStart()){const n=r.getIndexStartName();return r.getIndex().makePost(r.getIndexStartValue(),n)}return r.getIndex().minPost()}static getEndPost_(r){if(r.hasEnd()){const n=r.getIndexEndName();return r.getIndex().makePost(r.getIndexEndValue(),n)}return r.getIndex().maxPost()}}class OH{constructor(r){this.rangedFilter_=new vC(r),this.index_=r.getIndex(),this.limit_=r.getLimit(),this.reverse_=!r.isViewFromLeft()}updateChild(r,n,s,l,c,g){return this.rangedFilter_.matches(new Bt(n,s))||(s=Dt.EMPTY_NODE),r.getImmediateChild(n).equals(s)?r:r.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(r,n,s,l,c,g):this.fullLimitUpdateChild_(r,n,s,c,g)}updateFullNode(r,n,s){let l;if(n.isLeafNode()||n.isEmpty())l=Dt.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<n.numChildren()&&n.isIndexed(this.index_)){let c;l=Dt.EMPTY_NODE.withIndex(this.index_),c=this.reverse_?n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let g=0;for(;c.hasNext()&&g<this.limit_;){const _=c.getNext();let w;if(w=this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),_)<=0:this.index_.compare(_,this.rangedFilter_.getEndPost())<=0,!w)break;l=l.updateImmediateChild(_.name,_.node),g++}}else{let c,g,_,w;if(l=n.withIndex(this.index_),l=l.updatePriority(Dt.EMPTY_NODE),this.reverse_){w=l.getReverseIterator(this.index_),c=this.rangedFilter_.getEndPost(),g=this.rangedFilter_.getStartPost();const A=this.index_.getCompare();_=(x,V)=>A(V,x)}else w=l.getIterator(this.index_),c=this.rangedFilter_.getStartPost(),g=this.rangedFilter_.getEndPost(),_=this.index_.getCompare();let T=0,S=!1;for(;w.hasNext();){const A=w.getNext();!S&&_(c,A)<=0&&(S=!0),S&&T<this.limit_&&_(A,g)<=0?T++:l=l.updateImmediateChild(A.name,Dt.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(r,l,s)}updatePriority(r,n){return r}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(r,n,s,l,c){let g;if(this.reverse_){const A=this.index_.getCompare();g=(x,V)=>A(V,x)}else g=this.index_.getCompare();const _=r;(0,F.hu)(_.numChildren()===this.limit_,"");const w=new Bt(n,s),T=this.reverse_?_.getFirstChild(this.index_):_.getLastChild(this.index_),S=this.rangedFilter_.matches(w);if(_.hasChild(n)){const A=_.getImmediateChild(n);let x=l.getChildAfterChild(this.index_,T,this.reverse_);for(;null!=x&&(x.name===n||_.hasChild(x.name));)x=l.getChildAfterChild(this.index_,x,this.reverse_);const V=null==x?1:g(x,w);if(S&&!s.isEmpty()&&V>=0)return null!=c&&c.trackChildChange(yC(n,s,A)),_.updateImmediateChild(n,s);{null!=c&&c.trackChildChange(_C(n,A));const ue=_.updateImmediateChild(n,Dt.EMPTY_NODE);return null!=x&&this.rangedFilter_.matches(x)?(null!=c&&c.trackChildChange(Gv(x.name,x.node)),ue.updateImmediateChild(x.name,x.node)):ue}}return s.isEmpty()?r:S&&g(T,w)>=0?(null!=c&&(c.trackChildChange(_C(T.name,T.node)),c.trackChildChange(Gv(n,s))),_.updateImmediateChild(n,s).updateImmediateChild(T.name,Dt.EMPTY_NODE)):r}}class HN{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Nn}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,F.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,F.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:dd}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,F.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,F.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:bu}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,F.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Nn}copy(){const r=new HN;return r.limitSet_=this.limitSet_,r.limit_=this.limit_,r.startSet_=this.startSet_,r.indexStartValue_=this.indexStartValue_,r.startNameSet_=this.startNameSet_,r.indexStartName_=this.indexStartName_,r.endSet_=this.endSet_,r.indexEndValue_=this.indexEndValue_,r.endNameSet_=this.endNameSet_,r.indexEndName_=this.indexEndName_,r.index_=this.index_,r.viewFrom_=this.viewFrom_,r}}function Vx(i,r,n){const s=i.copy();return s.startSet_=!0,void 0===r&&(r=null),s.indexStartValue_=r,null!=n?(s.startNameSet_=!0,s.indexStartName_=n):(s.startNameSet_=!1,s.indexStartName_=""),s}function Bx(i,r,n){const s=i.copy();return s.endSet_=!0,void 0===r&&(r=null),s.indexEndValue_=r,void 0!==n?(s.endNameSet_=!0,s.indexEndName_=n):(s.endNameSet_=!1,s.indexEndName_=""),s}function jN(i,r){const n=i.copy();return n.index_=r,n}function rL(i){const r={};if(i.isDefault())return r;let n;return i.index_===Nn?n="$priority":i.index_===Px?n="$value":i.index_===wu?n="$key":((0,F.hu)(i.index_ instanceof Ox,"Unrecognized index type!"),n=i.index_.toString()),r.orderBy=(0,F.Pz)(n),i.startSet_&&(r.startAt=(0,F.Pz)(i.indexStartValue_),i.startNameSet_&&(r.startAt+=","+(0,F.Pz)(i.indexStartName_))),i.endSet_&&(r.endAt=(0,F.Pz)(i.indexEndValue_),i.endNameSet_&&(r.endAt+=","+(0,F.Pz)(i.indexEndName_))),i.limitSet_&&(i.isViewFromLeft()?r.limitToFirst=i.limit_:r.limitToLast=i.limit_),r}function iL(i){const r={};if(i.startSet_&&(r.sp=i.indexStartValue_,i.startNameSet_&&(r.sn=i.indexStartName_)),i.endSet_&&(r.ep=i.indexEndValue_,i.endNameSet_&&(r.en=i.indexEndName_)),i.limitSet_){r.l=i.limit_;let n=i.viewFrom_;""===n&&(n=i.isViewFromLeft()?"l":"r"),r.vf=n}return i.index_!==Nn&&(r.i=i.index_.toString()),r}class $N extends VF{constructor(r,n,s,l){super(),this.repoInfo_=r,this.onDataUpdate_=n,this.authTokenProvider_=s,this.appCheckTokenProvider_=l,this.log_=aC("p:rest:"),this.listens_={}}reportStats(r){throw new Error("Method not implemented.")}static getListenId_(r,n){return void 0!==n?"tag$"+n:((0,F.hu)(r._queryParams.isDefault(),"should have a tag if it's not a default query."),r._path.toString())}listen(r,n,s,l){const c=r._path.toString();this.log_("Listen called for "+c+" "+r._queryIdentifier);const g=$N.getListenId_(r,s),_={};this.listens_[g]=_;const w=rL(r._queryParams);this.restRequest_(c+".json",w,(T,S)=>{let A=S;if(404===T&&(A=null,T=null),null===T&&this.onDataUpdate_(c,A,!1,s),(0,F.DV)(this.listens_,g)===_){let x;x=T?401===T?"permission_denied":"rest_error:"+T:"ok",l(x,null)}})}unlisten(r,n){const s=$N.getListenId_(r,n);delete this.listens_[s]}get(r){const n=rL(r._queryParams),s=r._path.toString(),l=new F.BH;return this.restRequest_(s+".json",n,(c,g)=>{let _=g;404===c&&(_=null,c=null),null===c?(this.onDataUpdate_(s,_,!1,null),l.resolve(_)):l.reject(new Error(_))}),l.promise}refreshAuthToken(r){}restRequest_(r,n={},s){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([l,c])=>{l&&l.accessToken&&(n.auth=l.accessToken),c&&c.token&&(n.ac=c.token);const g=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+r+"?ns="+this.repoInfo_.namespace+(0,F.xO)(n);this.log_("Sending REST request for "+g);const _=new XMLHttpRequest;_.onreadystatechange=()=>{if(s&&4===_.readyState){this.log_("REST Response for "+g+" received. status:",_.status,"response:",_.responseText);let w=null;if(_.status>=200&&_.status<300){try{w=(0,F.cI)(_.responseText)}catch(T){ws("Failed to parse JSON response for "+g+": "+_.responseText)}s(null,w)}else 401!==_.status&&404!==_.status&&ws("Got unsuccessful REST response for "+g+" Status: "+_.status),s(_.status);s=null}},_.open("GET",g,!0),_.send()})}}class UH{constructor(){this.rootNode_=Dt.EMPTY_NODE}getNode(r){return this.rootNode_.getChild(r)}updateSnapshot(r,n){this.rootNode_=this.rootNode_.updateChild(r,n)}}function GN(){return{value:null,children:new Map}}function Wv(i,r,n){if(Lt(r))i.value=n,i.children.clear();else if(null!==i.value)i.value=i.value.updateChild(r,n);else{const s=Ft(r);i.children.has(s)||i.children.set(s,GN()),Wv(i.children.get(s),r=vn(r),n)}}function Ux(i,r){if(Lt(r))return i.value=null,i.children.clear(),!0;if(null!==i.value){if(i.value.isLeafNode())return!1;{const n=i.value;return i.value=null,n.forEachChild(Nn,(s,l)=>{Wv(i,new Xt(s),l)}),Ux(i,r)}}if(i.children.size>0){const n=Ft(r);return r=vn(r),i.children.has(n)&&Ux(i.children.get(n),r)&&i.children.delete(n),0===i.children.size}return!0}function Hx(i,r,n){null!==i.value?n(r,i.value):function(i,r){i.children.forEach((n,s)=>{r(s,n)})}(i,(s,l)=>{Hx(l,new Xt(r.toString()+"/"+s),n)})}class jH{constructor(r){this.collection_=r,this.last_=null}get(){const r=this.collection_.get(),n=Object.assign({},r);return this.last_&&fi(this.last_,(s,l)=>{n[s]=n[s]-l}),this.last_=r,n}}class WH{constructor(r,n){this.server_=n,this.statsToReport_={},this.statsListener_=new jH(r);const s=1e4+2e4*Math.random();uC(this.reportStats_.bind(this),Math.floor(s))}reportStats_(){const r=this.statsListener_.get(),n={};let s=!1;fi(r,(l,c)=>{c>0&&(0,F.r3)(this.statsToReport_,l)&&(n[l]=c,s=!0)}),s&&this.server_.reportStats(n),uC(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var na=(()=>(function(i){i[i.OVERWRITE=0]="OVERWRITE",i[i.MERGE=1]="MERGE",i[i.ACK_USER_WRITE=2]="ACK_USER_WRITE",i[i.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(na||(na={})),na))();function Gx(i){return{fromUser:!1,fromServer:!0,queryId:i,tagged:!0}}class WN{constructor(r,n,s){this.path=r,this.affectedTree=n,this.revert=s,this.type=na.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(r){if(Lt(this.path)){if(null!=this.affectedTree.value)return(0,F.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new Xt(r));return new WN(Zt(),n,this.revert)}}return(0,F.hu)(Ft(this.path)===r,"operationForChild called for unrelated child."),new WN(vn(this.path),this.affectedTree,this.revert)}}class bC{constructor(r,n){this.source=r,this.path=n,this.type=na.LISTEN_COMPLETE}operationForChild(r){return Lt(this.path)?new bC(this.source,Zt()):new bC(this.source,vn(this.path))}}class wm{constructor(r,n,s){this.source=r,this.path=n,this.snap=s,this.type=na.OVERWRITE}operationForChild(r){return Lt(this.path)?new wm(this.source,Zt(),this.snap.getImmediateChild(r)):new wm(this.source,vn(this.path),this.snap)}}class qv{constructor(r,n,s){this.source=r,this.path=n,this.children=s,this.type=na.MERGE}operationForChild(r){if(Lt(this.path)){const n=this.children.subtree(new Xt(r));return n.isEmpty()?null:n.value?new wm(this.source,Zt(),n.value):new qv(this.source,Zt(),n)}return(0,F.hu)(Ft(this.path)===r,"Can't get a merge for a child not on the path of the operation"),new qv(this.source,vn(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class vf{constructor(r,n,s){this.node_=r,this.fullyInitialized_=n,this.filtered_=s}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(r){if(Lt(r))return this.isFullyInitialized()&&!this.filtered_;const n=Ft(r);return this.isCompleteForChild(n)}isCompleteForChild(r){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(r)}getNode(){return this.node_}}class qH{constructor(r){this.query_=r,this.index_=this.query_._queryParams.getIndex()}}function wC(i,r,n,s,l,c){const g=s.filter(_=>_.type===n);g.sort((_,w)=>function(i,r,n){if(null==r.childName||null==n.childName)throw(0,F.g5)("Should only compare child_ events.");const s=new Bt(r.childName,r.snapshotNode),l=new Bt(n.childName,n.snapshotNode);return i.index_.compare(s,l)}(i,_,w)),g.forEach(_=>{const w=function(i,r,n){return"value"===r.type||"child_removed"===r.type||(r.prevName=n.getPredecessorChildName(r.childName,r.snapshotNode,i.index_)),r}(i,_,c);l.forEach(T=>{T.respondsTo(_.type)&&r.push(T.createEvent(w,i.query_))})})}function qN(i,r){return{eventCache:i,serverCache:r}}function CC(i,r,n,s){return qN(new vf(r,n,s),i.serverCache)}function oL(i,r,n,s){return qN(i.eventCache,new vf(r,n,s))}function zN(i){return i.eventCache.isFullyInitialized()?i.eventCache.getNode():null}function Cm(i){return i.serverCache.isFullyInitialized()?i.serverCache.getNode():null}let Wx;class Sn{constructor(r,n=(()=>(Wx||(Wx=new Ws(x3)),Wx))()){this.value=r,this.children=n}static fromObject(r){let n=new Sn(null);return fi(r,(s,l)=>{n=n.set(new Xt(s),l)}),n}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(r,n){if(null!=this.value&&n(this.value))return{path:Zt(),value:this.value};if(Lt(r))return null;{const s=Ft(r),l=this.children.get(s);if(null!==l){const c=l.findRootMostMatchingPathAndValue(vn(r),n);return null!=c?{path:Gn(new Xt(s),c.path),value:c.value}:null}return null}}findRootMostValueAndPath(r){return this.findRootMostMatchingPathAndValue(r,()=>!0)}subtree(r){if(Lt(r))return this;{const n=Ft(r),s=this.children.get(n);return null!==s?s.subtree(vn(r)):new Sn(null)}}set(r,n){if(Lt(r))return new Sn(n,this.children);{const s=Ft(r),c=(this.children.get(s)||new Sn(null)).set(vn(r),n),g=this.children.insert(s,c);return new Sn(this.value,g)}}remove(r){if(Lt(r))return this.children.isEmpty()?new Sn(null):new Sn(null,this.children);{const n=Ft(r),s=this.children.get(n);if(s){const l=s.remove(vn(r));let c;return c=l.isEmpty()?this.children.remove(n):this.children.insert(n,l),null===this.value&&c.isEmpty()?new Sn(null):new Sn(this.value,c)}return this}}get(r){if(Lt(r))return this.value;{const n=Ft(r),s=this.children.get(n);return s?s.get(vn(r)):null}}setTree(r,n){if(Lt(r))return n;{const s=Ft(r),c=(this.children.get(s)||new Sn(null)).setTree(vn(r),n);let g;return g=c.isEmpty()?this.children.remove(s):this.children.insert(s,c),new Sn(this.value,g)}}fold(r){return this.fold_(Zt(),r)}fold_(r,n){const s={};return this.children.inorderTraversal((l,c)=>{s[l]=c.fold_(Gn(r,l),n)}),n(r,this.value,s)}findOnPath(r,n){return this.findOnPath_(r,Zt(),n)}findOnPath_(r,n,s){const l=!!this.value&&s(n,this.value);if(l)return l;if(Lt(r))return null;{const c=Ft(r),g=this.children.get(c);return g?g.findOnPath_(vn(r),Gn(n,c),s):null}}foreachOnPath(r,n){return this.foreachOnPath_(r,Zt(),n)}foreachOnPath_(r,n,s){if(Lt(r))return this;{this.value&&s(n,this.value);const l=Ft(r),c=this.children.get(l);return c?c.foreachOnPath_(vn(r),Gn(n,l),s):new Sn(null)}}foreach(r){this.foreach_(Zt(),r)}foreach_(r,n){this.children.inorderTraversal((s,l)=>{l.foreach_(Gn(r,s),n)}),this.value&&n(r,this.value)}foreachChild(r){this.children.inorderTraversal((n,s)=>{s.value&&r(n,s.value)})}}class il{constructor(r){this.writeTree_=r}static empty(){return new il(new Sn(null))}}function EC(i,r,n){if(Lt(r))return new il(new Sn(n));{const s=i.writeTree_.findRootMostValueAndPath(r);if(null!=s){const l=s.path;let c=s.value;const g=Cs(l,r);return c=c.updateChild(g,n),new il(i.writeTree_.set(l,c))}{const l=new Sn(n),c=i.writeTree_.setTree(r,l);return new il(c)}}}function qx(i,r,n){let s=i;return fi(n,(l,c)=>{s=EC(s,Gn(r,l),c)}),s}function aL(i,r){if(Lt(r))return il.empty();{const n=i.writeTree_.setTree(r,new Sn(null));return new il(n)}}function zx(i,r){return null!=Em(i,r)}function Em(i,r){const n=i.writeTree_.findRootMostValueAndPath(r);return null!=n?i.writeTree_.get(n.path).getChild(Cs(n.path,r)):null}function lL(i){const r=[],n=i.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(Nn,(s,l)=>{r.push(new Bt(s,l))}):i.writeTree_.children.inorderTraversal((s,l)=>{null!=l.value&&r.push(new Bt(s,l.value))}),r}function bf(i,r){if(Lt(r))return i;{const n=Em(i,r);return new il(null!=n?new Sn(n):i.writeTree_.subtree(r))}}function Yx(i){return i.writeTree_.isEmpty()}function zv(i,r){return uL(Zt(),i.writeTree_,r)}function uL(i,r,n){if(null!=r.value)return n.updateChild(i,r.value);{let s=null;return r.children.inorderTraversal((l,c)=>{".priority"===l?((0,F.hu)(null!==c.value,"Priority writes must always be leaf nodes"),s=c.value):n=uL(Gn(i,l),c,n)}),!n.getChild(i).isEmpty()&&null!==s&&(n=n.updateChild(Gn(i,".priority"),s)),n}}function YN(i,r){return pL(r,i)}function tj(i,r){if(i.snap)return ta(i.path,r);for(const n in i.children)if(i.children.hasOwnProperty(n)&&ta(Gn(i.path,n),r))return!0;return!1}function rj(i){return i.visible}function cL(i,r,n){let s=il.empty();for(let l=0;l<i.length;++l){const c=i[l];if(r(c)){const g=c.path;let _;if(c.snap)ta(n,g)?(_=Cs(n,g),s=EC(s,_,c.snap)):ta(g,n)&&(_=Cs(g,n),s=EC(s,Zt(),c.snap.getChild(_)));else{if(!c.children)throw(0,F.g5)("WriteRecord should have .snap or .children");if(ta(n,g))_=Cs(n,g),s=qx(s,_,c.children);else if(ta(g,n))if(_=Cs(g,n),Lt(_))s=qx(s,Zt(),c.children);else{const w=(0,F.DV)(c.children,Ft(_));if(w){const T=w.getChild(vn(_));s=EC(s,Zt(),T)}}}}}return s}function dL(i,r,n,s,l){if(s||l){const c=bf(i.visibleWrites,r);return!l&&Yx(c)?n:l||null!=n||zx(c,Zt())?zv(cL(i.allWrites,function(T){return(T.visible||l)&&(!s||!~s.indexOf(T.writeId))&&(ta(T.path,r)||ta(r,T.path))},r),n||Dt.EMPTY_NODE):null}{const c=Em(i.visibleWrites,r);if(null!=c)return c;{const g=bf(i.visibleWrites,r);return Yx(g)?n:null!=n||zx(g,Zt())?zv(g,n||Dt.EMPTY_NODE):null}}}function ZN(i,r,n,s){return dL(i.writeTree,i.treePath,r,n,s)}function Zx(i,r){return function(i,r,n){let s=Dt.EMPTY_NODE;const l=Em(i.visibleWrites,r);if(l)return l.isLeafNode()||l.forEachChild(Nn,(c,g)=>{s=s.updateImmediateChild(c,g)}),s;if(n){const c=bf(i.visibleWrites,r);return n.forEachChild(Nn,(g,_)=>{const w=zv(bf(c,new Xt(g)),_);s=s.updateImmediateChild(g,w)}),lL(c).forEach(g=>{s=s.updateImmediateChild(g.name,g.node)}),s}return lL(bf(i.visibleWrites,r)).forEach(g=>{s=s.updateImmediateChild(g.name,g.node)}),s}(i.writeTree,i.treePath,r)}function hL(i,r,n,s){return function(i,r,n,s,l){(0,F.hu)(s||l,"Either existingEventSnap or existingServerSnap must exist");const c=Gn(r,n);if(zx(i.visibleWrites,c))return null;{const g=bf(i.visibleWrites,c);return Yx(g)?l.getChild(n):zv(g,l.getChild(n))}}(i.writeTree,i.treePath,r,n,s)}function KN(i,r){return function(i,r){return Em(i.visibleWrites,r)}(i.writeTree,Gn(i.treePath,r))}function Kx(i,r,n){return function(i,r,n,s){const l=Gn(r,n),c=Em(i.visibleWrites,l);return null!=c?c:s.isCompleteForChild(n)?zv(bf(i.visibleWrites,l),s.getNode().getImmediateChild(n)):null}(i.writeTree,i.treePath,r,n)}function fL(i,r){return pL(Gn(i.treePath,r),i.writeTree)}function pL(i,r){return{treePath:i,writeTree:r}}class dj{constructor(){this.changeMap=new Map}trackChildChange(r){const n=r.type,s=r.childName;(0,F.hu)("child_added"===n||"child_changed"===n||"child_removed"===n,"Only child changes supported for tracking"),(0,F.hu)(".priority"!==s,"Only non-priority child changes can be tracked.");const l=this.changeMap.get(s);if(l){const c=l.type;if("child_added"===n&&"child_removed"===c)this.changeMap.set(s,yC(s,r.snapshotNode,l.snapshotNode));else if("child_removed"===n&&"child_added"===c)this.changeMap.delete(s);else if("child_removed"===n&&"child_changed"===c)this.changeMap.set(s,_C(s,l.oldSnap));else if("child_changed"===n&&"child_added"===c)this.changeMap.set(s,Gv(s,r.snapshotNode));else{if("child_changed"!==n||"child_changed"!==c)throw(0,F.g5)("Illegal combination of changes: "+r+" occurred after "+l);this.changeMap.set(s,yC(s,r.snapshotNode,l.oldSnap))}}else this.changeMap.set(s,r)}getChanges(){return Array.from(this.changeMap.values())}}const gL=new class{getCompleteChild(r){return null}getChildAfterChild(r,n,s){return null}};class Qx{constructor(r,n,s=null){this.writes_=r,this.viewCache_=n,this.optCompleteServerCache_=s}getCompleteChild(r){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(r))return n.getNode().getImmediateChild(r);{const s=null!=this.optCompleteServerCache_?new vf(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Kx(this.writes_,r,s)}}getChildAfterChild(r,n,s){const l=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Cm(this.viewCache_),c=function(i,r,n,s,l,c){return function(i,r,n,s,l,c,g){let _;const w=bf(i.visibleWrites,r),T=Em(w,Zt());if(null!=T)_=T;else{if(null==n)return[];_=zv(w,n)}if(_=_.withIndex(g),_.isEmpty()||_.isLeafNode())return[];{const S=[],A=g.getCompare(),x=c?_.getReverseIteratorFrom(s,g):_.getIteratorFrom(s,g);let V=x.getNext();for(;V&&S.length<l;)0!==A(V,s)&&S.push(V),V=x.getNext();return S}}(i.writeTree,i.treePath,r,n,s,l,c)}(this.writes_,l,n,1,s,r);return 0===c.length?null:c[0]}}function mL(i,r,n,s,l,c){const g=r.eventCache;if(null!=KN(s,n))return r;{let _,w;if(Lt(n))if((0,F.hu)(r.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),r.serverCache.isFiltered()){const T=Cm(r),A=Zx(s,T instanceof Dt?T:Dt.EMPTY_NODE);_=i.filter.updateFullNode(r.eventCache.getNode(),A,c)}else{const T=ZN(s,Cm(r));_=i.filter.updateFullNode(r.eventCache.getNode(),T,c)}else{const T=Ft(n);if(".priority"===T){(0,F.hu)(1===yf(n),"Can't have a priority with additional path components");const S=g.getNode();w=r.serverCache.getNode();const A=hL(s,n,S,w);_=null!=A?i.filter.updatePriority(S,A):g.getNode()}else{const S=vn(n);let A;if(g.isCompleteForChild(T)){w=r.serverCache.getNode();const x=hL(s,n,g.getNode(),w);A=null!=x?g.getNode().getImmediateChild(T).updateChild(S,x):g.getNode().getImmediateChild(T)}else A=Kx(s,T,r.serverCache);_=null!=A?i.filter.updateChild(g.getNode(),T,A,S,l,c):g.getNode()}}return CC(r,_,g.isFullyInitialized()||Lt(n),i.filter.filtersNodes())}}function QN(i,r,n,s,l,c,g,_){const w=r.serverCache;let T;const S=g?i.filter:i.filter.getIndexedFilter();if(Lt(n))T=S.updateFullNode(w.getNode(),s,null);else if(S.filtersNodes()&&!w.isFiltered()){const V=w.getNode().updateChild(n,s);T=S.updateFullNode(w.getNode(),V,null)}else{const V=Ft(n);if(!w.isCompleteForPath(n)&&yf(n)>1)return r;const z=vn(n),Ae=w.getNode().getImmediateChild(V).updateChild(z,s);T=".priority"===V?S.updatePriority(w.getNode(),Ae):S.updateChild(w.getNode(),V,Ae,z,gL,null)}const A=oL(r,T,w.isFullyInitialized()||Lt(n),S.filtersNodes());return mL(i,A,n,l,new Qx(l,A,c),_)}function Jx(i,r,n,s,l,c,g){const _=r.eventCache;let w,T;const S=new Qx(l,r,c);if(Lt(n))T=i.filter.updateFullNode(r.eventCache.getNode(),s,g),w=CC(r,T,!0,i.filter.filtersNodes());else{const A=Ft(n);if(".priority"===A)T=i.filter.updatePriority(r.eventCache.getNode(),s),w=CC(r,T,_.isFullyInitialized(),_.isFiltered());else{const x=vn(n),V=_.getNode().getImmediateChild(A);let z;if(Lt(x))z=s;else{const ue=S.getCompleteChild(A);z=null!=ue?".priority"===Sx(x)&&ue.getChild(jF(x)).isEmpty()?ue:ue.updateChild(x,s):Dt.EMPTY_NODE}w=V.equals(z)?r:CC(r,i.filter.updateChild(_.getNode(),A,z,x,S,g),_.isFullyInitialized(),i.filter.filtersNodes())}}return w}function _L(i,r){return i.eventCache.isCompleteForChild(r)}function yL(i,r,n){return n.foreach((s,l)=>{r=r.updateChild(s,l)}),r}function Xx(i,r,n,s,l,c,g,_){if(r.serverCache.getNode().isEmpty()&&!r.serverCache.isFullyInitialized())return r;let T,w=r;T=Lt(n)?s:new Sn(null).setTree(n,s);const S=r.serverCache.getNode();return T.children.inorderTraversal((A,x)=>{if(S.hasChild(A)){const z=yL(0,r.serverCache.getNode().getImmediateChild(A),x);w=QN(i,w,new Xt(A),z,l,c,g,_)}}),T.children.inorderTraversal((A,x)=>{const V=!r.serverCache.isCompleteForChild(A)&&void 0===x.value;if(!S.hasChild(A)&&!V){const ue=yL(0,r.serverCache.getNode().getImmediateChild(A),x);w=QN(i,w,new Xt(A),ue,l,c,g,_)}}),w}class wj{constructor(r,n){this.query_=r,this.eventRegistrations_=[];const s=this.query_._queryParams,l=new Lx(s.getIndex()),c=function(i){return i.loadsAllData()?new Lx(i.getIndex()):i.hasLimit()?new OH(i):new vC(i)}(s);this.processor_=function(i){return{filter:i}}(c);const g=n.serverCache,_=n.eventCache,w=l.updateFullNode(Dt.EMPTY_NODE,g.getNode(),null),T=c.updateFullNode(Dt.EMPTY_NODE,_.getNode(),null),S=new vf(w,g.isFullyInitialized(),l.filtersNodes()),A=new vf(T,_.isFullyInitialized(),c.filtersNodes());this.viewCache_=qN(A,S),this.eventGenerator_=new qH(this.query_)}get query(){return this.query_}}function Dj(i,r){const n=Cm(i.viewCache_);return n&&(i.query._queryParams.loadsAllData()||!Lt(r)&&!n.getImmediateChild(Ft(r)).isEmpty())?n.getChild(r):null}function vL(i){return 0===i.eventRegistrations_.length}function bL(i,r,n){const s=[];if(n){(0,F.hu)(null==r,"A cancel should cancel all event registrations.");const l=i.query._path;i.eventRegistrations_.forEach(c=>{const g=c.createCancelEvent(n,l);g&&s.push(g)})}if(r){let l=[];for(let c=0;c<i.eventRegistrations_.length;++c){const g=i.eventRegistrations_[c];if(g.matches(r)){if(r.hasAnyCallback()){l=l.concat(i.eventRegistrations_.slice(c+1));break}}else l.push(g)}i.eventRegistrations_=l}else i.eventRegistrations_=[];return s}function wL(i,r,n,s){r.type===na.MERGE&&null!==r.source.queryId&&((0,F.hu)(Cm(i.viewCache_),"We should always have a full cache before handling merges"),(0,F.hu)(zN(i.viewCache_),"Missing event cache, even though we have a server cache"));const l=i.viewCache_,c=function(i,r,n,s,l){const c=new dj;let g,_;if(n.type===na.OVERWRITE){const T=n;T.source.fromUser?g=Jx(i,r,T.path,T.snap,s,l,c):((0,F.hu)(T.source.fromServer,"Unknown source."),_=T.source.tagged||r.serverCache.isFiltered()&&!Lt(T.path),g=QN(i,r,T.path,T.snap,s,l,_,c))}else if(n.type===na.MERGE){const T=n;T.source.fromUser?g=function(i,r,n,s,l,c,g){let _=r;return s.foreach((w,T)=>{const S=Gn(n,w);_L(r,Ft(S))&&(_=Jx(i,_,S,T,l,c,g))}),s.foreach((w,T)=>{const S=Gn(n,w);_L(r,Ft(S))||(_=Jx(i,_,S,T,l,c,g))}),_}(i,r,T.path,T.children,s,l,c):((0,F.hu)(T.source.fromServer,"Unknown source."),_=T.source.tagged||r.serverCache.isFiltered(),g=Xx(i,r,T.path,T.children,s,l,_,c))}else if(n.type===na.ACK_USER_WRITE){const T=n;g=T.revert?function(i,r,n,s,l,c){let g;if(null!=KN(s,n))return r;{const _=new Qx(s,r,l),w=r.eventCache.getNode();let T;if(Lt(n)||".priority"===Ft(n)){let S;if(r.serverCache.isFullyInitialized())S=ZN(s,Cm(r));else{const A=r.serverCache.getNode();(0,F.hu)(A instanceof Dt,"serverChildren would be complete if leaf node"),S=Zx(s,A)}S=S,T=i.filter.updateFullNode(w,S,c)}else{const S=Ft(n);let A=Kx(s,S,r.serverCache);null==A&&r.serverCache.isCompleteForChild(S)&&(A=w.getImmediateChild(S)),T=null!=A?i.filter.updateChild(w,S,A,vn(n),_,c):r.eventCache.getNode().hasChild(S)?i.filter.updateChild(w,S,Dt.EMPTY_NODE,vn(n),_,c):w,T.isEmpty()&&r.serverCache.isFullyInitialized()&&(g=ZN(s,Cm(r)),g.isLeafNode()&&(T=i.filter.updateFullNode(T,g,c)))}return g=r.serverCache.isFullyInitialized()||null!=KN(s,Zt()),CC(r,T,g,i.filter.filtersNodes())}}(i,r,T.path,s,l,c):function(i,r,n,s,l,c,g){if(null!=KN(l,n))return r;const _=r.serverCache.isFiltered(),w=r.serverCache;if(null!=s.value){if(Lt(n)&&w.isFullyInitialized()||w.isCompleteForPath(n))return QN(i,r,n,w.getNode().getChild(n),l,c,_,g);if(Lt(n)){let T=new Sn(null);return w.getNode().forEachChild(wu,(S,A)=>{T=T.set(new Xt(S),A)}),Xx(i,r,n,T,l,c,_,g)}return r}{let T=new Sn(null);return s.foreach((S,A)=>{const x=Gn(n,S);w.isCompleteForPath(x)&&(T=T.set(S,w.getNode().getChild(x)))}),Xx(i,r,n,T,l,c,_,g)}}(i,r,T.path,T.affectedTree,s,l,c)}else{if(n.type!==na.LISTEN_COMPLETE)throw(0,F.g5)("Unknown operation type: "+n.type);g=function(i,r,n,s,l){const c=r.serverCache;return mL(i,oL(r,c.getNode(),c.isFullyInitialized()||Lt(n),c.isFiltered()),n,s,gL,l)}(i,r,n.path,s,c)}const w=c.getChanges();return function(i,r,n){const s=r.eventCache;if(s.isFullyInitialized()){const l=s.getNode().isLeafNode()||s.getNode().isEmpty(),c=zN(i);(n.length>0||!i.eventCache.isFullyInitialized()||l&&!s.getNode().equals(c)||!s.getNode().getPriority().equals(c.getPriority()))&&n.push(nL(zN(r)))}}(r,g,w),{viewCache:g,changes:w}}(i.processor_,l,r,n,s);return function(i,r){(0,F.hu)(r.eventCache.getNode().isIndexed(i.filter.getIndex()),"Event snap not indexed"),(0,F.hu)(r.serverCache.getNode().isIndexed(i.filter.getIndex()),"Server snap not indexed")}(i.processor_,c.viewCache),(0,F.hu)(c.viewCache.serverCache.isFullyInitialized()||!l.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),i.viewCache_=c.viewCache,CL(i,c.changes,c.viewCache.eventCache.getNode(),null)}function CL(i,r,n,s){return function(i,r,n,s){const l=[],c=[];return r.forEach(g=>{"child_changed"===g.type&&i.index_.indexedValueChanged(g.oldSnap,g.snapshotNode)&&c.push(function(i,r){return{type:"child_moved",snapshotNode:r,childName:i}}(g.childName,g.snapshotNode))}),wC(i,l,"child_removed",r,s,n),wC(i,l,"child_added",r,s,n),wC(i,l,"child_moved",c,s,n),wC(i,l,"child_changed",r,s,n),wC(i,l,"value",r,s,n),l}(i.eventGenerator_,r,n,s?[s]:i.eventRegistrations_)}let JN,eS;class EL{constructor(){this.views=new Map}}function ek(i,r,n,s){const l=r.source.queryId;if(null!==l){const c=i.views.get(l);return(0,F.hu)(null!=c,"SyncTree gave us an op for an invalid query."),wL(c,r,n,s)}{let c=[];for(const g of i.views.values())c=c.concat(wL(g,r,n,s));return c}}function DL(i,r,n,s,l){const g=i.views.get(r._queryIdentifier);if(!g){let _=ZN(n,l?s:null),w=!1;_?w=!0:s instanceof Dt?(_=Zx(n,s),w=!1):(_=Dt.EMPTY_NODE,w=!1);const T=qN(new vf(_,w,!1),new vf(s,l,!1));return new wj(r,T)}return g}function IL(i){const r=[];for(const n of i.views.values())n.query._queryParams.loadsAllData()||r.push(n);return r}function wf(i,r){let n=null;for(const s of i.views.values())n=n||Dj(s,r);return n}function TL(i,r){return r._queryParams.loadsAllData()?XN(i):i.views.get(r._queryIdentifier)}function NL(i,r){return null!=TL(i,r)}function Cf(i){return null!=XN(i)}function XN(i){for(const r of i.views.values())if(r.query._queryParams.loadsAllData())return r;return null}let Oj=1;class SL{constructor(r){this.listenProvider_=r,this.syncPointTree_=new Sn(null),this.pendingWriteTree_={visibleWrites:il.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function tk(i,r,n,s,l){return function(i,r,n,s,l){(0,F.hu)(s>i.lastWriteId,"Stacking an older write on top of newer ones"),void 0===l&&(l=!0),i.allWrites.push({path:r,snap:n,writeId:s,visible:l}),l&&(i.visibleWrites=EC(i.visibleWrites,r,n)),i.lastWriteId=s}(i.pendingWriteTree_,r,n,s,l),l?Yv(i,new wm({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},r,n)):[]}function Ef(i,r,n=!1){const s=function(i,r){for(let n=0;n<i.allWrites.length;n++){const s=i.allWrites[n];if(s.writeId===r)return s}return null}(i.pendingWriteTree_,r);if(function(i,r){const n=i.allWrites.findIndex(_=>_.writeId===r);(0,F.hu)(n>=0,"removeWrite called with nonexistent writeId.");const s=i.allWrites[n];i.allWrites.splice(n,1);let l=s.visible,c=!1,g=i.allWrites.length-1;for(;l&&g>=0;){const _=i.allWrites[g];_.visible&&(g>=n&&tj(_,s.path)?l=!1:ta(s.path,_.path)&&(c=!0)),g--}return!!l&&(c?(function(i){i.visibleWrites=cL(i.allWrites,rj,Zt()),i.lastWriteId=i.allWrites.length>0?i.allWrites[i.allWrites.length-1].writeId:-1}(i),!0):(s.snap?i.visibleWrites=aL(i.visibleWrites,s.path):fi(s.children,w=>{i.visibleWrites=aL(i.visibleWrites,Gn(s.path,w))}),!0))}(i.pendingWriteTree_,r)){let c=new Sn(null);return null!=s.snap?c=c.set(Zt(),!0):fi(s.children,g=>{c=c.set(new Xt(g),!0)}),Yv(i,new WN(s.path,c,n))}return[]}function DC(i,r,n){return Yv(i,new wm({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},r,n))}function nk(i,r,n,s){const l=r._path,c=i.syncPointTree_.get(l);let g=[];if(c&&("default"===r._queryIdentifier||NL(c,r))){const _=function(i,r,n,s){const l=r._queryIdentifier,c=[];let g=[];const _=Cf(i);if("default"===l)for(const[w,T]of i.views.entries())g=g.concat(bL(T,n,s)),vL(T)&&(i.views.delete(w),T.query._queryParams.loadsAllData()||c.push(T.query));else{const w=i.views.get(l);w&&(g=g.concat(bL(w,n,s)),vL(w)&&(i.views.delete(l),w.query._queryParams.loadsAllData()||c.push(w.query)))}return _&&!Cf(i)&&c.push(new((0,F.hu)(JN,"Reference.ts has not been loaded"),JN)(r._repo,r._path)),{removed:c,events:g}}(c,r,n,s);(function(i){return 0===i.views.size})(c)&&(i.syncPointTree_=i.syncPointTree_.remove(l));const w=_.removed;g=_.events;const T=-1!==w.findIndex(A=>A._queryParams.loadsAllData()),S=i.syncPointTree_.findOnPath(l,(A,x)=>Cf(x));if(T&&!S){const A=i.syncPointTree_.subtree(l);if(!A.isEmpty()){const x=function(i){return i.fold((r,n,s)=>{if(n&&Cf(n))return[XN(n)];{let l=[];return n&&(l=IL(n)),fi(s,(c,g)=>{l=l.concat(g)}),l}})}(A);for(let V=0;V<x.length;++V){const z=x[V],ue=z.query,Ae=xL(i,z);i.listenProvider_.startListening(IC(ue),nS(i,ue),Ae.hashFn,Ae.onComplete)}}}if(!S&&w.length>0&&!s)if(T){const A=null;i.listenProvider_.stopListening(IC(r),A)}else w.forEach(A=>{const x=i.queryToTagMap.get(rS(A));i.listenProvider_.stopListening(IC(A),x)});!function(i,r){for(let n=0;n<r.length;++n){const s=r[n];if(!s._queryParams.loadsAllData()){const l=rS(s),c=i.queryToTagMap.get(l);i.queryToTagMap.delete(l),i.tagToQueryMap.delete(c)}}}(i,w)}return g}function AL(i,r,n){const s=r._path;let l=null,c=!1;i.syncPointTree_.foreachOnPath(s,(A,x)=>{const V=Cs(A,s);l=l||wf(x,V),c=c||Cf(x)});let _,g=i.syncPointTree_.get(s);g?(c=c||Cf(g),l=l||wf(g,Zt())):(g=new EL,i.syncPointTree_=i.syncPointTree_.set(s,g)),null!=l?_=!0:(_=!1,l=Dt.EMPTY_NODE,i.syncPointTree_.subtree(s).foreachChild((x,V)=>{const z=wf(V,Zt());z&&(l=l.updateImmediateChild(x,z))}));const w=NL(g,r);if(!w&&!r._queryParams.loadsAllData()){const A=rS(r);(0,F.hu)(!i.queryToTagMap.has(A),"View does not exist, but we have a tag");const x=Oj++;i.queryToTagMap.set(A,x),i.tagToQueryMap.set(x,A)}let S=function(i,r,n,s,l,c){const g=DL(i,r,s,l,c);return i.views.has(r._queryIdentifier)||i.views.set(r._queryIdentifier,g),function(i,r){i.eventRegistrations_.push(r)}(g,n),function(i,r){const n=i.viewCache_.eventCache,s=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(Nn,(c,g)=>{s.push(Gv(c,g))}),n.isFullyInitialized()&&s.push(nL(n.getNode())),CL(i,s,n.getNode(),r)}(g,n)}(g,r,n,YN(i.pendingWriteTree_,s),l,_);if(!w&&!c){const A=TL(g,r);S=S.concat(function(i,r,n){const s=r._path,l=nS(i,r),c=xL(i,n),g=i.listenProvider_.startListening(IC(r),l,c.hashFn,c.onComplete),_=i.syncPointTree_.subtree(s);if(l)(0,F.hu)(!Cf(_.value),"If we're adding a query, it shouldn't be shadowed");else{const w=_.fold((T,S,A)=>{if(!Lt(T)&&S&&Cf(S))return[XN(S).query];{let x=[];return S&&(x=x.concat(IL(S).map(V=>V.query))),fi(A,(V,z)=>{x=x.concat(z)}),x}});for(let T=0;T<w.length;++T){const S=w[T];i.listenProvider_.stopListening(IC(S),nS(i,S))}}return g}(i,r,A))}return S}function tS(i,r,n){const l=i.pendingWriteTree_,c=i.syncPointTree_.findOnPath(r,(g,_)=>{const T=wf(_,Cs(g,r));if(T)return T});return dL(l,r,c,n,!0)}function Yv(i,r){return ML(r,i.syncPointTree_,null,YN(i.pendingWriteTree_,Zt()))}function ML(i,r,n,s){if(Lt(i.path))return RL(i,r,n,s);{const l=r.get(Zt());null==n&&null!=l&&(n=wf(l,Zt()));let c=[];const g=Ft(i.path),_=i.operationForChild(g),w=r.children.get(g);if(w&&_){const T=n?n.getImmediateChild(g):null,S=fL(s,g);c=c.concat(ML(_,w,T,S))}return l&&(c=c.concat(ek(l,i,s,n))),c}}function RL(i,r,n,s){const l=r.get(Zt());null==n&&null!=l&&(n=wf(l,Zt()));let c=[];return r.children.inorderTraversal((g,_)=>{const w=n?n.getImmediateChild(g):null,T=fL(s,g),S=i.operationForChild(g);S&&(c=c.concat(RL(S,_,w,T)))}),l&&(c=c.concat(ek(l,i,s,n))),c}function xL(i,r){const n=r.query,s=nS(i,n);return{hashFn:()=>(function(i){return i.viewCache_.serverCache.getNode()}(r)||Dt.EMPTY_NODE).hash(),onComplete:l=>{if("ok"===l)return s?function(i,r,n){const s=rk(i,n);if(s){const l=ik(s),c=l.path,g=l.queryId,_=Cs(c,r);return sk(i,c,new bC(Gx(g),_))}return[]}(i,n._path,s):function(i,r){return Yv(i,new bC({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},r))}(i,n._path);{const c=function(i,r){let n="Unknown Error";"too_big"===i?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===i?n="Client doesn't have permission to access the desired data.":"unavailable"===i&&(n="The service is unavailable");const s=new Error(i+" at "+r._path.toString()+": "+n);return s.code=i.toUpperCase(),s}(l,n);return nk(i,n,null,c)}}}}function nS(i,r){const n=rS(r);return i.queryToTagMap.get(n)}function rS(i){return i._path.toString()+"$"+i._queryIdentifier}function rk(i,r){return i.tagToQueryMap.get(r)}function ik(i){const r=i.indexOf("$");return(0,F.hu)(-1!==r&&r<i.length-1,"Bad queryKey."),{queryId:i.substr(r+1),path:new Xt(i.substr(0,r))}}function sk(i,r,n){const s=i.syncPointTree_.get(r);return(0,F.hu)(s,"Missing sync point for query tag that we're tracking"),ek(s,n,YN(i.pendingWriteTree_,r),null)}function IC(i){return i._queryParams.loadsAllData()&&!i._queryParams.isDefault()?new((0,F.hu)(eS,"Reference.ts has not been loaded"),eS)(i._repo,i._path):i}class ok{constructor(r){this.node_=r}getImmediateChild(r){const n=this.node_.getImmediateChild(r);return new ok(n)}node(){return this.node_}}class ak{constructor(r,n){this.syncTree_=r,this.path_=n}getImmediateChild(r){const n=Gn(this.path_,r);return new ak(this.syncTree_,n)}node(){return tS(this.syncTree_,this.path_)}}const kL=function(i,r,n){return i&&"object"==typeof i?((0,F.hu)(".sv"in i,"Unexpected leaf node or priority contents"),"string"==typeof i[".sv"]?zj(i[".sv"],r,n):"object"==typeof i[".sv"]?Yj(i[".sv"],r):void(0,F.hu)(!1,"Unexpected server value: "+JSON.stringify(i,null,2))):i},zj=function(i,r,n){switch(i){case"timestamp":return n.timestamp;default:(0,F.hu)(!1,"Unexpected server value: "+i)}},Yj=function(i,r,n){i.hasOwnProperty("increment")||(0,F.hu)(!1,"Unexpected server value: "+JSON.stringify(i,null,2));const s=i.increment;"number"!=typeof s&&(0,F.hu)(!1,"Unexpected increment value: "+s);const l=r.node();if((0,F.hu)(null!=l,"Expected ChildrenNode.EMPTY_NODE for nulls"),!l.isLeafNode())return s;const g=l.getValue();return"number"!=typeof g?s:g+s},OL=function(i,r,n,s){return uk(r,new ak(n,i),s)},lk=function(i,r,n){return uk(i,new ok(r),n)};function uk(i,r,n){const s=i.getPriority().val(),l=kL(s,r.getImmediateChild(".priority"),n);let c;if(i.isLeafNode()){const g=i,_=kL(g.getValue(),r,n);return _!==g.getValue()||l!==g.getPriority().val()?new Hv(_,Jn(l)):i}{const g=i;return c=g,l!==g.getPriority().val()&&(c=c.updatePriority(new Hv(l))),g.forEachChild(Nn,(_,w)=>{const T=uk(w,r.getImmediateChild(_),n);T!==w&&(c=c.updateImmediateChild(_,T))}),c}}class ck{constructor(r="",n=null,s={children:{},childCount:0}){this.name=r,this.parent=n,this.node=s}}function iS(i,r){let n=r instanceof Xt?r:new Xt(r),s=i,l=Ft(n);for(;null!==l;){const c=(0,F.DV)(s.node.children,l)||{children:{},childCount:0};s=new ck(l,s,c),n=vn(n),l=Ft(n)}return s}function Dm(i){return i.node.value}function dk(i,r){i.node.value=r,hk(i)}function PL(i){return i.node.childCount>0}function sS(i,r){fi(i.node.children,(n,s)=>{r(new ck(n,i,s))})}function FL(i,r,n,s){n&&!s&&r(i),sS(i,l=>{FL(l,r,!0,s)}),n&&s&&r(i)}function TC(i){return new Xt(null===i.parent?i.name:TC(i.parent)+"/"+i.name)}function hk(i){null!==i.parent&&function(i,r,n){const s=function(i){return void 0===Dm(i)&&!PL(i)}(n),l=(0,F.r3)(i.node.children,r);s&&l?(delete i.node.children[r],i.node.childCount--,hk(i)):!s&&!l&&(i.node.children[r]=n.node,i.node.childCount++,hk(i))}(i.parent,i.name,i)}const Jj=/[\[\].#$\/\u0000-\u001F\u007F]/,Xj=/[\[\].#$\u0000-\u001F\u007F]/,fk=10485760,oS=function(i){return"string"==typeof i&&0!==i.length&&!Jj.test(i)},LL=function(i){return"string"==typeof i&&0!==i.length&&!Xj.test(i)},NC=function(i){return null===i||"string"==typeof i||"number"==typeof i&&!kN(i)||i&&"object"==typeof i&&(0,F.r3)(i,".sv")},Cu=function(i,r,n,s){s&&void 0===r||SC((0,F.gK)(i,"value"),r,n)},SC=function(i,r,n){const s=n instanceof Xt?new fH(n,i):n;if(void 0===r)throw new Error(i+"contains undefined "+vm(s));if("function"==typeof r)throw new Error(i+"contains a function "+vm(s)+" with contents = "+r.toString());if(kN(r))throw new Error(i+"contains "+r.toString()+" "+vm(s));if("string"==typeof r&&r.length>fk/3&&(0,F.ug)(r)>fk)throw new Error(i+"contains a string greater than "+fk+" utf8 bytes "+vm(s)+" ('"+r.substring(0,50)+"...')");if(r&&"object"==typeof r){let l=!1,c=!1;if(fi(r,(g,_)=>{if(".value"===g)l=!0;else if(".priority"!==g&&".sv"!==g&&(c=!0,!oS(g)))throw new Error(i+" contains an invalid key ("+g+") "+vm(s)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function(i,r){i.parts_.length>0&&(i.byteLength_+=1),i.parts_.push(r),i.byteLength_+=(0,F.ug)(r),$F(i)})(s,g),SC(i,_,s),function(i){const r=i.parts_.pop();i.byteLength_-=(0,F.ug)(r),i.parts_.length>0&&(i.byteLength_-=1)}(s)}),l&&c)throw new Error(i+' contains ".value" child '+vm(s)+" in addition to actual children.")}},VL=function(i,r,n,s){if(s&&void 0===r)return;const l=(0,F.gK)(i,"values");if(!r||"object"!=typeof r||Array.isArray(r))throw new Error(l+" must be an object containing the children to replace.");const c=[];fi(r,(g,_)=>{const w=new Xt(g);if(SC(l,_,Gn(n,w)),".priority"===Sx(w)&&!NC(_))throw new Error(l+"contains an invalid value for '"+w.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");c.push(w)}),function(i,r){let n,s;for(n=0;n<r.length;n++){s=r[n];const c=fC(s);for(let g=0;g<c.length;g++)if((".priority"!==c[g]||g!==c.length-1)&&!oS(c[g]))throw new Error(i+"contains an invalid key ("+c[g]+") in path "+s.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}r.sort(hH);let l=null;for(n=0;n<r.length;n++){if(s=r[n],null!==l&&ta(l,s))throw new Error(i+"contains a path "+l.toString()+" that is ancestor of another path "+s.toString());l=s}}(l,c)},pk=function(i,r,n){if(!n||void 0!==r){if(kN(r))throw new Error((0,F.gK)(i,"priority")+"is "+r.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!NC(r))throw new Error((0,F.gK)(i,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},AC=function(i,r,n,s){if(!(s&&void 0===n||oS(n)))throw new Error((0,F.gK)(i,r)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},MC=function(i,r,n,s){if(!(s&&void 0===n||LL(n)))throw new Error((0,F.gK)(i,r)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},ra=function(i,r){if(".info"===Ft(r))throw new Error(i+" failed = Can't modify data under /.info/")},BL=function(i,r){const n=r.path.toString();if("string"!=typeof r.repoInfo.host||0===r.repoInfo.host.length||!oS(r.repoInfo.namespace)&&"localhost"!==r.repoInfo.host.split(":")[0]||0!==n.length&&!function(i){return i&&(i=i.replace(/^\/*\.info(\/|$)/,"/")),LL(i)}(n))throw new Error((0,F.gK)(i,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class r${constructor(){this.eventLists_=[],this.recursionDepth_=0}}function aS(i,r){let n=null;for(let s=0;s<r.length;s++){const l=r[s],c=l.getPath();null!==n&&!Ax(c,n.path)&&(i.eventLists_.push(n),n=null),null===n&&(n={events:[],path:c}),n.events.push(l)}n&&i.eventLists_.push(n)}function gk(i,r,n){aS(i,n),UL(i,s=>Ax(s,r))}function ia(i,r,n){aS(i,n),UL(i,s=>ta(s,r)||ta(r,s))}function UL(i,r){i.recursionDepth_++;let n=!0;for(let s=0;s<i.eventLists_.length;s++){const l=i.eventLists_[s];l&&(r(l.path)?(i$(i.eventLists_[s]),i.eventLists_[s]=null):n=!1)}n&&(i.eventLists_=[]),i.recursionDepth_--}function i$(i){for(let r=0;r<i.events.length;r++){const n=i.events[r];if(null!==n){i.events[r]=null;const s=n.getEventRunner();_m&&hi("event: "+n.toString()),Bv(s)}}}const HL="repo_interrupt";class o${constructor(r,n,s,l){this.repoInfo_=r,this.forceRestClient_=n,this.authTokenProvider_=s,this.appCheckProvider_=l,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new r$,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=GN(),this.transactionQueueTree_=new ck,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function jL(i){const n=i.infoData_.getNode(new Xt(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+n}function RC(i){return function(i){return(i=i||{}).timestamp=i.timestamp||(new Date).getTime(),i}({timestamp:jL(i)})}function $L(i,r,n,s,l){i.dataUpdateCount++;const c=new Xt(r);n=i.interceptServerDataCallback_?i.interceptServerDataCallback_(r,n):n;let g=[];if(l)if(s){const w=(0,F.UI)(n,T=>Jn(T));g=function(i,r,n,s){const l=rk(i,s);if(l){const c=ik(l),g=c.path,_=c.queryId,w=Cs(g,r),T=Sn.fromObject(n);return sk(i,g,new qv(Gx(_),w,T))}return[]}(i.serverSyncTree_,c,w,l)}else{const w=Jn(n);g=function(i,r,n,s){const l=rk(i,s);if(null!=l){const c=ik(l),g=c.path,_=c.queryId,w=Cs(g,r);return sk(i,g,new wm(Gx(_),w,n))}return[]}(i.serverSyncTree_,c,w,l)}else if(s){const w=(0,F.UI)(n,T=>Jn(T));g=function(i,r,n){const s=Sn.fromObject(n);return Yv(i,new qv({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},r,s))}(i.serverSyncTree_,c,w)}else{const w=Jn(n);g=DC(i.serverSyncTree_,c,w)}let _=c;g.length>0&&(_=Kv(i,c)),ia(i.eventQueue_,_,g)}function GL(i,r){mk(i,"connected",r),!1===r&&function(i){Zv(i,"onDisconnectEvents");const r=RC(i),n=GN();Hx(i.onDisconnect_,Zt(),(l,c)=>{const g=OL(l,c,i.serverSyncTree_,r);Wv(n,l,g)});let s=[];Hx(n,Zt(),(l,c)=>{s=s.concat(DC(i.serverSyncTree_,l,c));const g=bk(i,l);Kv(i,g)}),i.onDisconnect_=GN(),ia(i.eventQueue_,Zt(),s)}(i)}function mk(i,r,n){const s=new Xt("/.info/"+r),l=Jn(n);i.infoData_.updateSnapshot(s,l);const c=DC(i.infoSyncTree_,s,l);ia(i.eventQueue_,s,c)}function lS(i){return i.nextWriteId_++}function _k(i,r,n,s,l){Zv(i,"set",{path:r.toString(),value:n,priority:s});const c=RC(i),g=Jn(n,s),_=tS(i.serverSyncTree_,r),w=lk(g,_,c),T=lS(i),S=tk(i.serverSyncTree_,r,w,T,!0);aS(i.eventQueue_,S),i.server_.put(r.toString(),g.val(!0),(x,V)=>{const z="ok"===x;z||ws("set at "+r+" failed: "+x);const ue=Ef(i.serverSyncTree_,T,!z);ia(i.eventQueue_,r,ue),Df(0,l,x,V)});const A=bk(i,r);Kv(i,A),ia(i.eventQueue_,A,[])}function h$(i,r,n){i.server_.onDisconnectCancel(r.toString(),(s,l)=>{"ok"===s&&Ux(i.onDisconnect_,r),Df(0,n,s,l)})}function WL(i,r,n,s){const l=Jn(n);i.server_.onDisconnectPut(r.toString(),l.val(!0),(c,g)=>{"ok"===c&&Wv(i.onDisconnect_,r,l),Df(0,s,c,g)})}function yk(i,r,n){let s;s=".info"===Ft(r._path)?nk(i.infoSyncTree_,r,n):nk(i.serverSyncTree_,r,n),gk(i.eventQueue_,r._path,s)}function qL(i){i.persistentConnection_&&i.persistentConnection_.interrupt(HL)}function Zv(i,...r){let n="";i.persistentConnection_&&(n=i.persistentConnection_.id+":"),hi(n,...r)}function Df(i,r,n,s){r&&Bv(()=>{if("ok"===n)r(null);else{const l=(n||"error").toUpperCase();let c=l;s&&(c+=": "+s);const g=new Error(c);g.code=l,r(g)}})}function vk(i,r,n){return tS(i.serverSyncTree_,r,n)||Dt.EMPTY_NODE}function uS(i,r=i.transactionQueueTree_){if(r||cS(i,r),Dm(r)){const n=YL(i,r);(0,F.hu)(n.length>0,"Sending zero length transaction queue"),n.every(l=>0===l.status)&&function(i,r,n){const s=n.map(T=>T.currentWriteId),l=vk(i,r,s);let c=l;const g=l.hash();for(let T=0;T<n.length;T++){const S=n[T];(0,F.hu)(0===S.status,"tryToSendTransactionQueue_: items in queue should all be run."),S.status=1,S.retryCount++;const A=Cs(r,S.path);c=c.updateChild(A,S.currentOutputSnapshotRaw)}const _=c.val(!0),w=r;i.server_.put(w.toString(),_,T=>{Zv(i,"transaction put response",{path:w.toString(),status:T});let S=[];if("ok"===T){const A=[];for(let x=0;x<n.length;x++)n[x].status=2,S=S.concat(Ef(i.serverSyncTree_,n[x].currentWriteId)),n[x].onComplete&&A.push(()=>n[x].onComplete(null,!0,n[x].currentOutputSnapshotResolved)),n[x].unwatcher();cS(i,iS(i.transactionQueueTree_,r)),uS(i,i.transactionQueueTree_),ia(i.eventQueue_,r,S);for(let x=0;x<A.length;x++)Bv(A[x])}else{if("datastale"===T)for(let A=0;A<n.length;A++)n[A].status=3===n[A].status?4:0;else{ws("transaction at "+w.toString()+" failed: "+T);for(let A=0;A<n.length;A++)n[A].status=4,n[A].abortReason=T}Kv(i,r)}},g)}(i,TC(r),n)}else PL(r)&&sS(r,n=>{uS(i,n)})}function Kv(i,r){const n=zL(i,r),s=TC(n);return function(i,r,n){if(0===r.length)return;const s=[];let l=[];const g=r.filter(_=>0===_.status).map(_=>_.currentWriteId);for(let _=0;_<r.length;_++){const w=r[_],T=Cs(n,w.path);let A,S=!1;if((0,F.hu)(null!==T,"rerunTransactionsUnderNode_: relativePath should not be null."),4===w.status)S=!0,A=w.abortReason,l=l.concat(Ef(i.serverSyncTree_,w.currentWriteId,!0));else if(0===w.status)if(w.retryCount>=25)S=!0,A="maxretry",l=l.concat(Ef(i.serverSyncTree_,w.currentWriteId,!0));else{const x=vk(i,w.path,g);w.currentInputSnapshot=x;const V=r[_].update(x.val());if(void 0!==V){SC("transaction failed: Data returned ",V,w.path);let z=Jn(V);"object"==typeof V&&null!=V&&(0,F.r3)(V,".priority")||(z=z.updatePriority(x.getPriority()));const Ae=w.currentWriteId,Qe=RC(i),Je=lk(z,x,Qe);w.currentOutputSnapshotRaw=z,w.currentOutputSnapshotResolved=Je,w.currentWriteId=lS(i),g.splice(g.indexOf(Ae),1),l=l.concat(tk(i.serverSyncTree_,w.path,Je,w.currentWriteId,w.applyLocally)),l=l.concat(Ef(i.serverSyncTree_,Ae,!0))}else S=!0,A="nodata",l=l.concat(Ef(i.serverSyncTree_,w.currentWriteId,!0))}ia(i.eventQueue_,n,l),l=[],S&&(r[_].status=2,setTimeout(r[_].unwatcher,Math.floor(0)),r[_].onComplete&&s.push("nodata"===A?()=>r[_].onComplete(null,!1,r[_].currentInputSnapshot):()=>r[_].onComplete(new Error(A),!1,null)))}cS(i,i.transactionQueueTree_);for(let _=0;_<s.length;_++)Bv(s[_]);uS(i,i.transactionQueueTree_)}(i,YL(i,n),s),s}function zL(i,r){let n,s=i.transactionQueueTree_;for(n=Ft(r);null!==n&&void 0===Dm(s);)s=iS(s,n),n=Ft(r=vn(r));return s}function YL(i,r){const n=[];return ZL(i,r,n),n.sort((s,l)=>s.order-l.order),n}function ZL(i,r,n){const s=Dm(r);if(s)for(let l=0;l<s.length;l++)n.push(s[l]);sS(r,l=>{ZL(i,l,n)})}function cS(i,r){const n=Dm(r);if(n){let s=0;for(let l=0;l<n.length;l++)2!==n[l].status&&(n[s]=n[l],s++);n.length=s,dk(r,n.length>0?n:void 0)}sS(r,s=>{cS(i,s)})}function bk(i,r){const n=TC(zL(i,r)),s=iS(i.transactionQueueTree_,r);return function(i,r,n){let s=i.parent;for(;null!==s;){if(r(s))return!0;s=s.parent}}(s,l=>{wk(i,l)}),wk(i,s),FL(s,l=>{wk(i,l)}),n}function wk(i,r){const n=Dm(r);if(n){const s=[];let l=[],c=-1;for(let g=0;g<n.length;g++)3===n[g].status||(1===n[g].status?((0,F.hu)(c===g-1,"All SENT items should be at beginning of queue."),c=g,n[g].status=3,n[g].abortReason="set"):((0,F.hu)(0===n[g].status,"Unexpected transaction status in abort"),n[g].unwatcher(),l=l.concat(Ef(i.serverSyncTree_,n[g].currentWriteId,!0)),n[g].onComplete&&s.push(n[g].onComplete.bind(null,new Error("set"),!1,null))));-1===c?dk(r,void 0):n.length=c+1,ia(i.eventQueue_,TC(r),l);for(let g=0;g<s.length;g++)Bv(s[g])}}const Ck=function(i,r){const n=C$(i),s=n.namespace;return"firebase.com"===n.domain&&vu(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!s||"undefined"===s)&&"localhost"!==n.domain&&vu("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&ws("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new wx(n.host,n.secure,s,r,"ws"===n.scheme||"wss"===n.scheme,"",s!==n.subdomain),path:new Xt(n.pathString)}},C$=function(i){let r="",n="",s="",l="",c="",g=!0,_="https",w=443;if("string"==typeof i){let T=i.indexOf("//");T>=0&&(_=i.substring(0,T-1),i=i.substring(T+2));let S=i.indexOf("/");-1===S&&(S=i.length);let A=i.indexOf("?");-1===A&&(A=i.length),r=i.substring(0,Math.min(S,A)),S<A&&(l=function(i){let r="";const n=i.split("/");for(let s=0;s<n.length;s++)if(n[s].length>0){let l=n[s];try{l=decodeURIComponent(l.replace(/\+/g," "))}catch(c){}r+="/"+l}return r}(i.substring(S,A)));const x=function(i){const r={};"?"===i.charAt(0)&&(i=i.substring(1));for(const n of i.split("&")){if(0===n.length)continue;const s=n.split("=");2===s.length?r[decodeURIComponent(s[0])]=decodeURIComponent(s[1]):ws(`Invalid query segment '${n}' in query '${i}'`)}return r}(i.substring(Math.min(i.length,A)));T=r.indexOf(":"),T>=0?(g="https"===_||"wss"===_,w=parseInt(r.substring(T+1),10)):T=r.length;const V=r.slice(0,T);if("localhost"===V.toLowerCase())n="localhost";else if(V.split(".").length<=2)n=V;else{const z=r.indexOf(".");s=r.substring(0,z).toLowerCase(),n=r.substring(z+1),c=s}"ns"in x&&(c=x.ns)}return{host:r,port:w,domain:n,subdomain:s,secure:g,scheme:_,pathString:l,namespace:c}};class KL{constructor(r,n,s,l){this.eventType=r,this.eventRegistration=n,this.snapshot=s,this.prevName=l}getPath(){const r=this.snapshot.ref;return"value"===this.eventType?r._path:r.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,F.Pz)(this.snapshot.exportVal())}}class QL{constructor(r,n,s){this.eventRegistration=r,this.error=n,this.path=s}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class JL{constructor(r,n){this.snapshotCallback=r,this.cancelCallback=n}onValue(r,n){this.snapshotCallback.call(null,r,n)}onCancel(r){return(0,F.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,r)}get hasCancelCallback(){return!!this.cancelCallback}matches(r){return this.snapshotCallback===r.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===r.snapshotCallback.userCallback&&this.snapshotCallback.context===r.snapshotCallback.context}}class XL{constructor(r,n){this._repo=r,this._path=n}cancel(){const r=new F.BH;return h$(this._repo,this._path,r.wrapCallback(()=>{})),r.promise}remove(){ra("OnDisconnect.remove",this._path);const r=new F.BH;return WL(this._repo,this._path,null,r.wrapCallback(()=>{})),r.promise}set(r){ra("OnDisconnect.set",this._path),Cu("OnDisconnect.set",r,this._path,!1);const n=new F.BH;return WL(this._repo,this._path,r,n.wrapCallback(()=>{})),n.promise}setWithPriority(r,n){ra("OnDisconnect.setWithPriority",this._path),Cu("OnDisconnect.setWithPriority",r,this._path,!1),pk("OnDisconnect.setWithPriority",n,!1);const s=new F.BH;return function(i,r,n,s,l){const c=Jn(n,s);i.server_.onDisconnectPut(r.toString(),c.val(!0),(g,_)=>{"ok"===g&&Wv(i.onDisconnect_,r,c),Df(0,l,g,_)})}(this._repo,this._path,r,n,s.wrapCallback(()=>{})),s.promise}update(r){ra("OnDisconnect.update",this._path),VL("OnDisconnect.update",r,this._path,!1);const n=new F.BH;return function(i,r,n,s){if((0,F.xb)(n))return hi("onDisconnect().update() called with empty data.  Don't do anything."),void Df(0,s,"ok",void 0);i.server_.onDisconnectMerge(r.toString(),n,(l,c)=>{"ok"===l&&fi(n,(g,_)=>{const w=Jn(_);Wv(i.onDisconnect_,Gn(r,g),w)}),Df(0,s,l,c)})}(this._repo,this._path,r,n.wrapCallback(()=>{})),n.promise}}class qs{constructor(r,n,s,l){this._repo=r,this._path=n,this._queryParams=s,this._orderByCalled=l}get key(){return Lt(this._path)?null:Sx(this._path)}get ref(){return new sa(this._repo,this._path)}get _queryIdentifier(){const r=iL(this._queryParams),n=yx(r);return"{}"===n?"default":n}get _queryObject(){return iL(this._queryParams)}isEqual(r){if(!((r=(0,F.m9)(r))instanceof qs))return!1;const n=this._repo===r._repo,s=Ax(this._path,r._path);return n&&s&&this._queryIdentifier===r._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function(i){let r="";for(let n=i.pieceNum_;n<i.pieces_.length;n++)""!==i.pieces_[n]&&(r+="/"+encodeURIComponent(String(i.pieces_[n])));return r||"/"}(this._path)}}function dS(i,r){if(!0===i._orderByCalled)throw new Error(r+": You can't combine multiple orderBy calls.")}function If(i){let r=null,n=null;if(i.hasStart()&&(r=i.getIndexStartValue()),i.hasEnd()&&(n=i.getIndexEndValue()),i.getIndex()===wu){const s="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",l="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(i.hasStart()){if(i.getIndexStartName()!==dd)throw new Error(s);if("string"!=typeof r)throw new Error(l)}if(i.hasEnd()){if(i.getIndexEndName()!==bu)throw new Error(s);if("string"!=typeof n)throw new Error(l)}}else if(i.getIndex()===Nn){if(null!=r&&!NC(r)||null!=n&&!NC(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,F.hu)(i.getIndex()instanceof Ox||i.getIndex()===Px,"unknown index type."),null!=r&&"object"==typeof r||null!=n&&"object"==typeof n)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function hS(i){if(i.hasStart()&&i.hasEnd()&&i.hasLimit()&&!i.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class sa extends qs{constructor(r,n){super(r,n,new HN,!1)}get parent(){const r=jF(this._path);return null===r?null:new sa(this._repo,r)}get root(){let r=this;for(;null!==r.parent;)r=r.parent;return r}}class Im{constructor(r,n,s){this._node=r,this.ref=n,this._index=s}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(r){const n=new Xt(r),s=Tm(this.ref,r);return new Im(this._node.getChild(n),s,Nn)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(r){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(s,l)=>r(new Im(l,Tm(this.ref,s),Nn)))}hasChild(r){const n=new Xt(r);return!this._node.getChild(n).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function e2(i,r){return(i=(0,F.m9)(i))._checkNotDeleted("ref"),void 0!==r?Tm(i._root,r):i._root}function t2(i,r){(i=(0,F.m9)(i))._checkNotDeleted("refFromURL");const n=Ck(r,i._repo.repoInfo_.nodeAdmin);BL("refFromURL",n);const s=n.repoInfo;return!i._repo.repoInfo_.isCustomHost()&&s.host!==i._repo.repoInfo_.host&&vu("refFromURL: Host name does not match the current database: (found "+s.host+" but expected "+i._repo.repoInfo_.host+")"),e2(i,n.path.toString())}function Tm(i,r){return null===Ft((i=(0,F.m9)(i))._path)?((n=r)&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),MC("child","path",n,!1)):MC("child","path",r,!1),new sa(i._repo,Gn(i._path,r));var n}function Ek(i,r){i=(0,F.m9)(i),ra("set",i._path),Cu("set",r,i._path,!1);const n=new F.BH;return _k(i._repo,i._path,r,null,n.wrapCallback(()=>{})),n.promise}function N$(i,r){VL("update",r,i._path,!1);const n=new F.BH;return function(i,r,n,s){Zv(i,"update",{path:r.toString(),value:n});let l=!0;const c=RC(i),g={};if(fi(n,(_,w)=>{l=!1,g[_]=OL(Gn(r,_),Jn(w),i.serverSyncTree_,c)}),l)hi("update() called with empty data.  Don't do anything."),Df(0,s,"ok",void 0);else{const _=lS(i),w=function(i,r,n,s){!function(i,r,n,s){(0,F.hu)(s>i.lastWriteId,"Stacking an older merge on top of newer ones"),i.allWrites.push({path:r,children:n,writeId:s,visible:!0}),i.visibleWrites=qx(i.visibleWrites,r,n),i.lastWriteId=s}(i.pendingWriteTree_,r,n,s);const l=Sn.fromObject(n);return Yv(i,new qv({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},r,l))}(i.serverSyncTree_,r,g,_);aS(i.eventQueue_,w),i.server_.merge(r.toString(),n,(T,S)=>{const A="ok"===T;A||ws("update at "+r+" failed: "+T);const x=Ef(i.serverSyncTree_,_,!A),V=x.length>0?Kv(i,r):r;ia(i.eventQueue_,V,x),Df(0,s,T,S)}),fi(n,T=>{const S=bk(i,Gn(r,T));Kv(i,S)}),ia(i.eventQueue_,r,[])}}(i._repo,i._path,r,n.wrapCallback(()=>{})),n.promise}function S$(i){return function(i,r){const n=function(i,r){const n=r._path;let s=null;i.syncPointTree_.foreachOnPath(n,(T,S)=>{const A=Cs(T,n);s=s||wf(S,A)});let l=i.syncPointTree_.get(n);l?s=s||wf(l,Zt()):(l=new EL,i.syncPointTree_=i.syncPointTree_.set(n,l));const c=null!=s,g=c?new vf(s,!0,!1):null;return function(i){return zN(i.viewCache_)}(DL(l,r,YN(i.pendingWriteTree_,r._path),c?g.getNode():Dt.EMPTY_NODE,c))}(i.serverSyncTree_,r);return null!=n?Promise.resolve(n):i.server_.get(r).then(s=>{const l=Jn(s).withIndex(r._queryParams.getIndex()),c=DC(i.serverSyncTree_,r._path,l);return gk(i.eventQueue_,r._path,c),Promise.resolve(l)},s=>(Zv(i,"get for query "+(0,F.Pz)(r)+" failed: "+s),Promise.reject(new Error(s))))}((i=(0,F.m9)(i))._repo,i).then(r=>new Im(r,new sa(i._repo,i._path),i._queryParams.getIndex()))}class fS{constructor(r){this.callbackContext=r}respondsTo(r){return"value"===r}createEvent(r,n){const s=n._queryParams.getIndex();return new KL("value",this,new Im(r.snapshotNode,new sa(n._repo,n._path),s))}getEventRunner(r){return"cancel"===r.getEventType()?()=>this.callbackContext.onCancel(r.error):()=>this.callbackContext.onValue(r.snapshot,null)}createCancelEvent(r,n){return this.callbackContext.hasCancelCallback?new QL(this,r,n):null}matches(r){return r instanceof fS&&(!r.callbackContext||!this.callbackContext||r.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class pS{constructor(r,n){this.eventType=r,this.callbackContext=n}respondsTo(r){let n="children_added"===r?"child_added":r;return n="children_removed"===n?"child_removed":n,this.eventType===n}createCancelEvent(r,n){return this.callbackContext.hasCancelCallback?new QL(this,r,n):null}createEvent(r,n){(0,F.hu)(null!=r.childName,"Child events should have a childName.");const s=Tm(new sa(n._repo,n._path),r.childName),l=n._queryParams.getIndex();return new KL(r.type,this,new Im(r.snapshotNode,s,l),r.prevName)}getEventRunner(r){return"cancel"===r.getEventType()?()=>this.callbackContext.onCancel(r.error):()=>this.callbackContext.onValue(r.snapshot,r.prevName)}matches(r){return r instanceof pS&&this.eventType===r.eventType&&(!this.callbackContext||!r.callbackContext||this.callbackContext.matches(r.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function xC(i,r,n,s,l){let c;if("object"==typeof s&&(c=void 0,l=s),"function"==typeof s&&(c=s),l&&l.onlyOnce){const w=n,T=(S,A)=>{yk(i._repo,i,_),w(S,A)};T.userCallback=n.userCallback,T.context=n.context,n=T}const g=new JL(n,c||void 0),_="value"===r?new fS(g):new pS(r,g);return function(i,r,n){let s;s=".info"===Ft(r._path)?AL(i.infoSyncTree_,r,n):AL(i.serverSyncTree_,r,n),gk(i.eventQueue_,r._path,s)}(i._repo,i,_),()=>yk(i._repo,i,_)}function Dk(i,r,n,s){return xC(i,"value",r,n,s)}function n2(i,r,n,s){return xC(i,"child_added",r,n,s)}function r2(i,r,n,s){return xC(i,"child_changed",r,n,s)}function i2(i,r,n,s){return xC(i,"child_moved",r,n,s)}function s2(i,r,n,s){return xC(i,"child_removed",r,n,s)}function o2(i,r,n){let s=null;const l=n?new JL(n):null;"value"===r?s=new fS(l):r&&(s=new pS(r,l)),yk(i._repo,i,s)}class sl{}class a2 extends sl{constructor(r,n){super(),this._value=r,this._key=n}_apply(r){Cu("endAt",this._value,r._path,!0);const n=Bx(r._queryParams,this._value,this._key);if(hS(n),If(n),r._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new qs(r._repo,r._path,n,r._orderByCalled)}}class M$ extends sl{constructor(r,n){super(),this._value=r,this._key=n}_apply(r){Cu("endBefore",this._value,r._path,!1);const n=function(i,r,n){let s,l;return i.index_===wu?("string"==typeof r&&(r=tL(r)),l=Bx(i,r,n)):(s=null==n?dd:tL(n),l=Bx(i,r,s)),l.endBeforeSet_=!0,l}(r._queryParams,this._value,this._key);if(hS(n),If(n),r._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new qs(r._repo,r._path,n,r._orderByCalled)}}class l2 extends sl{constructor(r,n){super(),this._value=r,this._key=n}_apply(r){Cu("startAt",this._value,r._path,!0);const n=Vx(r._queryParams,this._value,this._key);if(hS(n),If(n),r._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new qs(r._repo,r._path,n,r._orderByCalled)}}class k$ extends sl{constructor(r,n){super(),this._value=r,this._key=n}_apply(r){Cu("startAfter",this._value,r._path,!1);const n=function(i,r,n){let s;if(i.index_===wu)"string"==typeof r&&(r=eL(r)),s=Vx(i,r,n);else{let l;l=null==n?bu:eL(n),s=Vx(i,r,l)}return s.startAfterSet_=!0,s}(r._queryParams,this._value,this._key);if(hS(n),If(n),r._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new qs(r._repo,r._path,n,r._orderByCalled)}}class P$ extends sl{constructor(r){super(),this._limit=r}_apply(r){if(r._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new qs(r._repo,r._path,function(i,r){const n=i.copy();return n.limitSet_=!0,n.limit_=r,n.viewFrom_="l",n}(r._queryParams,this._limit),r._orderByCalled)}}class L$ extends sl{constructor(r){super(),this._limit=r}_apply(r){if(r._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new qs(r._repo,r._path,function(i,r){const n=i.copy();return n.limitSet_=!0,n.limit_=r,n.viewFrom_="r",n}(r._queryParams,this._limit),r._orderByCalled)}}class B$ extends sl{constructor(r){super(),this._path=r}_apply(r){dS(r,"orderByChild");const n=new Xt(this._path);if(Lt(n))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const s=new Ox(n),l=jN(r._queryParams,s);return If(l),new qs(r._repo,r._path,l,!0)}}class H$ extends sl{_apply(r){dS(r,"orderByKey");const n=jN(r._queryParams,wu);return If(n),new qs(r._repo,r._path,n,!0)}}class $$ extends sl{_apply(r){dS(r,"orderByPriority");const n=jN(r._queryParams,Nn);return If(n),new qs(r._repo,r._path,n,!0)}}class W$ extends sl{_apply(r){dS(r,"orderByValue");const n=jN(r._queryParams,Px);return If(n),new qs(r._repo,r._path,n,!0)}}class z$ extends sl{constructor(r,n){super(),this._value=r,this._key=n}_apply(r){if(Cu("equalTo",this._value,r._path,!1),r._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(r._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new a2(this._value,this._key)._apply(new l2(this._value,this._key)._apply(r))}}function ol(i,...r){let n=(0,F.m9)(i);for(const s of r)n=s._apply(n);return n}(function(i){(0,F.hu)(!JN,"__referenceConstructor has already been defined"),JN=i})(sa),function(i){(0,F.hu)(!eS,"__referenceConstructor has already been defined"),eS=i}(sa);const Ik={};function c2(i,r,n,s,l){let c=s||i.options.databaseURL;void 0===c&&(i.options.projectId||vu("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),hi("Using default host for project ",i.options.projectId),c=`${i.options.projectId}-default-rtdb.firebaseio.com`);let w,T,g=Ck(c,l),_=g.repoInfo;"undefined"!=typeof process&&(T=process.env.FIREBASE_DATABASE_EMULATOR_HOST),T?(w=!0,c=`http://${T}?ns=${_.namespace}`,g=Ck(c,l),_=g.repoInfo):w=!g.repoInfo.secure;const S=l&&w?new cC(cC.OWNER):new B3(i.name,i.options,r);BL("Invalid Firebase Database URL",g),Lt(g.path)||vu("Database URL must point to the root of a Firebase Database (not including a child path).");const A=function(i,r,n,s){let l=Ik[r.name];l||(l={},Ik[r.name]=l);let c=l[i.toURLString()];return c&&vu("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),c=new o$(i,false,n,s),l[i.toURLString()]=c,c}(_,i,S,new V3(i.name,n));return new e6(A,i)}class e6{constructor(r,n){this._repoInternal=r,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function(i,r,n){if(i.stats_=Dx(i.repoInfo_),i.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)i.server_=new $N(i.repoInfo_,(s,l,c,g)=>{$L(i,s,l,c,g)},i.authTokenProvider_,i.appCheckProvider_),setTimeout(()=>GL(i,!0),0);else{if(null!=n){if("object"!=typeof n)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,F.Pz)(n)}catch(s){throw new Error("Invalid authOverride provided: "+s)}}i.persistentConnection_=new bm(i.repoInfo_,r,(s,l,c,g)=>{$L(i,s,l,c,g)},s=>{GL(i,s)},s=>{!function(i,r){fi(r,(n,s)=>{mk(i,n,s)})}(i,s)},i.authTokenProvider_,i.appCheckProvider_,n),i.server_=i.persistentConnection_}i.authTokenProvider_.addTokenChangeListener(s=>{i.server_.refreshAuthToken(s)}),i.appCheckProvider_.addTokenChangeListener(s=>{i.server_.refreshAppCheckToken(s.token)}),i.statsReporter_=function(i,r){const n=i.toString();return Ex[n]||(Ex[n]=r()),Ex[n]}(i.repoInfo_,()=>new WH(i.stats_,i.server_)),i.infoData_=new UH,i.infoSyncTree_=new SL({startListening:(s,l,c,g)=>{let _=[];const w=i.infoData_.getNode(s._path);return w.isEmpty()||(_=DC(i.infoSyncTree_,s._path,w),setTimeout(()=>{g("ok")},0)),_},stopListening:()=>{}}),mk(i,"connected",!1),i.serverSyncTree_=new SL({startListening:(s,l,c,g)=>(i.server_.listen(s,c,l,(_,w)=>{const T=g(_,w);ia(i.eventQueue_,s._path,T)}),[]),stopListening:(s,l)=>{i.server_.unlisten(s,l)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new sa(this._repo,Zt())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function(i,r){const n=Ik[r];(!n||n[i.key]!==i)&&vu(`Database ${r}(${i.repoInfo_}) has already been deleted.`),qL(i),delete n[i.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(r){null===this._rootInternal&&vu("Cannot call "+r+" on a deleted database.")}}function i6(i,r){hF(i,r)}class u6{constructor(r,n){this.committed=r,this.snapshot=n}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}bm.prototype.simpleListen=function(i,r){this.sendRequest("q",{p:i},r)},bm.prototype.echo=function(i,r){this.sendRequest("echo",{d:i},r)},aF(oc.SDK_VERSION),(0,oc._registerComponent)(new xa.wA("database",(r,{instanceIdentifier:n})=>c2(r.getProvider("app").getImmediate(),r.getProvider("auth-internal"),r.getProvider("app-check-internal"),n),"PUBLIC").setMultipleInstances(!0)),(0,oc.registerVersion)("@firebase/database","0.12.1",void 0);const f6=new ka.Yd("@firebase/database-compat"),d2=function(i){f6.warn("FIREBASE WARNING: "+i)};class m6{constructor(r){this._delegate=r}cancel(r){(0,F.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,F.Wj)("OnDisconnect.cancel","onComplete",r,!0);const n=this._delegate.cancel();return r&&n.then(()=>r(null),s=>r(s)),n}remove(r){(0,F.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,F.Wj)("OnDisconnect.remove","onComplete",r,!0);const n=this._delegate.remove();return r&&n.then(()=>r(null),s=>r(s)),n}set(r,n){(0,F.Dv)("OnDisconnect.set",1,2,arguments.length),(0,F.Wj)("OnDisconnect.set","onComplete",n,!0);const s=this._delegate.set(r);return n&&s.then(()=>n(null),l=>n(l)),s}setWithPriority(r,n,s){(0,F.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,F.Wj)("OnDisconnect.setWithPriority","onComplete",s,!0);const l=this._delegate.setWithPriority(r,n);return s&&l.then(()=>s(null),c=>s(c)),l}update(r,n){if((0,F.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(r)){const l={};for(let c=0;c<r.length;++c)l[""+c]=r[c];r=l,d2("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,F.Wj)("OnDisconnect.update","onComplete",n,!0);const s=this._delegate.update(r);return n&&s.then(()=>n(null),l=>n(l)),s}}class _6{constructor(r,n){this.committed=r,this.snapshot=n}toJSON(){return(0,F.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class Tf{constructor(r,n){this._database=r,this._delegate=n}val(){return(0,F.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,F.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,F.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,F.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(r){return(0,F.Dv)("DataSnapshot.child",0,1,arguments.length),r=String(r),MC("DataSnapshot.child","path",r,!1),new Tf(this._database,this._delegate.child(r))}hasChild(r){return(0,F.Dv)("DataSnapshot.hasChild",1,1,arguments.length),MC("DataSnapshot.hasChild","path",r,!1),this._delegate.hasChild(r)}getPriority(){return(0,F.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(r){return(0,F.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,F.Wj)("DataSnapshot.forEach","action",r,!1),this._delegate.forEach(n=>r(new Tf(this._database,n)))}hasChildren(){return(0,F.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,F.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,F.Dv)("DataSnapshot.ref",0,0,arguments.length),new yo(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class Mi{constructor(r,n){this.database=r,this._delegate=n}on(r,n,s,l){var c;(0,F.Dv)("Query.on",2,4,arguments.length),(0,F.Wj)("Query.on","callback",n,!1);const g=Mi.getCancelAndContextArgs_("Query.on",s,l),_=(T,S)=>{n.call(g.context,new Tf(this.database,T),S)};_.userCallback=n,_.context=g.context;const w=null===(c=g.cancel)||void 0===c?void 0:c.bind(g.context);switch(r){case"value":return Dk(this._delegate,_,w),n;case"child_added":return n2(this._delegate,_,w),n;case"child_removed":return s2(this._delegate,_,w),n;case"child_changed":return r2(this._delegate,_,w),n;case"child_moved":return i2(this._delegate,_,w),n;default:throw new Error((0,F.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(r,n,s){if((0,F.Dv)("Query.off",0,3,arguments.length),function(i,r,n){if(void 0!==r)switch(r){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,F.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,r),(0,F.Wj)("Query.off","callback",n,!0),(0,F.lb)("Query.off","context",s,!0),n){const l=()=>{};l.userCallback=n,l.context=s,o2(this._delegate,r,l)}else o2(this._delegate,r)}get(){return S$(this._delegate).then(r=>new Tf(this.database,r))}once(r,n,s,l){(0,F.Dv)("Query.once",1,4,arguments.length),(0,F.Wj)("Query.once","callback",n,!0);const c=Mi.getCancelAndContextArgs_("Query.once",s,l),g=new F.BH,_=(T,S)=>{const A=new Tf(this.database,T);n&&n.call(c.context,A,S),g.resolve(A)};_.userCallback=n,_.context=c.context;const w=T=>{c.cancel&&c.cancel.call(c.context,T),g.reject(T)};switch(r){case"value":Dk(this._delegate,_,w,{onlyOnce:!0});break;case"child_added":n2(this._delegate,_,w,{onlyOnce:!0});break;case"child_removed":s2(this._delegate,_,w,{onlyOnce:!0});break;case"child_changed":r2(this._delegate,_,w,{onlyOnce:!0});break;case"child_moved":i2(this._delegate,_,w,{onlyOnce:!0});break;default:throw new Error((0,F.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return g.promise}limitToFirst(r){return(0,F.Dv)("Query.limitToFirst",1,1,arguments.length),new Mi(this.database,ol(this._delegate,function(i){if("number"!=typeof i||Math.floor(i)!==i||i<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new P$(i)}(r)))}limitToLast(r){return(0,F.Dv)("Query.limitToLast",1,1,arguments.length),new Mi(this.database,ol(this._delegate,function(i){if("number"!=typeof i||Math.floor(i)!==i||i<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new L$(i)}(r)))}orderByChild(r){return(0,F.Dv)("Query.orderByChild",1,1,arguments.length),new Mi(this.database,ol(this._delegate,function(i){if("$key"===i)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===i)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===i)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return MC("orderByChild","path",i,!1),new B$(i)}(r)))}orderByKey(){return(0,F.Dv)("Query.orderByKey",0,0,arguments.length),new Mi(this.database,ol(this._delegate,new H$))}orderByPriority(){return(0,F.Dv)("Query.orderByPriority",0,0,arguments.length),new Mi(this.database,ol(this._delegate,new $$))}orderByValue(){return(0,F.Dv)("Query.orderByValue",0,0,arguments.length),new Mi(this.database,ol(this._delegate,new W$))}startAt(r=null,n){return(0,F.Dv)("Query.startAt",0,2,arguments.length),new Mi(this.database,ol(this._delegate,function(i=null,r){return AC("startAt","key",r,!0),new l2(i,r)}(r,n)))}startAfter(r=null,n){return(0,F.Dv)("Query.startAfter",0,2,arguments.length),new Mi(this.database,ol(this._delegate,function(i,r){return AC("startAfter","key",r,!0),new k$(i,r)}(r,n)))}endAt(r=null,n){return(0,F.Dv)("Query.endAt",0,2,arguments.length),new Mi(this.database,ol(this._delegate,function(i,r){return AC("endAt","key",r,!0),new a2(i,r)}(r,n)))}endBefore(r=null,n){return(0,F.Dv)("Query.endBefore",0,2,arguments.length),new Mi(this.database,ol(this._delegate,function(i,r){return AC("endBefore","key",r,!0),new M$(i,r)}(r,n)))}equalTo(r,n){return(0,F.Dv)("Query.equalTo",1,2,arguments.length),new Mi(this.database,ol(this._delegate,function(i,r){return AC("equalTo","key",r,!0),new z$(i,r)}(r,n)))}toString(){return(0,F.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,F.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(r){if((0,F.Dv)("Query.isEqual",1,1,arguments.length),!(r instanceof Mi))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(r._delegate)}static getCancelAndContextArgs_(r,n,s){const l={cancel:void 0,context:void 0};if(n&&s)l.cancel=n,(0,F.Wj)(r,"cancel",l.cancel,!0),l.context=s,(0,F.lb)(r,"context",l.context,!0);else if(n)if("object"==typeof n&&null!==n)l.context=n;else{if("function"!=typeof n)throw new Error((0,F.gK)(r,"cancelOrContext")+" must either be a cancel callback or a context object.");l.cancel=n}return l}get ref(){return new yo(this.database,new sa(this._delegate._repo,this._delegate._path))}}class yo extends Mi{constructor(r,n){super(r,new qs(n._repo,n._path,new HN,!1)),this.database=r,this._delegate=n}getKey(){return(0,F.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(r){return(0,F.Dv)("Reference.child",1,1,arguments.length),"number"==typeof r&&(r=String(r)),new yo(this.database,Tm(this._delegate,r))}getParent(){(0,F.Dv)("Reference.parent",0,0,arguments.length);const r=this._delegate.parent;return r?new yo(this.database,r):null}getRoot(){return(0,F.Dv)("Reference.root",0,0,arguments.length),new yo(this.database,this._delegate.root)}set(r,n){(0,F.Dv)("Reference.set",1,2,arguments.length),(0,F.Wj)("Reference.set","onComplete",n,!0);const s=Ek(this._delegate,r);return n&&s.then(()=>n(null),l=>n(l)),s}update(r,n){if((0,F.Dv)("Reference.update",1,2,arguments.length),Array.isArray(r)){const l={};for(let c=0;c<r.length;++c)l[""+c]=r[c];r=l,d2("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}ra("Reference.update",this._delegate._path),(0,F.Wj)("Reference.update","onComplete",n,!0);const s=N$(this._delegate,r);return n&&s.then(()=>n(null),l=>n(l)),s}setWithPriority(r,n,s){(0,F.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,F.Wj)("Reference.setWithPriority","onComplete",s,!0);const l=function(i,r,n){if(ra("setWithPriority",i._path),Cu("setWithPriority",r,i._path,!1),pk("setWithPriority",n,!1),".length"===i.key||".keys"===i.key)throw"setWithPriority failed: "+i.key+" is a read-only object.";const s=new F.BH;return _k(i._repo,i._path,r,n,s.wrapCallback(()=>{})),s.promise}(this._delegate,r,n);return s&&l.then(()=>s(null),c=>s(c)),l}remove(r){(0,F.Dv)("Reference.remove",0,1,arguments.length),(0,F.Wj)("Reference.remove","onComplete",r,!0);const n=function(i){return ra("remove",i._path),Ek(i,null)}(this._delegate);return r&&n.then(()=>r(null),s=>r(s)),n}transaction(r,n,s){(0,F.Dv)("Reference.transaction",1,3,arguments.length),(0,F.Wj)("Reference.transaction","transactionUpdate",r,!1),(0,F.Wj)("Reference.transaction","onComplete",n,!0),function(i,r,n,s){if(void 0!==n&&"boolean"!=typeof n)throw new Error((0,F.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,s);const l=function(i,r,n){var s;if(i=(0,F.m9)(i),ra("Reference.transaction",i._path),".length"===i.key||".keys"===i.key)throw"Reference.transaction failed: "+i.key+" is a read-only object.";const l=null===(s=null==n?void 0:n.applyLocally)||void 0===s||s,c=new F.BH,_=Dk(i,()=>{});return function(i,r,n,s,l,c){Zv(i,"transaction on "+r);const g={path:r,update:n,onComplete:s,status:null,order:uF(),applyLocally:c,retryCount:0,unwatcher:l,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},_=vk(i,r,void 0);g.currentInputSnapshot=_;const w=g.update(_.val());if(void 0===w)g.unwatcher(),g.currentOutputSnapshotRaw=null,g.currentOutputSnapshotResolved=null,g.onComplete&&g.onComplete(null,!1,g.currentInputSnapshot);else{SC("transaction failed: Data returned ",w,g.path),g.status=0;const T=iS(i.transactionQueueTree_,r),S=Dm(T)||[];let A;S.push(g),dk(T,S),"object"==typeof w&&null!==w&&(0,F.r3)(w,".priority")?(A=(0,F.DV)(w,".priority"),(0,F.hu)(NC(A),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):A=(tS(i.serverSyncTree_,r)||Dt.EMPTY_NODE).getPriority().val();const x=RC(i),V=Jn(w,A),z=lk(V,_,x);g.currentOutputSnapshotRaw=V,g.currentOutputSnapshotResolved=z,g.currentWriteId=lS(i);const ue=tk(i.serverSyncTree_,r,z,g.currentWriteId,g.applyLocally);ia(i.eventQueue_,r,ue),uS(i,i.transactionQueueTree_)}}(i._repo,i._path,r,(w,T,S)=>{let A=null;w?c.reject(w):(A=new Im(S,new sa(i._repo,i._path),Nn),c.resolve(new u6(T,A)))},_,l),c.promise}(this._delegate,r,{applyLocally:s}).then(c=>new _6(c.committed,new Tf(this.database,c.snapshot)));return n&&l.then(c=>n(null,c.committed,c.snapshot),c=>n(c,!1,null)),l}setPriority(r,n){(0,F.Dv)("Reference.setPriority",1,2,arguments.length),(0,F.Wj)("Reference.setPriority","onComplete",n,!0);const s=function(i,r){i=(0,F.m9)(i),ra("setPriority",i._path),pk("setPriority",r,!1);const n=new F.BH;return _k(i._repo,Gn(i._path,".priority"),r,null,n.wrapCallback(()=>{})),n.promise}(this._delegate,r);return n&&s.then(()=>n(null),l=>n(l)),s}push(r,n){(0,F.Dv)("Reference.push",0,2,arguments.length),(0,F.Wj)("Reference.push","onComplete",n,!0);const s=function(i,r){i=(0,F.m9)(i),ra("push",i._path),Cu("push",r,i._path,!0);const n=jL(i._repo),s=xH(n),l=Tm(i,s),c=Tm(i,s);let g;return g=null!=r?Ek(c,r).then(()=>c):Promise.resolve(c),l.then=g.then.bind(g),l.catch=g.then.bind(g,void 0),l}(this._delegate,r),l=s.then(g=>new yo(this.database,g));n&&l.then(()=>n(null),g=>n(g));const c=new yo(this.database,s);return c.then=l.then.bind(l),c.catch=l.catch.bind(l,void 0),c}onDisconnect(){return ra("Reference.onDisconnect",this._delegate._path),new m6(new XL(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class kC{constructor(r,n){this._delegate=r,this.app=n,this.INTERNAL={delete:()=>this._delegate._delete()}}useEmulator(r,n,s={}){!function(i,r,n,s={}){(i=(0,F.m9)(i))._checkNotDeleted("useEmulator"),i._instanceStarted&&vu("Cannot call useEmulator() after instance has already been initialized.");const l=i._repoInternal;let c;if(l.repoInfo_.nodeAdmin)s.mockUserToken&&vu('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),c=new cC(cC.OWNER);else if(s.mockUserToken){const g="string"==typeof s.mockUserToken?s.mockUserToken:(0,F.Sg)(s.mockUserToken,i.app.options.projectId);c=new cC(g)}!function(i,r,n,s){i.repoInfo_=new wx(`${r}:${n}`,!1,i.repoInfo_.namespace,i.repoInfo_.webSocketOnly,i.repoInfo_.nodeAdmin,i.repoInfo_.persistenceKey,i.repoInfo_.includeNamespaceInQueryParams),s&&(i.authTokenProvider_=s)}(l,r,n,c)}(this._delegate,r,n,s)}ref(r){if((0,F.Dv)("database.ref",0,1,arguments.length),r instanceof yo){const n=t2(this._delegate,r.toString());return new yo(this,n)}{const n=e2(this._delegate,r);return new yo(this,n)}}refFromURL(r){(0,F.Dv)("database.refFromURL",1,1,arguments.length);const s=t2(this._delegate,r);return new yo(this,s)}goOffline(){return(0,F.Dv)("database.goOffline",0,0,arguments.length),function(i){(i=(0,F.m9)(i))._checkNotDeleted("goOffline"),qL(i._repo)}(this._delegate)}goOnline(){return(0,F.Dv)("database.goOnline",0,0,arguments.length),function(i){(i=(0,F.m9)(i))._checkNotDeleted("goOnline"),function(i){i.persistentConnection_&&i.persistentConnection_.resume(HL)}(i._repo)}(this._delegate)}}kC.ServerValue={TIMESTAMP:{".sv":"timestamp"},increment:i=>function(i){return{".sv":{increment:i}}}(i)};var v6=Object.freeze({__proto__:null,initStandalone:function({app:i,url:r,version:n,customAuthImpl:s,namespace:l,nodeAdmin:c=!1}){aF(n);const g=new xa.zt("auth-internal",new xa.H0("database-standalone"));return g.setComponent(new xa.wA("auth-internal",()=>s,"PRIVATE")),{instance:new kC(c2(i,g,void 0,r,c),i),namespace:l}}});const b6=kC.ServerValue;function h2(i){return null==i}function f2(i){return"function"==typeof i.set}function p2(i,r){return f2(r)?r:i.ref(r)}function g2(i,r){if(function(i){return"string"==typeof i}(i))return r.stringCase();if(f2(i))return r.firebaseCase();if(function(i){return"function"==typeof i.exportVal}(i))return r.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof i)}function OC(i,r,n="on",s=P_.z){return new An.y(l=>{let c=null;return c=i[n](r,(g,_)=>{s.schedule(()=>{l.next({snapshot:g,prevKey:_})}),"once"===n&&s.schedule(()=>l.complete())},g=>{s.schedule(()=>l.error(g))}),"on"===n?{unsubscribe(){null!=c&&i.off(r,c)}}:{unsubscribe(){}}}).pipe((0,Xe.U)(l=>{const{snapshot:c,prevKey:g}=l;let _=null;return c.exists()&&(_=c.key),{type:r,payload:c,prevKey:g,key:_}}),(0,AR.B)())}function m2(i,r){const n=i.length;for(let s=0;s<n;s++)if(i[s].payload.key===r)return s;return-1}function T6(i,r){const{payload:n,prevKey:s,key:l}=r,c=m2(i,l),g=function(i,r){if(h2(r))return 0;{const n=m2(i,r);return-1===n?i.length:n+1}}(i,s);switch(r.type){case"value":if(r.payload&&r.payload.exists()){let _=null;r.payload.forEach(w=>{const T={payload:w,type:"value",prevKey:_,key:w.key};return _=w.key,i=[...i,T],!1})}return i;case"child_added":if(c>-1){const _=i[c-1];(_&&_.key||null)!==s&&(i=i.filter(w=>w.payload.key!==n.key)).splice(g,0,r)}else{if(null==s)return[r,...i];(i=i.slice()).splice(g,0,r)}return i;case"child_removed":return i.filter(_=>_.payload.key!==n.key);case"child_changed":return i.map(_=>_.payload.key===l?r:_);case"child_moved":if(c>-1){const _=i.splice(c,1)[0];return(i=i.slice()).splice(g,0,_),i}return i;default:return i}}function _2(i){return(h2(i)||0===i.length)&&(i=["child_added","child_removed","child_changed","child_moved"]),i}function y2(i,r,n){return function(i,r,n){return OC(i,"value","once",n).pipe(zn(s=>{const l=[(0,We.of)(s)];return r.forEach(c=>l.push(OC(i,c,"on",n))),(0,em.T)(...l).pipe(Cl(T6,[]))}),Vl())}(i,r=_2(r),n)}function v2(i,r,n){const s=(r=_2(r)).map(l=>OC(i,l,"on",n));return(0,em.T)(...s)}function b2(i,r){return function(s,l){return g2(s,{stringCase:()=>i.child(s)[r](l),firebaseCase:()=>s[r](l),snapshotCase:()=>s.ref[r](l)})}}function M6(i){return function(n){return n?g2(n,{stringCase:()=>i.child(n).remove(),firebaseCase:()=>n.remove(),snapshotCase:()=>n.ref.remove()}):i.remove()}}function w2(i,r){return function(){return OC(i,"value","on",r)}}!function(i){i.INTERNAL.registerComponent(new xa.wA("database-compat",(r,{instanceIdentifier:n})=>{const s=r.getProvider("app-compat").getImmediate(),l=r.getProvider("database").getImmediate({identifier:n});return new kC(l,s)},"PUBLIC").setServiceProps({Reference:yo,Query:Mi,Database:kC,DataSnapshot:Tf,enableLogging:i6,INTERNAL:v6,ServerValue:b6}).setMultipleInstances(!0)),i.registerVersion("@firebase/database-compat","0.1.1")}(Go.Z);const k6=new d.OlP("angularfire2.realtimeDatabaseURL"),O6=new d.OlP("angularfire2.database.use-emulator");let P6=(()=>{class i{constructor(n,s,l,c,g,_,w,T,S,A,x,V,z,ue){this.schedulers=_;const Ae=w,Qe=(0,Ps.on)(n,g,s);T&&N1(Qe,g,S,x,V,z,A,ue),this.database=(0,pn.cc)(`${Qe.name}.database.${l}`,"AngularFireDatabase",Qe.name,()=>{const Je=g.runOutsideAngular(()=>Qe.database(l||void 0));return Ae&&Je.useEmulator(...Ae),Je},[Ae])}list(n,s){const l=this.schedulers.ngZone.runOutsideAngular(()=>p2(this.database,n));let c=l;return s&&(c=s(l)),function(i,r){const n=r.schedulers.outsideAngular,s=r.schedulers.ngZone.run(()=>i.ref);return{query:i,update:b2(s,"update"),set:b2(s,"set"),push:l=>s.push(l),remove:M6(s),snapshotChanges:l=>y2(i,l,n).pipe(pn.iC),stateChanges:l=>v2(i,l,n).pipe(pn.iC),auditTrail:l=>function(i,r,n){return function(i,r,n){return function(i,r){return OC(i,"value","on",r).pipe((0,Xe.U)(n=>{let s;return n.payload.forEach(l=>(s=l.key,!1)),{data:n,lastKeyToLoad:s}}))}(i,n).pipe(_v(r),(0,Xe.U)(([l,c])=>{const g=l.lastKeyToLoad,_=c.map(w=>w.key);return{actions:c,lastKeyToLoad:g,loadedKeys:_}}),function(i){return r=>r.lift(new D3(i))}(l=>-1===l.loadedKeys.indexOf(l.lastKeyToLoad)),(0,Xe.U)(l=>l.actions))}(i,v2(i,r).pipe(Cl((l,c)=>[...l,c],[])),n)}(i,l,n).pipe(pn.iC),valueChanges:(l,c)=>y2(i,l,n).pipe((0,Xe.U)(_=>_.map(w=>c&&c.idField?Object.assign(Object.assign({},w.payload.val()),{[c.idField]:w.key}):w.payload.val())),pn.iC)}}(c,this)}object(n){return function(i,r){return{query:i,snapshotChanges:()=>w2(i,r.schedulers.outsideAngular)().pipe(pn.iC),update:n=>i.ref.update(n),set:n=>i.ref.set(n),remove:()=>i.ref.remove(),valueChanges:()=>w2(i,r.schedulers.outsideAngular)().pipe(pn.iC,(0,Xe.U)(s=>s.payload.exists()?s.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>p2(this.database,n)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return i.\u0275fac=function(n){return new(n||i)(d.LFG(Ps.Dh),d.LFG(Ps.xv,8),d.LFG(k6,8),d.LFG(d.Lbi),d.LFG(d.R0b),d.LFG(pn.HU),d.LFG(O6,8),d.LFG(xT,8),d.LFG(fv,8),d.LFG(nm,8),d.LFG(I1,8),d.LFG(vs,8),d.LFG(T1,8),d.LFG(RT,8))},i.\u0275prov=d.Yz7({token:i,factory:i.\u0275fac,providedIn:"any"}),i})(),F6=(()=>{class i{constructor(){D1.Z.registerVersion("angularfire",pn.q4.full,"rtdb-compat")}}return i.\u0275fac=function(n){return new(n||i)},i.\u0275mod=d.oAB({type:i}),i.\u0275inj=d.cJS({providers:[P6]}),i})();const L6={apiKey:"AIzaSyDfalwYGOaiC7Sy7DwCQgfZQLWfl6HIsnc",authDomain:"bingesuggestions-b88b2.firebaseapp.com",projectId:"bingesuggestions-b88b2",storageBucket:"bingesuggestions-b88b2.appspot.com",messagingSenderId:"347818223309",appId:"1:347818223309:web:b97bd25908464267136b84",measurementId:"G-J8ELGK3SYH"};let V6=(()=>{class i{}return i.\u0275fac=function(n){return new(n||i)},i.\u0275mod=d.oAB({type:i,bootstrap:[C3]}),i.\u0275inj=d.cJS({providers:[],imports:[[c0,PS,g3,Ps.hO.initializeApp(L6),F6]]}),i})();(0,d.G48)(),Lu().bootstrapModule(V6).catch(i=>console.error(i))},4762:(He,Ee,B)=>{"use strict";function ye(ie,le){var me={};for(var oe in ie)Object.prototype.hasOwnProperty.call(ie,oe)&&le.indexOf(oe)<0&&(me[oe]=ie[oe]);if(null!=ie&&"function"==typeof Object.getOwnPropertySymbols){var ce=0;for(oe=Object.getOwnPropertySymbols(ie);ce<oe.length;ce++)le.indexOf(oe[ce])<0&&Object.prototype.propertyIsEnumerable.call(ie,oe[ce])&&(me[oe[ce]]=ie[oe[ce]])}return me}function Q(ie,le,me,oe){return new(me||(me=Promise))(function(te,ke){function Ge(ze){try{tt(oe.next(ze))}catch(ot){ke(ot)}}function bt(ze){try{tt(oe.throw(ze))}catch(ot){ke(ot)}}function tt(ze){ze.done?te(ze.value):function(te){return te instanceof me?te:new me(function(ke){ke(te)})}(ze.value).then(Ge,bt)}tt((oe=oe.apply(ie,le||[])).next())})}function j(ie,le){var oe,ce,te,ke,me={label:0,sent:function(){if(1&te[0])throw te[1];return te[1]},trys:[],ops:[]};return ke={next:Ge(0),throw:Ge(1),return:Ge(2)},"function"==typeof Symbol&&(ke[Symbol.iterator]=function(){return this}),ke;function Ge(tt){return function(ze){return function(tt){if(oe)throw new TypeError("Generator is already executing.");for(;me;)try{if(oe=1,ce&&(te=2&tt[0]?ce.return:tt[0]?ce.throw||((te=ce.return)&&te.call(ce),0):ce.next)&&!(te=te.call(ce,tt[1])).done)return te;switch(ce=0,te&&(tt=[2&tt[0],te.value]),tt[0]){case 0:case 1:te=tt;break;case 4:return me.label++,{value:tt[1],done:!1};case 5:me.label++,ce=tt[1],tt=[0];continue;case 7:tt=me.ops.pop(),me.trys.pop();continue;default:if(!(te=(te=me.trys).length>0&&te[te.length-1])&&(6===tt[0]||2===tt[0])){me=0;continue}if(3===tt[0]&&(!te||tt[1]>te[0]&&tt[1]<te[3])){me.label=tt[1];break}if(6===tt[0]&&me.label<te[1]){me.label=te[1],te=tt;break}if(te&&me.label<te[2]){me.label=te[2],me.ops.push(tt);break}te[2]&&me.ops.pop(),me.trys.pop();continue}tt=le.call(ie,me)}catch(ze){tt=[6,ze],ce=0}finally{oe=te=0}if(5&tt[0])throw tt[1];return{value:tt[0]?tt[1]:void 0,done:!0}}([tt,ze])}}}function $(ie){var le="function"==typeof Symbol&&Symbol.iterator,me=le&&ie[le],oe=0;if(me)return me.call(ie);if(ie&&"number"==typeof ie.length)return{next:function(){return ie&&oe>=ie.length&&(ie=void 0),{value:ie&&ie[oe++],done:!ie}}};throw new TypeError(le?"Object is not iterable.":"Symbol.iterator is not defined.")}function se(ie,le){var me="function"==typeof Symbol&&ie[Symbol.iterator];if(!me)return ie;var ce,ke,oe=me.call(ie),te=[];try{for(;(void 0===le||le-- >0)&&!(ce=oe.next()).done;)te.push(ce.value)}catch(Ge){ke={error:Ge}}finally{try{ce&&!ce.done&&(me=oe.return)&&me.call(oe)}finally{if(ke)throw ke.error}}return te}function fe(ie,le,me){if(me||2===arguments.length)for(var te,oe=0,ce=le.length;oe<ce;oe++)(te||!(oe in le))&&(te||(te=Array.prototype.slice.call(le,0,oe)),te[oe]=le[oe]);return ie.concat(te||Array.prototype.slice.call(le))}B.d(Ee,{_T:()=>ye,mG:()=>Q,Jh:()=>j,XA:()=>$,CR:()=>se,ev:()=>fe})},8239:(He,Ee,B)=>{"use strict";function d(G,ye,he,J,re,Q,j){try{var L=G[Q](j),U=L.value}catch($){return void he($)}L.done?ye(U):Promise.resolve(U).then(J,re)}function X(G){return function(){var ye=this,he=arguments;return new Promise(function(J,re){var Q=G.apply(ye,he);function j(U){d(Q,J,re,j,L,"next",U)}function L(U){d(Q,J,re,j,L,"throw",U)}j(void 0)})}}B.d(Ee,{Z:()=>X})}},He=>{He(He.s=4278)}]);